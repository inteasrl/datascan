const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/request-DiX-H442.js","assets/style-DzR-yqmJ.js","assets/style-BesusB6A.css","assets/IdentityManager-B5041ckN.js","assets/substitute-C8qwmO60.js","assets/QueueProcessor-m1jc1SO6.js","assets/statsWorker-Caxj82gj.js","assets/utils-BMX9lCh-.js","assets/quantizationUtils-YZ0StVWA.js","assets/utils-j7Ide-GS.js","assets/utils-UrKqVtXH.js","assets/ClassBreaksDefinition-DGdVcKfR.js","assets/geometryEngineWorker-ChztcFFk.js","assets/geometryEngineJSON-jmZ-ASIo.js","assets/geometryEngineBase-C-7zg03I.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/json-Wa8cmqdu.js","assets/operatorsWorker-DxEI0mdL.js","assets/CSVSourceWorker-ChDGMfJ-.js","assets/date-DCujAECq.js","assets/OptimizedFeature-DQx6IZHB.js","assets/memoryEstimations-CUuX2P6P.js","assets/executeQueryForSnapping-C4Yhq1E5.js","assets/queryUtils-TR-MI8jn.js","assets/QueryEngine-CIg1DvNc.js","assets/featureConversionUtils-ILjn6yXF.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/WhereClauseCache-F0OxMFBX.js","assets/WhereClause-nykQo7NF.js","assets/timeSupport-C23Fh6th.js","assets/QueryEngineCapabilities-CsRUnGk7.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-C3zu8OBx.js","assets/FeatureStore-D5YdVQpw.js","assets/BoundsStore-XiwZCGlD.js","assets/PooledRBush-DB8nSoXi.js","assets/optimizedFeatureQueryEngineAdapter-wdoapRTa.js","assets/number-Du7VZFkt.js","assets/clientSideDefaults-sjc3_XH0.js","assets/EdgeProcessingWorker-Lpx9oPse.js","assets/workerHelper-CMUnsK-J.js","assets/InterleavedLayout-qWO94Yu8.js","assets/BufferView-BMnY5aJ6.js","assets/types-BKo2foNY.js","assets/edgeProcessing-ChlIBzu2.js","assets/deduplicate-Dj4LGHEt.js","assets/Indices-CSmROz2e.js","assets/VertexAttribute-BfkzOMLV.js","assets/glUtil-DI7Y_MSA.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-Dw37qdMs.js","assets/ElevationSamplerWorker-hLBHQUhG.js","assets/MeshLocalVertexSpace-DSlVTzB1.js","assets/vertexSpaceConversion-BoBlBijt.js","assets/mat3f64-B5o_lm6j.js","assets/mat4f64-q_b6UJoq.js","assets/spatialReferenceEllipsoidUtils-DJlBH1rH.js","assets/computeTranslationToOriginAndRotation-6ok85lbp.js","assets/projectPointToVector-BQz4NmUr.js","assets/meshVertexSpaceUtils-CRs00tfH.js","assets/vec3-ISFdTO8E.js","assets/vec4-DSvuTbfA.js","assets/FeatureServiceSnappingSourceWorker-DlVq4rjx.js","assets/symbologySnappingCandidates-CoMZE2zP.js","assets/pbfQueryUtils-CxR68Rtc.js","assets/pbf-DL8lj4zp.js","assets/query-Cuv_AYDj.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/GeoJSONSourceWorker-BVqCMjrB.js","assets/geojson-dIw7mNvh.js","assets/sourceUtils-C9DsHjPp.js","assets/LercWorker-5Us1UV0a.js","assets/MemorySourceWorker-njUNdFMG.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-Bqz5Nb_Q.js","assets/dehydratedFeatures-DvHxSXPI.js","assets/FeaturePipelineWorker-BUITC6J2.js","assets/AttributeStore-klfBoMnV.js","assets/Utils-H8lEOoHu.js","assets/UpdateTracking2D-D3oB3BZM.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-CXqrIyj-.js","assets/rasterizingUtils-DHHrcszB.js","assets/floatRGBA-Cn7E-6FA.js","assets/Rect-CUzevAry.js","assets/constants-BFLErLYb.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-CoBip-0U.js","assets/TechniqueType-CFPo0AVB.js","assets/PieChartMeshWriter-DontgH_E.js","assets/libtess-DIkS7TyA.js","assets/earcut-D9gy186-.js","assets/operatorGeodeticDensify-B0YdSlwH.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-CRAXyvma.js","assets/ogcFeatureUtils-CzcOwQBF.js","assets/bundle-D2hyHz7d.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-aOHrOxLL.js","assets/PointCloudWorker-D1caGpo9.js","assets/quat-DTnegrdg.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-BGHcIcYY.js","assets/I3SBinaryReader-Mc-SgiV9.js","assets/orientedBoundingBox-C_q8odj3.js","assets/plane-V8Th51o7.js","assets/vectorStacks-D3HcO_An.js","assets/RasterWorker-Ci8Ws69W.js","assets/GeographicTransformation-jfCetAGp.js","assets/dataUtils-ChFc5VDu.js","assets/RasterSymbolizer-BbX1Sn9Q.js","assets/colorUtils-BKcY9wOZ.js","assets/rasterFunctionHelper-CI-epPlM.js","assets/clipUtils-kVVbx6D5.js","assets/rasterProjectionHelper-BQ0whh72.js","assets/PolynomialTransform-PwyZI92A.js","assets/SceneLayerSnappingSourceWorker-BbWIlCm9.js","assets/lineSegment-r_Yv83We.js","assets/sphere-DEfiL4_f.js","assets/Octree-BZe6sfPV.js","assets/SceneLayerWorker-DDluvQ7M.js","assets/projectVectorToVector-BTsVQp2Q.js","assets/I3SUtil-vRz9CH2G.js","assets/edgeUtils-DY_-yeBU.js","assets/NormalAttribute.glsl-C16ShXop.js","assets/glsl-Cj7KC756.js","assets/ShaderOutput-Bdd80V3g.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-CBj6oxpy.js","assets/wfsUtils-BmfVQvkn.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-ChW3mOwO.js","assets/constants-B-jzO-JJ.js","assets/config-DHajyIwB.js","assets/StyleDefinition-CPC5PP0S.js","assets/SourceLayerData-B_vCMFeR.js","assets/StyleRepository-BMM9K0I2.js","assets/Lyr3DWorker-D7tvENNW.js","assets/Feature3DPipelineWorker-DGf2kUCG.js","assets/dehydratedFeatureUtils-C95vgZ2u.js","assets/hydratedFeatures-BfEn9J-I.js","assets/OutputColorHighlightOID.glsl-YinLbMOS.js","assets/videoUtils-DDUgYhVP.js","assets/requestImageUtils-IyLkq2vP.js","assets/basicInterfaces-CZwQPxTp.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-YsJrVFw-.js","assets/renderState-BlDflNGG.js","assets/boundedPlane-ekBKjDyd.js","assets/HUDMaterial.glsl-DRQtUdFq.js","assets/ShaderBuilder-BpP77lEG.js","assets/DefaultMaterial-Bv5foHsI.js","assets/HUDMaterial-BMX7JWSL.js","assets/primitiveObjectSymbolUtils-DxFeIUwW.js","assets/IntersectorType-gQim6TH1.js","assets/TextureCompressionWorker-Ds5fN2U8.js","assets/hydrated-u_tr0pNR.js","assets/Popup-k4iAyDg0.js","assets/unitFormatUtils-Ct5FZGb_.js","assets/quantityUtils-MDqqmnOg.js","assets/AttachmentInfo-Do3h-358.js","assets/featureUtils-Bc6wT02j.js","assets/utils-BTPNZGL_.js","assets/cimSymbolUtils-CrSMm4WI.js","assets/executeQueryJSON-IBAqAOKR.js","assets/shared-s0aCq2U_.js","assets/ReactiveSet-DIjA9jy0.js","assets/symbolUtils-CFzkdeXl.js","assets/layerViewUtils-DzT8P6Xc.js","assets/ElevationLayer-D0eR0rkJ.js","assets/ArcGISCachedService-DDjkD4jm.js","assets/TileInfoTilemapCache-CGcE_1D4.js","assets/TilemapCache-Bwa5AziP.js","assets/WorkerHandle-3EfmEqHP.js","assets/resourceUtils-iXW0dBIN.js","assets/layersCreator-Dp_lCfjw.js","assets/loadUtils-CgPFBXfZ.js","assets/fetchService-C0WKbmfy.js","assets/associatedFeatureServiceUtils-CwcSrMD_.js","assets/lazyLayerLoader-8xbERUA7.js","assets/portalLayers-YoLJBtjf.js","assets/ElevationQuery-zXY3jF5H.js","assets/arcgisLayers-BZz_6bO9.js","assets/arcadeUtils-DfjwDH6e.js","assets/arcade-Ck81axC7.js","assets/aiServices-Bv5-9-Av.js","assets/ImmutableArray-BPVd6ESQ.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-COpS7bW3.js","assets/batchExec-B0lpp5mU.js","assets/webStyleSymbolUtils-BDTOHxqj.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/geometryServiceUtils-7miMCd8K.js","assets/webglDeps-4A6eiEnb.js","assets/ProgramTemplate-CZX9McJE.js","assets/FramebufferObject-K8-uCZfN.js","assets/NestedMap-BwbkO4RU.js","assets/mapViewDeps-DiZ3bZgh.js","assets/FeatureCommandQueue-B7ALApm9.js","assets/GraphShaderModule-CfXbxh4H.js","assets/utils-DBkHXhrk.js","assets/WGLContainer-DMGrBwGT.js","assets/Container-BDE4-tOB.js","assets/SDFHelper-Bb_VGcd5.js","assets/OverrideHelper-Cgh6yVa7.js","assets/GridShader-B0Whxc5V.js","assets/testSVGPremultipliedAlpha-DlmiP3ua.js","assets/SymbolFader-D_hbHgdg.js","assets/RenderingContext-CQ5976Ff.js","assets/CIMResourceManager-BqeI_6FC.js","assets/utils-Dfd7RKS9.js","assets/utils-ehcGqGxa.js","assets/projectOperator-CG2oZW4v.js","assets/GraphicsView2D-CHI34hFS.js","assets/GraphicContainer-CM6ufbPh.js","assets/AGraphicContainer-Cz8q0WX-.js","assets/TechniqueInstance-CckqsGUl.js","assets/TileContainer-B5TTeyi0.js","assets/gridUtils-fTeL-Gc8.js","assets/geodesicUtils-CKxs_n7H.js","assets/TileLayerView2D-CEpx3DXd.js","assets/imageUtils-BKT-nZnD.js","assets/BitmapTechnique-RpYPMVE0.js","assets/LayerView-Dlr62RvC.js","assets/HighlightGraphicContainer-DdR_P6Hh.js","assets/RefreshableLayerView-B2QOScC8.js","assets/MapServiceLayerViewHelper-DKrrYS8A.js","assets/floorFilterUtils-DKzVzLpH.js","assets/drapedUtils-C-KKziBL.js","assets/sublayerUtils-Bo4MhuVV.js","assets/popupUtils-BJbpV1Da.js","assets/FeatureLayerView2D-B8uvnVkQ.js","assets/timeSupport-Dd2kMVxQ.js","assets/AttributeBinsFeatureSet-CcTyERjM.js","assets/AttributeBinsQuery-C3aqlYD_.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-CMX2htv5.js","assets/BitmapContainer-C1Soz21Q.js","assets/ExportStrategy-DHt4IcY5.js","assets/CatalogLayerView2D-D58q7_gL.js","assets/CatalogDynamicGroupLayerView2D-CaEHKir0.js","assets/CatalogFootprintLayerView2D-CdTXfq2m.js","assets/GeoRSSLayerView2D-CxjferMY.js","assets/GraphicsLayerView2D-DlmsSCSZ.js","assets/GroupLayerView2D-BrkWBoCz.js","assets/ImageryLayerView2D-DeB_eakJ.js","assets/RasterVFDisplayObject-DTqlQplf.js","assets/ImageryTileLayerView2D-BIahckXZ.js","assets/rasterFieldUtils-BOtaAv1t.js","assets/rasterUtils-D-JkzTvv.js","assets/RawBlockCache-KP0yPytE.js","assets/KMLLayerView2D-XOnTOzvV.js","assets/kmlUtils-Z5nb7ron.js","assets/KnowledgeGraphLayerView2D-CtFOA5Zh.js","assets/MapImageLayerView2D-QhExKq2e.js","assets/ExportImageParameters-BNRIZMN9.js","assets/MapNotesLayerView2D-T5wiCACe.js","assets/MediaLayerView2D-CO0IWfCA.js","assets/mediaLayerUtils-CMDk-8ne.js","assets/OverlayContainer-Drf1XCjm.js","assets/OGCFeatureLayerView2D-Bx6l2y-R.js","assets/RouteLayerView2D-BuiMRtyN.js","assets/Stop-Iwr9AkrJ.js","assets/networkEnums-DBl8CNjM.js","assets/StreamLayerView2D-BZw4S1rs.js","assets/SubtypeGroupLayerView2D-gPPL3vTW.js","assets/VectorTileLayerView2D-DA-KeOic.js","assets/VideoLayerView2D-DNy9m_6R.js","assets/videoUtils-BzQ25rXC.js","assets/WMSLayerView2D-t4yKZn2s.js","assets/ExportWMSImageParameters-Cx0YEnUd.js","assets/WMTSLayerView2D-BYbaSR95.js","assets/gif-BL02RuXt.js","assets/apng-DoQ_KTeQ.js","assets/webdocSaveUtils-Cid266ut.js","assets/originUtils-CKIgUHdw.js","assets/basemapUtils-jOo1nxrk.js","assets/resourceUtils-B890n0ka.js","assets/saveUtils-DaJfYFTQ.js","assets/deleteForwardEdits-CE5t3-R4.js","assets/DeleteForwardEditsParameters-dtHLK5Pz.js","assets/editingSupport-Dlxp9X7n.js","assets/layersLoader-BBKgiBEc.js","assets/featureLayerUtils-B0HSRK-6.js","assets/utils-o8MwNixt.js","assets/FeatureLayerSource-CXP6uc7J.js","assets/External-D8GUYeIU.js","assets/applyEditsUtils-DrTdUY1J.js","assets/MeshTransform-CmFIZRvj.js","assets/axisAngleDegrees-BWD8dmNb.js","assets/QueryTask-BzPJwTTM.js","assets/executeForIds-CbEwa7x-.js","assets/TopFeaturesQuery-CEGG7Nbu.js","assets/queryNamedTraceConfigurations-BL8GOG8g.js","assets/QueryNamedTraceConfigurationsParameters-DbJ-omrr.js","assets/validateNetworkTopology-DyUxVKcS.js","assets/ValidateNetworkTopologyParameters-Cd50xkLN.js","assets/CircuitManager-C27Z4qFI.js","assets/UnitIdentifierManager-KJTgsdYV.js","assets/queryAssociations-BFp30p8b.js","assets/Association-PWAmvtVm.js","assets/QueryAssociationsParameters-B7TxpzJY.js","assets/synthesizeAssociationGeometries-CFc-BxIV.js","assets/SynthesizeAssociationGeometriesParameters-WGcX4gAq.js","assets/trace-C7rZouKT.js","assets/TraceParameters-DEwzXCSt.js"])))=>i.map(i=>d[i]);
var Pte=Object.getPrototypeOf;var Dte=Reflect.get;var uN=t=>{throw TypeError(t)};var CM=(t,e,i)=>e.has(t)||uN("Cannot "+i);var Ht=(t,e,i)=>(CM(t,e,"read from private field"),i?i.call(t):e.get(t)),Ho=(t,e,i)=>e.has(t)?uN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Bo=(t,e,i,r)=>(CM(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),_b=(t,e,i)=>(CM(t,e,"access private method"),i);var cN=(t,e,i)=>Dte(Pte(t),i,e);import"./style-DzR-yqmJ.js";const TM=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const s=t[r];if(typeof s=="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(typeof s=="object")for(const n in s)s[n]&&e.push(n)}const i=e.join(" ");return e.length=0,i};class rw{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const Lte=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Nte=(t,e,i)=>{const r=Fte(e).subscribe;return r(s=>{s.some(o=>Lte(t,o.target))&&i()})},MM={},Fte=t=>{const e=t.join(","),i=MM[e];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const n={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(s.disconnect(),MM[e]=void 0)})};return MM[e]=n,n},jte=(t,e)=>{let i=t;for(;i;){const r=i.closest?.(e);if(r)return r;const s=i.getRootNode?.();if(s===globalThis.document)return null;i=s.host}return null},zte=(t,e,i)=>jte(t,`[${e}]`)?.getAttribute(e)??i,Ti=(t,e,...i)=>{try{return t?.call(e,...i)}catch(r){console.error(r,t)}},Ok=async(t,e,...i)=>{try{return await t?.call(e,...i)}catch(r){console.error(r,t)}},Vte="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),Ute=new Set(Vte),IS="en",Hte={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},Bte=async(t,e,i="")=>{const r=`${e}/${i}`,s=`${r}${t}.json`;return kM[s]??(kM[s]=MB(t,r)),await kM[s]},kM={},MB=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===IS?{}:await MB(IS,e)},kB=t=>{const e=zte(t,"lang",globalThis.navigator?.language||IS);return{lang:e,t9nLocale:RB(e)}},RB=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let s=r;return i&&(s=`${r}-${i.toUpperCase()}`),s=Hte[s]??s,Ute.has(s)?s:i?RB(r):IS},Gte=(t,e,i,r)=>{let s;const n=()=>Wte(t,e(),r).then(o=>{(s?.lang!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&i(o),s=o}).catch(console.error);return queueMicrotask(n),Nte(t,["lang"],n)},Wte=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:s}=kB(t),n=`${e}/${i}/t9n`,a=i===null?{}:await Bte(s,n,"messages.");return{lang:r,t9nLocale:s,t9nStrings:a}},qte=t=>t.replace(Yte,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),Yte=/[A-Z]+(?![a-z])|[A-Z]/gu,Jte=(t,e)=>{const i=e/Zte;let r=0;const s=setInterval(()=>{r+=i,r>=e&&(clearInterval(s),t())},i);return s},Zte=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sx=globalThis,_P=sx.ShadowRoot&&(sx.ShadyCSS===void 0||sx.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,xP=Symbol(),hN=new WeakMap;let IB=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==xP)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(_P&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=hN.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&hN.set(i,e))}return e}toString(){return this.cssText}};const Xte=t=>new IB(typeof t=="string"?t:t+"",void 0,xP),Hw=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,s,n)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[n+1],t[0]);return new IB(i,t,xP)},Kte=(t,e)=>{if(_P)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),s=sx.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,t.appendChild(r)}},dN=_P?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return Xte(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Qte,defineProperty:eie,getOwnPropertyDescriptor:tie,getOwnPropertyNames:iie,getOwnPropertySymbols:rie,getPrototypeOf:sie}=Object,jC=globalThis,pN=jC.trustedTypes,nie=pN?pN.emptyScript:"",oie=jC.reactiveElementPolyfillSupport,d0=(t,e)=>t,Pk={toAttribute(t,e){switch(e){case Boolean:t=t?nie:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},SP=(t,e)=>!Qte(t,e),fN={attribute:!0,type:String,converter:Pk,reflect:!1,useDefault:!1,hasChanged:SP};Symbol.metadata??=Symbol("metadata"),jC.litPropertyMetadata??=new WeakMap;let sm=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=fN){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,i);s!==void 0&&eie(this.prototype,e,s)}}static getPropertyDescriptor(e,i,r){const{get:s,set:n}=tie(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:s,set(o){const a=s?.call(this);n?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??fN}static _$Ei(){if(this.hasOwnProperty(d0("elementProperties")))return;const e=sie(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(d0("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d0("properties"))){const i=this.properties,r=[...iie(i),...rie(i)];for(const s of r)this.createProperty(s,i[s])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)i.unshift(dN(s))}else e!==void 0&&i.push(dN(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Kte(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const n=(r.converter?.toAttribute!==void 0?r.converter:Pk).toAttribute(i,r.type);this._$Em=e,n==null?this.removeAttribute(s):this.setAttribute(s,n),this._$Em=null}}_$AK(e,i){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const n=r.getPropertyOptions(s),o=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:Pk;this._$Em=s,this[s]=o.fromAttribute(i,n.type)??this._$Ej?.get(s)??null,this._$Em=null}}requestUpdate(e,i,r){if(e!==void 0){const s=this.constructor,n=this[e];if(r??=s.getPropertyOptions(e),!((r.hasChanged??SP)(n,i)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:s,wrapped:n},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??i??this[e]),n!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,n]of this._$Ep)this[s]=n;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,n]of r){const{wrapped:o}=n,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,n,a)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(i)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach(i=>i.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(i=>this._$ET(i,this[i])),this._$EM()}updated(e){}firstUpdated(e){}};sm.elementStyles=[],sm.shadowRootOptions={mode:"open"},sm[d0("elementProperties")]=new Map,sm[d0("finalized")]=new Map,oie?.({ReactiveElement:sm}),(jC.reactiveElementVersions??=[]).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const EP=globalThis,$S=EP.trustedTypes,mN=$S?$S.createPolicy("lit-html",{createHTML:t=>t}):void 0,$B="$lit$",th=`lit$${Math.random().toFixed(9).slice(2)}$`,AB="?"+th,aie=`<${AB}>`,Bp=document,sw=()=>Bp.createComment(""),nw=t=>t===null||typeof t!="object"&&typeof t!="function",CP=Array.isArray,lie=t=>CP(t)||typeof t?.[Symbol.iterator]=="function",RM=`[ 	
\f\r]`,xb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,gN=/-->/g,yN=/>/g,hd=RegExp(`>|${RM}(?:([^\\s"'>=/]+)(${RM}*=${RM}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),bN=/'/g,vN=/"/g,OB=/^(?:script|style|textarea|title)$/i,PB=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Yn=PB(1),Dk=PB(2),$h=Symbol.for("lit-noChange"),Et=Symbol.for("lit-nothing"),wN=new WeakMap,gp=Bp.createTreeWalker(Bp,129);function DB(t,e){if(!CP(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return mN!==void 0?mN.createHTML(e):e}const uie=(t,e)=>{const i=t.length-1,r=[];let s,n=e===2?"<svg>":e===3?"<math>":"",o=xb;for(let a=0;a<i;a++){const l=t[a];let u,h,p=-1,m=0;for(;m<l.length&&(o.lastIndex=m,h=o.exec(l),h!==null);)m=o.lastIndex,o===xb?h[1]==="!--"?o=gN:h[1]!==void 0?o=yN:h[2]!==void 0?(OB.test(h[2])&&(s=RegExp("</"+h[2],"g")),o=hd):h[3]!==void 0&&(o=hd):o===hd?h[0]===">"?(o=s??xb,p=-1):h[1]===void 0?p=-2:(p=o.lastIndex-h[2].length,u=h[1],o=h[3]===void 0?hd:h[3]==='"'?vN:bN):o===vN||o===bN?o=hd:o===gN||o===yN?o=xb:(o=hd,s=void 0);const y=o===hd&&t[a+1].startsWith("/>")?" ":"";n+=o===xb?l+aie:p>=0?(r.push(u),l.slice(0,p)+$B+l.slice(p)+th+y):l+th+(p===-2?a:y)}return[DB(t,n+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let Lk=class LB{constructor({strings:e,_$litType$:i},r){let s;this.parts=[];let n=0,o=0;const a=e.length-1,l=this.parts,[u,h]=uie(e,i);if(this.el=LB.createElement(u,r),gp.currentNode=this.el.content,i===2||i===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(s=gp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const p of s.getAttributeNames())if(p.endsWith($B)){const m=h[o++],y=s.getAttribute(p).split(th),v=/([.?@])?(.*)/.exec(m);l.push({type:1,index:n,name:v[2],strings:y,ctor:v[1]==="."?hie:v[1]==="?"?die:v[1]==="@"?pie:zC}),s.removeAttribute(p)}else p.startsWith(th)&&(l.push({type:6,index:n}),s.removeAttribute(p));if(OB.test(s.tagName)){const p=s.textContent.split(th),m=p.length-1;if(m>0){s.textContent=$S?$S.emptyScript:"";for(let y=0;y<m;y++)s.append(p[y],sw()),gp.nextNode(),l.push({type:2,index:++n});s.append(p[m],sw())}}}else if(s.nodeType===8)if(s.data===AB)l.push({type:2,index:n});else{let p=-1;for(;(p=s.data.indexOf(th,p+1))!==-1;)l.push({type:7,index:n}),p+=th.length-1}n++}}static createElement(e,i){const r=Bp.createElement("template");return r.innerHTML=e,r}};function cy(t,e,i=t,r){if(e===$h)return e;let s=r!==void 0?i._$Co?.[r]:i._$Cl;const n=nw(e)?void 0:e._$litDirective$;return s?.constructor!==n&&(s?._$AO?.(!1),n===void 0?s=void 0:(s=new n(t),s._$AT(t,i,r)),r!==void 0?(i._$Co??=[])[r]=s:i._$Cl=s),s!==void 0&&(e=cy(t,s._$AS(t,e.values),s,r)),e}let cie=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,s=(e?.creationScope??Bp).importNode(i,!0);gp.currentNode=s;let n=gp.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let u;l.type===2?u=new TP(n,n.nextSibling,this,e):l.type===1?u=new l.ctor(n,l.name,l.strings,this,e):l.type===6&&(u=new fie(n,this,e)),this._$AV.push(u),l=r[++a]}o!==l?.index&&(n=gp.nextNode(),o++)}return gp.currentNode=Bp,s}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},TP=class NB{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,r,s){this.type=2,this._$AH=Et,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=cy(this,e,i),nw(e)?e===Et||e==null||e===""?(this._$AH!==Et&&this._$AR(),this._$AH=Et):e!==this._$AH&&e!==$h&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):lie(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Et&&nw(this._$AH)?this._$AA.nextSibling.data=e:this.T(Bp.createTextNode(e)),this._$AH=e}$(e){const{values:i,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Lk.createElement(DB(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(i);else{const n=new cie(s,this),o=n.u(this.options);n.p(i),this.T(o),this._$AH=n}}_$AC(e){let i=wN.get(e.strings);return i===void 0&&wN.set(e.strings,i=new Lk(e)),i}k(e){CP(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const n of e)s===i.length?i.push(r=new NB(this.O(sw()),this.O(sw()),this,this.options)):r=i[s],r._$AI(n),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e&&e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},zC=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,s,n){this.type=1,this._$AH=Et,this._$AN=void 0,this.element=e,this.name=i,this._$AM=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Et}_$AI(e,i=this,r,s){const n=this.strings;let o=!1;if(n===void 0)e=cy(this,e,i,0),o=!nw(e)||e!==this._$AH&&e!==$h,o&&(this._$AH=e);else{const a=e;let l,u;for(e=n[0],l=0;l<n.length-1;l++)u=cy(this,a[r+l],i,l),u===$h&&(u=this._$AH[l]),o||=!nw(u)||u!==this._$AH[l],u===Et?e=Et:e!==Et&&(e+=(u??"")+n[l+1]),this._$AH[l]=u}o&&!s&&this.j(e)}j(e){e===Et?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},hie=class extends zC{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Et?void 0:e}},die=class extends zC{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Et)}},pie=class extends zC{constructor(e,i,r,s,n){super(e,i,r,s,n),this.type=5}_$AI(e,i=this){if((e=cy(this,e,i,0)??Et)===$h)return;const r=this._$AH,s=e===Et&&r!==Et||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==Et&&(r===Et||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},fie=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){cy(this,e)}};const mie=EP.litHtmlPolyfillSupport;mie?.(Lk,TP),(EP.litHtmlVersions??=[]).push("3.3.0");const gie=(t,e,i)=>{const r=i?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const n=i?.renderBefore??null;r._$litPart$=s=new TP(e.insertBefore(sw(),n),n,void 0,i??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const MP=globalThis;let Tp=class extends sm{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=gie(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return $h}};Tp._$litElement$=!0,Tp.finalized=!0,MP.litElementHydrateSupport?.({LitElement:Tp});const yie=MP.litElementPolyfillSupport;yie?.({LitElement:Tp});(MP.litElementVersions??=[]).push("4.2.0");const kP=Symbol.for("controller"),bie=t=>typeof t=="object"&&t!==null&&(kP in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),vie=t=>typeof t?.then=="function";let sv;const Xm=t=>{sv!==t&&(sv=t,queueMicrotask(()=>sv===t?sv=void 0:0))},Ly=t=>sv;let Td=[];const FB=t=>{if(t===void 0){Td=[];return}const e=Td.indexOf(t);Td=e===-1?[...Td,t]:Td.slice(0,e+1),queueMicrotask(()=>Td=[])},jB=()=>Td;let Km;const wie=t=>{Km!==t&&(Km=t,queueMicrotask(()=>Km===t?Km=void 0:0))},_ie=()=>{const t=Km;return Km=void 0,t},xie=async(t,e)=>{const i=RP(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(s=>e(s,r))}return i.exports},Sie=async t=>{const e=RP(t);return await e.ready,e},RP=t=>{const i=Ly().manager.X(t);if(i!==void 0)return i;if(bie(t))return t;const r=_ie();if(r!==void 0)return r};let Nk=!1;const Eie=t=>{Nk=!0;try{return t()}finally{Nk=!1}},Cie=(t,e,i)=>{const r=Object.keys(t),s=r.length;Qm===void 0&&queueMicrotask(IP),Qm??=new Map;let n=Qm.get(t);return n===void 0&&(n={callbacks:[],keyCount:s},Qm.set(t,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=u=>Ti(e,null,u),l=o[s];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let Qm;const IP=()=>{Qm?.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Qm=void 0},zB=(t,e,i)=>{const r=t.manager;return r.V!==Et&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((s,n)=>Ti(e,void 0,i===n?s:void 0)),i},$P=(t=[Ly(),...jB()],e,i)=>{const r=Array.isArray(t)?t:[t];let s=r.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&e(o)};r.forEach(o=>Cie(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){zB(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},AP=(t="",e={},i=Ly())=>{const r={emit:s=>{t===""&&IP();const n=new CustomEvent(t,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(n),n}};return t===""&&$P(void 0,s=>t=s.key,r),r},Fk=AP.bind(null,"");var VB;VB=kP;class OP{constructor(e){this.#e=[],this.#t=[],this.#i=[],this.#n=[],this.#u=[],this.#c=[],this.#h=[],this.#d=[],this.#a=[],this.#l=!1,this.P=new rw,this.connectedCalled=!1,this.loadedCalled=!1,this[VB]=!0,this.#o=[];const i=this,r=e??Ly();i.#r=r,i.ready=i.P.promise,i.#s=xN(i),i.component=r,i.#r.addController(i),i.#r.manager===void 0||(FB(i),queueMicrotask(()=>i.catchUpLifecycle()))}#e;#t;#i;#n;#u;#c;#h;#d;#a;#l;#r;catchUpLifecycle(){const{manager:e}=this.#r;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#l&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#s;get exports(){return this.#s}set exports(e){const i=this.#s;i!==e&&(this.#s=e,this.#o.forEach(Ti),this.connectedCalled&&this.O!==!1&&this.#r.requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){this.#s=i?xN(e):e,this.#o.forEach(Ti)}#o;watchExports(e){const i=()=>e(this.#s);return this.#o.push(i),()=>void this.#o.splice(this.#o.indexOf(i),1)}get use(){return Xm(this.#r),xie}get useRef(){return Xm(this.#r),Sie}get useRefSync(){return Xm(this.#r),RP}controllerRemoved(){this.#r.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#e.push(e)}onDisconnected(e){this.#t.push(e)}onLoad(e){this.#i.push(e)}onLoaded(e){this.#n.push(e)}onUpdate(e){this.#u.push(e)}onUpdated(e){this.#c.push(e)}onDestroy(e){this.#h.push(e)}onLifecycle(e){this.#d.push(e),this.connectedCalled&&this.#r.el.isConnected&&this.#p(e)}triggerConnected(){const e=this;e.hostConnected&&Ti(e.hostConnected,e),e.#e.forEach(Ti),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Ti(e.hostDisconnected,e),e.#t.forEach(Ti),e.#a.forEach(Ti),e.#a=[]}async triggerLoad(){if(this.#l)return;this.#l=!0;const e=this;e.hostLoad&&await Ok(e.hostLoad,e),this.#i.length>0&&await Promise.allSettled(this.#i.map(Ok)),this.P.resolve(this.#s)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Ti(this.hostLoaded,this),this.#n.forEach(Ti),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Ti(this.hostUpdate,this,e),this.#u.forEach(_N,e)}triggerUpdated(e){this.hostUpdated&&Ti(this.hostUpdated,this,e),this.#c.forEach(_N,e)}triggerDestroy(){this.hostDestroy&&Ti(this.hostDestroy,this),this.#h.forEach(Ti)}triggerLifecycle(){this.hostLifecycle&&this.#p(()=>this.hostLifecycle()),this.#d.forEach(this.#p,this)}#p(e){Xm(this.#r);const i=Ti(e);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?this.#a.push(s):typeof s=="object"&&typeof s.remove=="function"&&this.#a.push(s.remove)})}}function _N(t){Ti(t,void 0,this)}const PP=OP,xN=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,s,n){if(!((s==="exports"||s==="_exports")&&s in r&&r[s]===i)&&(s in r||s in Promise.prototype||typeof s=="symbol"))return typeof r=="function"?r[s]:Reflect.get(r,s,n)}},i=new Proxy(t,e);return i},Tie=1,Mie=2,kie=4,Rie=8,Iie=16,$ie=32,Aie=64,UB=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const i=e;return i.manager?.loadedCalled||(i.J??i._offspring).push(t),(i.I??i._postLoad).promise}return!1},AS={};function HB(){}const nx=Object.defineProperty,Oie=globalThis.HTMLElement??HB;var hn,qu,Lg,zw,jk;const Y3=class Y3 extends Oie{constructor(){var s;super();Ho(this,zw);Ho(this,hn);Ho(this,qu);Ho(this,Lg);Bo(this,qu,{}),Bo(this,Lg,[]),this.I=new rw,this.H=new rw,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,r.C?.forEach(n=>{Object.hasOwn(i,n)&&(Ht(i,qu)[n]=i[n],delete i[n])}),r.A?_b(s=i,zw,jk).call(s,{a:r.A}):r.B.then(async n=>{var o;await r.K.p,_b(o=i,zw,jk).call(o,await(n.default?.then(a=>typeof a=="function"?{a}:a)??n))}).catch(n=>{i.H.reject(n),setTimeout(()=>{throw n})})}static F(){for(const i of this.C??[])nx(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Ht(this,qu)[i]},set(r){Ht(this,qu)[i]=r}});for(const i of this.E??[])nx(this.prototype,i,{async value(...r){return Ht(this,hn)||await this.H.promise,await Ht(this,hn)[i](...r)},configurable:!0});for(const i of this.D??[])nx(this.prototype,i,{value(...r){return Ht(this,hn)[i](...r)},configurable:!0})}get manager(){return Ht(this,hn)?.manager}attributeChangedCallback(i,r,s){Ht(this,hn)?.attributeChangedCallback(i,r,s),Ht(this,hn)||Ht(this,Lg).push(i)}connectedCallback(){Ht(this,hn)?Ht(this,hn).connectedCallback?.():queueMicrotask(()=>this.G=UB(this))}disconnectedCallback(){Ht(this,hn)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Ht(this,hn)?.requestUpdate()}};hn=new WeakMap,qu=new WeakMap,Lg=new WeakMap,zw=new WeakSet,jk=function(i){const r=this.constructor,s=r.L,n=Ht(this,qu),o=Object.values(i).find(m=>m.L===s),a=`${s}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);Die(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,Bo(this,hn,h),Bo(this,qu,h),Ht(this,Lg).forEach(m=>h.attributeChangedCallback(m,null,this.getAttribute(m))),Object.entries(n).forEach(Pie,h);const p=this.isConnected;(p||this.G)&&(h.connectedCallback?.(),p||h.disconnectedCallback())},Y3.lumina=!0;let SN=Y3;function Pie([t,e]){this[t]=e}const Die=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},e.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},nx(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const DP={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},LP=t=>(...e)=>({_$litDirective$:t,values:e});let NP=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lie=LP(class extends NP{constructor(t){if(super(t),t.type!==DP.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const i=t.element.classList;for(const r of this.st)r in e||(i.remove(r),this.st.delete(r));for(const r in e){const s=!!e[r];s===this.st.has(r)||this.nt?.has(r)||(s?(i.add(r),this.st.add(r)):(i.remove(r),this.st.delete(r)))}return $h}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const BB="important",Nie=" !"+BB,Fie=LP(class extends NP{constructor(t){if(super(t),t.type!==DP.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const s=e[r];if(s!=null){this.ft.add(r);const n=typeof s=="string"&&s.endsWith(Nie);r.includes("-")||n?i.setProperty(r,n?s.slice(0,-11):s,n?BB:""):i[r]=s}}return $h}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jie=t=>t.strings===void 0,zie={},YVe=(t,e=zie)=>t._$AH=e;class Vie extends PP{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=Et,this.T=[],this.#i=new WeakMap,this.#t=e,this.exports=void 0,this.hasDestroy=zk in e&&typeof e.destroy=="function",Tp.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const i=e.el.localName;throw e.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${zk} prop.`)}this.#e!==void 0&&clearTimeout(this.#e),IP();for(const i of e.M)"triggerConnected"in i?i.triggerConnected():Ti(i.hostConnected,i)},hostDisconnected:()=>{for(const i of e.M)"triggerDisconnected"in i?i.triggerDisconnected():Ti(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of e.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):Ti(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of e.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):Ti(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),Xm(e)}#e;#t;async destroy(){if(!this.destroyed){this.#t.el.isConnected&&(this.hasDestroy=!1,this.#t.el.remove()),this.#e=void 0,this.destroyed=!0;for(const e of this.#t.M)"triggerDestroy"in e?e.triggerDestroy():Ti(e.hostDestroy,e);this.#t.M.splice(0)}}U(){if(this.#e!==void 0&&clearTimeout(this.#e),!this.#t.el.isConnected&&!this.#t.autoDestroyDisabled){const e=()=>void this.#t.destroy();this.#e=Jte(e,Uie)}}S(e,i){const r=this.T;this.V=Et,this.T=[],r.forEach(s=>s(e,i))}#i;W(e,i){(typeof i=="object"&&i!==null||typeof i=="function")&&this.#i.set(i,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#i.get(e)}}let Uie=1e3;const zk="autoDestroyDisabled";var Ep,Vw,Uw,Cp,pl,Dy,GB,WB;const ew=class ew extends Tp{constructor(){super();Ho(this,Dy);Ho(this,Ep);Ho(this,Vw);Ho(this,Uw);Ho(this,Cp);Ho(this,pl);this.M=[],this.manager=new Vie(this);const i=this,r=i.constructor,s=r.N,n=r.K.o,o=ew.prototype.shouldUpdate;Bo(i,Cp,s?.H??new rw),i.I=s?.I??new rw,i.J=s?.J??[],i._offspring=i.J,i._postLoad=i.I,i.el=s??i,Bo(i,Uw,i.enableUpdating),i.enableUpdating=HB,i.shouldUpdate!==o&&(Bo(i,Vw,i.shouldUpdate),i.shouldUpdate=o),n&&(Bo(i,Ep,new Map),r.elementProperties.forEach((a,l)=>Ht(i,Ep).set(l,n())))}static finalizeStyles(i){const r=super.finalizeStyles(i),s=this.shadowRootOptions===AS;return this.K?.commonStyles===void 0||s?r:[this.K.commonStyles,...r]}static createProperty(i,r){const s=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0,o=n?.hasChanged??SP,a={attribute:s&Tie&&typeof i=="string"?qte(i):!1,reflect:!!(s&Mie),type:s&kie?Boolean:s&Rie?Number:void 0,state:!!(s&Iie),readOnly:!!(s&$ie),noAccessor:!!(s&Aie),c:!1,...n,hasChanged(l,u){const h=o(l,u);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,s){const n=this.K,o=super.getPropertyDescriptor(i,r,s);return s.d=o,{...o,get(){return n.t?.(Ht(this,Ep).get(i)),o.get?.call(this)},set(a){const l=this.manager;if(s.readOnly&&!Nk&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),s.c&&Ht(this,Ep)?.get(i)?.notify(),l.T.length>0&&l?.S(i,a)}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const i=this.constructor.K.c?.(()=>this.requestUpdate());Bo(this,pl,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>_b(this,Dy,WB).call(this).catch(s=>{Ht(this,Cp).reject(s),setTimeout(()=>{throw s})})):i&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Ht(this,pl)?.destroy(),Bo(this,pl,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,s=r.shadowRootOptions,o=i??(s===AS?this.el:this.el.attachShadow(s));if(i)return Tp.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=Ht(this,Vw))==null?void 0:r.call(this,i))??!0}update(i){Ht(this,pl)?_b(this,Dy,GB).call(this,i):super.update(i)}listen(i,r,s){const n=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,n,s),()=>this.el.removeEventListener(i,n,s)))}listenOn(i,r,s,n){const o=s?.bind(this)??s;this.manager.onLifecycle(()=>(i.addEventListener(r,o,n),()=>i.removeEventListener(r,o,n)))}async componentOnReady(){return await Ht(this,Cp).promise,this}addController(i){this.M.push(i),!(kP in i)&&this.renderRoot&&this.el.isConnected&&i.hostConnected?.()}removeController(i){this.M.splice(this.M.indexOf(i),1),i.controllerRemoved?.()}};Ep=new WeakMap,Vw=new WeakMap,Uw=new WeakMap,Cp=new WeakMap,pl=new WeakMap,Dy=new WeakSet,GB=function(i){try{Ht(this,pl).clear(),this.constructor.K.r(Ht(this,pl),()=>cN(ew.prototype,this,"update").call(this,i))}catch(r){throw Ht(this,pl).clear(),r}},WB=async function(){const i=this.el.G??UB(this.el);i&&await i;const r=[];for(const n of this.M)"triggerLoad"in n?r.push(n.triggerLoad()):r.push(Ok(n.hostLoad,n));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(n=>n.has(zk)&&this.manager.U()),Ht(this,Uw).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(n=>!n.manager?.loadedCalled);s.length&&await Promise.allSettled(s.map(async n=>await n.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const n of this.M)"triggerLoaded"in n?n.triggerLoaded():Ti(n.hostLoaded,n);this.loaded?.(),Ht(this,Cp).resolve()},ew.lumina=!0;let Gp=ew;const qB=t=>{let e;const i=s=>{e=new URL(s,globalThis.location?.href||void 0).href},r={...t,getAssetPath(s){const n=new URL(s,e);return n.origin!==globalThis.location?.origin?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.K=r,n.L=s,customElements.get(s)||customElements.define(s,n)}};return i(t.defaultAssetPath),r},Ds=t=>typeof t=="object"&&t!=null?Lie(t):t,Hie=t=>typeof t=="object"&&t!=null?Fie(t):t,EN=Et;function Bie(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const Gie={toAttribute:t=>t===!0?"":t===!1?null:t};let lh;function J(t){return typeof lh[t]=="function"?lh[t]=lh[t](globalThis):lh[t]}lh=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},J.add=(t,e,i,r)=>{(r||lh[t]===void 0)&&(lh[t]=e),i&&J(t)},J.cache=lh,J.add("big-integer-warning-enabled",!0),J.add("esri-deprecation-warnings",!0),J.add("esri-tests-disable-screenshots",!1),J.add("esri-tests-use-full-window",!1),J.add("esri-tests-post-to-influx",!0),J.add("esri-cim-animations-enable-status","enabled"),J.add("esri-cim-animations-spotlight",!1),J.add("esri-cim-animations-freeze-time",!1),(()=>{J.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(J.add("host-browser",t),J.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),J.add("dom",t),J("host-browser")){const e=navigator,i=e.userAgent,r=e.appVersion,s=parseFloat(r);if(J.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),J.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),J.add("khtml",r.includes("Konqueror")?s:void 0),J.add("edge",parseFloat(i.split("Edge/")[1])||void 0),J.add("opr",parseFloat(i.split("OPR/")[1])||void 0),J.add("webkit",!J("wp")&&!J("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),J.add("chrome",!J("edge")&&!J("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),J.add("android",!J("wp")&&parseFloat(i.split("Android ")[1])||void 0),J.add("safari",!r.includes("Safari")||J("wp")||J("chrome")||J("android")||J("edge")||J("opr")?void 0:parseFloat(r.split("Version/")[1])),J.add("mac",r.includes("Macintosh")),!J("wp")&&/(iPhone|iPod|iPad)/.test(i)){const n=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));J.add(n,a),J.add("ios",a)}J("webkit")||(!i.includes("Gecko")||J("wp")||J("khtml")||J("edge")||J.add("mozilla",s),J("mozilla")&&J.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&J.add("esri-mobile",e),i&&J.add("esri-iPhone",i),J.add("esri-geolocation",!!navigator.geolocation)}J.add("esri-wasm","WebAssembly"in globalThis),J.add("esri-performance-mode-frames-between-render",20),J.add("esri-force-performance-mode",!1),J.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),J.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),J.add("esri-atomics","Atomics"in globalThis),J.add("esri-workers","Worker"in globalThis),J.add("web-feat:cache","caches"in globalThis),J.add("esri-workers-arraybuffer-transfer",!J("safari")||Number(J("safari"))>=12),J.add("workers-pool-size",8),J.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),J.add("featurelayer-simplify-payload-size-factors",[1,1,4]),J.add("featurelayer-fast-triangulation-enabled",!0),J.add("featurelayer-animation-enabled",!0),J.add("featurelayer-snapshot-enabled",!0),J.add("featurelayer-snapshot-initial-tolerance",0),J.add("featurelayer-snapshot-point-min-threshold",8e4),J.add("featurelayer-snapshot-point-max-threshold",4e5),J.add("featurelayer-snapshot-multipoint-min-threshold",2e4),J.add("featurelayer-snapshot-multipoint-max-threshold",1e5),J.add("featurelayer-snapshot-polygon-min-threshold",1e3),J.add("featurelayer-snapshot-polygon-max-threshold",2e3),J.add("featurelayer-snapshot-polyline-min-threshold",1e3),J.add("featurelayer-snapshot-polyline-max-threshold",2e3),J.add("featurelayer-snapshot-max-vertex-count",25e4),J.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),J.add("featurelayer-snapshot-concurrency",4),J.add("featurelayer-snapshot-coverage",.1),J.add("featurelayer-query-max-depth",4),J.add("featurelayer-query-pausing-enabled",!1),J.add("featurelayer-query-tile-concurrency",4),J.add("featurelayer-query-tile-max-features",6e5),J.add("featurelayer-advanced-symbols",!1),J.add("featurelayer-pbf",!0),J.add("featurelayer-pbf-statistics",!1),J.add("feature-layers-workers",!0),J.add("feature-polyline-generalization-factor",1),J.add("mapview-transitions-duration",200),J.add("mapview-essential-goto-duration",200),J.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),J.add("mapserver-pbf-version-support",10.81),J.add("mapservice-popup-identify-max-tolerance",20),J.add("request-queue-concurrency-hosted",16),J.add("request-queue-concurrency-non-hosted",4),J.add("curve-densification-coarse-segments",128),J.add("curve-densification-max-segments",2e3),J.add("curve-densification-min-segments",3),J.add("curve-densification-pixel-deviation",.5),J.add("view-readyState-waiting-delay",1e3),J.add("gradient-depth-bias",.01),J.add("gradient-depth-epsilon",1e-8),J.add("enable-feature:esri-compress-textures",!0),J("host-webworker")||J("host-browser")&&(J.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),J.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{J.add("esri-image-decode",!0,!0,!0)}).catch(()=>{J.add("esri-image-decode",!1,!0,!0)})}return!1}),J.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function JVe(t){}function Wie(t){return()=>t}function ZVe(t){return t}var pn;let qie=(pn=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*pn._m}getInt(){return this._seed=(pn._a*this._seed+pn._c)%pn._m,this._seed}getFloat(){return this.getInt()/(pn._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/pn._m*r}},pn._m=2147483647,pn._a=48271,pn._c=0,pn);const Yie=1.5,XVe=1/Yie,KVe=.5;function QVe(t,e){return e?t.filter((i,r,s)=>s.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function Jie(t,e,i,r,s,n,o){if(t==null&&r==null)return!0;e=Math.max(0,e),s=Math.max(0,s),i=Math.max(0,i<0?(t?.length??0)+i:i),n=Math.max(0,n<0?(r?.length??0)+n:n);const a=i-e;if(t==null||r==null||a!==n-s)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[s+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[s+l])return!1;return!0}function VC(t,e,i){return Jie(t,0,t?.length??0,e,0,e?.length??0,i)}function CN(t,e,i){let r,s;return i?(r=e.filter(n=>!t.some(o=>i(o,n))),s=t.filter(n=>!e.some(o=>i(o,n)))):(r=e.filter(n=>!t.includes(n)),s=t.filter(n=>!e.includes(n))),{added:r,removed:s}}function e6e(t){return t&&typeof t.length=="number"}let YB=class{constructor(){this.last=0}};const JB=new YB;function Vk(t,e,i,r){r=r||JB;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(t[o]===e)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(t[o]===e)return r.last=o,o;return-1}function Zie(t,e,i,r){const s=t.length,n=Vk(t,e,s,r);if(n!==-1)return t[n]=t[s-1],t.pop(),e}const Go=new Set;function Xie(t,e,i=t.length,r=e.length,s,n){if(r===0||i===0)return i;Go.clear();for(let a=0;a<r;++a)Go.add(e[a]);s=s||JB;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(Go.has(t[a])&&(n?.push(t[a]),Go.delete(t[a]),t[a]=t[i-1],--i,--a,Go.size===0||i===0))return Go.clear(),i;for(let a=0;a<o;++a)if(Go.has(t[a])&&(n?.push(t[a]),Go.delete(t[a]),t[a]=t[i-1],--i,--a,Go.size===0||i===0))return Go.clear(),i;return Go.clear(),i}function i6e(t,e,i){const r=t.length;if(e>=r)return t.slice();const s=ZB(i),n=new Set,o=[];for(;o.length<e;){const a=Math.floor(s()*r);n.has(a)||(n.add(a),o.push(t[a]))}return o}function ZB(t){return t?(TN.seed=t,()=>TN.getFloat()):Math.random}const TN=new qie;function r6e(t,e){if(!t)return t;const i=ZB(e);for(let r=t.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=t[r];t[r]=t[s],t[s]=n}return t}function FP(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Ah(t,e){return t!=null}const s6e=[];function n6e(t){return t instanceof ArrayBuffer}function jP(t){return t?.constructor?.name==="Int8Array"}function XB(t){return t?.constructor?.name==="Uint8Array"}function KB(t){return t?.constructor?.name==="Uint8ClampedArray"}function zP(t){return t?.constructor?.name==="Int16Array"}function QB(t){return t?.constructor?.name==="Uint16Array"}function VP(t){return t?.constructor?.name==="Int32Array"}function e8(t){return t?.constructor?.name==="Uint32Array"}function Kie(t){return t?.constructor?.name==="Float16Array"}function UC(t){return t?.constructor?.name==="Float32Array"}function HC(t){return t?.constructor?.name==="Float64Array"}function Qie(t){return"buffer"in t}const t8=1024;function o6e(t){return HC(t)||UC(t)||VP(t)||zP(t)||jP(t)}function a6e(t){return HC(t)||UC(t)}function l6e(t){return HC(t)?179769e303:Kie(t)?65504:UC(t)?3402823e32:e8(t)?4294967295:QB(t)?65535:XB(t)||KB(t)?255:VP(t)?2147483647:zP(t)?32767:jP(t)?127:256}const u6e=-32768,c6e=-2147483648;function ere(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function B(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=s8(t);if(e!=null)return e;if(OS(t))return t.clone();if(i8(t))return t.map(B);if(r8(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=B(t[r]);return i}function Uk(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=s8(t);if(e!=null)return e;if(i8(t)){let r=!0;const s=t.map(n=>{const o=Uk(n);return n!=null&&o==null&&(r=!1),o});return r?s:null}if(OS(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(r8(t))return null;const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const s=t[r],n=Uk(s);if(s!=null&&n==null)return null;i[r]=n}return i}function OS(t){return typeof t.clone=="function"}function i8(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function r8(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function MN(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function s8(t){if(jP(t)||XB(t)||KB(t)||zP(t)||QB(t)||VP(t)||e8(t)||UC(t)||HC(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,B(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(B(i));return e}return null}function UP(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function n8(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&VC(t,e):t instanceof Set?e instanceof Set&&ire(t,e):t instanceof Map?e instanceof Map&&rre(t,e):!!MN(t)&&MN(e)&&tre(t,e))}function tre(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function ire(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function rre(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const s=e.get(i);if(s!==r||s===void 0&&!e.has(i))return!1}return!0}function HP(t,e,i=!1){return a8(t,e,i)}function BC(t,e){if(e!=null)return e[t]||o8(t.split("."),!1,e)}function Bi(t,e,i){const r=t.split("."),s=r.pop(),n=o8(r,!0,i);n&&s&&(n[s]=e)}function kN(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(kN(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(kN(t[i],e[i]))return!0;return!1}return t!==e}function o8(t,e,i){let r=i;for(const s of t){if(r==null)return;if(!(s in r)){if(!e)return;r[s]={}}r=r[s]}return r}function a8(t,e,i){return e?Object.keys(e).reduce((r,s)=>{if(s==="__proto__")return r;let n=r[s],o=e[s];return n===o?r:n===void 0?(r[s]=B(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{n.includes(a)||n.push(a)}):r[s]=o.slice())):o&&typeof o=="object"?r[s]=a8(n,o,i):r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=o),r)},t||{}):t}const Ct={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(HP(Ct,globalThis.esriConfig,!0),delete Ct.has),!Ct.assetsPath){{const t="4.33";Ct.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ct.defaultAssetsPath=Ct.assetsPath}const sre=/\{([^}]+)\}/g;function RN(t){return t??""}function cf(t,e){return e?t.replaceAll(sre,typeof e=="object"?(i,r)=>RN(BC(r,e)):(i,r)=>RN(e(r))):t}function h6e(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e?.includes(i)?i:`\\${i}`)}function l8(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let IN;function d6e(t){return IN??=new DOMParser,IN.parseFromString(t||"","text/html").body.innerText||""}function p6e(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function f6e(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const $N={info:0,warn:1,error:2,none:3};var er;let he=(er=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,er._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=er.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,er._loggers.get(e)||new er({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!er._throttlingDisabled){const s=ore(r),n=this._loggedMessages[e].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=er._tickCounter)return;this._loggedMessages[e].set(s,er._tickCounter),er._scheduleTickCounterIncrement()}for(const s of Ct.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const s=r[e];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",nre)}_matchLevel(e){const i=Ct.log.level||"warn";return $N[this._parentWithMember("level",i)]<=$N[e]}static _scheduleTickCounterIncrement(){er._tickCounterScheduled||(er._tickCounterScheduled=!0,Promise.resolve().then(()=>{er._tickCounter++,er._tickCounterScheduled=!1}))}},er._loggers=new Map,er._tickCounter=0,er._tickCounterScheduled=!1,er._throttlingDisabled=!1,er);function nre(t,e,...i){console[t](`[${e}]`,...i)}function ore(...t){return l8(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const are={remove:()=>{}};function Mt(t){return t?{remove(){t&&(t(),t=void 0)}}:are}function u8(t){t.forEach(e=>e?.remove())}function m6e(t){u8(t),t.length=0}function hf(t){return Mt(()=>u8(t))}function g6e(t){return Mt(()=>t()?.remove())}function y6e(t){return Mt(()=>t?.abort())}function b6e(t){return Mt(t!=null?()=>t.destroy():void 0)}function lre(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function v6e(t){lre(t)&&t.remove()}function w6e(t){return{[Symbol.dispose](){t.remove()}}}function Gs(t){return t.__accessor__??null}function ure(t,e){return t?.metadata?.[e]!=null}function ox(t,e,i){return i?PS(t,e,{policy:i,path:""}):PS(t,e,null)}function PS(t,e,i){return e?Object.keys(e).reduce((r,s)=>{const n=s;if(n==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[n]))return r[n]=e[n],r;if(r[n]===void 0)return r[n]=B(e[n]),r;let l=r[n],u=e[n];if(l===u)return r;if(Array.isArray(u)||Array.isArray(r))l=l?Array.isArray(l)?r[n]=l.slice():r[n]=[l]:r[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(h=>{l.includes(h)||l.push(h)}));else if(u&&typeof u=="object")if(i){const h=i.path;i.path=o,r[n]=PS(l,u,i),i.path=h}else r[n]=PS(l,u,null);else r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[n]=u);return r},t||{}):t}function c8(t){return Array.isArray(t)?t:t.split(".")}function AN(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function cre(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...AN(i));return e}return AN(t)}function h8(t,e,i,r){const s=cre(e);if(s.length!==1){const n=s.map(o=>r(t,o,i));return hf(n)}return r(t,s[0],i)}const gi={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let GC=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const DS=new GC,nv=[];let p0=DS;function Ve(t){p0.onAccessed(t)}let ax=!1,lx=!1;function $l(t,e,i){if(ax)return BP(t,e,i);let r=null;return d8(t),r=e.call(i),p8(),r}function hre(t,e){return $l(DS,t,e)}function BP(t,e,i){const r=ax;ax=!0,d8(t);let s=null;try{s=e.call(i)}catch(n){lx&&he.getLogger("esri.core.accessorSupport.tracking").error(n)}return p8(),ax=r,s}function d8(t){p0=t,nv.push(t)}function p8(){const t=nv.length;if(t>1){const e=nv.pop();p0=nv[t-2],e.onTrackingEnd()}else if(t===1){const e=nv.pop();p0=DS,e.onTrackingEnd()}else p0=DS}function f8(t,e){if(e.flags&gi.DepTrackingInitialized)return;e.flags|=gi.DepTrackingInitialized;const i=lx;lx=!1,e.flags&gi.AutoTracked?BP(e.trackingTarget,e.metadata.get,t):m8(t,e),lx=i}const dre=[];function m8(t,e){e.flags&gi.ExplicitlyTracking||(e.flags|=gi.ExplicitlyTracking,BP(e.trackingTarget,()=>{const i=e.metadata.dependsOn||dre;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=c8(r);for(let n=0,o=t;n<s.length&&o!=null&&typeof o=="object";++n)o=ON(o,s[n],n!==s.length-1)}else ON(t,r,!1)}),e.flags&=-129)}function ON(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const s=Gs(t);if(s){const n=s.propertiesByName.get(r);n&&(Ve(n),f8(t,n))}return i?t[r]:void 0}let pre=class{constructor(e,i){this._observers=e,this._observer=i}remove(){FP(this._observers,this._observer)}},g8=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return fre;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const a=i[o];if(a.destroyed)s=!0;else if(a===e){r=!0;break}}return r||(i.push(e),s&&this._removeDestroyedObservers()),new pre(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&e[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;e[s]=e[s+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const fre=Mt();let Ny=class extends g8{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},mre=class{constructor(e,i){this._observable=new Ny,this._value=e,this._equalityFunction=i}get value(){return Ve(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Wp(t,e=n8){return new mre(t,e)}let Bw=class extends GC{constructor(e){super(new gre(e)),this._observer&&PN.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&PN.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},gre=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=yre}};const PN=new FinalizationRegistry(t=>{t.deref()?.destroy()});function yre(){}function bre(t,e){return Wp(t,e)}function y8(){return new Ny}function vre(t){return new Bw(t)}function b8(t){Ve(t)}function wre(t,e){return $l(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.9 */const Gw=qB({defaultAssetPath:"https://js.arcgis.com/4.33/map-components/",hydratedAttribute:"hydrated"}),{customElement:v8,getAssetPath:_re,setAssetPath:k6e}=Gw;Gw.t=b8;Gw.o=y8;Gw.c=vre;Gw.r=wre;function WC(t){return xre(t)||w8(t)}function xre(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function w8(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function Fy(t,e,i){if(!WC(t))throw new TypeError("target is not a Evented or EventTarget object");return w8(t)?Sre(t,e,i):t.on(e,i)}function Sre(t,e,i,r){if(Array.isArray(e)){const s=e.slice();for(const n of s)t.addEventListener(n,i,r);return Mt(()=>{for(const n of s)t.removeEventListener(n,i,r)})}return t.addEventListener(e,i,r),Mt(()=>t.removeEventListener(e,i,r))}function _8(t,e,i){if(!WC(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=Fy(t,e,s=>{r.remove(),i.call(t,s)});return r}function x8(t,e){if(t==null)throw new Error(e??"value is None")}function ci(t){return t?.destroy(),null}function R6e(t){return t?.dispose(),null}function vi(t){return t?.remove(),null}function hy(t){return t?.abort(),null}function I6e(t){return t?.release(),null}function Ere(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function Cre(t,e){let i;return t.some((r,s)=>(i=e(r,s),i!=null)),i??void 0}function Tre(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Mt(()=>t.clearTimeout(r))}}}const jy=Tre(globalThis);function Mre(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(BC(r,e)??"").toString())}let S8=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&Mre(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},W=class E8 extends S8{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return B(i)}catch{return"[object]"}}))}}catch(e){throw he.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new E8(e.name,e.message,e.details)}};W.prototype.type="error";function Qt(t="Aborted"){return new W("AbortError",t)}function hi(t,e="Aborted"){if($o(t))throw Qt(e)}function Ww(t){return t instanceof AbortSignal?t:t?.signal??void 0}function $o(t){const e=Ww(t);return e!=null&&e.aborted}function fl(t){if(Zr(t))throw t}function DN(t){if(!Zr(t))throw t}function Ta(t,e){const i=Ww(t);if(i!=null){if(!i.aborted)return _8(i,"abort",()=>e());e()}}function GP(t,e){const i=Ww(t);if(i!=null)return hi(i),_8(i,"abort",()=>e(Qt()))}function C8(t,e){return Ww(e)==null?t:new Promise((i,r)=>{let s=Ta(e,()=>r(Qt()));const n=()=>{s=vi(s)};t.then(n,n),t.then(i,r)})}function Zr(t){return t?.name==="AbortError"}async function ow(t){try{return await t}catch(e){if(!Zr(e))throw e;return}}async function WP(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),s=await WP(r),n={};return i.map((o,a)=>n[o]=s[a]),n}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))}async function kre(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function A6e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function T8(t,e=void 0,i){const r=new AbortController;return Ta(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(e)},t);Ta(r,()=>{o&&(clearTimeout(o),n(Qt()))})})}function O6e(t,e,i,r){const s=i&&"abort"in i?i:null;r!=null||s||(r=i);let n=setTimeout(()=>{n=0,s?.abort()},e);const o=()=>r||new W("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(n===0)throw o();return clearTimeout(n),a},a=>{throw clearTimeout(n),n===0?o():a})}function Rre(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return Ta(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function zl(t){return t&&typeof t.then=="function"}function Hk(t){return zl(t)?t:Promise.resolve(t)}function qC(t,e=-1){let i,r,s,n,o=null;const a=(...l)=>{if(i){r=l,n&&n.reject(Qt()),n=eo();const m=n.promise;if(o){const y=o;o=null,y.abort()}return m}if(s=n||eo(),n=null,e>0){const m=new AbortController;i=Hk(t(...l,m.signal));const y=i;T8(e).then(()=>{i===y&&(n?m.abort():o=m)})}else i=1,i=Hk(t(...l));const u=()=>{const m=r;r=s=i=o=null,m!=null&&a(...m)},h=i,p=s;return h.then(u,u),h.then(p.resolve,p.reject),p.promise};return a}function eo(){let t,e;const i=new Promise((s,n)=>{t=s,e=n}),r=s=>{t(s)};return r.resolve=s=>t(s),r.reject=s=>e(s),r.timeout=(s,n)=>jy.setTimeout(()=>r.reject(n),s),r.promise=i,r}function P6e(t,e){e.then(t.resolve,t.reject)}async function LN(t){await Promise.resolve(),hi(t)}function Ire(t){return t?.release&&typeof t.release=="function"}function $re(t){return t?.acquire&&typeof t.acquire=="function"}var Rh;let zy=(Rh=class{constructor(e,i,r,s=1,n=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Rh.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):$re(i)&&i.acquire(...e),i}release(e){e&&!Rh.test.disabled&&(this._releaseFunction?this._releaseFunction(e):Ire(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Rh.test={disabled:!1},Rh);function Are(t){t.length=0}let Ls=class{constructor(e=50,i=50){this._pool=new zy(Array,void 0,Are,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return IM.acquire()}static release(e){return IM.release(e)}static prune(){IM.prune()}};const IM=new Ls(100);let M8=class extends zy{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const O1=[];function LS(t){O1.push(t),O1.length===1&&queueMicrotask(()=>{const e=O1.slice();O1.length=0;for(const i of e)i()})}let f0=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Bk;(function(t){const e=(n,o,a,l)=>{let u=o,h=o;const p=a>>>1,m=n[u-1];for(;h<=p;){h=u<<1,h<a&&l(n[h-1],n[h])<0&&++h;const y=n[h-1];if(l(y,m)<=0)break;n[u-1]=y,u=h}n[u-1]=m},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(n,h,a,l);const u=o+1;for(let h=a-1;h>o;h--){const p=n[o];n[o]=n[h],n[h]=p,e(n,u,h,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(n,h,a,l),yield;const u=o+1;for(let h=a-1;h>o;h--){const p=n[o];n[o]=n[h],n[h]=p,e(n,u,h,l),yield}}t.sort=r,t.iterableSort=s})(Bk||(Bk={}));const NN=Bk,Ore=1.5,Pre=1.1;let m0=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new YB,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>FN(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,FN(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=Vk(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(Vk(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=Xie(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){NN.sort(this.data,0,this.length,e)}iterableSort(e){return NN.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(e.call(i,r[n]))return r[n]}filterInPlace(e,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];e.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)e.call(i,r[n],n,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=e.call(i,this.data[s],s,this.data);return r}reduce(e,i){let r=i;for(let s=0;s<this.length;++s)r=e(r,this.data[s],s,this.data);return r}has(e){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function FN(t){t.data.length>Ore*t.length&&(t.data.length=Math.floor(t.length*Pre))}function j6e(t){return t}function Dre(t){return 1e3*t}function z6e(t){return t}function V6e(t){return .001*t}let Lre=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Nre=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},Gk=0;const Sb={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Wk=["prepare","preRender","render","postRender","update","finish"],qk=[],qp=new m0;let Fre=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,k8()}};function jre(){Mp!=null&&(cancelAnimationFrame(Mp),Mp=requestAnimationFrame(qP))}function k8(){Mp==null&&(Gk=performance.now(),Mp=requestAnimationFrame(qP))}const NS={frameTasks:qp,willDispatch:!1,clearFrameTasks:zre,dispatch:I8,executeFrameTasks:Vre,reschedule:jre};function qw(t){const e=new Nre(t);return qk.push(e),NS.willDispatch||(NS.willDispatch=!0,LS(I8)),e}function dy(t){const e=new Lre(t);return qp.push(e),k8(),new Fre(e)}let Mp=null;function zre(t=!1){qp.forAll(e=>{e.removed=!0}),t&&R8()}function qP(){const t=performance.now();Mp=null,Mp=qp.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(qP):null,NS.executeFrameTasks(t)}function Vre(t){const e=t-Gk;Gk=t;const i=1e3/60,r=Math.max(0,e-i);Sb.time=t,Sb.frameDuration=i-r;for(let s=0;s<Wk.length;s++){const n=performance.now(),o=Wk[s];qp.forAll(a=>{a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(Sb.elapsedFrameTime=performance.now()-t,Sb.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,Sb)))}),Gre[s].push(performance.now()-n)}R8(),Wre.push(performance.now()-t)}const P1=new m0;function R8(){qp.forAll(t=>{t.removed&&P1.push(t)}),qp.removeUnorderedMany(P1.data,P1.length),P1.clear()}function I8(){for(;qk.length;){const t=qk.shift();t.isActive&&t.callback()}NS.willDispatch=!1}function Ure(t=1,e){const i=eo(),r=()=>{$o(e)?i.reject(Qt()):t===0?i():(--t,LS(()=>r()))};return r(),i.promise}function Hre(t){return Ure(1,t)}async function Bre(t){await Hre(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const Gre=Wk.map(t=>new f0(t)),Wre=new f0("total");function $8(t,e){for(const i of t.values())if(e(i))return!0;return!1}function FS(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function jN(t,e){return e!=null&&t.add(e),t}function YP(t,e){const i=new Set;return FS(i,t),FS(i,e),i}function qre(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function G6e(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function W6e(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Yre(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function Jre(t,e){return Yre(YP(t,e),qre(t,e))}let Zre=0;function ux(){return++Zre}function A8(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const r=Gs(e);return ure(r,i)?r.get(i):e[i]}function O8(t,e,i){if(t==null)return t;const r=A8(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:O8(r,e,i+1)}function Yw(t,e,i=0){return typeof e!="string"||e.includes(".")?O8(t,c8(e),i):A8(e,t)}function ya(t,e){return Yw(t,e)}function zN(t,e){return Yw(e,t)!==void 0}const Gn={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let gg=!1;const jS=[];function P8(t,e){let i=new Bw(n),r=null,s=!1;function n(){if(!i||s)return;if(gg)return void N8(n);const a=r;i.clear(),gg=!0,s=!0,r=$l(i,t),s=!1,gg=!1,e(r,a),F8()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=$l(i,t),s=!1,Mt(o)}function D8(t,e){let i=new Bw(s),r=null;function s(){e(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=$l(i,t),r):null}return o(),Mt(n)}function L8(t,e){let i=!1,r=!1;const s=!!e?.sync;let n=new Bw(()=>{i||r||(r=!0,s?o():queueMicrotask(o))});function o(){r=!1,n&&!i&&(gg?N8(o):(n.clear(),gg=!0,i=!0,$l(n,t),i=!1,gg=!1,F8()))}function a(){n&&(n.destroy(),n=null)}return i=!0,$l(n,t),i=!1,Mt(a)}function N8(t){jS.includes(t)||jS.unshift(t)}function F8(){for(;jS.length;)jS.pop()()}var g0;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(g0||(g0={}));var Np;let JP=(Np=class{constructor(){this.uid=ux(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,s,n){return this.pool.acquire(g0.Untracked,e,i,r,s,n,UP)}static acquireTracked(e,i,r,s){return this.pool.acquire(g0.Tracked,e,i,r,null,null,s)}notify(e,i){this.type===g0.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,s,n,o,a){this.uid=ux(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=ux(),this.removed=!0}},Np.pool=new M8(Np),Np);const cx=new Ls,tc=new Set;let zS;function VS(t){tc.delete(t),tc.add(t),zS||(zS=qw(Qre))}function Xre(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Kre(t){for(const e of tc.values())e.target===t&&(e.removed=!0)}function Qre(){let t=10;for(;zS&&t--;){zS=null;const e=ese(),i=cx.acquire();for(const r of e){const s=r.uid;Xre(r),s===r.uid&&r.removed&&i.push(r)}for(const r of tc)r.removed&&(i.push(r),tc.delete(r));for(const r of i)JP.pool.release(r);cx.release(i),cx.release(e),Yk.forEach(r=>r())}}function ese(){const t=cx.acquire();t.length=tc.size;let e=0;for(const i of tc)t[e]=i,++e;return tc.clear(),t}const Yk=new Set;function tse(t){return Yk.add(t),Mt(()=>Yk.delete(t))}function ise(t,e,i){let r=h8(t,e,i,(s,n,o)=>{let a,l,u=D8(()=>Yw(s,n),(h,p)=>{s.__accessor__?.lifecycle===Gn.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=JP.acquireUntracked(h,o,p,s,n),l=a.uid),VS(a))});return Mt(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,VS(a)),a=null),r=u=null})});return r}function rse(t,e,i){const r=h8(t,e,i,(s,n,o)=>{let a=!1;return P8(()=>Yw(s,n),(l,u)=>{s.__accessor__.lifecycle!==Gn.DESTROYED?a||(a=!0,UP(u,l)||o.call(s,l,u,n,s),a=!1):r.remove()})});return r}function sse(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Gn.DESTROYED?r?rse(t,e,i):ise(t,e,i):Mt()}function nse(t,e,i){let r,s,n=D8(t,(o,a)=>{r&&r.uid!==s?n.remove():(r||(r=JP.acquireTracked(o,e,a,i),s=r.uid),VS(r))});return Mt(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,VS(r)),r=null),n=null})}function ose(t,e,i){let r=!1;return P8(t,(s,n)=>{r||(r=!0,i(n,s)||e(s,n),r=!1)})}function ase(t,e,i=!1,r=n8){return i?ose(t,e,r):nse(t,e,r)}function VN(t){return $8(tc,e=>e.oldValue===t)}function Ue(t,e,i={}){return ZP(t,e,i,j8)}function Ws(t,e,i={}){return ZP(t,e,i,z8)}function ZP(t,e,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(vi(s),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(s=ase(t,n,i.sync,i.equals),i.initial){const o=t();n(o,o)}return s}function Oh(t,e,i,r={}){let s=null,n=null,o=null;function a(){s&&n&&(n.remove(),r.onListenerRemove?.(s),s=null,n=null)}function l(h){r.once&&r.once&&vi(o),i(h)}const u=Ue(t,(h,p)=>{a(),WC(h)&&(s=h,n=Fy(h,e,l),r.onListenerAdd?.(h))},{sync:r.sync,initial:!0});return o=Mt(()=>{u.remove(),a()}),o}function YC(t,e){return lse(t,z8,e)}function lse(t,e,i){if($o(i))return Promise.reject(Qt());const r=t();if(e?.(r))return Promise.resolve(r);let s=null;function n(){s=vi(s)}return new Promise((o,a)=>{s=hf([Ta(i,()=>{n(),a(Qt())}),ZP(t,l=>{n(),o(l)},{sync:!1,once:!0},e??j8)])})}function j8(t){return!0}function z8(t){return!!t}function q6e(t,e,i={}){let r=!1;const s=Ue(t,(n,o)=>{r||e(n,o)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const Al={sync:!0},vs={initial:!0},Ps={sync:!0,initial:!0},XP=t=>(...e)=>{const i=jB(),r=new t(...e),s=r.exports;FB(i.at(-1));const n=r.component.manager;n.W(r,s),r.watchExports(n.W.bind(n,r)),wie(r);const o=[r.component,...i].reverse();return $P(o,a=>a===void 0?void 0:use(r,a,s),s)},use=(t,{host:e,key:i,isReactive:r},s)=>{const n=e,o=n[i]!==t.exports,a=n[i]!==s,l=s!==t.exports;if(o&&!a&&l&&(n[i]=t.exports),e===t.component){if(r){const p=t.component.manager;a&&p.W(t,n[i]),t.onUpdate(m=>{if(m.has(i)){const y=n[i];y!==t.exports&&p.W(t,y)}})}t.O=r?void 0:i}const h=t.component.constructor.elementProperties.get(i)?.readOnly;t.watchExports(()=>{n[i]!==t.exports&&(h?Eie(()=>{n[i]=t.exports}):n[i]=t.exports)})};function cse(t,e){for(const i of t.values())if(e(i))return!0;return!1}function Y6e(t,e){for(const i of t.values())if(e(i))return i;return null}function df(t,e,i){const r=t.get(e);if(r!==void 0)return r;const s=i();return t.set(e,s),s}function J6e(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const kp=()=>he.getLogger("esri.core.accessorSupport.ensureTypes");function hse(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(kp().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function dse(t){return t==null?t:!!t}function Jw(t){return t==null?t:t.toString()}function Ns(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function KP(t){return t==null?t:Math.round(parseFloat(t))}function pse(t){return null}function fse(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function V8(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function US(t,e){return e!=null&&t&&!(e instanceof t)}function U8(t){return t&&"isCollection"in t}function UN(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function mse(t,e){if(!e?.constructor||!U8(e.constructor))return Jk(t,e)?e:new t(e);const i=UN(t.prototype.itemType),r=UN(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(Jk(t,e),e):new t(e):e}function Jk(t,e){return!!V8(e)&&(kp().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+JC(t)+"'"),!0)}function Zw(t,e){return e==null?e:U8(t)?mse(t,e):US(t,e)?Jk(t,e)?e:new t(e):e}function JC(t){return t?.prototype?.declaredClass||"unknown"}const gse=new WeakMap;function yse(t){switch(t){case Number:return e=>Ns(e);case ht:return KP;case Boolean:return dse;case String:return Jw;case Date:return hse;case Vy:return pse;default:return df(gse,t,()=>Zw.bind(null,t))}}function Gi(t,e){const i=yse(t);return arguments.length===1?i:i(e)}function aw(t,e,i){return arguments.length===1?aw.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function bse(t,e){return arguments.length===1?aw(i=>Gi(t,i)):aw(i=>Gi(t,i),e)}function H8(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>H8(t,e-1,r)):t(i)}function HS(t,e,i){if(arguments.length===2)return n=>HS(t,e,n);if(!i)return i;i=H8(t,e,i);let r=e,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function vse(t,e,i){return arguments.length===2?HS(r=>Gi(t,r),e):HS(r=>Gi(t,r),e,i)}function B8(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function Zk(t,e){if(arguments.length===2)return Zk(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),s=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,h=u==="string"||u==="number";return h&&(i.has(a)||s.some(p=>u==="string"&&p===String||u==="number"&&p===Number))||u==="object"&&s.some(p=>!US(a,p))?a:(h&&r.length?(n||(n=r.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),kp().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(p=>JC(p)).join(", ")),kp().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):kp().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Ol(t,e){if(arguments.length===2)return Ol(t).call(null,e);const i={},r=[],s=[];for(const l in t.typeMap){const u=t.typeMap[l];i[l]=Gi(u),r.push(JC(u)),s.push(l)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!US(t.base,l)||l==null)return l;const u=a(l)||t.defaultKeyValue,h=i[u];if(!h)return kp().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!US(t.typeMap[u],l))return l;if(typeof t.key=="string"&&!V8(l)){const p={};for(const m in l)m!==t.key&&(p[m]=l[m]);return h(p)}return h(l)}}let ht=class{},Vy=class{};const K6e={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function wse(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function G8(t){switch(t.type){case"native":return Gi(t.value);case"array":return aw(G8(t.value));case"one-of":return _se(t);default:return null}}function _se(t){let e=null;return(i,r)=>Kk(i,t)?i:(e==null&&(e=Xk(t)),kp().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function Xk(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ht:return"integer";case Date:return"date";case Vy:return"null";default:return JC(t.value)}case"array":return`array of ${Xk(t.value)}`;case"one-of":{const e=t.values.map(i=>Xk(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function Kk(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case ht:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case Vy:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!Kk(i,e.value));case"one-of":return e.values.some(i=>Kk(t,i))}}function Xw(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=B(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Kw(t,e){const i=Xw(t);let r=i[e];return r||(r=i[e]={}),r}function xse(t,e){return ox(t,e,Ese)}const Sse=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Ese(t){return Sse.test(t)?"replace":"merge"}function BS(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))BS(t,r,e[r]);else{if(e.includes(".")){const s=e.split("."),n=s.splice(-1,1)[0];return void BS(ya(t,s),n,i)}const r=t.__accessor__;r!=null&&Cse(e,r),t[e]=i}}function Cse(t,e){if(J("esri-unknown-property-errors")&&!Tse(t,e))throw new W("set:unknown-property",Mse(t,e))}function Tse(t,e){return e.metadata[t]!=null}function Mse(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function d(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),s=Kw(e,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in t&&he.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=r.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const n=t.aliasOf;if(n){const l=typeof n=="string"?n:n.source,u=typeof n=="string"?null:n.overridable===!0;let h;s.dependsOn=[l],s.get=function(){let p=ya(this,l);if(typeof p=="function"){h||(h=l.split(".").slice(0,-1).join("."));const m=ya(this,h);m&&(p=p.bind(m))}return p},s.readOnly||(s.set=u?function(p){this._override(i,p)}:function(p){BS(this,l,p)})}const o=t.type,a=t.types;if(!s.cast){let l;o?l=kse(o):a&&(l=Array.isArray(a)?aw(Ol(a[0])):Ol(a)),t.cast=Rse(t.cast,l)}xse(s,t),t.range&&(s.cast=fse(s.cast,t.range))}}function QP(t,e,i){const r=Kw(t,i);r.json||(r.json={});let s=r.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function kse(t){let e=0,i=t;if(wse(t))return G8(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(B8(r))return e===0?Zk(r):HS(Zk(r),e);if(e===1)return bse(r);if(e>1)return vse(r,e);const s=t;return s.from?s.from:Gi(s)}function Rse(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const Ise=Object.prototype.toString;function $se(t){const e="__accessorMetadata__"in t?Gi(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Ase.apply(this,i)}}function Ase(t,e,i,r){Kw(t,e).cast=r}function Ose(t){return(e,i)=>{Kw(e,t).cast=e[i]}}function It(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&Ise.call(t[0])==="[object Function]"?$se(t[0]):t.length===1&&typeof t[0]=="string"?Ose(t[0]):void 0}let Xe=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Pse(e),this.apiValues=HN(this._apiToJSON),this.jsonValues=HN(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Bi(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function Pse(t){const e={};for(const i in t)e[t[i]]=i;return e}function HN(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function hr(){return function(t,e){return new Xe(t,{ignoreUnknown:!0,...e})}}function Re(t,e={}){const i=t instanceof Xe?t:new Xe(t,e),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return d({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}function de(t,e,i){let r,s;return e===void 0||Array.isArray(e)?(s=t,i=e,r=[void 0]):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;r.forEach(l=>{const u=QP(n,l,s);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}function eD(t){return(e,i)=>{e[i]=t}}const W8=Symbol("Accessor-beforeDestroy");function Dse(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const s=e[r];i[r].forEach(n=>{e[n]=s}),delete e[r]}}}let to=class extends S8{constructor(e,i,r){super(e,i,r)}};to.prototype.type="warning";function q8(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Qk=()=>he.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function BN(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||Fse(t)&&Bi("read.reader",Uy(t),e))}function Uy(t){const e=t.ndimArray??0;if(e>1)return Nse(t);if(e===1)return GN(t);if("type"in t&&J8(t.type)){const i=t.type.prototype?.itemType?.Type,r=GN(typeof i=="function"?{type:i}:{types:i});return(s,n,o)=>{const a=r(s,n,o);return a&&new t.type(a)}}return tD(t)}function tD(t){return"type"in t?Lse(t.type):jse(t.types)}function Lse(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void Qk().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const n=new t;return n.read(e,r),n}:t.fromJSON}function Y8(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(s=>Y8(t,s,i,r-1)):t(e,void 0,i)}function Nse(t){const e=tD(t),i=Y8.bind(null,e),r=t.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let a=r,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function GN(t){const e=tD(t);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=e(i,void 0,s);return n!==void 0?[n]:void 0}}function J8(t){if(!q8(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?iD(e.Type):Z8(e.Type))}function Fse(t){return"types"in t?Z8(t.types):iD(t.type)}function iD(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||J8(t))}function Z8(t){for(const e in t.typeMap)if(!iD(t.typeMap[e]))return!1;return!0}function jse(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void Qk().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=zse(t));const l=t.key;if(typeof l!="string")return;const u=s[l],h=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const m=`Type '${u||"unknown"}' is not supported`;return o?.messages&&s&&o.messages.push(new to(`${i}:unsupported`,m,{definition:s,context:o})),void Qk().error(m)}const p=new h;return p.read(s,o),r?r(p):p}}function zse(t){const e={};for(const i in t.typeMap){const r=t.typeMap[i],s=Xw(r.prototype);if(typeof t.key=="function")continue;const n=s[t.key];if(!n)continue;if(n.json?.type&&Array.isArray(n.json.type)&&n.json.type.length===1&&typeof n.json.type[0]=="string"){e[n.json.type[0]]=r;continue}const o=n.json?.write;if(!o?.writer){e[i]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,u={};o.writer(i,u,l),u[l]&&(e[u[l]]=r)}return e}function Vse(t){if(t.json||(t.json={}),qN(t.json),YN(t.json),WN(t.json),t.json.origins)for(const e in t.json.origins)qN(t.json.origins[e]),YN(t.json.origins[e]),WN(t.json.origins[e]);return!0}function WN(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function qN(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function YN(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function JN(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&q8(t.type))?e.write.writer=Bse:i>1?e.write.writer=Gse(i):e.types?Array.isArray(e.types)?e.write.writer=Hse(e.types[0]):e.write.writer=Use(e.types):e.write.writer=lw}function Use(t){return(e,i,r,s)=>e?X8(e,t,s)?lw(e,i,r,s):void 0:lw(e,i,r,s)}function X8(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i?.messages){const r=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new W(`${r}:unsupported`,s,{definition:t,context:i})),he.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Hse(t){return(e,i,r,s)=>!e||!Array.isArray(e)?lw(e,i,r,s):lw(e.filter(n=>X8(n,t,s)),i,r,s)}function lw(t,e,i,r){Bi(i,GS(t,r),e)}function GS(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?WS(t):t}function WS(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Bse(t,e,i,r){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(n=>GS(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[GS(t,r)],Bi(i,s,e)}function K8(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>K8(r,e,i-1)):GS(t,e)}function Gse(t){return(e,i,r,s)=>{let n;if(e===null)n=null;else{n=K8(e,s,t);let o=t,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Bi(r,n,i)}}function Wse(t,e){return rD(t,"any",e?.origin)}function eR(t,e){return rD(t,"read",e?.origin)}function Q8(t,e){return rD(t,"write",e?.origin)}function rD(t,e,i){let r=t?.json;if(r?.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(e==="any"||e in s)&&(r=s)}return r}function qse(t){const e=Yse(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],s=r.types?Jse(r):e;BN(s,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),JN(s,r)}BN(e,t.json,!0),JN(e,t.json)}function Yse(t){return t.json.types?tR(t.json):t.type?e9(t):tR(t)}function Jse(t){return t.type?e9(t):tR(t)}function e9(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!B8(i);)i=i[0],e++;return{type:i,ndimArray:e}}function tR(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Zse(t){Vse(t)&&(Dse(t),qse(t))}const $M=new Set,AM=new Set;function R(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,Kse(e);const i=[],r=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!$M.has(s.initialize)&&($M.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!AM.has(s.destroy)&&(AM.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);$M.clear(),AM.clear();const n=class extends e{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const u=this[W8];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=Gn.DESTROYING,l=!0,u.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=Xw(e.prototype),n.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function Xse(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&Ve(r);const s=i.store;return s.has(t)?s.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function Kse(t){const e=t.prototype,i=Xw(e),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];Zse(n),r[s]={enumerable:!0,configurable:!0,get:Xse(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?ZN("read-only",s):a.lifecycle===Gn.CONSTRUCTED&&n.constructOnly?ZN("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const ZN=(t,e)=>{he.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};function me(t,e,i){let r,s;return e===void 0?(s=t,r=[void 0]):typeof e!="string"?(s=t,r=[void 0],i=e):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;for(const l of r){const u=QP(n,l,s);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}const XN=new WeakMap;function Qse(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let s=XN.get(t);s||(s=new Set,XN.set(t,s)),s.has(e)||(s.add(e),t.warn(r))}const qS="https://www.esriurl.com/";function ene(t,e,i,r={}){J("esri-deprecation-warnings")&&Ph(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${qS}${i}/`,`Esri's move to web components: ${qS}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function tne(t,e,i,r={}){J("esri-deprecation-warnings")&&Ph(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${qS}${i}/`,`Esri's move to web components: ${qS}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function tUe(t,e,i={}){J("esri-deprecation-warnings")&&Ph(t,`Module: ${e}`,i)}function t9(t,e,i={}){if(J("esri-deprecation-warnings")){const{moduleName:r}=i;Ph(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function i9(t,e,i={}){if(J("esri-deprecation-warnings")){const{moduleName:r}=i;Ph(t,`Property: ${(r?r+"::":"")+e}`,i)}}function ine(t,e,i={}){J("esri-deprecation-warnings")&&Ph(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Ph(t,e,i={}){if(J("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),s&&(a+=`
	 Version: ${s}`),n)if(Array.isArray(n)){a+=`
	 See for more details:`;for(const l of n)a+=`
		${l}`}else a+=`
	 See ${n} for more details.`;Qse(t,a,o)}}function iUe(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function rne(t,e){for(const i of t)if(i!=null&&e(i))return i}function YS(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Hy=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(YS(e)){const r=this._getOrCreateGroup(i);for(const s of e)QN(s)&&r.push(s)}else QN(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(D1(e))}remove(e){if(typeof e!="string"&&YS(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(KN(this._getGroup(e)),this._groups.delete(D1(e)),this):this}removeAll(){return this._groups.forEach(KN),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(D1(e),i),i}_getGroup(e){return this._groups.get(D1(e))}};function D1(t){return t||"_default_"}function KN(t){for(const e of t)e instanceof Hy?e.removeAll():e.remove()}function QN(t){return t!=null&&(!!t.remove||t instanceof Hy)}var lt;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(lt||(lt={}));const iR=lt.USER+1;function Ju(t){switch(t){case"defaults":return lt.DEFAULTS;case"service":return lt.SERVICE;case"portal-item":return lt.PORTAL_ITEM;case"web-scene":return lt.WEB_SCENE;case"web-map":return lt.WEB_MAP;case"link-chart":return lt.LINK_CHART;case"user":return lt.USER;default:return null}}function uw(t){switch(t){case lt.DEFAULTS:return"defaults";case lt.SERVICE:return"service";case lt.PORTAL_ITEM:return"portal-item";case lt.WEB_SCENE:return"web-scene";case lt.WEB_MAP:return"web-map";case lt.LINK_CHART:return"link-chart";case lt.USER:return"user"}}function sne(t){return uw(t)}let eF=class extends g8{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new GC(this),this.flags=0,this.flags=gi.Dirty|(i.nonNullable?gi.NonNullable:0)|(i.hasOwnProperty("value")?gi.HasDefaultValue:0)|(i.get===void 0?gi.DepTrackingInitialized:0)|(i.dependsOn===void 0?gi.AutoTracked:0)}destroy(){this.flags&gi.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Ve(this);const i=e.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&gi.Computing||~s&gi.Dirty&&i.has(r))return n;this.flags|=gi.Computing;const o=e.host;let a;s&gi.AutoTracked?a=$l(this.trackingTarget,this.metadata.get,o):(m8(o,this),a=this.metadata.get.call(o)),this.flags|=gi.DepTrackingInitialized,i.set(r,a,lt.COMPUTED);const l=i.get(r);return l===n?this.flags&=-2:hre(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&gi.Overridden&&(this.flags|=gi.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},nne=class r9{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new r9;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,B(r))}),i}get(e){return this._values.get(e)}originOf(){return lt.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function Pf(t,e,i){return t!==void 0}function tF(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&gi.NonNullable)||(r.lifecycle,!1))}let one=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Gn.INITIALIZING,this.store=new nne,this.mutable=!0,this._origin=lt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new eF(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=Gn.CONSTRUCTING}constructed(){this.lifecycle=Gn.CONSTRUCTED}destroy(){this.lifecycle=Gn.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Gn.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!Pf(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Ve(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&gi.HasDefaultValue)return"defaults"}return uw(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(Pf(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);Pf(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const s=this.propertiesByName.get(i);if(!Pf(s))return"";const n=new GC,o=$l(n,()=>s.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;r+="  ";for(const u of l)u instanceof eF&&(a+=`${r}${u.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const s=this.propertiesByName.get(e);if(Pf(s))return this._setAtOrigin(s,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&gi.Overridden)}clearOrigin(e,i){const r=this.store,s=this.propertiesByName.get(e);if(!Pf(s))return;const n=r.isAtOrigin(e,i)&&!(s.flags&gi.Overridden);r.delete(e,i),n&&s.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&gi.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!tF(r,e,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(OM.release(n),!o)return;i=a}r.flags|=gi.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!tF(r,e,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:l}=o;if(OM.release(o),!a)return;i=l}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Ju(e)}getDefaultOrigin(){return uw(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Gn.INITIALIZING?this._origin:lt.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const s=this.store,n=e.propertyName;if(s.isAtOrigin(n,r)&&UP(i,s.get(n))&&~e.flags&gi.Overridden)return;const o=s.isBelowOrigin(n,r)||s.isAtOrigin(n,r);o&&e.invalidate(),s.set(n,i,r),o&&e.commit(),f8(this.host,e)}_cast(e,i){const r=OM.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},ane=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const OM=new zy(ane);let lne;function une(){return lne}var iF;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(iF||(iF={}));var rF,sF;function cne(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const fc=Symbol("Accessor-Handles"),PM=Symbol("Accessor-Initialized");var Ih;let Oe=(Ih=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}Xw(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...u){const h=this.inherited;let p;this.inherited=function(...m){if(n.prototype[a])return n.prototype[a].apply(this,m)};try{p=l.apply(this,u)}catch(m){throw this.inherited=h,m}return this.inherited=h,p}:e[a]}for(const a in i){const l=cne(i[a]);d(l)(o.prototype,a)}return R(r)(o)}static freeze(e){return e instanceof Ih?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Ih?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[rF]=null,this[sF]=!1,this.constructor===Ih)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new one(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[PM]=!0}initialize(){}[W8](){this[fc]=ci(this[fc])}destroy(){this.destroyed||(Kre(this),this.__accessor__.destroy(),une()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[PM]}get destroyed(){return this.__accessor__?.lifecycle===Gn.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===Gn.DESTROYING||!1}commitProperty(e){ya(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return BS(this,e,i),this}watch(e,i,r){return t9(he.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),sse(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const s of r)s.remove();return}(this[fc]??=new Hy).add(e,i)}removeHandles(e){this[fc]?.remove(e)}removeAllHandles(){this[fc]?.removeAll()}removeHandlesReference(e){this[fc]?.removeReference(e)}hasHandles(e){return this[fc]?.has(e)===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},rF=fc,sF=PM,Ih);const Hr=(t,e)=>{const r=Ly().manager;r.onLoaded(()=>r.onLifecycle(()=>Oh(t,e,s.emit)));const s=AP();return s},s9=(t,e)=>i=>dne(i,t);class hne extends PP{constructor(e,i){super(e),this.Y=new Map,this.A=void 0,this.#t=y8();const r=this;r.#i=i,r.Z(),r.setProvisionalExports(pne(e,new WeakRef(r),e.M.length-1,r.instance,r.Y),!1),zB(e,s=>{if(s){const n=Ue(()=>e[s],o=>{if(o===r.instance)return;const a=r.instance;r.exports=o,r.instance=o,r.Y.forEach((l,u)=>e.requestUpdate(l,a[u])),r.#e&&a.destroy(),r.#e=!1},{sync:!0});r.onDestroy(n.remove)}},r.exports)}#e;#t;#i;get exports(){return b8(this.#t),super.exports}set exports(e){super.exports=e,this.#t.notify()}Z(){const e=this;e.instance="prototype"in e.#i&&"declaredClass"in e.#i.prototype?new e.#i:e.#i(),e.#e=!0}hostConnected(){this.exports=this.instance}hostDestroy(){this.#e&&this.instance.destroy?.()}}const dne=XP(hne),pne=(t,e,i,r,s)=>new Proxy(r,{get:(n,o)=>{const a=n[o];if(typeof o=="symbol"||s.has(o))return a;const l=t.M[i];return l.A=o,$P(t,u=>{if(l.A=void 0,u!==void 0){const h=u.key;s.set(o,h);const p=t.constructor.getPropertyOptions(h),m=o!==h&&h.toLowerCase().includes("disable");fne(e,p,o,h,m),p.i===void 0&&mne(p,i,o,m)}},a)}}),fne=(t,e,i,r,s,n)=>n=Ue(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?n=n.remove():o.exports[i]},(o,a)=>{if(!n)return;t.deref().component?.requestUpdate(r,s?!a:a),e.c=!1},{sync:!0}),mne=(t,e,i,r)=>{t.d.get=function(){const s=this.M[e]?.exports[i];return r?!s:s},t.d.set=function(s){const n=this.M[e];n.A!==i&&(n.exports[i]=r?!s:s)}},gne=(t,e)=>{const i=e.manager.useRefSync(t);i?.hostDestroy(),i?.Z(),i?.hostConnected()};function c(t,e,i,r){var s,n=arguments.length,o=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o}function aUe(t,e){return function(i,r){e(i,r,t)}}function lUe(t,e,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function l(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?n(h.value):s(h.value).then(a,l)}u((r=r.apply(t,[])).next())})}function uUe(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),t.stack.push({value:e,dispose:r,async:i})}return e}var yne=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function cUe(t){function e(n){t.error=t.hasError?new yne(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}var i,r=0;function s(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(n).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}const bne="modulepreload",vne=function(t){return"/datascan/"+t},nF={},le=function(e,i,r){let s=Promise.resolve();if(i&&i.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(i.map(u=>{if(u=vne(u),u in nF)return;nF[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":bne,h||(m.as="script"),m.crossOrigin="",m.href=u,a&&m.setAttribute("nonce",a),document.head.appendChild(m),h)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})},n9=t=>{let e=class extends t{clone(){const i=Gs(this);x8(i,"unable to clone instance of non-accessor class");const r=i.metadata,s=i.store,n={},o=new Map;for(const l in r){const u=r[l],h=s?.originOf(l),p=u.clonable;if(u.readOnly||p===!1||h!==lt.USER&&h!==lt.DEFAULTS&&h!==lt.WEB_MAP&&h!==lt.WEB_SCENE)continue;const m=this[l];let y=null;y=typeof p=="function"?p(m):p==="reference"?m:Uk(m),m!=null&&y==null||(h===lt.DEFAULTS?o.set(l,y):n[l]=y)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const l=Gs(a)?.store;if(l)for(const[u,h]of o)l.set(u,h,lt.DEFAULTS)}return a}};return e=c([R("esri.core.Clonable")],e),e};let ov=class extends n9(Oe){};ov=c([R("esri.core.Clonable")],ov),function(t){t.ClonableMixin=n9}(ov||(ov={}));const Fe=ov;let Md=class extends Fe{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Md.prototype,"row",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Md.prototype,"column",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Md.prototype,"rows",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Md.prototype,"columns",void 0),Md=c([R("esri.CameraLayout")],Md);const o9=Md,oF=new Float32Array(1);function pUe(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Ao(t,e,i){return Math.min(Math.max(t,e),i)}function fUe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function av(t,e,i){return t+(e-t)*i}function mUe(t,e,i,r,s){return av(r,s,(t-e)/(i-e))}function Qw(t){return t*Math.PI/180}function a9(t){return 180*t/Math.PI}function gUe(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function yUe(t){return Math.acos(Ao(t,-1,1))}function wne(t){return Math.asin(Ao(t,-1,1))}function xa(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function l9(t,e,i=1e-6){return!xa(t,e,i)&&t>e}function rR(t,e,i=1e-6){return!xa(t,e,i)&&t<e}function _ne(t,e,i=1e-6){return xa(t,e,i)||t>e}const JS=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function sR(t){return JS.setFloat64(0,t),JS.getBigInt64(0)}function xne(t){return JS.setBigInt64(0,t),JS.getFloat64(0)}const hx=BigInt("1000000"),Sne=u9(1);function u9(t){const e=sR(t=Math.abs(t)),i=xne(e<=hx?hx:e-hx);return Math.abs(t-i)}function bUe(t,e,i=Sne){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&u9(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=sR(t),s=sR(e);return r<0!=s<0?!1:!((r<s?s-r:r-s)>hx)}function vUe(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(r>.01*i)return!1}else if(r/(s+n)>i)return!1;return!0}function wUe(t){return c9(Math.max(-aF,Math.min(t,aF)))}function c9(t){return oF[0]=t,oF[0]}function _Ue(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(xa(e,1)&&xa(i,1)&&xa(r,1))}const aF=c9(34028234663852886e22);function xUe(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let sD=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return lF(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return Ao(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+nR(this.range,e-i,r)}minimalMonotonic(e,i,r){return lF(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(s)?r:s}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function lF(t,e,i,r,s=0,n=!1){return(r-=s)<e?r+=nR(t,e-r):r>i&&(r-=nR(t,r-i)),n&&r===i&&(r=e),r+s}function nR(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const EUe=new sD(0,2*Math.PI),CUe=new sD(-Math.PI,Math.PI),Ene=new sD(0,360);let Cne=class h9{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new h9;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,B(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||r?.origin===i?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??lt.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>this._values.get(r)?.origin===e)}set(e,i,r){if((r=this._normalizeOrigin(r))===lt.DEFAULTS){const s=this._values.get(e);if(s?.origin!=null&&s.origin>r)return}this._values.set(e,new Tne(i,r))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===lt.DEFAULTS?e:lt.USER}},Tne=class{constructor(e,i){this.value=e,this.origin=i}};function d9(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),lt.DEFAULTS)});const r=t.metadata;Object.keys(r).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),lt.DEFAULTS)})}function Mne(t,e,i){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&zN(r,i))return!0}else for(const s of r)if(s===e||s.includes(".")&&s.indexOf(e)===0&&zN(s,i))return!0;return!1}function kne(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Rne(t,e,i,r,s){let n=eR(e[i],s);kne(n)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))n=eR(e[o],s),Mne(n,i,r)&&(t[o]=!0)}function Ine(t,e,i,r){const s=i.metadata,n=Wse(s[e],r),o=n?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const p9={origin:"service"};function f9(t,e,i=p9){if(!e||typeof e!="object")return;const r=Gs(t),s=r.metadata,n={};for(const o of Object.getOwnPropertyNames(e))Rne(n,s,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=eR(s[o],i).read,l=a?.source;let u;u=l&&typeof l=="string"?Yw(e,l):e[o],a?.reader&&(u=a.reader.call(t,u,e,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Ine(t,o,r,i)}r.setDefaultOrigin("user")}function m9(t,e,i,r=p9){const s={...r,messages:[]};i(s),s.messages?.forEach(n=>{n.type!=="warning"||t.loaded?r?.messages&&r.messages.push(n):t.loadWarnings.push(n)})}function $ne(t,e,i,r,s){const n={};return e.write?.writer?.call(t,r,n,i,s),n}function g9(t,e,i,r,s,n){if(!r?.write)return!1;const o=ya(t,i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,n??void 0);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&n?.layerContainerType&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new W("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&n?.messages?n.messages.push(a):a&&!n&&he.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===lt.DEFAULTS)&&Ane(t,i,n,r,o)||!s.ignoreOrigin&&n?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Ju(n.origin))}function Ane(t,e,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(t,e,i??void 0);return VC(o,s)}return!1}return n===s}function One(t,e,i,r){const s=Gs(t),n=s.metadata,o=Q8(n[e],r);return!!o&&g9(t,s,e,o,i,r)}function y9(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return ox(e,t.toJSON(i));const r=Gs(t),s=r.metadata;for(const n in s){const o=Q8(s[n],i);if(!g9(t,r,n,o,void 0,i))continue;const a=ya(t,n),l=$ne(t,o,o.write&&typeof o.write.target=="string"?o.write.target:n,a,i);Object.keys(l).length>0&&(e=ox(e,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>ox(e,l,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:t,propName:n,oldOrigin:sne(r.store.originOf(n)),newOrigin:i.origin}))}return e}const b9=t=>{let e=class extends t{constructor(...i){super(...i);const r=Gs(this),s=r.store,n=new Cne;r.store=n,d9(r,s,n)}read(i,r){f9(this,i,r)}write(i,r){return y9(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Pne.call(this,i,r)}};return e=c([R("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Pne(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let lv=class extends b9(Oe){};lv=c([R("esri.core.JSONSupport")],lv),function(t){t.JSONSupportMixin=b9}(lv||(lv={}));const X=lv;let nD=class{constructor(e,i,r,s,n,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Ii=new nD(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Tl=new nD(3396190,1/169.8944472236118,23e4,6e4,.111),Dh=new nD(1737400,0,0,0,0);function cw(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const Dne=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Lne={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function uF(t){const e=t?.match(Dne);if(!e)return null;const[,i,r,s]=e;if(!i)return null;let n=null,o=null,a=null;const{devext:l,qaext:u,www:h}=Lne;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function v9(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function w9(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function _9(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function Nne(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const Fne=()=>he.getLogger("esri.core.urlUtils"),By=Ct.request,cF="esri/config: esriConfig.request.proxyUrl is not set.",x9=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,S9=/^\s*http:/i,jne=/^\s*https:/i,zne=/^\s*file:/i,E9=/:\d+$/,Vne=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Une=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Hne=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Rp=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Une);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Hne),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const L1={},Bne=new Rp(Ct.applicationUrl);let fs=Bne;const Gne=Wne();let oD=Gne;const aD=()=>fs,IUe=()=>oD;function Wne(){const t=fs.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${fs.scheme}://${fs.host}${fs.port!=null?`:${fs.port}`:""}`}${e}`}function Sr(t){if(!t)return null;const e={path:null,query:null},i=new Rp(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=lD(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function lD(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function hw(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=e?.[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>cw(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):cw(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function C9(t=!1){let e,i=By.proxyUrl;if(typeof t=="string"){e=R9(t);const r=ZC(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw Fne().warn(cF),new W("urlUtils:proxy-not-set",cF);return e&&aR()&&(i=pD(i)),Sr(i)}function $Ue(t,e=!1){const i=ZC(t);let r,s;if(i){const n=uD(i.proxyUrl);r=n.path,s=n.query?lD(n.query):null}else if(e){const n=C9(t);r=n.path,s=n.query}if(r){const n=Sr(t);t=r+"?"+n.path;const o=hw({...s,...n.query});o&&(t=`${t}?${o}`)}return t}const Eb={path:"",query:""};function uD(t){const e=t.indexOf("?");return e!==-1?(Eb.path=t.slice(0,e),Eb.query=t.slice(e+1)):(Eb.path=t,Eb.query=null),Eb}function T9(t){return t=(t=XS(t=soe(t=uD(t).path),!0)).toLowerCase()}function qne(t){const e={proxyUrl:t.proxyUrl,urlPrefix:T9(t.urlPrefix)},i=By.proxyRules,r=e.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,e),s}function ZC(t){const e=By.proxyRules,i=T9(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function Yne(t,e){if(!t||!e)return!1;t=ZS(t),e=ZS(e);const i=uF(t),r=uF(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Ml(t,e,!0)}function M9(t,e){return t=ZS(t),e=ZS(e),XS(t)===XS(e)}function ZS(t){const e=(t=Sa(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function oR(t,e=By.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Ml(t,e,i=!1){if(!t||!e)return!1;const r=uR(t),s=uR(e);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function cD(t){if(typeof t=="string"){if(!vn(t))return!0;t=uR(t)}if(Ml(t,fs))return!0;const e=By.trustedServers||[];for(let i=0;i<e.length;i++){const r=Jne(e[i]);for(let s=0;s<r.length;s++)if(Ml(t,r[s]))return!0}return!1}function Jne(t){return L1[t]||(dD(t)||Pl(t)?L1[t]=[new Rp(qn(t))]:L1[t]=[new Rp(`http://${t}`),new Rp(`https://${t}`)]),L1[t]}function qn(t,e=oD,i){return Pl(t)?i?.preserveProtocolRelative?t:fs.scheme==="http"&&fs.authority===Kn(t).slice(2)?`http:${t}`:`https:${t}`:dD(t)?t:Yp(t[0]==="/"?ioe(e):e,t)}function hD(t,e=oD,i){if(t==null||!vn(t))return t;const r=Sa(t),s=r.toLowerCase(),n=Sa(e).toLowerCase().replace(/\/+$/,""),o=i?Sa(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return t;const a=(p,m,y)=>(y=p.indexOf(m,y))===-1?p.length:y;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(u===-1||o&&u<o.length)return t;t=r.slice(u);const h=n.slice(u-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let p=0;p<h;p++)t=`../${t}`;else t=`./${t}`;return t}function Sa(t){return t=aoe(t=ooe(t=noe(t=qn(t=t.trim()))))}function Yp(...t){const e=t.filter(Ah);if(!e?.length)return;const i=[];if(vn(e[0])){const s=e[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),eoe(e[0])&&(i[0]+="/"),e[0]=s.slice(n+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function Kn(t,e=!1){if(t==null||Gy(t)||nc(t))return null;let i=t.indexOf("://");if(i===-1&&Pl(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=XS(t,!0)),t}function vn(t){return Pl(t)||dD(t)}function Gy(t){return t!=null&&t.slice(0,5)==="blob:"}function nc(t){return t!=null&&t.slice(0,5)==="data:"}function Zne(t){const e=Jp(t);return e?.isBase64?_9(e.data):null}function AUe(t){return Nne(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Xne=/^data:(.*?)(;base64)?,(.*)$/;function Jp(t){const e=t.match(Xne);if(!e)return null;const[,i,r,s]=e;return{mediaType:i,isBase64:!!r,data:s}}function k9(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function Kne(t){return(await fetch(t)).blob()}function OUe(t){const e=Zne(t);if(!e)return null;const i=Jp(t);return new Blob([e],{type:i.mediaType})}function Pl(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function dD(t){return t!=null&&x9.test(t)}function R9(t){return t!=null&&jne.test(t)||fs.scheme==="https"&&Pl(t)}function Qne(t){return t!=null&&S9.test(t)||fs.scheme==="http"&&Pl(t)}function eoe(t){return t!=null&&zne.test(t)}function pD(t){return Pl(t)?`https:${t}`:t.replace(S9,"https:")}function toe(){return fs.scheme==="http"}function aR(){return fs.scheme==="https"}function XS(t,e=!1){return Pl(t)?t.slice(2):(t=t.replace(x9,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function ioe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function roe(t){let e=0;if(vn(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function PUe(t,e){if(!t)return"";const i=Sr(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!e?.length)return r;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(s,"")}function soe(t){return t.endsWith("/")?t:`${t}/`}function I9(t){return t.replace(/\/+$/,"")}function noe(t){if(/^https?:\/\//i.test(t)){const e=uD(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function ooe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function aoe(t){const e=By.httpsDomains;if(!Qne(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),E9.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return toe()&&r===fs.authority&&!Vne.test(t)||(aR()&&r===fs.authority||e&&e.some(s=>r===s||r.endsWith(`.${s}`))||aR()&&!ZC(t))&&(t=pD(t)),t}function lR(t,e,i){if(!(e&&i&&t&&vn(t)))return t;const r=t.indexOf("//"),s=t.indexOf("/",r+2),n=t.indexOf(":",r+2),o=Math.min(s<0?t.length:s,n<0?t.length:n);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function $9(t,e){const i=new URL(t);return i.host=e,i.port&&!E9.test(e)&&(i.port=""),i.toString()}function loe(t){return new URL(t).host}function uR(t){return typeof t=="string"?new Rp(qn(t)):(t.scheme||(t.scheme=fs.scheme),t)}function DUe(t){return uoe.test(t)}function A9(t,e){const i=Sr(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function O9(t,e,i){const r=Sr(t),s=r.query||{};return s[e]=String(i),`${r.path}?${hw(s)}`}function DM(t,e){if(!e)return t;const i=Sr(t),r=i.query||{};for(const[n,o]of Object.entries(e))o!=null&&(r[n]=o);const s=hw(r);return s?`${i.path}?${s}`:i.path}function P9(t){if(t==null)return null;const e=t.match(D9);return e?e[2]:null}function hF(t){if(t==null)return null;const e=t.match(D9);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function LUe(t){return typeof t=="string"?Jp(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Jp(r.result)),r.onerror=s=>i(s)})}const D9=/([^.]*)\.([^/]*)$/,uoe=/(^data:image\/svg|\.svg$)/i,L9="20250703",N9="63f0efdfdeb50d4d8971fb571612e608dc64a1ca";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const F9="4.33";let mt,fD=F9;fD="4.33.8";function NUe(t){mt=t}function FUe(t){const e=mt?.findCredential(t);return e?.token?O9(t,"token",e.token):t}J("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),J("host-webworker");function pf(t,e){const i=e?.url?.path;if(t&&i&&(t=qn(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=hD(t,e.portalItem.itemUrl);r!=null&&coe.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=cR(t,e?.portal))&&KC.test(t)?mD(t):t}function Zp(t,e,i=py.YES){if((t=t&&KC.test(t)?U9(t):t)==null)return t;!vn(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=qn(t);if(e){const s=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(s){const n=cR(s,e.portal),o=cR(r,e.portal);r=hD(o,n,n),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=V9(r,e?.portal),vn(r)&&(r=Sa(r)),e?.resources&&e?.portalItem&&!vn(r)&&!nc(r)&&i===py.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function XC(t,e,i){return pf(t,i)}function Xp(t,e,i,r){const s=Zp(t,r);s!==void 0&&(e[i]=s)}const KC=/\/items\/([^/]+)\/resources\/(.*)/,coe=/^\.\/resources\//;function j9(t){return(t?.match(KC)??null)?.[1]??null}function z9(t){const e=t?.match(KC)??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=hF(i);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=hF(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function V9(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?lR(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function cR(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=aD();return Ml(r,`${r.scheme}://${i}`)?lR(t,e.portalHostname,i):lR(t,i,e.portalHostname)}function mD(t){if(!t)return t||null;let e=t;return e&&mt&&!mt.findCredential(e)&&(e=w9(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function U9(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&mt&&!mt.findCredential(e)&&(e=w9(e)),e}var py;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(py||(py={}));const hoe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return py},ensureMainOnlineDomain:V9,fromCDNUrl:U9,fromJSON:pf,itemIdFromResourceUrl:j9,prefixAndFilenameFromResourceUrl:z9,read:XC,toCDNUrl:mD,toJSON:Zp,write:Xp},Symbol.toStringTag,{value:"Module"})),H9={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},B9=Object.values(H9),G9=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${B9.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),doe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${B9.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),poe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function jUe(t){return G9.test(t)}function Dl(t){if(t==null)return null;const e=Sr(t),i=e?.path.match(G9)||e?.path.match(doe);if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:gD(a!==-1?s.slice(a+1):s),serverType:H9[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function foe(t){const e=Sr(t).path.match(poe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function gD(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function moe(t,e){const i=[];if(t){const r=Dl(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=gD(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function KS(t){let e=Kn(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function goe(t,e){return t&&I9(A9(t,e))}function yoe(t){let{url:e}=t;if(!e)return{url:e};e=A9(e,t.logger);const i=Sr(e),r=Dl(i.path);let s;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(s=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const n=foe(i.path);n!=null&&(e=n.serviceUrl,s=n.sublayerId)}return{url:I9(e),layerId:s}}function boe(t,e,i,r,s){Xp(e,r,"url",s),r.url&&t.layerId!=null&&(r.url=Yp(r.url,i,t.layerId.toString()))}function zUe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),n=e.includes("/wmsserver");return i&&(r||s||n)}function VUe(t){if(!t)return!1;const e=new Rp(qn(t)),i=e.authority?.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const voe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function yD(t){if(!bD(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=Ct.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:Ct.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?Ct.apiKey:null}function hR(){return Ct.apiKey!=null||Ct.apiKeys.basemapStyles!=null}function woe(t,e){return e?bD(t):yD(t)!=null}function bD(t){const e=Kn(t,!0);return!!e&&!voe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function _oe(t,e,i=!1,r){return new Promise((s,n)=>{if($o(r))return void n(dF());let o=()=>{u(),n(new Error(`Unable to load ${e}`))},a=()=>{const h=t;u(),s(h)},l=()=>{if(!t)return;const h=t;u(),h.src="",n(dF())};const u=()=>{J("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r?.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r?.addEventListener("abort",l),J("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function dF(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const W9="Timeout exceeded";function xoe(){return new Error(W9)}function UUe(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===W9}function Soe(t){Ct.request.crossOriginNoCorsDomains||(Ct.request.crossOriginNoCorsDomains={});const e=Ct.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Kn(i)??""]=0:(e[Kn("http://"+i)??""]=0,e[Kn("https://"+i)??""]=0)}function Eoe(t){const e=Ct.request.crossOriginNoCorsDomains;if(e){let i=Kn(t);if(i)return i=i.toLowerCase(),!Ml(i,aD())&&e[i]<Date.now()-36e5}return!1}async function Coe(t){const e=Sr(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Ct.request.crossOriginNoCorsDomains,r=Kn(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const dR=new Map;function Toe(t,e){const i=e?.preferredHost;if(!i||Ml(t,`https://${i}`,!0))return;const r=Dl(t);if(!r||r.serverType!=="FeatureServer"||v9(t))return;const s=r.url.path.toLowerCase();dR.has(s)||dR.set(s,i)}function pF(t){const e=Dl(t)?.url.path.toLowerCase();if(!e)return t;const i=dR.get(e);return i?$9(t,i):t}async function Tt(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=lD(e.query.toString().replaceAll("+"," ")));const i=nc(t),r=Gy(t);r||i||(t=Sa(t));const s={url:t,requestOptions:{...e}},n=y=>({data:y,getAllHeaders:fy,getHeader:fy,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=oR(t,So.internalInterceptors);if(o){const y=await mF(o,s);if(y!=null)return n(y)}let a=oR(t);if(a){const y=await mF(a,s);if(y!=null)return n(y);a.after||a.error||(a=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(J("host-webworker")||J("host-node")))throw Ea("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw Ea("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw Ea("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await $oe(),QS)return QS.execute(t,e);const l=new AbortController,u=Ta(e,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:So.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=e.useRequestQueue?Loe(h):fR(h),m=await p.finally(()=>u?.remove());return a?.after?.(m),m}let QS,q9=!1;const So=Ct.request,Y9="FormData"in globalThis,Moe=new Set([499,498,403,401]),koe=new Set(["COM_0056","COM_0057","SB_0008"]),Roe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],fy=()=>null,eE=Symbol();function Ioe(t){const e=Kn(t);e&&!Tt._corsServers.includes(e)&&Tt._corsServers.push(e)}function fF(t){const e=Kn(t);return!e||e.endsWith(".arcgis.com")||Tt._corsServers.includes(e)||cD(e)}function Ea(t,e,i,r){let s;const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:fy,getHeader:fy,ssl:!1};if(e instanceof W)return e.details?(e.details=B(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=n,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(h=>r.headers.get(h)),l=r?.status,u=e.message;u&&(s=u),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,n.subCode=e.subcode,n.messageCode=e.messageCode,typeof e.details=="string"?(n.messages=[e.details],s??=e.details):(n.messages=e.details,s??=n.messages?.[0]),n.raw=eE in e?e[eE]:e}return s??="Error",Zr(e)?Qt():new W(t,s,n)}async function $oe(){J("host-webworker")&&(!QS&&globalThis.invokeStaticMessage?QS=await le(()=>import("./request-DiX-H442.js"),__vite__mapDeps([0,1,2])):q9=!0)}async function pR(){mt||await le(()=>import("./IdentityManager-B5041ckN.js"),__vite__mapDeps([3,4,1,2]))}async function Aoe(t){const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,s=i.body;let n=null,o=null;if(Y9&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:So.priority,redirect:"follow",signal:r},(n||o)&&(t.fetchOptions.body=n||o),(q9||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||n?.get("token")),!t.hasToken){const a=yD(e);a&&(i.query??={},i.query.token=a,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!J9(e)&&!$o(r)){let a;i.authMode==="immediate"?(await pR(),a=await mt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await pR(),a=await mt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):mt&&(a=mt.findCredential(e)),a&&(t.credential=a,t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function J9(t){return Roe.some(e=>e.test(t))}async function Ooe(t){let e=t.params.url,i=pF(e);const r=t.params.requestOptions,s=t.fetchOptions??{},n=Gy(e)||nc(e),o=r.responseType||"json",a=n?0:r.timeout!=null?r.timeout:So.timeout;let l=!1;if(!n){t.useSSL&&(e=pD(e));let y={...r.query};t.credentialToken&&(y.token=t.credentialToken);let v=hw(y);J("esri-url-encodes-apostrophe")&&(v=v.replaceAll("'","%27"));const w=i.length+1+v.length;let S;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||w>So.maxUrlLength;const E=r.useProxy||!!ZC(e);if(E){const I=C9(e);S=I.path,!l&&S.length+1+w>So.maxUrlLength&&(l=!0),I.query&&(y={...I.query,...y})}if(s.method==="HEAD"&&(l||E)){if(l)throw w>So.maxUrlLength?Ea("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Ea("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(E)throw Ea("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(s.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=DM(e,y):(s.body=hw(y),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=DM(e,y),E&&(t.useProxy=!0,e=`${S}?${e}`),y.token&&Y9&&s.body instanceof FormData&&!v9(e)&&s.body.set("token",y.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:Ml(e,aD())||(cD(e)||mt&&mt.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(s.credentials="include",Eoe(e)&&await Coe(l?DM(e,y):e)),i=pF(e)}let u,h,p=0,m=!1;a>0&&(p=setTimeout(()=>{m=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")h=s,h.url=i,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||l||Poe(r.headers)||!n&&!t.useProxy&&So.proxyUrl&&!fF(e)){if(Tt._beforeFetch&&await Tt._beforeFetch(e,s),u=await fetch(i,s),Tt._afterFetch&&await Tt._afterFetch(u),t.useProxy||Ioe(e),r.responseType==="native")h=u;else if(s.method!=="HEAD")if(u.ok){switch(o){case"array-buffer":h=await u.arrayBuffer();break;case"blob":case"image":h=await u.blob();break;default:h=await u.text()}if(p&&(clearTimeout(p),p=0),o==="json"||o==="xml"||o==="document")if(h)switch(o){case"json":h=JSON.parse(h);break;case"xml":h=gF(h,"application/xml");break;case"document":h=gF(h,"text/html")}else h=null;if(h){if(o==="array-buffer"||o==="blob"){const y=u.headers.get("Content-Type");if(y&&/application\/json|text\/plain/i.test(y)&&h[o==="blob"?"size":"byteLength"]<=750)try{const v=await new Response(h).json();v.error&&(h=v)}catch{}}o==="image"&&h instanceof Blob&&(h=await yF(URL.createObjectURL(h),t,!0))}}else{h=await u.text();try{h=JSON.parse(h)}catch{}}}else h=await yF(i,t)}catch(y){if(y.name==="AbortError")throw m?xoe():Qt("Request canceled");if(!(!u&&y instanceof TypeError&&So.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||fF(e))throw y;t.redoRequest=!0,qne({proxyUrl:So.proxyUrl,urlPrefix:Kn(e)??""})}finally{p&&clearTimeout(p)}return[u,h]}async function mF(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(s){i=Ea("request:interceptor",s,e)}if((r instanceof Error||r instanceof W)&&(i=Ea("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function Poe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function gF(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}Tt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Tt._beforeFetch=void 0,Tt._afterFetch=void 0;const Doe=new Map;async function Loe(t){const e=Foe(t.params.url);if(!e)return fR(t);const{QueueProcessor:i}=await le(()=>import("./QueueProcessor-m1jc1SO6.js"),__vite__mapDeps([5,1,2]));return df(Doe,e.origin,()=>{const s=e.isHosted?J("request-queue-concurrency-hosted"):J("request-queue-concurrency-non-hosted");return new i({concurrency:s,process:n=>{if($o(n.params.requestOptions))throw Ea("",Qt("Request canceled"),n.params);return fR(n)}})}).push(t)}async function fR(t){let e,i;await Aoe(t);try{do[e,i]=await Ooe(t);while(!await Noe(t,e,i))}catch(n){const o=Ea("request:server",n,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!cD(r)){const n=Kn(r,!0);n&&So.trustedServers.push(n)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Soe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&Toe(r,i);const s=t.credential;if(s&&mt){let o=mt.findServerInfo(s.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=mt.findCredential(o,s.userId);a&&mt._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):fy,getHeader:e?n=>e.headers.get(n):fy,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function Noe(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[eE]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[eE]=i,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o?.toUpperCase());const l=r.authMode;if(n===403&&(a===4||s.message?.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&Moe.has(n)&&!J9(t.params.url)&&(n!==403||(!o||!koe.has(o))&&(a==null||a===2&&t.credentialToken))){await pR();try{const u=await mt.getCredential(t.params.url,{error:Ea("request:server",s,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=u,t.credentialToken=u.token,t.useSSL=t.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=u}}if(s)throw s;return!0}function yF(t,e,i=!1){const r=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=So.priority,s.src=t,_oe(s,t,i,r)}function Foe(t){let e,i;return typeof t=="string"?(e=Kn(t,!0),i=KS(t)):(e=t.origin,i=KS(t.toString())),e==null?null:{origin:e,isHosted:i}}function Li(t){if(!Ct.assetsPath)throw he.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new W("assets:path-not-set","config.assetsPath is not set");return Yp(Ct.assetsPath,t)}let LM,H=null;function vD(){return!!H}function joe(){return!!J("esri-wasm")}function Z9(){return LM||(LM=le(()=>import("./pe-wasm-B87Q3u4k.js"),[]).then(({default:t})=>t({locateFile:e=>Li(`esri/geometry/support/${e}`)})).then(t=>{Q9(t)}),LM)}var mR,yi;(function(t){function e(n,o,a){H.ensureCache.prepare();const l=ap(a),u=a===l,h=H.ensureFloat64(l),p=H._pe_geog_to_proj(H.getPointer(n),o,h);return p&&ih(a,o,h,u),p}function i(n,o,a,l){switch(l){case yi.PE_TRANSFORM_P_TO_G:return r(n,o,a);case yi.PE_TRANSFORM_G_TO_P:return e(n,o,a)}return 0}function r(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){H.ensureCache.prepare();const u=ap(a),h=a===u,p=H.ensureFloat64(u),m=H._pe_proj_to_geog_center(H.getPointer(n),o,p,l);return m&&ih(a,o,p,h),m}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=s})(mR||(mR={})),function(t){function e(){t.PE_BUFFER_MAX=H.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=H.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=H.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=H.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=H.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=H.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=H.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=H.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=H.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=H.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=H.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=H.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=H.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=H.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=H.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=H.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=H.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=H.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=H.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=H.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=H.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=H.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=H.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=H.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=H.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=H.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=H.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=H.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=H.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=H.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=H.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=H.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(yi||(yi={}));let X9=null;var gR;(function(t){const e={},i={},r=y=>{const v=y.getType();switch(v){case yi.PE_TYPE_GEOGCS:y=H.castObject(y,H.PeGeogcs);break;case yi.PE_TYPE_PROJCS:y=H.castObject(y,H.PeProjcs);break;case yi.PE_TYPE_GEOGTRAN:y=H.castObject(y,H.PeGeogtran);break;default:v&yi.PE_TYPE_UNIT&&(y=H.castObject(y,H.PeUnit))}return y};function s(){H.PeFactory.prototype.initialize(null)}function n(y){return o(yi.PE_TYPE_COORDSYS,y)}function o(y,v){let w=null,S=e[y];if(S||(S={},e[y]=S),S.hasOwnProperty(String(v))&&(w=S[v],H.compare(w,H.NULL)&&(w=null)),!w){const E=H.PeFactory.prototype.factoryByType(y,v);H.compare(E,H.NULL)||(w=r(E),S[v]=w)}return w}function a(y,v){let w=null,S=i[y];if(S||(S={},i[y]=S),S.hasOwnProperty(v)&&(w=S[v],H.compare(w,H.NULL)&&(w=null)),!w){const E=H.PeFactory.prototype.fromString(y,v);H.compare(E,H.NULL)||(w=r(E),S[v]=w)}return w}function l(y){return o(yi.PE_TYPE_GEOGCS,y)}function u(y){return o(yi.PE_TYPE_GEOGTRAN,y)}function h(y){return H.PeFactory.prototype.getCode(y)}function p(y){return o(yi.PE_TYPE_PROJCS,y)}function m(y){return o(yi.PE_TYPE_UNIT,y)}t.initialize=s,t.coordsys=n,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=u,t.getCode=h,t.projcs=p,t.unit=m})(gR||(gR={}));let K9=null;var tE,yR,bR,vR,wR,_R,iE,xR,rE,sE,SR;function Q9(t){function e(n,o,a){n[o]=a(n[o])}H=t,yi.init(),tE.init(),iE.init(),rE.init(),sE.init(),X9=class extends H.PeDouble{constructor(n=NaN){super(n)}destroy(){H.destroy(this)}[Symbol.dispose](){this.destroy()}},K9=class extends H.PeGCSExtent{destroy(){H.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[H.PeAngunit,H.PeDatum,H.PeGeogcs,H.PeGeogtran,H.PeObject,H.PeParameter,H.PePrimem,H.PeProjcs,H.PeSpheroid,H.PeUnit];for(const n of i)e(n.prototype,"getName",o=>function(){return o.call(this,new Array(yi.PE_NAME_MAX))});for(const n of[H.PeGeogtran,H.PeProjcs])e(n.prototype,"getParameters",o=>function(){const a=new Array(yi.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const h=H.getValue(l,"*");a[u]=h?H.wrapPointer(h,H.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(H.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return ih(l,a,n.call(this),o),l}),e(H.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=H._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!H.compare(l,H.NULL)){a=[l];const u=this.getSteps();if(u>1){const h=H.getPointer(l);for(let p=1;p<u;p++)a.push(H.wrapPointer(h+o*p,H.PeGTlistExtendedGTs))}}return a}});const r=H._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!H.compare(l,H.NULL)){a=[l];const u=l.getNump();if(u>1){const h=H.getPointer(l);for(let p=1;p<u;p++)a.push(H.wrapPointer(h+r*p,H.PeHorizon))}}return o.set(n,a),a};e(H.PeProjcs.prototype,"horizonGcsGenerate",s),e(H.PeProjcs.prototype,"horizonPcsGenerate",s),H.PeObject.prototype.toString=function(n=yi.PE_STR_OPTS_NONE){H.ensureCache.prepare();const o=H.getPointer(this),a=H.ensureInt8(new Array(yi.PE_BUFFER_MAX));return H.UTF8ToString(H._pe_object_to_string_ext(o,n,a))},H.PeGeogcs.prototype.destroy=function(){this.Delete(),aa(this),this.ptr=0},H.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},H.PeProjcs.prototype.destroy=function(){this.Delete(),aa(this),this.ptr=0},H.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function aa(t){if(!t)return;const e=H.getClass(t);if(!e)return;const i=H.getCache(e);if(!i)return;const r=H.getPointer(t);r&&delete i[r]}function N1(t,e){const i=[],r=new Array(e);for(let s=0;s<t;s++)i.push(H.ensureInt8(r));return i}function ap(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function ih(t,e,i,r=!1){if(r)for(let s=0;s<2*e;s++)t[s]=H.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=H.getValue(i,"double"),t[n][1]=H.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=H.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=H._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,a,l,u){let h=null;const p=new H.PeInteger(u);try{const m=H.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,p);if((u=p.val)&&(h=[m],u>1)){const y=H.getPointer(m);for(let v=1;v<u;v++)h.push(H.wrapPointer(y+e*v,H.PeGTlistExtendedEntry))}}finally{H.destroy(p)}return h}t.init=i,t.getGTlist=r})(tE||(tE={})),function(t){function e(i){if(i?.length){for(const r of i)aa(r),r.getEntries().forEach(s=>{aa(s);const n=s.getGeogtran();aa(n),n.getParameters().forEach(aa),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{aa(o);const a=o.getDatum();aa(a),aa(a.getSpheroid()),aa(o.getPrimem()),aa(o.getUnit())})});H.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(yR||(yR={})),function(t){function e(i,r,s,n,o){H.ensureCache.prepare();const a=ap(s),l=s===a,u=H.ensureFloat64(a);let h=0;n&&(h=H.ensureFloat64(n));const p=H._pe_geog_to_geog(H.getPointer(i),r,u,h,o);return p&&ih(s,r,u,l),p}t.geogToGeog=e}(bR||(bR={})),function(t){function e(n,o,a,l,u,h,p,m){H.PeLineType.prototype.geodesic_coordinate(n,o,a,l,u,h,p,m)}function i(n,o,a,l,u,h,p,m,y){H.PeLineType.prototype.geodetic_coordinate(n,o,a,l,u,h,p,m,y)}function r(n,o,a,l,u,h,p,m,y,v){H.PeLineType.prototype.geodetic_distance(n,o,a,l,u,h,p,m,y,v)}function s(n,o,a,l,u,h,p,m,y){H.PeLineType.prototype.great_elliptic_distance(n,o,a,l,u,h,p,m,y)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=r,t.greatEllipticDistance=s}(vR||(vR={})),function(t){function e(o,a){return H.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return H.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return H.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,l){return H.PeMath.prototype.q(o,a,l)}function n(o,a){return H.PeMath.prototype.q90(o,a)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=r,t.q=s,t.q90=n}(wR||(wR={})),function(t){const e=(u,h,p,m,y,v)=>{let w,S;switch(H.ensureCache.prepare(),u){case"dd":w=H._pe_geog_to_dd,S=yi.PE_DD_MAX;break;case"ddm":w=H._pe_geog_to_ddm,S=yi.PE_DDM_MAX;break;case"dms":w=H._pe_geog_to_dms,S=yi.PE_DMS_MAX}let E=0;h&&(E=H.getPointer(h));const I=ap(m),D=H.ensureFloat64(I),O=N1(p,S),A=w(E,p,D,y,H.ensureInt32(O));if(A)for(let z=0;z<p;z++)v[z]=H.UTF8ToString(O[z]);return A},i=(u,h,p,m,y)=>{let v;switch(H.ensureCache.prepare(),u){case"dd":v=H._pe_dd_to_geog;break;case"ddm":v=H._pe_ddm_to_geog;break;case"dms":v=H._pe_dms_to_geog}let w=0;h&&(w=H.getPointer(h));const S=m.map(O=>H.ensureString(O)),E=H.ensureInt32(S),I=H.ensureFloat64(new Array(2*p)),D=v(w,p,E,I);return D&&ih(y,p,I),D};function r(u,h,p,m,y){return e("dms",u,h,p,m,y)}function s(u,h,p,m){return i("dms",u,h,p,m)}function n(u,h,p,m,y){return e("ddm",u,h,p,m,y)}function o(u,h,p,m){return i("ddm",u,h,p,m)}function a(u,h,p,m,y){return e("dd",u,h,p,m,y)}function l(u,h,p,m){return i("dd",u,h,p,m)}t.geogToDms=r,t.dmsToGeog=s,t.geogToDdm=n,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(_R||(_R={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=H.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=H.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=H.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=H.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=H.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,a,l,u,h){H.ensureCache.prepare();let p=0;s&&(p=H.getPointer(s));const m=ap(o),y=H.ensureFloat64(m),v=N1(n,yi.PE_MGRS_MAX),w=H.ensureInt32(v),S=H._pe_geog_to_mgrs_extended(p,n,y,a,l,u,w);if(S)for(let E=0;E<n;E++)h[E]=H.UTF8ToString(v[E]);return S}function r(s,n,o,a,l){H.ensureCache.prepare();let u=0;s&&(u=H.getPointer(s));const h=o.map(v=>H.ensureString(v)),p=H.ensureInt32(h),m=H.ensureFloat64(new Array(2*n)),y=H._pe_mgrs_to_geog_extended(u,n,p,a,m);return y&&ih(l,n,m),y}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(iE||(iE={})),function(t){function e(r,s,n,o,a,l,u){H.ensureCache.prepare();let h=0;r&&(h=H.getPointer(r));const p=ap(n),m=H.ensureFloat64(p),y=N1(s,yi.PE_MGRS_MAX),v=H.ensureInt32(y),w=H._pe_geog_to_usng(h,s,m,o,a,l,v);if(w)for(let S=0;S<s;S++)u[S]=H.UTF8ToString(y[S]);return w}function i(r,s,n,o){H.ensureCache.prepare();let a=0;r&&(a=H.getPointer(r));const l=n.map(m=>H.ensureString(m)),u=H.ensureInt32(l),h=H.ensureFloat64(new Array(2*s)),p=H._pe_usng_to_geog(a,s,u,h);return p&&ih(o,s,h),p}t.geogToUsng=e,t.usngToGeog=i}(xR||(xR={})),function(t){function e(){t.PE_UTM_OPTS_NONE=H.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=H.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=H.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,a,l){H.ensureCache.prepare();let u=0;s&&(u=H.getPointer(s));const h=ap(o),p=H.ensureFloat64(h),m=N1(n,yi.PE_UTM_MAX),y=H.ensureInt32(m),v=H._pe_geog_to_utm(u,n,p,a,y);if(v)for(let w=0;w<n;w++)l[w]=H.UTF8ToString(m[w]);return v}function r(s,n,o,a,l){H.ensureCache.prepare();let u=0;s&&(u=H.getPointer(s));const h=o.map(v=>H.ensureString(v)),p=H.ensureInt32(h),m=H.ensureFloat64(new Array(2*n)),y=H._pe_utm_to_geog(u,n,p,a,m);return y&&ih(l,n,m),y}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(rE||(rE={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=H.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=H.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=H.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=H.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(s)&&(a=e.get(s),a[n]&&(o=a[n])),o||(o=H.PePCSInfo.prototype.generate(s,n),a||(a=[],e.set(s,a)),a[n]=o),o}t.init=i,t.generate=r}(sE||(sE={})),function(t){function e(){return H.PeVersion.prototype.version_string()}t.versionString=e}(SR||(SR={}));const zoe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return mR},get PeDefs(){return yi},get PeDouble(){return X9},get PeFactory(){return gR},get PeGCSExtent(){return K9},get PeGTTransformations(){return bR},get PeGTlistExtended(){return tE},get PeGTlistExtendedEntry(){return yR},get PeLineType(){return vR},get PeMath(){return wR},get PeNotationDms(){return _R},get PeNotationMgrs(){return iE},get PeNotationUsng(){return xR},get PeNotationUtm(){return rE},get PePCSInfo(){return sE},get PeVersion(){return SR},_init:Q9,get _pe(){return H},isLoaded:vD,isSupported:joe,load:Z9},Symbol.toStringTag,{value:"Module"}));var Kp;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Kp||(Kp={}));let f;const k={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(f=2e3;f<=2045;f++)k[f]=0;for(f=2056;f<=2065;f++)k[f]=0;for(f=2067;f<=2135;f++)k[f]=0;for(f=2137;f<=2154;f++)k[f]=0;for(f=2161;f<=2170;f++)k[f]=0;for(f=2172;f<=2193;f++)k[f]=0;for(f=2195;f<=2198;f++)k[f]=0;for(f=2200;f<=2203;f++)k[f]=0;for(f=2205;f<=2217;f++)k[f]=0;for(f=2222;f<=2224;f++)k[f]=1;for(f=2225;f<=2250;f++)k[f]=2;for(f=2251;f<=2253;f++)k[f]=1;for(f=2257;f<=2264;f++)k[f]=2;for(f=2274;f<=2279;f++)k[f]=2;for(f=2280;f<=2282;f++)k[f]=1;for(f=2283;f<=2289;f++)k[f]=2;for(f=2290;f<=2292;f++)k[f]=0;for(f=2308;f<=2313;f++)k[f]=0;for(f=2315;f<=2491;f++)k[f]=0;for(f=2494;f<=2866;f++)k[f]=0;for(f=2867;f<=2869;f++)k[f]=1;for(f=2870;f<=2888;f++)k[f]=2;for(f=2891;f<=2895;f++)k[f]=2;for(f=2896;f<=2898;f++)k[f]=1;for(f=2902;f<=2908;f++)k[f]=2;for(f=2915;f<=2920;f++)k[f]=2;for(f=2921;f<=2923;f++)k[f]=1;for(f=2924;f<=2930;f++)k[f]=2;for(f=2931;f<=2962;f++)k[f]=0;for(f=2964;f<=2968;f++)k[f]=2;for(f=2969;f<=2973;f++)k[f]=0;for(f=2975;f<=2991;f++)k[f]=0;for(f=2995;f<=3051;f++)k[f]=0;for(f=3054;f<=3079;f++)k[f]=0;for(f=3081;f<=3088;f++)k[f]=0;for(f=3092;f<=3101;f++)k[f]=0;for(f=3106;f<=3138;f++)k[f]=0;for(f=3146;f<=3151;f++)k[f]=0;for(f=3153;f<=3166;f++)k[f]=0;for(f=3168;f<=3172;f++)k[f]=0;for(f=3174;f<=3203;f++)k[f]=0;for(f=3294;f<=3358;f++)k[f]=0;for(f=3367;f<=3403;f++)k[f]=0;for(f=3408;f<=3416;f++)k[f]=0;for(f=3417;f<=3438;f++)k[f]=2;for(f=3441;f<=3446;f++)k[f]=2;for(f=3447;f<=3450;f++)k[f]=0;for(f=3451;f<=3459;f++)k[f]=2;for(f=3460;f<=3478;f++)k[f]=0;for(f=3554;f<=3559;f++)k[f]=0;for(f=3560;f<=3570;f++)k[f]=2;for(f=3571;f<=3581;f++)k[f]=0;for(f=3594;f<=3597;f++)k[f]=0;for(f=3601;f<=3604;f++)k[f]=0;for(f=3637;f<=3639;f++)k[f]=0;for(f=3665;f<=3667;f++)k[f]=0;for(f=3693;f<=3695;f++)k[f]=0;for(f=3701;f<=3727;f++)k[f]=0;for(f=3728;f<=3739;f++)k[f]=2;for(f=3740;f<=3751;f++)k[f]=0;for(f=3753;f<=3760;f++)k[f]=2;for(f=3761;f<=3773;f++)k[f]=0;for(f=3775;f<=3777;f++)k[f]=0;for(f=3779;f<=3781;f++)k[f]=0;for(f=3783;f<=3785;f++)k[f]=0;for(f=3788;f<=3791;f++)k[f]=0;for(f=3797;f<=3802;f++)k[f]=0;for(f=3814;f<=3816;f++)k[f]=0;for(f=3825;f<=3829;f++)k[f]=0;for(f=3832;f<=3841;f++)k[f]=0;for(f=3844;f<=3852;f++)k[f]=0;for(f=3873;f<=3885;f++)k[f]=0;for(f=3890;f<=3893;f++)k[f]=0;for(f=3907;f<=3912;f++)k[f]=0;for(f=3942;f<=3950;f++)k[f]=0;for(f=3968;f<=3970;f++)k[f]=0;for(f=3973;f<=3976;f++)k[f]=0;for(f=3986;f<=3989;f++)k[f]=0;for(f=3994;f<=3997;f++)k[f]=0;for(f=4048;f<=4051;f++)k[f]=0;for(f=4056;f<=4063;f++)k[f]=0;for(f=4093;f<=4096;f++)k[f]=0;for(f=4390;f<=4398;f++)k[f]=0;for(f=4399;f<=4413;f++)k[f]=2;for(f=4418;f<=4433;f++)k[f]=2;for(f=4455;f<=4457;f++)k[f]=2;for(f=4484;f<=4489;f++)k[f]=0;for(f=4491;f<=4554;f++)k[f]=0;for(f=4568;f<=4589;f++)k[f]=0;for(f=4652;f<=4656;f++)k[f]=0;for(f=4766;f<=4800;f++)k[f]=0;for(f=5014;f<=5016;f++)k[f]=0;for(f=5069;f<=5072;f++)k[f]=0;for(f=5105;f<=5130;f++)k[f]=0;for(f=5167;f<=5188;f++)k[f]=0;for(f=5253;f<=5259;f++)k[f]=0;for(f=5269;f<=5275;f++)k[f]=0;for(f=5292;f<=5311;f++)k[f]=0;for(f=5329;f<=5331;f++)k[f]=0;for(f=5343;f<=5349;f++)k[f]=0;for(f=5355;f<=5357;f++)k[f]=0;for(f=5387;f<=5389;f++)k[f]=0;for(f=5459;f<=5463;f++)k[f]=0;for(f=5479;f<=5482;f++)k[f]=0;for(f=5518;f<=5520;f++)k[f]=0;for(f=5530;f<=5539;f++)k[f]=0;for(f=5550;f<=5552;f++)k[f]=0;for(f=5562;f<=5583;f++)k[f]=0;for(f=5623;f<=5625;f++)k[f]=2;for(f=5631;f<=5639;f++)k[f]=0;for(f=5649;f<=5653;f++)k[f]=0;for(f=5663;f<=5680;f++)k[f]=0;for(f=5682;f<=5685;f++)k[f]=0;for(f=5875;f<=5877;f++)k[f]=0;for(f=5896;f<=5899;f++)k[f]=0;for(f=5921;f<=5940;f++)k[f]=0;for(f=6050;f<=6125;f++)k[f]=0;for(f=6244;f<=6275;f++)k[f]=0;for(f=6328;f<=6348;f++)k[f]=0;for(f=6350;f<=6356;f++)k[f]=0;for(f=6366;f<=6372;f++)k[f]=0;for(f=6381;f<=6387;f++)k[f]=0;for(f=6393;f<=6404;f++)k[f]=0;for(f=6480;f<=6483;f++)k[f]=0;for(f=6511;f<=6514;f++)k[f]=0;for(f=6579;f<=6581;f++)k[f]=0;for(f=6619;f<=6624;f++)k[f]=0;for(f=6625;f<=6627;f++)k[f]=2;for(f=6628;f<=6632;f++)k[f]=0;for(f=6634;f<=6637;f++)k[f]=0;for(f=6669;f<=6692;f++)k[f]=0;for(f=6707;f<=6709;f++)k[f]=0;for(f=6720;f<=6723;f++)k[f]=0;for(f=6732;f<=6738;f++)k[f]=0;for(f=6931;f<=6933;f++)k[f]=0;for(f=6956;f<=6959;f++)k[f]=0;for(f=7005;f<=7007;f++)k[f]=0;for(f=7057;f<=7070;f++)k[f]=2;for(f=7074;f<=7082;f++)k[f]=0;for(f=7109;f<=7118;f++)k[f]=0;for(f=7119;f<=7127;f++)k[f]=1;for(f=7374;f<=7376;f++)k[f]=0;for(f=7528;f<=7586;f++)k[f]=0;for(f=7587;f<=7645;f++)k[f]=2;for(f=7692;f<=7696;f++)k[f]=0;for(f=7755;f<=7787;f++)k[f]=0;for(f=7791;f<=7795;f++)k[f]=0;for(f=7799;f<=7801;f++)k[f]=0;for(f=7803;f<=7805;f++)k[f]=0;for(f=7825;f<=7831;f++)k[f]=0;for(f=7845;f<=7859;f++)k[f]=0;for(f=8013;f<=8032;f++)k[f]=0;for(f=8065;f<=8068;f++)k[f]=1;for(f=8518;f<=8529;f++)k[f]=2;for(f=8533;f<=8536;f++)k[f]=2;for(f=8538;f<=8540;f++)k[f]=2;for(f=8677;f<=8679;f++)k[f]=0;for(f=8836;f<=8840;f++)k[f]=0;for(f=8857;f<=8859;f++)k[f]=0;for(f=8908;f<=8910;f++)k[f]=0;for(f=9154;f<=9159;f++)k[f]=0;for(f=9205;f<=9218;f++)k[f]=0;for(f=9271;f<=9273;f++)k[f]=0;for(f=9295;f<=9297;f++)k[f]=0;for(f=9356;f<=9360;f++)k[f]=0;for(f=9404;f<=9407;f++)k[f]=0;for(f=9476;f<=9482;f++)k[f]=0;for(f=9487;f<=9494;f++)k[f]=0;for(f=9697;f<=9699;f++)k[f]=0;for(f=9821;f<=9865;f++)k[f]=0;for(f=10285;f<=10291;f++)k[f]=0;for(f=10314;f<=10317;f++)k[f]=0;for(f=10448;f<=10465;f++)k[f]=0;for(f=10726;f<=10729;f++)k[f]=0;for(f=10731;f<=10733;f++)k[f]=0;for(f=11114;f<=11118;f++)k[f]=0;for(f=20004;f<=20032;f++)k[f]=0;for(f=20047;f<=20049;f++)k[f]=0;for(f=20062;f<=20092;f++)k[f]=0;for(f=20135;f<=20138;f++)k[f]=0;for(f=20248;f<=20258;f++)k[f]=0;for(f=20348;f<=20358;f++)k[f]=0;for(f=20436;f<=20440;f++)k[f]=0;for(f=20822;f<=20824;f++)k[f]=0;for(f=20904;f<=20932;f++)k[f]=0;for(f=20934;f<=20936;f++)k[f]=0;for(f=21004;f<=21032;f++)k[f]=0;for(f=21035;f<=21037;f++)k[f]=0;for(f=21095;f<=21097;f++)k[f]=0;for(f=21148;f<=21150;f++)k[f]=0;for(f=21207;f<=21264;f++)k[f]=0;for(f=21307;f<=21364;f++)k[f]=0;for(f=21413;f<=21423;f++)k[f]=0;for(f=21453;f<=21463;f++)k[f]=0;for(f=21473;f<=21483;f++)k[f]=0;for(f=21780;f<=21782;f++)k[f]=0;for(f=21891;f<=21894;f++)k[f]=0;for(f=21896;f<=21899;f++)k[f]=0;for(f=22171;f<=22177;f++)k[f]=0;for(f=22181;f<=22187;f++)k[f]=0;for(f=22191;f<=22197;f++)k[f]=0;for(f=22207;f<=22222;f++)k[f]=0;for(f=22229;f<=22232;f++)k[f]=0;for(f=22234;f<=22236;f++)k[f]=0;for(f=22243;f<=22250;f++)k[f]=0;for(f=22262;f<=22265;f++)k[f]=0;for(f=22307;f<=22322;f++)k[f]=0;for(f=22348;f<=22357;f++)k[f]=0;for(f=22407;f<=22422;f++)k[f]=0;for(f=22462;f<=22465;f++)k[f]=0;for(f=22521;f<=22525;f++)k[f]=0;for(f=22607;f<=22622;f++)k[f]=0;for(f=22641;f<=22646;f++)k[f]=0;for(f=22648;f<=22657;f++)k[f]=0;for(f=22707;f<=22722;f++)k[f]=0;for(f=22762;f<=22765;f++)k[f]=0;for(f=22807;f<=22822;f++)k[f]=0;for(f=22991;f<=22994;f++)k[f]=0;for(f=23028;f<=23038;f++)k[f]=0;for(f=23301;f<=23333;f++)k[f]=2;for(f=23830;f<=23853;f++)k[f]=0;for(f=23866;f<=23872;f++)k[f]=0;for(f=23877;f<=23884;f++)k[f]=0;for(f=23886;f<=23894;f++)k[f]=0;for(f=23946;f<=23948;f++)k[f]=0;for(f=24311;f<=24313;f++)k[f]=0;for(f=24342;f<=24347;f++)k[f]=0;for(f=24370;f<=24374;f++)k[f]=10;for(f=24375;f<=24381;f++)k[f]=0;for(f=24718;f<=24721;f++)k[f]=0;for(f=24817;f<=24821;f++)k[f]=0;for(f=24877;f<=24882;f++)k[f]=0;for(f=24891;f<=24893;f++)k[f]=0;for(f=25391;f<=25395;f++)k[f]=0;for(f=25828;f<=25838;f++)k[f]=0;for(f=26191;f<=26195;f++)k[f]=0;for(f=26391;f<=26393;f++)k[f]=0;for(f=26701;f<=26722;f++)k[f]=0;for(f=26729;f<=26799;f++)k[f]=2;for(f=26801;f<=26803;f++)k[f]=2;for(f=26811;f<=26813;f++)k[f]=2;for(f=26847;f<=26870;f++)k[f]=2;for(f=26891;f<=26899;f++)k[f]=0;for(f=26901;f<=26923;f++)k[f]=0;for(f=26929;f<=26946;f++)k[f]=0;for(f=26948;f<=26998;f++)k[f]=0;for(f=27037;f<=27040;f++)k[f]=0;for(f=27205;f<=27232;f++)k[f]=0;for(f=27258;f<=27260;f++)k[f]=0;for(f=27391;f<=27398;f++)k[f]=0;for(f=27561;f<=27564;f++)k[f]=0;for(f=27571;f<=27574;f++)k[f]=0;for(f=27581;f<=27584;f++)k[f]=0;for(f=27591;f<=27594;f++)k[f]=0;for(f=27700;f<=27707;f++)k[f]=0;for(f=28191;f<=28193;f++)k[f]=0;for(f=28348;f<=28358;f++)k[f]=0;for(f=28402;f<=28432;f++)k[f]=0;for(f=28462;f<=28492;f++)k[f]=0;for(f=29118;f<=29122;f++)k[f]=0;for(f=29168;f<=29172;f++)k[f]=0;for(f=29177;f<=29185;f++)k[f]=0;for(f=29187;f<=29195;f++)k[f]=0;for(f=29900;f<=29903;f++)k[f]=0;for(f=30161;f<=30179;f++)k[f]=0;for(f=30491;f<=30494;f++)k[f]=0;for(f=30729;f<=30732;f++)k[f]=0;for(f=31251;f<=31259;f++)k[f]=0;for(f=31265;f<=31268;f++)k[f]=0;for(f=31275;f<=31279;f++)k[f]=0;for(f=31281;f<=31297;f++)k[f]=0;for(f=31461;f<=31469;f++)k[f]=0;for(f=31491;f<=31495;f++)k[f]=0;for(f=31917;f<=31922;f++)k[f]=0;for(f=31965;f<=32e3;f++)k[f]=0;for(f=32001;f<=32003;f++)k[f]=2;for(f=32005;f<=32031;f++)k[f]=2;for(f=32033;f<=32060;f++)k[f]=2;for(f=32064;f<=32067;f++)k[f]=2;for(f=32074;f<=32077;f++)k[f]=2;for(f=32081;f<=32086;f++)k[f]=0;for(f=32107;f<=32130;f++)k[f]=0;for(f=32133;f<=32159;f++)k[f]=0;for(f=32164;f<=32167;f++)k[f]=2;for(f=32180;f<=32199;f++)k[f]=0;for(f=32201;f<=32260;f++)k[f]=0;for(f=32301;f<=32360;f++)k[f]=0;for(f=32401;f<=32460;f++)k[f]=0;for(f=32501;f<=32560;f++)k[f]=0;for(f=32601;f<=32662;f++)k[f]=0;for(f=32664;f<=32667;f++)k[f]=2;for(f=32701;f<=32761;f++)k[f]=0;for(f=53001;f<=53004;f++)k[f]=0;for(f=53008;f<=53019;f++)k[f]=0;for(f=53021;f<=53032;f++)k[f]=0;for(f=53034;f<=53037;f++)k[f]=0;for(f=53042;f<=53046;f++)k[f]=0;for(f=53074;f<=53080;f++)k[f]=0;for(f=54001;f<=54004;f++)k[f]=0;for(f=54008;f<=54019;f++)k[f]=0;for(f=54021;f<=54032;f++)k[f]=0;for(f=54034;f<=54037;f++)k[f]=0;for(f=54042;f<=54046;f++)k[f]=0;for(f=54048;f<=54053;f++)k[f]=0;for(f=54074;f<=54080;f++)k[f]=0;for(f=54090;f<=54096;f++)k[f]=0;for(f=54098;f<=54101;f++)k[f]=0;for(f=65161;f<=65163;f++)k[f]=0;for(f=102001;f<=102040;f++)k[f]=0;for(f=102042;f<=102063;f++)k[f]=0;for(f=102065;f<=102067;f++)k[f]=0;for(f=102070;f<=102117;f++)k[f]=0;for(f=102122;f<=102216;f++)k[f]=0;for(f=102221;f<=102377;f++)k[f]=0;for(f=102382;f<=102388;f++)k[f]=0;for(f=102389;f<=102398;f++)k[f]=2;for(f=102399;f<=102444;f++)k[f]=0;for(f=102445;f<=102447;f++)k[f]=2;for(f=102448;f<=102458;f++)k[f]=0;for(f=102459;f<=102468;f++)k[f]=2;for(f=102469;f<=102499;f++)k[f]=0;for(f=102500;f<=102519;f++)k[f]=1;for(f=102520;f<=102524;f++)k[f]=0;for(f=102525;f<=102529;f++)k[f]=2;for(f=102530;f<=102588;f++)k[f]=0;for(f=102590;f<=102598;f++)k[f]=0;for(f=102601;f<=102603;f++)k[f]=0;for(f=102605;f<=102628;f++)k[f]=0;for(f=102629;f<=102646;f++)k[f]=2;for(f=102648;f<=102700;f++)k[f]=2;for(f=102701;f<=102703;f++)k[f]=0;for(f=102707;f<=102730;f++)k[f]=2;for(f=102733;f<=102758;f++)k[f]=2;for(f=102767;f<=102900;f++)k[f]=0;for(f=102901;f<=102933;f++)k[f]=2;for(f=102934;f<=102950;f++)k[f]=13;for(f=102951;f<=102963;f++)k[f]=0;for(f=102965;f<=102969;f++)k[f]=0;for(f=102971;f<=102973;f++)k[f]=0;for(f=102975;f<=102989;f++)k[f]=0;for(f=102990;f<=102992;f++)k[f]=1;for(f=102997;f<=103002;f++)k[f]=0;for(f=103003;f<=103008;f++)k[f]=2;for(f=103009;f<=103011;f++)k[f]=0;for(f=103012;f<=103014;f++)k[f]=2;for(f=103019;f<=103021;f++)k[f]=0;for(f=103022;f<=103024;f++)k[f]=2;for(f=103029;f<=103031;f++)k[f]=0;for(f=103032;f<=103034;f++)k[f]=2;for(f=103065;f<=103068;f++)k[f]=0;for(f=103074;f<=103076;f++)k[f]=0;for(f=103077;f<=103079;f++)k[f]=1;for(f=103080;f<=103082;f++)k[f]=0;for(f=103083;f<=103085;f++)k[f]=2;for(f=103090;f<=103093;f++)k[f]=0;for(f=103097;f<=103099;f++)k[f]=0;for(f=103100;f<=103102;f++)k[f]=2;for(f=103107;f<=103109;f++)k[f]=0;for(f=103110;f<=103112;f++)k[f]=2;for(f=103113;f<=103116;f++)k[f]=0;for(f=103117;f<=103120;f++)k[f]=2;for(f=103153;f<=103157;f++)k[f]=0;for(f=103158;f<=103162;f++)k[f]=2;for(f=103163;f<=103165;f++)k[f]=0;for(f=103166;f<=103168;f++)k[f]=1;for(f=103169;f<=103171;f++)k[f]=2;for(f=103186;f<=103188;f++)k[f]=0;for(f=103189;f<=103191;f++)k[f]=2;for(f=103192;f<=103195;f++)k[f]=0;for(f=103196;f<=103199;f++)k[f]=2;for(f=103200;f<=103224;f++)k[f]=0;for(f=103225;f<=103227;f++)k[f]=1;for(f=103232;f<=103237;f++)k[f]=0;for(f=103238;f<=103243;f++)k[f]=2;for(f=103244;f<=103246;f++)k[f]=0;for(f=103247;f<=103249;f++)k[f]=2;for(f=103254;f<=103256;f++)k[f]=0;for(f=103257;f<=103259;f++)k[f]=2;for(f=103264;f<=103266;f++)k[f]=0;for(f=103267;f<=103269;f++)k[f]=2;for(f=103300;f<=103375;f++)k[f]=0;for(f=103381;f<=103383;f++)k[f]=0;for(f=103384;f<=103386;f++)k[f]=1;for(f=103387;f<=103389;f++)k[f]=0;for(f=103390;f<=103392;f++)k[f]=2;for(f=103397;f<=103399;f++)k[f]=0;for(f=103400;f<=103471;f++)k[f]=2;for(f=103476;f<=103478;f++)k[f]=0;for(f=103479;f<=103481;f++)k[f]=2;for(f=103486;f<=103488;f++)k[f]=0;for(f=103489;f<=103491;f++)k[f]=2;for(f=103492;f<=103495;f++)k[f]=0;for(f=103496;f<=103499;f++)k[f]=2;for(f=103528;f<=103543;f++)k[f]=0;for(f=103544;f<=103548;f++)k[f]=2;for(f=103549;f<=103551;f++)k[f]=0;for(f=103552;f<=103554;f++)k[f]=1;for(f=103555;f<=103557;f++)k[f]=2;for(f=103558;f<=103560;f++)k[f]=0;for(f=103571;f<=103573;f++)k[f]=0;for(f=103574;f<=103576;f++)k[f]=2;for(f=103577;f<=103580;f++)k[f]=0;for(f=103581;f<=103583;f++)k[f]=2;for(f=103595;f<=103694;f++)k[f]=0;for(f=103696;f<=103699;f++)k[f]=0;for(f=103700;f<=103793;f++)k[f]=2;for(f=103794;f<=103890;f++)k[f]=0;for(f=103891;f<=103896;f++)k[f]=2;for(f=103900;f<=103971;f++)k[f]=2;for(f=103972;f<=103977;f++)k[f]=0;for(f=112e3;f<=112101;f++)k[f]=0;const eG=[102100,102113,3857,3785,900913],Voe=[104905,104971],Uoe=[4326,...eG,...Voe],dw=[-20037508342788905e-9,20037508342788905e-9],ER=[-20037508342787e-6,20037508342787e-6],NM={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:dw,origin:ER,dx:1e-5},tG={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:dw,origin:ER,dx:1e-5},102100:NM,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:dw,origin:ER,dx:1e-5},3857:NM,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:NM};function Er(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Ll(t)&&Ll(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let s,n;return t.wkt2&&e.wkt2?(s=t.wkt2,n=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,n=e.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Us(t){const e=t?.wkid;return e!=null&&e>=2e3&&tG[e]||null}function nE(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function Wy(t){if(!Jn(t))return!1;const{wkid:e}=t;if(e)return k[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function Hoe(t){return!(iG(t)||rG(t))}function Qp(t){return t?.wkid===4326}function HUe(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function bF(t){return t?.wkid===Kp.CGCS2000}function Ll(t){const e=t?.wkid;return e!=null&&e>=2e3&&eG.includes(e)}function Boe(t){return t?.wkid===32662}function QC(t){return t===Kp.GCSMARS2000||t===Kp.GCSMARS2000_SPHERE}function iG(t){return QC(t?.wkid)}function eT(t){return t===Kp.GCSMOON2000}function rG(t){return eT(t?.wkid)}function Goe(t){const e=t?.wkid;return e!=null&&e>=2e3&&Uoe.includes(e)}function Jn(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const sG={wkid:4326,wkt:cf(tG[4326].wkTemplate,{Central_Meridian:"0.0"})},nG={wkid:102100,latestWkid:3857},Woe={wkid:32662};function wD(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const qoe=wD(Ii),_D=wD(Tl),xD=wD(Dh),Yoe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ii.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Joe=_D.wkt.toUpperCase(),Zoe=xD.wkt.toUpperCase();function Xoe(t){if(t!=null&&Jn(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(QC(e))return Tl;const r=i?.toUpperCase();if(i&&r===Joe)return Tl;if(eT(e)||r&&r===Zoe)return Dh}return Ii}function BUe(t){return QC(t)?Tl:eT(t)?Dh:Ii}function oE(t){return Er(t,qoe)}function Lh(t){return oE(t)||Er(t,_D)||Er(t,xD)}const oG=39.37,Koe=Ii.radius*Math.PI/200,aG=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,my=k,lG=/UNIT\[([^\]]+)]/i,Qoe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),eae=hr()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Wo=t=>t*t,mc=t=>t*t*t,pw={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Wo(.001)},"square-centimeters":{inBaseUnits:Wo(.01)},"square-decimeters":{inBaseUnits:Wo(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Wo(1e3)},"square-inches":{inBaseUnits:Wo(.0254)},"square-feet":{inBaseUnits:Wo(.3048)},"square-yards":{inBaseUnits:Wo(.9144)},"square-miles":{inBaseUnits:Wo(1609.344)},"square-nautical-miles":{inBaseUnits:Wo(1852)},"square-us-feet":{inBaseUnits:Wo(1200/3937)},acres:{inBaseUnits:.0015625*Wo(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*mc(.001)},"cubic-centimeters":{inBaseUnits:1e3*mc(.01)},"cubic-decimeters":{inBaseUnits:1e3*mc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*mc(1e3)},"cubic-inches":{inBaseUnits:1e3*mc(.0254)},"cubic-feet":{inBaseUnits:1e3*mc(.3048)},"cubic-yards":{inBaseUnits:1e3*mc(.9144)},"cubic-miles":{inBaseUnits:1e3*mc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},tae=(()=>{const t={};for(const e in pw)for(const i in pw[e].units)t[i]=e;return t})();function iae(t,e,i){return t*pw[i].units[e].inBaseUnits}function rae(t,e,i){return t/pw[i].units[e].inBaseUnits}const sae=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],nae=["metric","imperial"],uG=[...nae,...sae],oae=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function CR(t){const e=tae[t];if(!e)throw new Error("unknown type");return e}function vF(t,e=null){return e=e||CR(t),pw[e].baseUnit===t}function Fi(t,e,i){if(e===i)return t;const r=CR(e);if(r!==CR(i))throw new Error("incompatible units");const s=vF(e,r)?t:iae(t,e,r);return vF(i,r)?s:rae(s,i,r)}function GUe(t,e,i,r=!1){if(!r&&Wy(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=ff(e);return s!==i&&(t=s?Fi(t,s,i):Fi(t*=Do(e),"meters",i)),t}function WUe(t,e,i,r=!1){if(!r&&Wy(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=ff(i);return e!==s&&(t=s?Fi(t,e,s):Fi(t,e,"meters")/Do(i)),t}function aae(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function qUe(t){return aae(t)}function YUe(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function JUe(t,e){const i=Fi(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function ZUe(t,e){const i=Fi(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function XUe(t,e){const i=Fi(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function KUe(t,e){const i=Fi(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function QUe(t,e){const i=Fi(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function eHe(t,e){const i=Fi(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function lae(t,e,i){return Fi(t,e,"meters")/(i*Math.PI/180)}function SD(t){return eae.fromJSON(t.toLowerCase())||null}function aE(t){if(t!=null&&!Hoe(t))return 1;const e=Do(t);return e>1e5?1:e}function cG(t){return Do(t)>=Xoe(t).metersPerDegree?"meters":ff(t)}function Do(t,e=Ii.metersPerDegree){return uae(t,!0)??e}function uae(t,e=!1){const i=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let s=null;if(i){if(QC(i))return Tl.metersPerDegree;if(eT(i))return Dh.metersPerDegree;s=my.values[my[i]],!s&&e&&Qoe.has(i)&&(s=Koe)}else r&&(pG(r)?s=wF(aG.exec(r),s):dG(r)&&(s=wF(lG.exec(r),s)));return s}function tHe(t){return Wy(t)?1:Do(t)}function wF(t,e){return t?.[1]?hG(t[1]):e}function hG(t){return parseFloat(t.split(",")[1])}function ff(t){const e=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let r=null;if(e)r=my.units[my[e]];else if(i){const s=pG(i)?aG:dG(i)?lG:null;if(s){const n=s.exec(i);n?.[1]&&(r=hae(n[1]))}}return r!=null?SD(r):null}function iHe(t){const e=ff(t);return e!=null&&uG.includes(e)?e:null}function rHe(t){const e=cG(t);return e!=null&&uG.includes(e)?e:null}function sHe(t){const e=ff(t);return e==null?null:oae.get(e)}function dG(t){return/^GEOCCS/i.test(t)}function pG(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const cae=1e-7;function hae(t){let i=/[\\"']{1}([^\\"']+)/.exec(t)?.[1];if(!i||!SD(i)){const r=hG(t);i=null;const s=my.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<cae){i=my.units[n];break}}return i}function nHe(t){const e=ff(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const dae={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},pae={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},fae={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},mae=hr()(dae),gae=hr()(pae),oHe=hr()(fae);var Va,_l;let Te=(_l=class extends X{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Va.WebMercator;if(e?.wkid===4326)return Va.WGS84;const i=new Va;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Qp(this)}get isWebMercator(){return Ll(this)}get isGeographic(){return Wy(this)}get isWrappable(){return Goe(this)}get metersPerUnit(){return Do(this)}get unit(){return ff(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===Va.WGS84)return new Va(sG);if(this===Va.WebMercator)return new Va(nG);const e=new Va;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=B(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return i==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===i&&n.referenceServiceName===r:n.id===i}return Er(this,e)}toJSON(e){return this.write(void 0,e)}},Va=_l,_l.GCS_NAD_1927=null,_l.WGS84=null,_l.WebMercator=null,_l.PlateCarree=null,_l);c([d({readOnly:!0})],Te.prototype,"isWGS84",null),c([d({readOnly:!0})],Te.prototype,"isWebMercator",null),c([d({readOnly:!0})],Te.prototype,"isGeographic",null),c([d({readOnly:!0})],Te.prototype,"isWrappable",null),c([d({type:ht,json:{write:!0}})],Te.prototype,"latestWkid",void 0),c([d({readOnly:!0})],Te.prototype,"metersPerUnit",null),c([d({readOnly:!0})],Te.prototype,"unit",null),c([d({type:ht,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Te.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Te.prototype,"wkt",void 0),c([me("wkt"),me("web-scene","wkt")],Te.prototype,"writeWkt",null),c([d({type:String,json:{write:!1}})],Te.prototype,"wkt2",void 0),c([d({type:ht,json:{write:!0}})],Te.prototype,"vcsWkid",void 0),c([d({type:ht,json:{write:!0}})],Te.prototype,"latestVcsWkid",void 0),c([d()],Te.prototype,"imageCoordinateSystem",void 0),Te=Va=c([R("esri.geometry.SpatialReference")],Te),Te.prototype.toJSON.isDefaultToJSON=!0,Te.GCS_NAD_1927=Oe.freeze(new Te({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Te.WGS84=Oe.freeze(new Te(sG)),Te.WebMercator=Oe.freeze(new Te(nG)),Te.PlateCarree=Oe.freeze(new Te(Woe));let Dr=class extends X{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Te.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Te)return e;if(e!=null){const r=new Te;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};c([d()],Dr.prototype,"type",void 0),c([d({readOnly:!0})],Dr.prototype,"cache",null),c([d({readOnly:!0})],Dr.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Dr.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Dr.prototype,"hasZ",void 0),c([d({type:Te,json:{write:!0},value:Te.WGS84})],Dr.prototype,"spatialReference",void 0),c([de("spatialReference")],Dr.prototype,"readSpatialReference",null),Dr=c([R("esri.geometry.Geometry")],Dr);function gy(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new W("internal:mesh","Mesh geometries are not supported for this operation")}function yae(t){t.forEach(gy)}const bae=57.29577951308232,vae=.017453292519943;function _F(t){return t*bae}function xF(t){return t*vae}function lHe(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Ii.radius))}function TR(t){return t.wkid!=null||t.wkt!=null}const FM=[0,0];function lE(t,e,i,r,s){const n=t,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=e(n.x,n.y,FM,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=e(n.xmin,n.ymin,FM,r),[o.xmax,o.ymax]=e(n.xmax,n.ymax,FM,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let u;for(let h=0;h<a.length;h++){const p=a[h];u=[],l.push(u);for(let m=0;m<p.length;m++)u.push(e(p[m][0],p[m][1],[0,0],r)),p[m].length>2&&u[m].push(p[m][2]),p[m].length>3&&u[m].push(p[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let u=0;u<a.length;u++)l[u]=e(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return s}function dx(t,e){const i=t&&(TR(t)?t:t.spatialReference),r=e&&(TR(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Er(r,i)||Ll(r)&&Qp(i)||Ll(i)&&Qp(r))}function tT(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(TR(e)?e:e.spatialReference);return dx(i,r)?Er(i,r)?B(t):Ll(r)?lE(t,eg,Te.WebMercator,!1,B(t)):Qp(r)?lE(t,iT,Te.WGS84,!1,B(t)):null:null}function eg(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=xF(e);return i[0]=xF(t)*Ii.radius,i[1]=Ii.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function iT(t,e,i=[0,0],r=!1){if(t===dw[0])i[0]=-180;else if(t===dw[1])i[0]=180;else{const s=_F(t/Ii.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=_F(Math.PI/2-2*Math.atan(Math.exp(-e/Ii.radius))),i}function xh(t,e=!1,i=B(t)){return gy(t),gy(i),lE(t,eg,Te.WebMercator,e,i)}function tg(t,e=!1,i=B(t)){return gy(t),gy(i),lE(t,iT,Te.WGS84,e,i)}function fG(t,e){const i=t.x-e.x,r=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+s*s)}function wae(t){return mG(t,gG)?.[0]??null}function _ae(t){return mG(t,gG)?.[1]??null}function mG({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Ll(i))return iT(t,e,r);if(Wy(i))return r[0]=t,r[1]=e,r}return null}const gG=[0,0];var px;const jM=[0,0];function SF(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ze=px=class extends Dr{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Oe.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],i=n[2],r=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Te(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)he.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)he.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const a=eg(n.longitude,n.latitude,jM);t=a[0],e=a[1]}}}else SF(i)?(s=i,i=null):SF(r)&&(s=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?he.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&he.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return _ae(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",eg(i,t,jM)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return wae(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",eg(t,e,jM)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new px;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return px.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=t;let{x:l,y:u,spatialReference:h}=t;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[l,u]=eg(l,u),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[l,u]=iT(l,u),h=n}return e===l&&i===u&&r===o&&s===a&&n.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Us(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,s=2*r;let n;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s),this._set("x",e),this}distance(t){return fG(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],ze.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ze.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ze.prototype,"hasZ",null),c([d({type:Number})],ze.prototype,"latitude",null),c([d({type:Number})],ze.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),It(t=>isNaN(t)?t:Ns(t))],ze.prototype,"x",void 0),c([me("x")],ze.prototype,"writeX",null),c([de("x")],ze.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],ze.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ze.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ze.prototype,"m",void 0),ze=px=c([R("esri.geometry.Point")],ze),ze.prototype.toJSON.isDefaultToJSON=!0;let Ua=class extends Fe.ClonableMixin(X){constructor(...e){super(...e),this.position=new ze([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new o9}normalizeCtorArgs(e,i,r,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return e}writePosition(e,i,r,s){const n=e.clone();n.x=Ns(e.x||0),n.y=Ns(e.y||0),n.z=e.hasZ?Ns(e.z||0):e.z,i[r]=n.write({},s)}readPosition(e,i){const r=new ze;return r.read(e,i),r.x=Ns(r.x||0),r.y=Ns(r.y||0),r.z=r.hasZ?Ns(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};c([d({type:ze,json:{write:{isRequired:!0}}})],Ua.prototype,"position",void 0),c([me("position")],Ua.prototype,"writePosition",null),c([de("position")],Ua.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),It(t=>Ene.normalize(Ns(t)))],Ua.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),It(t=>Ao(Ns(t),-180,180))],Ua.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),It(t=>Ao(Ns(t,55),1,170))],Ua.prototype,"fov",void 0),c([d({type:o9,nonNullable:!0,json:{read:!1,write:!1}})],Ua.prototype,"layout",void 0),Ua=c([R("esri.Camera")],Ua);const xae=Ua,zM=[0,0];function e1(t,e){return e!=null&&Rs(t,e.x,e.y,e.z)}function cHe(t,e){if(!e.points?.length)return!1;for(const i of e.points)if(!yy(t,i))return!1;return!0}function Sae(t,e){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Rs(t,i,r,s)&&Rs(t,i,o,s)&&Rs(t,n,o,s)&&Rs(t,n,r,s)&&Rs(t,i,r,a)&&Rs(t,i,o,a)&&Rs(t,n,o,a)&&Rs(t,n,r,a):Rs(t,i,r)&&Rs(t,i,o)&&Rs(t,n,o)&&Rs(t,n,r)}function yy(t,e){return Rs(t,e[0],e[1])}function Eae(t,e){return Rs(t,e[0],e[1],e[2])}function Rs(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function ED(t,e){return zM[1]=e.y,zM[0]=e.x,Cae(t,zM)}function Cae(t,e){return CD(t.rings,e)}function CD(t,e){if(!t)return!1;if(Tae(t))return EF(!1,t,e);let i=!1;for(let r=0,s=t.length;r<s;r++)i=EF(i,t[r],e);return i}function Tae(t){return!Array.isArray(t[0][0])}function EF(t,e,i){const[r,s]=i;let n=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[u,h]=e[a],[p,m]=e[o];(h<s&&m>=s||m<s&&h>=s)&&u+(s-h)/(m-h)*(p-u)<r&&(n=!n)}return n}function Mae(t,e){return e1(t,e)}function kae(t,e){const i=t.hasZ&&e.hasZ;let r,s,n;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function Rae(t,e){const{points:i,hasZ:r}=e,s=r?Eae:yy;for(const n of i)if(s(t,n))return!0;return!1}const ef=[0,0],tf=[0,0],rf=[0,0],sf=[0,0],Iae=[ef,tf,rf,sf],yG=[[rf,ef],[ef,tf],[tf,sf],[sf,rf]];function $ae(t,e){return Aae(t,e.rings)}function Aae(t,e){ef[0]=t.xmin,ef[1]=t.ymax,tf[0]=t.xmax,tf[1]=t.ymax,rf[0]=t.xmin,rf[1]=t.ymin,sf[0]=t.xmax,sf[1]=t.ymin;for(const i of Iae)if(CD(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(yy(t,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(yy(t,n)||bG(r,n,yG))return!0;r=n}}return!1}function Oae(t,e){ef[0]=t.xmin,ef[1]=t.ymax,tf[0]=t.xmax,tf[1]=t.ymax,rf[0]=t.xmin,rf[1]=t.ymin,sf[0]=t.xmax,sf[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(yy(t,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(yy(t,o)||bG(s,o,yG))return!0;s=o}}return!1}const kr=[0,0];function Pae(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const u=t[a][l],h=t[a][l+1];if(MR(n,o,u,h,kr)&&!(kr[0]===n[0]&&kr[1]===n[1]||kr[0]===u[0]&&kr[1]===u[1]||kr[0]===o[0]&&kr[1]===o[1]||kr[0]===h[0]&&kr[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let l=s+2;l<n;l++){const u=i[l],h=i[l+1];if(MR(o,a,u,h,kr)&&!(kr[0]===o[0]&&kr[1]===o[1]||kr[0]===u[0]&&kr[1]===u[1]||kr[0]===a[0]&&kr[1]===a[1]||kr[0]===h[0]&&kr[1]===h[1]))return!0}}}return!1}function bG(t,e,i){for(let r=0;r<i.length;r++)if(MR(t,e,i[r][0],i[r][1]))return!0;return!1}function MR(t,e,i,r,s){const[n,o]=t,[a,l]=e,[u,h]=i,[p,m]=r,y=p-u,v=n-u,w=a-n,S=m-h,E=o-h,I=l-o,D=S*w-y*I;if(D===0)return!1;const O=(y*E-S*v)/D,A=(w*E-I*v)/D;return O>=0&&O<=1&&A>=0&&A<=1&&(s&&(s[0]=n+O*(a-n),s[1]=o+O*(l-o)),!0)}function Dae(t){switch(t){case"esriGeometryEnvelope":case"extent":return kae;case"esriGeometryMultipoint":case"multipoint":return Rae;case"esriGeometryPoint":case"point":return Mae;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return $ae;case"esriGeometryPolyline":case"polyline":return Oae}}var Ko;function Lae(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function gc(t,e,i){return e==null?i:i==null?e:t(e,i)}let it=Ko=class extends Dr{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,s){return Lae(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Te.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:s??Te.WGS84}}static fromPoint(t){return new Ko({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ze({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Ko;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&dx(e,i)&&(t=e.isWebMercator?xh(t):tg(t,!0)),t.type==="point"?e1(this,t):t.type==="extent"&&Sae(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&dx(e,i)&&(t=e.isWebMercator?xh(t):tg(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Er(e,i)&&dx(e,i)&&(t=e.isWebMercator?xh(t):tg(t,!0)),Dae(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=gc(Math.min,this.zmin,t.zmin),this.zmax=gc(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=gc(Math.min,this.mmin,t.mmin),this.mmax=gc(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=gc(Math.max,this.zmin,t.zmin),this.zmax=gc(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=gc(Math.max,this.mmin,t.mmin),this.mmax=gc(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Us(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?tg(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=VM(r.x,t).x),this.spatialReference=new Te(cf((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const s=i??Us(r);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let p=0;p<u.length;p++)u[p].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let p=0;p<u.length;p++)u[p].push(h)}return u}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let h;t=t||Us(o);const[p,m]=t.valid;h=VM(this.xmin,t);const y=h.x,v=h.frameId;h=VM(this.xmax,t);const w=h.x,S=h.frameId,E=y===w&&a>0;if(a>2*m){const I=new Ko(l<u?y:w,s,m,n,o),D=new Ko(p,s,l<u?w:y,n,o),O=new Ko(0,s,m,n,o),A=new Ko(p,s,0,n,o),z=[],_=[];I.contains(O)&&z.push(v),I.contains(A)&&_.push(v),D.contains(O)&&z.push(S),D.contains(A)&&_.push(S);for(let Z=v+1;Z<S;Z++)z.push(Z),_.push(Z);e.push({extent:I,frameIds:[v]},{extent:D,frameIds:[S]},{extent:O,frameIds:z},{extent:A,frameIds:_})}else y>w||E?e.push({extent:new Ko(y,s,m,n,o),frameIds:[v]},{extent:new Ko(p,s,w,n,o),frameIds:[S]}):e.push({extent:new Ko(y,s,w,n,o),frameIds:[v]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}};function VM(t,e){const[i,r]=e.valid,s=2*r;let n,o=0;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s,o=n):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s,o=-n),{x:t,frameId:o}}c([d({readOnly:!0})],it.prototype,"cache",null),c([d({readOnly:!0})],it.prototype,"center",null),c([d({readOnly:!0})],it.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],it.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],it.prototype,"hasZ",null),c([d({readOnly:!0})],it.prototype,"height",null),c([d({readOnly:!0})],it.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],it.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],it.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],it.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],it.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],it.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],it.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],it.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],it.prototype,"zmax",void 0),it=Ko=c([R("esri.geometry.Extent")],it),it.prototype.toJSON.isDefaultToJSON=!0;function by(t,e,i=!1){let{hasM:r,hasZ:s}=t;Array.isArray(e)?e.length!==4||r||s?e.length===3&&i&&!r?(s=!0,r=!1):e.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=r}var kR;function CF(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function Nae(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Eo=kR=class extends Dr{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):Nae(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points?.[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new it,i=this.hasZ,r=this.hasM,s=i?3:2,n=t[0],o=CF(Math.min),a=CF(Math.max);let l,u,h,p,[m,y]=n,[v,w]=n;for(let S=0,E=t.length;S<E;S++){const I=t[S],[D,O]=I;if(m=o(m,D),y=o(y,O),v=a(v,D),w=a(w,O),i&&I.length>2){const A=I[2];l=o(l,A),h=a(h,A)}if(r&&I.length>s){const A=I[s];u=o(u,A),p=a(p,A)}}return e.xmin=m,e.ymin=y,e.xmax=v,e.ymax=w,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=h):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=u,e.mmax=p):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=B(this.points)}addPoint(t){return by(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:B(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new kR(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new ze(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ze(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(by(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};c([d({readOnly:!0})],Eo.prototype,"cache",null),c([d()],Eo.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],Eo.prototype,"points",void 0),c([me("points")],Eo.prototype,"writePoints",null),Eo=kR=c([R("esri.geometry.Multipoint")],Eo),Eo.prototype.toJSON.isDefaultToJSON=!0;function hHe(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function Fae(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var uE;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(uE||(uE={}));function dHe(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let s=!1,n=!1;return r.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(n&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a})}return null}function rT(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function vG(t,e,i){const r=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,s,t[2]+i*(e[2]-t[2])]:[r,s]}function jae(t,e,i,r){return zae(t,e,i[r],i[r+1])}function zae(t,e,i,r){const[s,n]=e,[o,a]=i,[l,u]=r,h=l-o,p=u-a,m=h*h+p*p,y=(s-o)*h+(n-a)*p,v=Math.min(1,Math.max(0,y/m));return t[0]=o+h*v,t[1]=a+p*v,t}function pHe(t,e,i,r,s,n){let o=i,a=r,l=s-o,u=n-a;if(l!==0||u!==0){const h=((t-o)*l+(e-a)*u)/(l*l+u*u);h>1?(o=s,a=n):h>0&&(o+=l*h,a+=u*h)}return l=t-o,u=e-a,l*l+u*u}function wG(t,e){return vG(t,e,.5)}function fHe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=rT(t[r],t[r+1]);return i}function mHe(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let s=0;s<i-1;++s){const n=rT(t[s],t[s+1]);if(e-r<n){const o=(e-r)/n;return vG(t[s],t[s+1],o)}r+=n}return t[i-1]}function _G(t,e=uE.X,i=uE.Y){let r=0;const s=t.length;let n=t[0];for(let o=1;o<s;o++){const a=t[o];r+=(a[e]-n[e])*(a[i]+n[i]),n=a}if(xG(t)){const o=t[0];r+=(o[e]-n[e])*(o[i]+n[i])}return r>=0}function xG(t){const e=t.length;return e>0&&!VC(t[0],t[e-1])}function gHe(t){"rings"in t&&(Vae(t),Uae(t))}function Vae(t){if("rings"in t)for(const e of t.rings)xG(e)&&e.push(e[0].slice())}function Uae(t){if(!("rings"in t)||t.rings.length===0||_G(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function yHe(t){return t.type!=="polygon"&&t.type!=="polyline"||Hae(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function Hae(t,e){const i=Us(e);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const o of t){let a=1/0,l=-1/0;for(const h of o){const p=Bae(h[0],r,s);a=Math.min(a,p),l=Math.max(l,p),h[0]=p}const u=l-a;n-u<u&&o.forEach(h=>{h[0]<0&&(h[0]+=n)})}}function Bae(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function bHe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((s,n)=>s.length===r[n].length)}function vHe(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Gae(t){return t?Wae(t.rings,t.hasZ??!1):null}function Wae(t,e){if(!t?.length)return null;const i=[],r=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=t.length;n<o;n++){const a=SG(t[n],e,s);a&&r.push(a)}if(r.sort((n,o)=>{let a=n[2]-o[2];return a===0&&e&&(a=n[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=t[0]&&t[0].length?qae(t[0],e):null;if(!n)return null;i[0]=n[0],i[1]=n[1],e&&n.length>2&&(i[2]=n[2])}return i}function SG(t,e,i){let r=0,s=0,n=0,o=0,a=0;const l=t.length?t[0][0]:0,u=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let m=0;m<t.length;m++){const y=t[m],v=t[(m+1)%t.length],[w,S,E]=y,I=w-l,D=S-u,[O,A,z]=v,_=O-l,Z=A-u,Q=I*Z-_*D;if(o+=Q,r+=(I+_)*Q,s+=(D+Z)*Q,e&&y.length>2&&v.length>2){const ae=E-h,ge=z-h,ne=I*ge-_*ae;n+=(ae+ge)*ne,a+=ne}w<i[0]&&(i[0]=w),w>i[1]&&(i[1]=w),S<i[2]&&(i[2]=S),S>i[3]&&(i[3]=S),e&&(E<i[4]&&(i[4]=E),E>i[5]&&(i[5]=E))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[r/(6*o)+l,s/(6*o)+u,o];return e&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=n/(6*a)+h,p[4]=a)),p}function wHe(t,e){let i=0,r=0,s=0;t.nextPoint();const n=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const u=[t.x,t.y],[h,p]=l,m=h-n,y=p-o,[v,w]=u,S=v-n,E=w-o,I=m*E-S*y;s+=I,i+=(m+S)*I,r+=(y+E)*I,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),p<e[2]&&(e[2]=p),p>e[3]&&(e[3]=p)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+o,s]):null}function qae(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,u=t.length;l<u-1;l++){const h=t[l],p=t[l+1];if(h&&p){i[0]=h[0],i[1]=h[1],r[0]=p[0],r[1]=p[1],e&&h.length>2&&p.length>2&&(i[2]=h[2],r[2]=p[2]);const m=rT(i,r);if(m){s+=m;const y=wG(h,p);n+=m*y[0],o+=m*y[1],e&&y.length>2&&(a+=m*y[2])}}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.length?t[0]:null}function Yae(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],s=[],n=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=SG(Fae(t),t.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],e&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||e&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?Jae(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function Jae(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(t.nextPoint()){let l=t.x,u=t.y,h=t.z;for(;t.nextPoint();){const p=t.x,m=t.y,y=t.z;i[0]=l,i[1]=u,r[0]=p,r[1]=m,e&&(i[2]=h,r[2]=y);const v=rT(i,r);if(v){s+=v;const w=wG(i,r);n+=v*w[0],o+=v*w[1],e&&w.length>2&&(a+=v*w[2])}l=p,u=m,h=y}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Zae=1e-6;function _He(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<Zae){const s=Yae(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)Kae(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const Xae=1/3;function Kae(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,o=i.x-r,a=i.y-s,l=0,u=0;for(;i.nextPoint();)l=i.x-r,u=i.y-s,n=.5*Xae*(l*a-u*o),t[0]+=n*(o+l),t[1]+=n*(a+u),o=l,a=u;const h=i.getCurrentRingArea(),p=[r,s];return p[0]-=e[0],p[1]-=e[1],p[0]*=h,p[1]*=h,t[0]+=p[0],t[1]+=p[1],t}function Vs(t=ile){return[t[0],t[1],t[2],t[3]]}function EG(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function xHe(t,e,i,r,s=Vs()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function SHe(t,e=Vs()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Qae(t,e,i=new it){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function EHe(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function CHe(t,e,i){if(e!=null)if("length"in e)RR(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else EG(i,t)}function THe(t,e,i=t){const r=e.length;let s=t[0],n=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const u=e[l];s=Math.min(s,u[0]),n=Math.min(n,u[1]),o=Math.max(o,u[0]),a=Math.max(a,u[1])}return i[0]=s,i[1]=n,i[2]=o,i[3]=a,i}function MHe(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function TD(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function MD(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function kHe(t){return TD(t)*MD(t)}function RHe(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function IHe(t){const e=TD(t),i=MD(t);return Math.sqrt(e*e+i*i)}function $He(t,e){return ele(t,e.x,e.y)}function ele(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function AHe(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function OHe(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function tle(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function PHe(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function DHe(t){return t?EG(t,TF):Vs(TF)}function RR(t){return t!=null&&t.length===4}function LHe(t,e){return RR(t)&&RR(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const TF=[1/0,1/0,-1/0,-1/0],ile=[0,0,0,0];function CG(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function TG(t){return t.points!==void 0}function MG(t){return t.x!==void 0&&t.y!==void 0}function kG(t){return t.paths!==void 0}function RG(t){return t.rings!==void 0}function IG(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const uh=IG(Math.min),ch=IG(Math.max);function NHe(t,e){return kG(e)?vy(t,e.paths,!1,!1):RG(e)?vy(t,e.rings,!1,!1):TG(e)?kD(t,e.points,!1,!1,!1,!1):CG(e)?$G(t,e):(MG(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function FHe(t){let e,i,r,s;for(t.reset(),e=r=1/0,i=s=-1/0;t.nextPath();){const n=rle(t);e=Math.min(n[0],e),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return Vs([e,r,i,s])}function rle(t){let e,i,r,s;for(e=r=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),s=Math.max(t.y,s);return Vs([e,r,i,s])}function jHe(t,e){return kG(e)?vy(t,e.paths,!0,!1):RG(e)?vy(t,e.rings,!0,!1):TG(e)?kD(t,e.points,!0,!1,!0,!1):CG(e)?$G(t,e,!0,!1,!0,!1):(MG(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function vy(t,e,i,r){const s=i?3:2;if(!e.length||!e[0].length)return null;let n,o,a,l,[u,h]=e[0][0],[p,m]=e[0][0];for(let y=0;y<e.length;y++){const v=e[y];for(let w=0;w<v.length;w++){const S=v[w],[E,I]=S;if(u=uh(u,E),h=uh(h,I),p=ch(p,E),m=ch(m,I),i&&S.length>2){const D=S[2];n=uh(n,D),o=ch(o,D)}if(r&&S.length>s){const D=S[s];a=uh(n,D),l=ch(o,D)}}}return i?r?(t[0]=u,t[1]=h,t[2]=n,t[3]=a,t[4]=p,t[5]=m,t[6]=o,t[7]=l,t.length=8,t):(t[0]=u,t[1]=h,t[2]=n,t[3]=p,t[4]=m,t[5]=o,t.length=6,t):r?(t[0]=u,t[1]=h,t[2]=a,t[3]=p,t[4]=m,t[5]=l,t.length=6,t):(t[0]=u,t[1]=h,t[2]=p,t[3]=m,t.length=4,t)}function $G(t,e,i,r,s,n){const o=e.xmin,a=e.xmax,l=e.ymin,u=e.ymax;let h=e.zmin,p=e.zmax,m=e.mmin,y=e.mmax;return s?(h=h||0,p=p||0,n?(m=m||0,y=y||0,t[0]=o,t[1]=l,t[2]=h,t[3]=m,t[4]=a,t[5]=u,t[6]=p,t[7]=y,t):(t[0]=o,t[1]=l,t[2]=h,t[3]=a,t[4]=u,t[5]=p,t)):n?(m=m||0,y=y||0,t[0]=o,t[1]=l,t[2]=m,t[3]=a,t[4]=u,t[5]=y,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=u,t)}function kD(t,e,i,r,s,n){const o=i?3:2,a=r&&n,l=i&&s;if(!e.length||!e[0].length)return null;let u,h,p,m,[y,v]=e[0],[w,S]=e[0];for(let E=0;E<e.length;E++){const I=e[E],[D,O]=I;if(y=uh(y,D),v=uh(v,O),w=ch(w,D),S=ch(S,O),l&&I.length>2){const A=I[2];u=uh(u,A),h=ch(h,A)}if(a&&I.length>o){const A=I[o];p=uh(u,A),m=ch(h,A)}}return s?(u=u||0,h=h||0,n?(p=p||0,m=m||0,t[0]=y,t[1]=v,t[2]=u,t[3]=p,t[4]=w,t[5]=S,t[6]=h,t[7]=m,t):(t[0]=y,t[1]=v,t[2]=u,t[3]=w,t[4]=S,t[5]=h,t)):n?(p=p||0,m=m||0,t[0]=y,t[1]=v,t[2]=p,t[3]=w,t[4]=S,t[5]=m,t):(t[0]=y,t[1]=v,t[2]=w,t[3]=S,t)}function sle(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function nle(t){return t.points!==void 0}function ole(t){return t.x!==void 0&&t.y!==void 0}function ale(t){return t.paths!==void 0}function lle(t){return t.rings!==void 0}const RD=[];function AG(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function OG(t,e,i,r,s,n){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:s,zmax:n}}function PG(t,e,i,r,s,n){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:s,mmax:n}}function DG(t,e,i,r,s,n,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function ID(t,e=!1,i=!1){return e?i?DG(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):OG(t[0],t[1],t[2],t[3],t[4],t[5]):i?PG(t[0],t[1],t[2],t[3],t[4],t[5]):AG(t[0],t[1],t[2],t[3])}function zHe(t){return t?sle(t)?t:ole(t)?cle(t):lle(t)?LG(t):ale(t)?NG(t):nle(t)?ule(t):null:null}function ule(t){const{hasZ:e,hasM:i,points:r}=t;return ID(kD(RD,r,e??!1,i??!1),e,i)}function cle(t){const{x:e,y:i,z:r,m:s}=t,n=s!=null;return r!=null?n?DG(e,i,r,s,e,i,r,s):OG(e,i,r,e,i,r):n?PG(e,i,s,e,i,s):AG(e,i,e,i)}function LG(t){const{hasZ:e,hasM:i,rings:r}=t,s=vy(RD,r,e??!1,i??!1);return s?ID(s,e,i):null}function NG(t){const{hasZ:e,hasM:i,paths:r}=t,s=vy(RD,r,e??!1,i??!1);return s?ID(s,e,i):null}var fx;function MF(t){return!Array.isArray(t[0])}function hle(t){return typeof t[0]?.[0]=="number"}function dle(t){if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??=[],hle(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=Te.WGS84,{...t,hasM:i,hasZ:r,rings:e,spatialReference:s}}let ui=fx=class extends Dr{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,s=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new fx(n)}constructor(t){super(dle(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=Gae(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new ze;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=B(t)}get extent(){const t=LG(this),{spatialReference:e}=this;return t?new it({...t,spatialReference:e}):null}get isSelfIntersecting(){return i9(he.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),Pae(this.rings)}writeRings(t,e){e.rings=B(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(MF(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new fx;return t.spatialReference=this.spatialReference,t.rings=B(this.rings),t.curveRings=B(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([s,n,o,a],[l,u,h,p])=>s===l&&n===u&&(o==null&&h==null||o===h)&&(a==null&&p==null||a===p);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=t.rings[s];if(!VC(n,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=tT(t,this.spatialReference);return ED(this,e??t)}isClockwise(t){const e=MF(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return _G(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new ze(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ze(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ze(i[0],i[1],i[2],i[3],this.spatialReference):new ze(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(by(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ze(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new ze(s,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(by(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],ui.prototype,"cache",null),c([d({readOnly:!0})],ui.prototype,"centroid",null),c([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],ui.prototype,"curveRings",void 0),c([me("curveRings")],ui.prototype,"writeCurveRings",null),c([d({readOnly:!0})],ui.prototype,"extent",null),c([d({readOnly:!0})],ui.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],ui.prototype,"rings",void 0),c([me("rings")],ui.prototype,"writeRings",null),ui=fx=c([R("esri.geometry.Polygon")],ui),ui.prototype.toJSON.isDefaultToJSON=!0;var IR;function ple(t){return!Array.isArray(t[0])}function fle(t){return typeof t[0]?.[0]=="number"}function mle(t){if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??=[],fle(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=Te.WGS84,{...t,hasM:i,hasZ:r,paths:e,spatialReference:s}}let Mi=IR=class extends Dr{constructor(t){super(mle(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=B(t)}get extent(){const t=NG(this),{spatialReference:e}=this;return t?new it({...t,spatialReference:e}):null}writePaths(t,e){e.paths=B(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(ple(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new IR;return t.spatialReference=this.spatialReference,t.paths=B(this.paths),t.curvePaths=B(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new ze(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ze(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ze(i[0],i[1],i[2],i[3],this.spatialReference):new ze(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(by(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new ze(s,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ze(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(by(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Mi.prototype,"cache",null),c([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Mi.prototype,"curvePaths",void 0),c([me("curvePaths")],Mi.prototype,"writeCurvePaths",null),c([d({readOnly:!0})],Mi.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Mi.prototype,"paths",void 0),c([me("paths")],Mi.prototype,"writePaths",null),Mi=IR=c([R("esri.geometry.Polyline")],Mi),Mi.prototype.toJSON.isDefaultToJSON=!0;function FG(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function jG(t){return t.points!==void 0}function zG(t){return t.x!==void 0&&t.y!==void 0}function VG(t){return t.paths!==void 0||t.curvePaths!==void 0}function yg(t){return t.rings!==void 0||t.curveRings!==void 0}function Nl(t){return t==null?null:t instanceof Dr?t:zG(t)?ze.fromJSON(t):VG(t)?Mi.fromJSON(t):yg(t)?ui.fromJSON(t):jG(t)?Eo.fromJSON(t):FG(t)?it.fromJSON(t):null}function qy(t){return t?zG(t)?"esriGeometryPoint":VG(t)?"esriGeometryPolyline":yg(t)?"esriGeometryPolygon":FG(t)?"esriGeometryEnvelope":jG(t)?"esriGeometryMultipoint":null:null}const gle={esriGeometryPoint:ze,esriGeometryPolyline:Mi,esriGeometryPolygon:ui,esriGeometryEnvelope:it,esriGeometryMultipoint:Eo,esriGeometryMultiPatch:ui};function yle(t){return t&&gle[t]||null}const ble=hr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),kF=hr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Yy={base:Dr,key:"type",typeMap:{extent:it,multipoint:Eo,point:ze,polyline:Mi,polygon:ui}};var $R;let Tc=$R=class extends X{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new $R({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:UM}}}}})],Tc.prototype,"rotation",void 0),c([It("rotation")],Tc.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:UM}}}}})],Tc.prototype,"scale",void 0),c([d({types:Yy,json:{read:Nl,write:!0,origins:{"web-scene":{read:Nl,write:{overridePolicy:UM}}}}})],Tc.prototype,"targetGeometry",void 0),c([d({type:xae,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Tc.prototype,"camera",void 0),Tc=$R=c([R("esri.Viewpoint")],Tc);const xr=Tc;function UM(){return{enabled:!this.camera}}let mx=class UG{constructor(){this._emitter=new UG.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){let o=this._listenersMap?.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const u of o.slice()){const h="deref"in u?u.deref():u;h?h?.call(a,n):l=!0}return l&&(o=o.filter(u=>!("deref"in u)||u.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return hf(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),Mt(()=>{const a=this._listenersMap?.get(s),l=a?.indexOf(n)??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove(),("deref"in n?n.deref():n)?.call(null,a)});return o}hasEventListener(s){const n=this._listenersMap?.get(s);return n!=null&&n.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=c([R("esri.core.Evented")],s),s};let i=class extends Oe{constructor(){super(...arguments),this._emitter=new mx.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=c([R("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(mx||(mx={}));const Vl=mx;var Dt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Dt||(Dt={}));var nu;let vle=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},wle=class{constructor(e,i,r,s,n){this.target=e,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const oo=new zy(vle,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function RF(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function HM(t){return t?t instanceof Uc?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function BM(t){if(t?.length)return t[0]}function _le(t,e,i,r){const s=Math.min(t.length-i,e.length-r);let n=0;for(;n<s&&t[i+n]===e[r+n];)n++;return n}function HG(t,e,i,r){e&&e.forEach((s,n,o)=>{t.push(s),HG(t,i.call(r,s,n,o),i,r)})}const yc=new Set,bc=new Set,vc=new Set,GM=new Map;let xle=0;var Fp;let Uc=(Fp=class extends Vl.EventedAccessor{static isCollection(e){return e!=null&&e instanceof nu}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Ny,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:xle++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof nu?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ve(this._observable),this._items}set items(e){this._emitBeforeChanges(Dt.ADD)||(this._splice(0,this.length,HM(e)),this._emitAfterChanges(Dt.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,i){if(this.destroyed)return Mt();if(e==="change"){const r=this._chgListeners,s={removed:!1,callback:i};return r.push(s),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Mt(()=>{s.removed=!0,r.splice(r.indexOf(s),1)})}return this._emitter.on(e,i)}once(e,i){const r="deref"in i?()=>i.deref():()=>i,s=this.on(e,n=>{r()?.call(null,n),s.remove()});return s}add(e,i){if(Ve(this._observable),this._emitBeforeChanges(Dt.ADD))return this;const r=this.getNextIndex(i??null);return this._splice(r,0,[e]),this._emitAfterChanges(Dt.ADD),this}addMany(e,i=this._items.length){if(Ve(this._observable),!e?.length)return this;if(this._emitBeforeChanges(Dt.ADD))return this;const r=this.getNextIndex(i);return this._splice(r,0,HM(e)),this._emitAfterChanges(Dt.ADD),this}at(e){if(Ve(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Dt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ve(this._observable),this._createNewInstance({items:this._items.map(B)})}concat(...e){Ve(this._observable);const i=e.map(HM);return this._createNewInstance({items:this._items.concat(...i)})}drain(e,i){if(Ve(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return;const r=this._splice(0,this.length),s=r.length;for(let n=0;n<s;n++)e.call(i,r[n],n,r);this._emitAfterChanges(Dt.REMOVE)}destroyAll(){this.drain(RF)}destroyMany(e){const i=this.removeMany(e);return i.forEach(RF),i}every(e,i){return Ve(this._observable),this._items.every(e,i)}filter(e,i){Ve(this._observable);const r=arguments.length===2?this._items.filter(e,i):this._items.filter(e);return this._createNewInstance({items:r})}find(e,i){return Ve(this._observable),this._items.find(e,i)}findIndex(e,i){return Ve(this._observable),this._items.findIndex(e,i)}flatten(e,i){Ve(this._observable);const r=[];return HG(r,this,e,i),new nu(r)}forEach(e,i){return Ve(this._observable),this._items.forEach(e,i)}getItemAt(e){return Ve(this._observable),this._items[e]}getNextIndex(e){Ve(this._observable);const i=this.length;return(e=e??i)<0?e=0:e>i&&(e=i),e}includes(e,i=0){return Ve(this._observable),this._items.includes(e,i)}indexOf(e,i=0){return Ve(this._observable),this._items.indexOf(e,i)}join(e=","){return Ve(this._observable),this._items.join(e)}lastIndexOf(e,i=this.length-1){return Ve(this._observable),this._items.lastIndexOf(e,i)}map(e,i){Ve(this._observable);const r=this._items.map(e,i);return new nu({items:r})}reorder(e,i=this.length-1){Ve(this._observable);const r=this.indexOf(e);if(r!==-1){if(i<0?i=0:i>=this.length&&(i=this.length-1),r!==i){if(this._emitBeforeChanges(Dt.MOVE))return e;this._splice(r,1),this._splice(i,0,[e]),this._emitAfterChanges(Dt.MOVE)}return e}}pop(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return;const e=BM(this._splice(this.length-1,1));return this._emitAfterChanges(Dt.REMOVE),e}push(...e){return Ve(this._observable),this._emitBeforeChanges(Dt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Dt.ADD)),this.length}reduce(e,i){Ve(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,i):r.reduce(e)}reduceRight(e,i){Ve(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,i):r.reduceRight(e)}remove(e){return Ve(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Ve(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Dt.REMOVE))return;const i=BM(this._splice(e,1));return this._emitAfterChanges(Dt.REMOVE),i}removeMany(e){if(Ve(this._observable),!e?.length||this._emitBeforeChanges(Dt.REMOVE))return[];const i=e instanceof nu?e.toArray():e,r=this._items,s=[],n=i.length;for(let o=0;o<n;o++){const a=i[o],l=r.indexOf(a);if(l>-1){const u=1+_le(i,r,o+1,l+1),h=this._splice(l,u);h&&h.length>0&&s.push.apply(s,h),o+=u-1}}return this._emitAfterChanges(Dt.REMOVE),s}reverse(){if(Ve(this._observable),this._emitBeforeChanges(Dt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Dt.MOVE),this}shift(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return;const e=BM(this._splice(0,1));return this._emitAfterChanges(Dt.REMOVE),e}slice(e=0,i=this.length){return Ve(this._observable),this._createNewInstance({items:this._items.slice(e,i)})}some(e,i){return Ve(this._observable),this._items.some(e,i)}sort(e){if(Ve(this._observable),!this.length||this._emitBeforeChanges(Dt.MOVE)||!this._requiresSort(e))return this;const i=this._splice(0,this.length);return arguments.length?i.sort(e):i.sort(),this._splice(0,0,i),this._emitAfterChanges(Dt.MOVE),this}_requiresSort(e=(i,r)=>i===r?0:i<r?-1:1){const i=this.length-1;for(let r=0;r<i;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,i,...r){Ve(this._observable),arguments.length===1&&(i=this.length),i??=0;const s=(i?Dt.REMOVE:0)|(r.length?Dt.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(e,i,r)||[];return this._emitAfterChanges(s),n}toArray(){return Ve(this._observable),this._items.slice()}toJSON(e){return Ve(this._observable),this.toArray().map(i=>cw(i)?i.toJSON(e):i)}toLocaleString(){return Ve(this._observable),this._items.toLocaleString()}toString(){return Ve(this._observable),this._items.toString()}unshift(...e){return Ve(this._observable),!e.length||this._emitBeforeChanges(Dt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Dt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,i,r){const s=this._items,n=this.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=qw(()=>this._dispatchChange())),e<0&&(e+=this.length),i){if(a=s.splice(e,i),this.hasEventListener("before-remove")){const l=oo.acquire();l.target=this,l.cancellable=!0;for(let u=0,h=a.length;u<h;u++)o=a[u],l.reset(o),this.emit("before-remove",l),l.defaultPrevented&&(a.splice(u,1),s.splice(e,0,o),e+=1,u-=1,h-=1);oo.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=oo.acquire();l.target=this,l.cancellable=!1;const u=a.length;for(let h=0;h<u;h++)l.reset(a[h]),this.emit("after-remove",l);oo.release(l)}}if(r?.length){if(n){const p=[];for(const m of r){const y=n.ensureType(m);y==null&&m!=null||p.push(y)}r=p}const l=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),h=e===this.length;if(l||u){const p=oo.acquire();p.target=this,p.cancellable=!0;const m=oo.acquire();m.target=this,m.cancellable=!1;for(const y of r)l?(p.reset(y),this.emit("before-add",p),p.defaultPrevented||(h?s.push(y):s.splice(e++,0,y),this._set("length",s.length),u&&(m.reset(y),this.emit("after-add",m)))):(h?s.push(y):s.splice(e++,0,y),this._set("length",s.length),m.reset(y),this.emit("after-add",m));oo.release(m),oo.release(p)}else{if(h)for(const p of r)s.push(p);else s.splice(e,0,...r);this._set("length",s.length)}}if((r?.length||a?.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const l=new wle(this,r,a,e,i);this.emit("after-splice",l)}return a}_emitBeforeChanges(e){let i=!1;if(this.hasEventListener("before-changes")){const r=oo.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),i=r.defaultPrevented,oo.release(r)}return i}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const i=oo.acquire();i.target=this,i.cancellable=!1,i.type=e,this.emit("after-changes",i),oo.release(i)}this._observable.notify()}_notifyChangeEvent(e,i){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:i})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const i of e){const r=i.changes;yc.clear(),bc.clear(),vc.clear();for(const{added:u,removed:h}of r){if(u)if(vc.size===0&&bc.size===0)for(const p of u)yc.add(p);else for(const p of u)bc.has(p)?(vc.add(p),bc.delete(p)):vc.has(p)||yc.add(p);if(h)if(vc.size===0&&yc.size===0)for(const p of h)bc.add(p);else for(const p of h)yc.has(p)?yc.delete(p):(vc.delete(p),bc.add(p))}const s=Ls.acquire();yc.forEach(u=>{s.push(u)});const n=Ls.acquire();bc.forEach(u=>{n.push(u)});const o=this._items,a=i.items,l=Ls.acquire();if(vc.forEach(u=>{a.indexOf(u)!==o.indexOf(u)&&l.push(u)}),i.listeners&&(s.length||n.length||l.length)){const u={target:this,added:s,removed:n,moved:l},h=i.listeners.length;for(let p=0;p<h;p++){const m=i.listeners[p];m.removed||m.callback.call(this,u)}}Ls.release(s),Ls.release(n),Ls.release(l)}yc.clear(),bc.clear(),vc.clear()}},nu=Fp,Fp.ofType=e=>{if(!e)return nu;if(GM.has(e))return GM.get(e);let i=null;if(typeof e=="function")i=e.prototype.declaredClass;else if(e.base)i=e.base.prototype.declaredClass;else for(const s in e.typeMap){const n=e.typeMap[s].prototype.declaredClass;i?i+=` | ${n}`:i=n}let r=class extends nu{};return c([eD({Type:e,ensureType:typeof e=="function"?Gi(e):Ol(e)})],r.prototype,"itemType",void 0),r=c([R(`esri.core.Collection<${i}>`)],r),GM.set(e,r),r},Fp);c([d()],Uc.prototype,"_updating",void 0),c([d()],Uc.prototype,"length",void 0),c([d()],Uc.prototype,"items",null),c([d({readOnly:!0})],Uc.prototype,"updating",null),Uc=nu=c([R("esri.core.Collection")],Uc);const _e=Uc;let yl=class extends _e{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(L8(()=>this._refresh(),Al))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new _e(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};c([d()],yl.prototype,"getCollections",void 0),c([d()],yl.prototype,"getChildrenFunction",void 0),c([d()],yl.prototype,"itemFilterFunction",void 0),yl=c([R("esri.core.CollectionFlattener")],yl);let fw=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new Ny,this._items=new Set}get length(){return Ve(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ve(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ve(this._observable),yield*this._items}};const BG=new FinalizationRegistry(t=>{t.close()});function Sle(t,e){BG.register(t,e,e)}function Ele(t){BG.unregister(t)}function GG(t,e){return new Proxy({},{get:(i,r,s)=>(...n)=>{let o,a;const l=n[n.length-1];return Cle(l)&&(o=l.signal,a=l.transferList,n.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),n,{transferList:a,signal:o})}})}function Cle(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const Tle={statsWorker:()=>le(()=>import("./statsWorker-Caxj82gj.js"),__vite__mapDeps([6,7,8,9,10,11,1,2])),geometryEngineWorker:()=>le(()=>import("./geometryEngineWorker-ChztcFFk.js"),__vite__mapDeps([12,13,14,15,16])),arcadeGeometryOperatorsWorker:()=>le(()=>import("./operatorsWorker-DxEI0mdL.js"),__vite__mapDeps([17,1,2])),CSVSourceWorker:()=>le(()=>import("./CSVSourceWorker-ChDGMfJ-.js"),__vite__mapDeps([18,19,16,20,21,22,23,24,25,26,27,28,1,2,29,30,8,7,9,10,11,31,32,33,34,35,36,37,38])),EdgeProcessingWorker:()=>le(()=>import("./EdgeProcessingWorker-Lpx9oPse.js"),__vite__mapDeps([39,40,41,42,43,44,45,46,47,48,49,50,1,2])),ElevationSamplerWorker:()=>le(()=>import("./ElevationSamplerWorker-hLBHQUhG.js"),__vite__mapDeps([51,35,52,53,54,55,56,57,58,59,60,42,61,1,2])),FeatureServiceSnappingSourceWorker:()=>le(()=>import("./FeatureServiceSnappingSourceWorker-DlVq4rjx.js"),__vite__mapDeps([62,22,23,16,24,25,20,21,26,27,28,1,2,29,30,8,7,9,10,11,31,32,33,34,35,36,63,64,65,66,67])),GeoJSONSourceWorker:()=>le(()=>import("./GeoJSONSourceWorker-BVqCMjrB.js"),__vite__mapDeps([68,25,20,21,26,22,23,16,24,27,28,1,2,29,30,8,7,9,10,11,31,32,33,34,35,36,69,19,38,70])),LercWorker:()=>le(()=>import("./LercWorker-5Us1UV0a.js"),__vite__mapDeps([71,1,2])),MemorySourceWorker:()=>le(()=>import("./MemorySourceWorker-njUNdFMG.js"),__vite__mapDeps([72,25,20,21,26,73,22,23,16,24,27,28,1,2,29,30,8,7,9,10,11,31,32,33,34,35,36,38,70,19])),PBFDecoderWorker:()=>le(()=>import("./PBFDecoderWorker-Bqz5Nb_Q.js"),__vite__mapDeps([74,75,21,25,20,26,64,65,1,2])),FeaturePipelineWorker:()=>le(()=>import("./FeaturePipelineWorker-BUITC6J2.js"),__vite__mapDeps([76,77,78,49,79,80,20,21,81,82,83,84,85,23,16,29,25,26,8,86,87,88,89,90,91,5,1,2,36,24,27,28,30,7,9,10,11,31,32,92,93,94,95,66,64,65,96,69,19,38,70,97,98,99])),PointCloudWorker:()=>le(()=>import("./PointCloudWorker-D1caGpo9.js"),__vite__mapDeps([100,101,54,102,103,104,105,47,106,55,56,57,107,108,1,2])),RasterWorker:()=>le(()=>import("./RasterWorker-Ci8Ws69W.js"),__vite__mapDeps([109,110,111,112,15,113,114,115,116,117,1,2])),SceneLayerSnappingSourceWorker:()=>le(()=>import("./SceneLayerSnappingSourceWorker-BbWIlCm9.js"),__vite__mapDeps([118,119,120,54,108,55,102,121,107,42,44,45,46,41,43,47,48,49,50,1,2])),SceneLayerWorker:()=>le(()=>import("./SceneLayerWorker-DDluvQ7M.js"),__vite__mapDeps([122,52,60,123,58,120,54,108,55,102,124,105,47,125,83,126,127,128,129,106,101,56,57,107,1,2])),WFSSourceWorker:()=>le(()=>import("./WFSSourceWorker-CBj6oxpy.js"),__vite__mapDeps([130,25,20,21,26,22,23,16,24,27,28,1,2,29,30,8,7,9,10,11,31,32,33,34,35,36,69,19,70,131,132])),WorkerTileHandler:()=>le(()=>import("./WorkerTileHandler-ChW3mOwO.js"),__vite__mapDeps([133,134,81,84,135,136,65,21,90,137,138,49,113,91,80,1,2])),Lyr3DWorker:()=>le(()=>import("./Lyr3DWorker-D7tvENNW.js"),__vite__mapDeps([139,1,2])),Feature3DPipelineWorker:()=>le(()=>import("./Feature3DPipelineWorker-DGf2kUCG.js"),__vite__mapDeps([140,24,25,20,21,26,27,28,1,2,29,23,16,30,8,7,9,10,11,31,32,55,141,127,59,52,123,58,142,103,143,144,145,146,147,42,46,148,120,54,108,102,119,47,129,128,149,106,101,56,57,107,150,151,152,153,41,43,126,154,83,155,156,35,66,64,65])),TextureCompressionWorker:()=>le(()=>import("./TextureCompressionWorker-Ds5fN2U8.js"),__vite__mapDeps([157,147,1,2]))},WG="worker:port-closed";var Nr;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Nr||(Nr={}));let Mle=0;function qG(){return Mle++}function kle(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function mw(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function $D(t,e,i,r){if(e.type===Nr.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Nr.INVOKE&&e.type!==Nr.RESPONSE)return void t.postMessage(e);let s;if(kle(i)?(s=IF(i.transferList),e.data=i.result):(s=IF(r),e.data=i),s){if(J("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Nr.INVOKE:throw o;case Nr.RESPONSE:return void $D(t,{type:Nr.RESPONSE,jobId:e.jobId,error:mw(o)})}}}t.postMessage(e,s)}else t.postMessage(e)}function gw(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function IF(t){if(!t?.length)return null;if(J("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!Rle(i));return e.length?e:null}function Rle(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function GHe(t){try{return await t}catch(e){const i=e?.name===WG;if(!(Zr(e)||i))throw e;return}}const{CLOSE:$F,ABORT:AF,INVOKE:OF,RESPONSE:Cb,OPEN_PORT:PF,ON:Ile}=Nr,$le=2;let Ale=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Nr.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Co;let wy=(Co=class{static connect(e,i){const r=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Co(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Co.clients.set(n,s),r.port2}static loadWorker(e){const i=Tle[e];return i?i():Promise.resolve(null)}constructor(e,i,r,s){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Ale(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:$F}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=r?.signal,n=r?.transferList;if(!this._port)return Promise.reject(new W(WG,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=qG();return new Promise((a,l)=>{if($o(s))return this._processWork(),void l(Qt());const u=Ta(s,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),vi(p.abortHandle),this._post({type:AF,jobId:o}),l(Qt()))}),h={resolve:a,reject:l,abortHandle:u,debugInfo:e};this._outJobs.set(o,h),this._post({type:OF,jobId:o,methodName:e,abortable:s!=null},i,n)})}createInvokeProxy(e){return GG(this,e)}on(e,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:Nr.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),Mt(()=>{r.port1.postMessage({type:Nr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:PF,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=$le)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=e;this.apply(i,r,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{vi(e.abortHandle),e.reject(Qt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=gw(e);if(r)switch(r.type){case Cb:this._onResponseMessage(r);break;case OF:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case AF:this._onAbortMessage(r);break;case $F:this._onCloseMessage();break;case PF:this._onOpenPortMessage(r);break;case Ile:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Co.clients.get(this)===e&&e.destroy(),Co.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s=[],abortable:n}=e,o=n?new AbortController:null,a=this._inJobs;let l,u=this._client,h=u[i];try{if(!h&&i&&i.includes(".")){const p=i.split(".");for(let m=0;m<p.length-1;m++)u=u[p[m]],h=u[p[m+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=h.apply(u,s)}catch(p){return void this._post({type:Cb,jobId:r,error:mw(p)})}zl(l)?(a.set(r,{controller:o,promise:l}),l.then(p=>{a.has(r)&&(a.delete(r),this._post({type:Cb,jobId:r},p))},p=>{a.has(r)&&(a.delete(r),Zr(p)||this._post({type:Cb,jobId:r,error:mw(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:Cb,jobId:r},l)}_onOpenPortMessage(e){new Co(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,n=>{i.postMessage(n)}),s=Fy(e.port,"message",n=>{gw(n)?.type===Nr.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),vi(o.abortHandle),r?o.reject(W.fromJSON(JSON.parse(r))):o.resolve(s)}_post(e,i,r){return $D(this._port,e,i,r)}},Co.kernelInfo={buildDate:L9,fullVersion:fD,revision:N9},Co.clients=new Map,Co),Ole=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new fw,this._ongoingLowPriorityJobsQueue=new fw}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,i){return new Promise((r,s)=>{let n=!0;const o=a=>{hi(i.signal),n&&(n=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];zl(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new wy(u,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new wy(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a?.invoke(e,i,r))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Qt(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Qt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Ele(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=eo();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a?.jobAdded())}return s.promise}createInvokeProxy(e){return GG(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>hf(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r===0&&e(i)})})}get test(){}};const Ple={async request(t,e){const i=t.options,r=i.responseType;i.signal=e?.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&oR(t.url)?.after?r:"array-buffer";const s=await Tt(t.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}};let y0;const Dle=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,AR=globalThis.document?.documentElement;function YG(){const t=AR?.getAttribute("lang"),e=globalThis.navigator?.language;return Dle??t??e??"en"}function wn(){return y0===void 0&&(y0=YG()),y0}const Lle=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function AD(t=wn()){return Lle.exec(t)?.groups}const gx=[];function JG(t){return gx.push(t),Mt(()=>{gx.splice(gx.indexOf(t),1)})}const yx=[];function OD(t){return yx.push(t),Mt(()=>yx.splice(yx.indexOf(t),1))}function DF(){const t=YG();y0!==t&&([...yx].forEach(e=>e(t)),y0=t,[...gx].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",DF),AR&&new MutationObserver(()=>{DF()}).observe(AR,{attributeFilter:["lang"]});const Oo="system",Nh="unknown",Fh="UTC",Nle=Intl.DateTimeFormat().resolvedOptions().timeZone,LF=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class mf extends Error{}class Fle extends mf{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class jle extends mf{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class zle extends mf{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ig extends mf{}class ZG extends mf{constructor(e){super(`Invalid unit ${e}`)}}class as extends mf{}class wc extends mf{constructor(){super("Zone is an abstract class")}}const Me="numeric",Ma="short",Qn="long",cE={year:Me,month:Me,day:Me},XG={year:Me,month:Ma,day:Me},Vle={year:Me,month:Ma,day:Me,weekday:Ma},KG={year:Me,month:Qn,day:Me},QG={year:Me,month:Qn,day:Me,weekday:Qn},e7={hour:Me,minute:Me},t7={hour:Me,minute:Me,second:Me},i7={hour:Me,minute:Me,second:Me,timeZoneName:Ma},r7={hour:Me,minute:Me,second:Me,timeZoneName:Qn},s7={hour:Me,minute:Me,hourCycle:"h23"},n7={hour:Me,minute:Me,second:Me,hourCycle:"h23"},o7={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:Ma},a7={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:Qn},l7={year:Me,month:Me,day:Me,hour:Me,minute:Me},u7={year:Me,month:Me,day:Me,hour:Me,minute:Me,second:Me},c7={year:Me,month:Ma,day:Me,hour:Me,minute:Me},h7={year:Me,month:Ma,day:Me,hour:Me,minute:Me,second:Me},Ule={year:Me,month:Ma,day:Me,weekday:Ma,hour:Me,minute:Me},d7={year:Me,month:Qn,day:Me,hour:Me,minute:Me,timeZoneName:Ma},p7={year:Me,month:Qn,day:Me,hour:Me,minute:Me,second:Me,timeZoneName:Ma},f7={year:Me,month:Qn,day:Me,weekday:Qn,hour:Me,minute:Me,timeZoneName:Qn},m7={year:Me,month:Qn,day:Me,weekday:Qn,hour:Me,minute:Me,second:Me,timeZoneName:Qn};class gf{get type(){throw new wc}get name(){throw new wc}get ianaName(){return this.name}get isUniversal(){throw new wc}offsetName(e,i){throw new wc}formatOffset(e,i){throw new wc}offset(e){throw new wc}equals(e){throw new wc}get isValid(){throw new wc}}let WM=null;class sT extends gf{static get instance(){return WM===null&&(WM=new sT),WM}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return T7(e,i,r)}formatOffset(e,i){return b0(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const OR=new Map;function Hle(t){let e=OR.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),OR.set(t,e)),e}const Ble={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Gle(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,l,u,h]=r;return[o,s,n,a,l,u,h]}function Wle(t,e){const i=t.formatToParts(e),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=Ble[n];n==="era"?r[a]=o:nt(a)||(r[a]=parseInt(o,10))}return r}const qM=new Map;class xn extends gf{static create(e){let i=qM.get(e);return i===void 0&&qM.set(e,i=new xn(e)),i}static resetCache(){qM.clear(),OR.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=xn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return T7(e,i,r,this.name)}formatOffset(e,i){return b0(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=Hle(this.name);let[s,n,o,a,l,u,h]=r.formatToParts?Wle(r,i):Gle(r,i);a==="BC"&&(s=-Math.abs(s)+1);const m=oT({year:s,month:n,day:o,hour:l===24?0:l,minute:u,second:h,millisecond:0});let y=+i;const v=y%1e3;return y-=v>=0?v:1e3+v,(m-y)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let NF={};function qle(t,e={}){const i=JSON.stringify([t,e]);let r=NF[i];return r||(r=new Intl.ListFormat(t,e),NF[i]=r),r}const PR=new Map;function DR(t,e={}){const i=JSON.stringify([t,e]);let r=PR.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),PR.set(i,r)),r}const LR=new Map;function Yle(t,e={}){const i=JSON.stringify([t,e]);let r=LR.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),LR.set(i,r)),r}const NR=new Map;function Jle(t,e={}){const{base:i,...r}=e,s=JSON.stringify([t,r]);let n=NR.get(s);return n===void 0&&(n=new Intl.RelativeTimeFormat(t,e),NR.set(s,n)),n}let uv=null;function Zle(){return uv||(uv=new Intl.DateTimeFormat().resolvedOptions().locale,uv)}const FR=new Map;function g7(t){let e=FR.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),FR.set(t,e)),e}const jR=new Map;function Xle(t){let e=jR.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...y7,...e}),jR.set(t,e)}return e}function Kle(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,s;try{r=DR(t).resolvedOptions(),s=t}catch{const l=t.substring(0,i);r=DR(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function Qle(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function eue(t){const e=[];for(let i=1;i<=12;i++){const r=ke.utc(2009,i,1);e.push(t(r))}return e}function tue(t){const e=[];for(let i=1;i<=7;i++){const r=ke.utc(2016,11,13+i);e.push(t(r))}return e}function F1(t,e,i,r){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):r(e)}function iue(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||g7(t.locale).numberingSystem==="latn"}class rue{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Yle(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):FD(e,3);return lr(i,this.padTo)}}}class sue{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&xn.create(a).valid?(s=a,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=DR(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class nue{constructor(e,i,r){this.opts={style:"long",...r},!i&&E7()&&(this.rtf=Jle(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):Mue(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const y7={firstDay:1,minimalDays:4,weekend:[6,7]};class Wt{static fromOpts(e){return Wt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,s,n=!1){const o=e||zi.defaultLocale,a=o||(n?"en-US":Zle()),l=i||zi.defaultNumberingSystem,u=r||zi.defaultOutputCalendar,h=VR(s)||zi.defaultWeekSettings;return new Wt(a,l,u,h,o)}static resetCache(){uv=null,PR.clear(),LR.clear(),NR.clear(),FR.clear(),jR.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return Wt.create(e,i,r,s)}constructor(e,i,r,s,n){const[o,a,l]=Kle(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=s,this.intl=Qle(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=iue(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Wt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,VR(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return F1(this,e,R7,()=>{const r=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=eue(n=>this.extract(n,r,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1){return F1(this,e,A7,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=tue(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return F1(this,void 0,()=>O7,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ke.utc(2016,11,13,9),ke.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return F1(this,e,P7,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[ke.utc(-40,1,1),ke.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const s=this.dtFormatter(e,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new rue(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new sue(e,this.intl,i)}relFormatter(e={}){return new nue(this.intl,this.isEnglish(),e)}listFormatter(e={}){return qle(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||g7(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:C7()?Xle(this.locale):y7}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let YM=null;class cr extends gf{static get utcInstance(){return YM===null&&(YM=new cr(0)),YM}static instance(e){return e===0?cr.utcInstance:new cr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new cr(aT(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${b0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${b0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return b0(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class oue extends gf{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function rh(t,e){if(nt(t)||t===null)return e;if(t instanceof gf)return t;if(due(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?sT.instance:i==="utc"||i==="gmt"?cr.utcInstance:cr.parseSpecifier(i)||xn.create(t)}else return Sh(t)?cr.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new oue(t)}const PD={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},FF={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},aue=PD.hanidec.replace(/[\[|\]]/g,"").split("");function lue(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(PD.hanidec)!==-1)e+=aue.indexOf(t[i]);else for(const s in FF){const[n,o]=FF[s];r>=n&&r<=o&&(e+=r-n)}}return parseInt(e,10)}else return e}const zR=new Map;function uue(){zR.clear()}function qo({numberingSystem:t},e=""){const i=t||"latn";let r=zR.get(i);r===void 0&&(r=new Map,zR.set(i,r));let s=r.get(e);return s===void 0&&(s=new RegExp(`${PD[i]}${e}`),r.set(e,s)),s}let jF=()=>Date.now(),zF="system",VF=null,UF=null,HF=null,BF=60,GF,WF=null;class zi{static get now(){return jF}static set now(e){jF=e}static set defaultZone(e){zF=e}static get defaultZone(){return rh(zF,sT.instance)}static get defaultLocale(){return VF}static set defaultLocale(e){VF=e}static get defaultNumberingSystem(){return UF}static set defaultNumberingSystem(e){UF=e}static get defaultOutputCalendar(){return HF}static set defaultOutputCalendar(e){HF=e}static get defaultWeekSettings(){return WF}static set defaultWeekSettings(e){WF=VR(e)}static get twoDigitCutoffYear(){return BF}static set twoDigitCutoffYear(e){BF=e%100}static get throwOnInvalid(){return GF}static set throwOnInvalid(e){GF=e}static resetCaches(){Wt.resetCache(),xn.resetCache(),ke.resetCache(),uue()}}class ba{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const b7=[0,31,59,90,120,151,181,212,243,273,304,334],v7=[0,31,60,91,121,152,182,213,244,274,305,335];function ko(t,e){return new ba("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function DD(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function w7(t,e,i){return i+(t1(t)?v7:b7)[e-1]}function _7(t,e){const i=t1(t)?v7:b7,r=i.findIndex(n=>n<e),s=e-i[r];return{month:r+1,day:s}}function LD(t,e){return(t-e+7)%7+1}function hE(t,e=4,i=1){const{year:r,month:s,day:n}=t,o=w7(r,s,n),a=LD(DD(r,s,n),i);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=r-1,l=yw(u,e,i)):l>yw(r,e,i)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...lT(t)}}function qF(t,e=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=t,o=LD(DD(r,1,e),i),a=bg(r);let l=s*7+n-o-7+e,u;l<1?(u=r-1,l+=bg(u)):l>a?(u=r+1,l-=bg(r)):u=r;const{month:h,day:p}=_7(u,l);return{year:u,month:h,day:p,...lT(t)}}function JM(t){const{year:e,month:i,day:r}=t,s=w7(e,i,r);return{year:e,ordinal:s,...lT(t)}}function YF(t){const{year:e,ordinal:i}=t,{month:r,day:s}=_7(e,i);return{year:e,month:r,day:s,...lT(t)}}function JF(t,e){if(!nt(t.localWeekday)||!nt(t.localWeekNumber)||!nt(t.localWeekYear)){if(!nt(t.weekday)||!nt(t.weekNumber)||!nt(t.weekYear))throw new ig("Cannot mix locale-based week fields with ISO-based week fields");return nt(t.localWeekday)||(t.weekday=t.localWeekday),nt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),nt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function cue(t,e=4,i=1){const r=nT(t.weekYear),s=Ro(t.weekNumber,1,yw(t.weekYear,e,i)),n=Ro(t.weekday,1,7);return r?s?n?!1:ko("weekday",t.weekday):ko("week",t.weekNumber):ko("weekYear",t.weekYear)}function hue(t){const e=nT(t.year),i=Ro(t.ordinal,1,bg(t.year));return e?i?!1:ko("ordinal",t.ordinal):ko("year",t.year)}function x7(t){const e=nT(t.year),i=Ro(t.month,1,12),r=Ro(t.day,1,dE(t.year,t.month));return e?i?r?!1:ko("day",t.day):ko("month",t.month):ko("year",t.year)}function S7(t){const{hour:e,minute:i,second:r,millisecond:s}=t,n=Ro(e,0,23)||e===24&&i===0&&r===0&&s===0,o=Ro(i,0,59),a=Ro(r,0,59),l=Ro(s,0,999);return n?o?a?l?!1:ko("millisecond",s):ko("second",r):ko("minute",i):ko("hour",e)}function nt(t){return typeof t>"u"}function Sh(t){return typeof t=="number"}function nT(t){return typeof t=="number"&&t%1===0}function due(t){return typeof t=="string"}function pue(t){return Object.prototype.toString.call(t)==="[object Date]"}function E7(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function C7(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function fue(t){return Array.isArray(t)?t:[t]}function ZF(t,e,i){if(t.length!==0)return t.reduce((r,s)=>{const n=[e(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function mue(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function _y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function VR(t){if(t==null)return null;if(typeof t!="object")throw new as("Week settings must be an object");if(!Ro(t.firstDay,1,7)||!Ro(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Ro(e,1,7)))throw new as("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Ro(t,e,i){return nT(t)&&t>=e&&t<=i}function gue(t,e){return t-e*Math.floor(t/e)}function lr(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Hc(t){if(!(nt(t)||t===null||t===""))return parseInt(t,10)}function dd(t){if(!(nt(t)||t===null||t===""))return parseFloat(t)}function ND(t){if(!(nt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function FD(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function t1(t){return t%4===0&&(t%100!==0||t%400===0)}function bg(t){return t1(t)?366:365}function dE(t,e){const i=gue(e-1,12)+1,r=t+(e-i)/12;return i===2?t1(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function oT(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function XF(t,e,i){return-LD(DD(t,1,e),i)+e-1}function yw(t,e=4,i=1){const r=XF(t,e,i),s=XF(t+1,e,i);return(bg(t)-r+s)/7}function UR(t){return t>99?t:t>zi.twoDigitCutoffYear?1900+t:2e3+t}function T7(t,e,i,r=null){const s=new Date(t),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:e,...n},a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function aT(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function M7(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new as(`Invalid unit value ${t}`);return e}function pE(t,e){const i={};for(const r in t)if(_y(t,r)){const s=t[r];if(s==null)continue;i[e(r)]=M7(s)}return i}function b0(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${lr(i,2)}:${lr(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${lr(i,2)}${lr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function lT(t){return mue(t,["hour","minute","second","millisecond"])}const yue=["January","February","March","April","May","June","July","August","September","October","November","December"],k7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bue=["J","F","M","A","M","J","J","A","S","O","N","D"];function R7(t){switch(t){case"narrow":return[...bue];case"short":return[...k7];case"long":return[...yue];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const I7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],$7=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],vue=["M","T","W","T","F","S","S"];function A7(t){switch(t){case"narrow":return[...vue];case"short":return[...$7];case"long":return[...I7];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const O7=["AM","PM"],wue=["Before Christ","Anno Domini"],_ue=["BC","AD"],xue=["B","A"];function P7(t){switch(t){case"narrow":return[...xue];case"short":return[..._ue];case"long":return[...wue];default:return null}}function Sue(t){return O7[t.hour<12?0:1]}function Eue(t,e){return A7(e)[t.weekday-1]}function Cue(t,e){return R7(e)[t.month-1]}function Tue(t,e){return P7(e)[t.year<0?0:1]}function Mue(t,e,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&n){const p=t==="days";switch(e){case 1:return p?"tomorrow":`next ${s[t][0]}`;case-1:return p?"yesterday":`last ${s[t][0]}`;case 0:return p?"today":`this ${s[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=s[t],h=r?l?u[1]:u[2]||u[1]:l?s[t][0]:t;return o?`${a} ${h} ago`:`in ${a} ${h}`}function KF(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const kue={D:cE,DD:XG,DDD:KG,DDDD:QG,t:e7,tt:t7,ttt:i7,tttt:r7,T:s7,TT:n7,TTT:o7,TTTT:a7,f:l7,ff:c7,fff:d7,ffff:f7,F:u7,FF:h7,FFF:p7,FFFF:m7};class ms{static create(e,i={}){return new ms(e,i)}static parseFormat(e){let i=null,r="",s=!1;const n=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(e){return kue[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return lr(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(y,v)=>this.loc.extract(e,y,v),o=y=>e.isOffsetFixed&&e.offset===0&&y.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,y.format):"",a=()=>r?Sue(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,v)=>r?Cue(e,y):n(v?{month:y}:{month:y,day:"numeric"},"month"),u=(y,v)=>r?Eue(e,y):n(v?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const v=ms.macroTokenToFormatOpts(y);return v?this.formatWithSystemDefault(e,v):y},p=y=>r?Tue(e,y):n({era:y},"era"),m=y=>{switch(y){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(y)}};return KF(ms.parseFormat(i),m)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>u=>{const h=r(u);return h?this.num(l.get(h),u.length):u},n=ms.parseFormat(i),o=n.reduce((l,{literal:u,val:h})=>u?l:l.concat(h),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return KF(n,s(a))}}const D7=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Jy(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function Zy(...t){return e=>t.reduce(([i,r,s],n)=>{const[o,a,l]=n(e,s);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function Xy(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const s=i.exec(t);if(s)return r(s)}return[null,null]}function L7(...t){return(e,i)=>{const r={};let s;for(s=0;s<t.length;s++)r[t[s]]=Hc(e[i+s]);return[r,null,i+s]}}const N7=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Rue=`(?:${N7.source}?(?:\\[(${D7.source})\\])?)?`,jD=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,F7=RegExp(`${jD.source}${Rue}`),zD=RegExp(`(?:T${F7.source})?`),Iue=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,$ue=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Aue=/(\d{4})-?(\d{3})/,Oue=L7("weekYear","weekNumber","weekDay"),Pue=L7("year","ordinal"),Due=/(\d{4})-(\d\d)-(\d\d)/,j7=RegExp(`${jD.source} ?(?:${N7.source}|(${D7.source}))?`),Lue=RegExp(`(?: ${j7.source})?`);function vg(t,e,i){const r=t[e];return nt(r)?i:Hc(r)}function Nue(t,e){return[{year:vg(t,e),month:vg(t,e+1,1),day:vg(t,e+2,1)},null,e+3]}function Ky(t,e){return[{hours:vg(t,e,0),minutes:vg(t,e+1,0),seconds:vg(t,e+2,0),milliseconds:ND(t[e+3])},null,e+4]}function i1(t,e){const i=!t[e]&&!t[e+1],r=aT(t[e+1],t[e+2]),s=i?null:cr.instance(r);return[{},s,e+3]}function r1(t,e){const i=t[e]?xn.create(t[e]):null;return[{},i,e+1]}const Fue=RegExp(`^T?${jD.source}$`),jue=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function zue(t){const[e,i,r,s,n,o,a,l,u]=t,h=e[0]==="-",p=l&&l[0]==="-",m=(y,v=!1)=>y!==void 0&&(v||y&&h)?-y:y;return[{years:m(dd(i)),months:m(dd(r)),weeks:m(dd(s)),days:m(dd(n)),hours:m(dd(o)),minutes:m(dd(a)),seconds:m(dd(l),l==="-0"),milliseconds:m(ND(u),p)}]}const Vue={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function VD(t,e,i,r,s,n,o){const a={year:e.length===2?UR(Hc(e)):Hc(e),month:k7.indexOf(i)+1,day:Hc(r),hour:Hc(s),minute:Hc(n)};return o&&(a.second=Hc(o)),t&&(a.weekday=t.length>3?I7.indexOf(t)+1:$7.indexOf(t)+1),a}const Uue=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Hue(t){const[,e,i,r,s,n,o,a,l,u,h,p]=t,m=VD(e,s,r,i,n,o,a);let y;return l?y=Vue[l]:u?y=0:y=aT(h,p),[m,new cr(y)]}function Bue(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Gue=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Wue=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,que=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function QF(t){const[,e,i,r,s,n,o,a]=t;return[VD(e,s,r,i,n,o,a),cr.utcInstance]}function Yue(t){const[,e,i,r,s,n,o,a]=t;return[VD(e,a,i,r,s,n,o),cr.utcInstance]}const Jue=Jy(Iue,zD),Zue=Jy($ue,zD),Xue=Jy(Aue,zD),Kue=Jy(F7),z7=Zy(Nue,Ky,i1,r1),Que=Zy(Oue,Ky,i1,r1),ece=Zy(Pue,Ky,i1,r1),tce=Zy(Ky,i1,r1);function ice(t){return Xy(t,[Jue,z7],[Zue,Que],[Xue,ece],[Kue,tce])}function rce(t){return Xy(Bue(t),[Uue,Hue])}function sce(t){return Xy(t,[Gue,QF],[Wue,QF],[que,Yue])}function nce(t){return Xy(t,[jue,zue])}const oce=Zy(Ky);function ace(t){return Xy(t,[Fue,oce])}const lce=Jy(Due,Lue),uce=Jy(j7),cce=Zy(Ky,i1,r1);function hce(t){return Xy(t,[lce,z7],[uce,cce])}const ej="Invalid Duration",V7={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},dce={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...V7},ao=146097/400,Df=146097/4800,pce={years:{quarters:4,months:12,weeks:ao/7,days:ao,hours:ao*24,minutes:ao*24*60,seconds:ao*24*60*60,milliseconds:ao*24*60*60*1e3},quarters:{months:3,weeks:ao/28,days:ao/4,hours:ao*24/4,minutes:ao*24*60/4,seconds:ao*24*60*60/4,milliseconds:ao*24*60*60*1e3/4},months:{weeks:Df/7,days:Df,hours:Df*24,minutes:Df*24*60,seconds:Df*24*60*60,milliseconds:Df*24*60*60*1e3},...V7},yp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],fce=yp.slice(0).reverse();function _c(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new At(r)}function U7(t,e){let i=e.milliseconds??0;for(const r of fce.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function tj(t,e){const i=U7(t,e)<0?-1:1;yp.reduceRight((r,s)=>{if(nt(e[s]))return r;if(r){const n=e[r]*i,o=t[s][r],a=Math.floor(n/o);e[s]+=a*i,e[r]-=a*o*i}return s},null),yp.reduce((r,s)=>{if(nt(e[s]))return r;if(r){const n=e[r]%1;e[r]-=n,e[s]+=n*t[r][s]}return s},null)}function mce(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class At{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?pce:dce;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Wt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return At.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new as(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new At({values:pE(e,At.normalizeUnit),loc:Wt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Sh(e))return At.fromMillis(e);if(At.isDuration(e))return e;if(typeof e=="object")return At.fromObject(e);throw new as(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=nce(e);return r?At.fromObject(r,i):At.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=ace(e);return r?At.fromObject(r,i):At.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new as("need to specify a reason the Duration is invalid");const r=e instanceof ba?e:new ba(e,i);if(zi.throwOnInvalid)throw new zle(r);return new At({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new ZG(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?ms.create(this.loc,r).formatDurationFromString(this,e):ej}toHuman(e={}){if(!this.isValid)return ej;const i=yp.map(r=>{const s=this.values[r];return nt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=FD(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ke.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?U7(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=At.fromDurationLike(e),r={};for(const s of yp)(_y(i.values,s)||_y(this.values,s))&&(r[s]=i.get(s)+this.get(s));return _c(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=At.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=M7(e(this.values[r],r));return _c(this,{values:i},!0)}get(e){return this[At.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...pE(e,At.normalizeUnit)};return _c(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:r};return _c(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return tj(this.matrix,e),_c(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=mce(this.normalize().shiftToAll().toObject());return _c(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>At.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of yp)if(e.indexOf(o)>=0){n=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;Sh(s[o])&&(a+=s[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Sh(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return tj(this.matrix,i),_c(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return _c(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of yp)if(!i(this.values[r],e.values[r]))return!1;return!0}}const Lf="Invalid Interval";function gce(t,e){return!t||!t.isValid?Ni.invalid("missing or invalid start"):!e||!e.isValid?Ni.invalid("missing or invalid end"):e<t?Ni.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ni{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new as("need to specify a reason the Interval is invalid");const r=e instanceof ba?e:new ba(e,i);if(zi.throwOnInvalid)throw new jle(r);return new Ni({invalid:r})}static fromDateTimes(e,i){const r=Tb(e),s=Tb(i),n=gce(r,s);return n??new Ni({start:r,end:s})}static after(e,i){const r=At.fromDurationLike(i),s=Tb(e);return Ni.fromDateTimes(s,s.plus(r))}static before(e,i){const r=At.fromDurationLike(i),s=Tb(e);return Ni.fromDateTimes(s.minus(r),s)}static fromISO(e,i){const[r,s]=(e||"").split("/",2);if(r&&s){let n,o;try{n=ke.fromISO(r,i),o=n.isValid}catch{o=!1}let a,l;try{a=ke.fromISO(s,i),l=a.isValid}catch{l=!1}if(o&&l)return Ni.fromDateTimes(n,a);if(o){const u=At.fromISO(s,i);if(u.isValid)return Ni.after(n,u)}else if(l){const u=At.fromISO(r,i);if(u.isValid)return Ni.before(a,u)}}return Ni.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let s;return i?.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(r,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ni.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Tb).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push(Ni.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(e){const i=At.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(Ni.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Ni.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Ni.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const s=[],n=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&s.push(Ni.fromDateTimes(i,l.time)),i=null);return Ni.merge(s)}difference(...e){return Ni.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Lf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=cE,i={}){return this.isValid?ms.create(this.s.loc.clone(i),e).formatInterval(this):Lf}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Lf}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Lf}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Lf}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Lf}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):At.invalid(this.invalidReason)}mapEndpoints(e){return Ni.fromDateTimes(e(this.s),e(this.e))}}class j1{static hasDST(e=zi.defaultZone){const i=ke.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return xn.isValidZone(e)}static normalizeZone(e){return rh(e,zi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Wt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Wt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Wt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Wt.create(i,r,n)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Wt.create(i,r,n)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Wt.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Wt.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Wt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Wt.create(i,null,"gregory").eras(e)}static features(){return{relative:E7(),localeWeek:C7()}}}function ij(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(At.fromMillis(r).as("days"))}function yce(t,e,i){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const h=ij(l,u);return(h-h%7)/7}],["days",ij]],s={},n=t;let o,a;for(const[l,u]of r)i.indexOf(l)>=0&&(o=l,s[l]=u(t,e),a=n.plus(s),a>e?(s[l]--,t=n.plus(s),t>e&&(a=t,s[l]--,t=n.plus(s))):t=a);return[t,s,a,o]}function bce(t,e,i,r){let[s,n,o,a]=yce(t,e,i);const l=e-s,u=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);u.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const h=At.fromObject(n,r);return u.length>0?At.fromMillis(l,r).shiftTo(...u).plus(h):h}const vce="missing Intl.DateTimeFormat.formatToParts support";function jt(t,e=i=>i){return{regex:t,deser:([i])=>e(lue(i))}}const wce="",H7=`[ ${wce}]`,B7=new RegExp(H7,"g");function _ce(t){return t.replace(/\./g,"\\.?").replace(B7,H7)}function rj(t){return t.replace(/\./g,"").replace(B7," ").toLowerCase()}function Yo(t,e){return t===null?null:{regex:RegExp(t.map(_ce).join("|")),deser:([i])=>t.findIndex(r=>rj(i)===rj(r))+e}}function sj(t,e){return{regex:t,deser:([,i,r])=>aT(i,r),groups:e}}function z1(t){return{regex:t,deser:([e])=>e}}function xce(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Sce(t,e){const i=qo(e),r=qo(e,"{2}"),s=qo(e,"{3}"),n=qo(e,"{4}"),o=qo(e,"{6}"),a=qo(e,"{1,2}"),l=qo(e,"{1,3}"),u=qo(e,"{1,6}"),h=qo(e,"{1,9}"),p=qo(e,"{2,4}"),m=qo(e,"{4,6}"),y=S=>({regex:RegExp(xce(S.val)),deser:([E])=>E,literal:!0}),w=(S=>{if(t.literal)return y(S);switch(S.val){case"G":return Yo(e.eras("short"),0);case"GG":return Yo(e.eras("long"),0);case"y":return jt(u);case"yy":return jt(p,UR);case"yyyy":return jt(n);case"yyyyy":return jt(m);case"yyyyyy":return jt(o);case"M":return jt(a);case"MM":return jt(r);case"MMM":return Yo(e.months("short",!0),1);case"MMMM":return Yo(e.months("long",!0),1);case"L":return jt(a);case"LL":return jt(r);case"LLL":return Yo(e.months("short",!1),1);case"LLLL":return Yo(e.months("long",!1),1);case"d":return jt(a);case"dd":return jt(r);case"o":return jt(l);case"ooo":return jt(s);case"HH":return jt(r);case"H":return jt(a);case"hh":return jt(r);case"h":return jt(a);case"mm":return jt(r);case"m":return jt(a);case"q":return jt(a);case"qq":return jt(r);case"s":return jt(a);case"ss":return jt(r);case"S":return jt(l);case"SSS":return jt(s);case"u":return z1(h);case"uu":return z1(a);case"uuu":return jt(i);case"a":return Yo(e.meridiems(),0);case"kkkk":return jt(n);case"kk":return jt(p,UR);case"W":return jt(a);case"WW":return jt(r);case"E":case"c":return jt(i);case"EEE":return Yo(e.weekdays("short",!1),1);case"EEEE":return Yo(e.weekdays("long",!1),1);case"ccc":return Yo(e.weekdays("short",!0),1);case"cccc":return Yo(e.weekdays("long",!0),1);case"Z":case"ZZ":return sj(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return sj(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return z1(/[a-z_+-/]{1,256}?/i);case" ":return z1(/[^\S\n\r]/);default:return y(S)}})(t)||{invalidReason:vce};return w.token=t,w}const Ece={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Cce(t,e,i){const{type:r,value:s}=t;if(r==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=Ece[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function Tce(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function Mce(t,e,i){const r=t.match(e);if(r){const s={};let n=1;for(const o in i)if(_y(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+l))),n+=l}return[r,s]}else return[r,{}]}function kce(t){const e=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return nt(t.z)||(i=xn.create(t.z)),nt(t.Z)||(i||(i=new cr(t.Z)),r=t.Z),nt(t.q)||(t.M=(t.q-1)*3+1),nt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),nt(t.u)||(t.S=ND(t.u)),[Object.keys(t).reduce((n,o)=>{const a=e(o);return a&&(n[a]=t[o]),n},{}),i,r]}let ZM=null;function Rce(){return ZM||(ZM=ke.fromMillis(1555555555555)),ZM}function Ice(t,e){if(t.literal)return t;const i=ms.macroTokenToFormatOpts(t.val),r=Y7(i,e);return r==null||r.includes(void 0)?t:r}function G7(t,e){return Array.prototype.concat(...t.map(i=>Ice(i,e)))}class W7{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=G7(ms.parseFormat(i),e),this.units=this.tokens.map(r=>Sce(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=Tce(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[i,r]=Mce(e,this.regex,this.handlers),[s,n,o]=r?kce(r):[null,null,void 0];if(_y(r,"a")&&_y(r,"H"))throw new ig("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function q7(t,e,i){return new W7(t,i).explainFromTokens(e)}function $ce(t,e,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=q7(t,e,i);return[r,s,n,o]}function Y7(t,e){if(!t)return null;const r=ms.create(e,t).dtFormatter(Rce()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(o=>Cce(o,t,n))}const XM="Invalid DateTime",nj=864e13;function cv(t){return new ba("unsupported zone",`the zone "${t.name}" is not supported`)}function KM(t){return t.weekData===null&&(t.weekData=hE(t.c)),t.weekData}function QM(t){return t.localWeekData===null&&(t.localWeekData=hE(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function pd(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ke({...i,...e,old:i})}function J7(t,e,i){let r=t-e*60*1e3;const s=i.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[t-Math.min(s,n)*60*1e3,Math.max(s,n)]}function V1(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function bx(t,e,i){return J7(oT(t),e,i)}function oj(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,n={...t.c,year:r,month:s,day:Math.min(t.c.day,dE(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=At.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=oT(n);let[l,u]=J7(a,i,t.zone);return o!==0&&(l+=o,u=t.zone.offset(l)),{ts:l,o:u}}function Nf(t,e,i,r,s,n){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,u=ke.fromObject(t,{...i,zone:l,specificOffset:n});return o?u:u.setZone(a)}else return ke.invalid(new ba("unparsable",`the input "${s}" can't be parsed as ${r}`))}function U1(t,e,i=!0){return t.isValid?ms.create(Wt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function e2(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=lr(t.c.year,i?6:4),e?(r+="-",r+=lr(t.c.month),r+="-",r+=lr(t.c.day)):(r+=lr(t.c.month),r+=lr(t.c.day)),r}function aj(t,e,i,r,s,n){let o=lr(t.c.hour);return e?(o+=":",o+=lr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=lr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=lr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=lr(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!n?o+="Z":t.o<0?(o+="-",o+=lr(Math.trunc(-t.o/60)),o+=":",o+=lr(Math.trunc(-t.o%60))):(o+="+",o+=lr(Math.trunc(t.o/60)),o+=":",o+=lr(Math.trunc(t.o%60)))),n&&(o+="["+t.zone.ianaName+"]"),o}const Z7={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ace={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Oce={ordinal:1,hour:0,minute:0,second:0,millisecond:0},X7=["year","month","day","hour","minute","second","millisecond"],Pce=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Dce=["year","ordinal","hour","minute","second","millisecond"];function Lce(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new ZG(t);return e}function lj(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Lce(t)}}function Nce(t){if(hv===void 0&&(hv=zi.now()),t.type!=="iana")return t.offset(hv);const e=t.name;let i=HR.get(e);return i===void 0&&(i=t.offset(hv),HR.set(e,i)),i}function uj(t,e){const i=rh(e.zone,zi.defaultZone);if(!i.isValid)return ke.invalid(cv(i));const r=Wt.fromObject(e);let s,n;if(nt(t.year))s=zi.now();else{for(const l of X7)nt(t[l])&&(t[l]=Z7[l]);const o=x7(t)||S7(t);if(o)return ke.invalid(o);const a=Nce(i);[s,n]=bx(t,a,i)}return new ke({ts:s,zone:i,loc:r,o:n})}function cj(t,e,i){const r=nt(i.round)?!0:i.round,s=(o,a)=>(o=FD(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),n=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(t>e?-0:0,i.units[i.units.length-1])}function hj(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let hv;const HR=new Map;class ke{constructor(e){const i=e.zone||zi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new ba("invalid input"):null)||(i.isValid?null:cv(i));this.ts=nt(e.ts)?zi.now():e.ts;let s=null,n=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,n]=[e.old.c,e.old.o];else{const a=Sh(e.o)&&!e.old?e.o:i.offset(this.ts);s=V1(this.ts,a),r=Number.isNaN(s.year)?new ba("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=e.loc||Wt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new ke({})}static local(){const[e,i]=hj(arguments),[r,s,n,o,a,l,u]=i;return uj({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,i]=hj(arguments),[r,s,n,o,a,l,u]=i;return e.zone=cr.utcInstance,uj({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,i={}){const r=pue(e)?e.valueOf():NaN;if(Number.isNaN(r))return ke.invalid("invalid input");const s=rh(i.zone,zi.defaultZone);return s.isValid?new ke({ts:r,zone:s,loc:Wt.fromObject(i)}):ke.invalid(cv(s))}static fromMillis(e,i={}){if(Sh(e))return e<-nj||e>nj?ke.invalid("Timestamp out of range"):new ke({ts:e,zone:rh(i.zone,zi.defaultZone),loc:Wt.fromObject(i)});throw new as(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Sh(e))return new ke({ts:e*1e3,zone:rh(i.zone,zi.defaultZone),loc:Wt.fromObject(i)});throw new as("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=rh(i.zone,zi.defaultZone);if(!r.isValid)return ke.invalid(cv(r));const s=Wt.fromObject(i),n=pE(e,lj),{minDaysInFirstWeek:o,startOfWeek:a}=JF(n,s),l=zi.now(),u=nt(i.specificOffset)?r.offset(l):i.specificOffset,h=!nt(n.ordinal),p=!nt(n.year),m=!nt(n.month)||!nt(n.day),y=p||m,v=n.weekYear||n.weekNumber;if((y||h)&&v)throw new ig("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new ig("Can't mix ordinal dates with month/day");const w=v||n.weekday&&!y;let S,E,I=V1(l,u);w?(S=Pce,E=Ace,I=hE(I,o,a)):h?(S=Dce,E=Oce,I=JM(I)):(S=X7,E=Z7);let D=!1;for(const ae of S){const ge=n[ae];nt(ge)?D?n[ae]=E[ae]:n[ae]=I[ae]:D=!0}const O=w?cue(n,o,a):h?hue(n):x7(n),A=O||S7(n);if(A)return ke.invalid(A);const z=w?qF(n,o,a):h?YF(n):n,[_,Z]=bx(z,u,r),Q=new ke({ts:_,zone:r,o:Z,loc:s});return n.weekday&&y&&e.weekday!==Q.weekday?ke.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${Q.toISO()}`):Q.isValid?Q:ke.invalid(Q.invalid)}static fromISO(e,i={}){const[r,s]=ice(e);return Nf(r,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,s]=rce(e);return Nf(r,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,s]=sce(e);return Nf(r,s,i,"HTTP",i)}static fromFormat(e,i,r={}){if(nt(e)||nt(i))throw new as("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=Wt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,u,h]=$ce(o,e,i);return h?ke.invalid(h):Nf(a,l,r,`format ${i}`,e,u)}static fromString(e,i,r={}){return ke.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,s]=hce(e);return Nf(r,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new as("need to specify a reason the DateTime is invalid");const r=e instanceof ba?e:new ba(e,i);if(zi.throwOnInvalid)throw new Fle(r);return new ke({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=Y7(e,Wt.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return G7(ms.parseFormat(e),Wt.fromObject(i)).map(s=>s.val).join("")}static resetCache(){hv=void 0,HR.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?KM(this).weekYear:NaN}get weekNumber(){return this.isValid?KM(this).weekNumber:NaN}get weekday(){return this.isValid?KM(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?QM(this).weekday:NaN}get localWeekNumber(){return this.isValid?QM(this).weekNumber:NaN}get localWeekYear(){return this.isValid?QM(this).weekYear:NaN}get ordinal(){return this.isValid?JM(this.c).ordinal:NaN}get monthShort(){return this.isValid?j1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?j1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?j1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?j1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=oT(this.c),s=this.zone.offset(r-e),n=this.zone.offset(r+e),o=this.zone.offset(r-s*i),a=this.zone.offset(r-n*i);if(o===a)return[this];const l=r-o*i,u=r-a*i,h=V1(l,o),p=V1(u,a);return h.hour===p.hour&&h.minute===p.minute&&h.second===p.second&&h.millisecond===p.millisecond?[pd(this,{ts:l}),pd(this,{ts:u})]:[this]}get isInLeapYear(){return t1(this.year)}get daysInMonth(){return dE(this.year,this.month)}get daysInYear(){return this.isValid?bg(this.year):NaN}get weeksInWeekYear(){return this.isValid?yw(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?yw(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:s}=ms.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(cr.instance(e),i)}toLocal(){return this.setZone(zi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=rh(e,zi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||r){const n=e.offset(this.ts),o=this.toObject();[s]=bx(o,n,e)}return pd(this,{ts:s,zone:e})}else return ke.invalid(cv(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return pd(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=pE(e,lj),{minDaysInFirstWeek:r,startOfWeek:s}=JF(i,this.loc),n=!nt(i.weekYear)||!nt(i.weekNumber)||!nt(i.weekday),o=!nt(i.ordinal),a=!nt(i.year),l=!nt(i.month)||!nt(i.day),u=a||l,h=i.weekYear||i.weekNumber;if((u||o)&&h)throw new ig("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new ig("Can't mix ordinal dates with month/day");let p;n?p=qF({...hE(this.c,r,s),...i},r,s):nt(i.ordinal)?(p={...this.toObject(),...i},nt(i.day)&&(p.day=Math.min(dE(p.year,p.month),p.day))):p=YF({...JM(this.c),...i});const[m,y]=bx(p,this.o,this.zone);return pd(this,{ts:m,o:y})}plus(e){if(!this.isValid)return this;const i=At.fromDurationLike(e);return pd(this,oj(this,i))}minus(e){if(!this.isValid)return this;const i=At.fromDurationLike(e).negate();return pd(this,oj(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=At.normalizeUnit(e);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?ms.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):XM}toLocaleString(e=cE,i={}){return this.isValid?ms.create(this.loc.clone(i),e).formatDateTime(this):XM}toLocaleParts(e={}){return this.isValid?ms.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=e2(this,o);return a+="T",a+=aj(this,o,i,r,s,n),a}toISODate({format:e="extended"}={}){return this.isValid?e2(this,e==="extended"):null}toISOWeekDate(){return U1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+aj(this,o==="extended",i,e,r,n):null}toRFC2822(){return U1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return U1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?e2(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(r&&(s+=" "),i?s+="z":e&&(s+="ZZ")),U1(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():XM}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return At.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=fue(i).map(At.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=bce(a,l,n,s);return o?u.negate():u}diffNow(e="milliseconds",i={}){return this.diff(ke.now(),e,i)}until(e){return this.isValid?Ni.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const s=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ke.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(s=e.unit,n=void 0),cj(i,this.plus(r),{...e,numeric:"always",units:s,unit:n})}toRelativeCalendar(e={}){return this.isValid?cj(e.base||ke.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ke.isDateTime))throw new as("min requires all arguments be DateTimes");return ZF(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ke.isDateTime))throw new as("max requires all arguments be DateTimes");return ZF(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=Wt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return q7(o,e,i)}static fromStringExplain(e,i,r={}){return ke.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=Wt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new W7(n,e)}static fromFormatParser(e,i,r={}){if(nt(e)||nt(i))throw new as("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,o=Wt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(i.locale))throw new as(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:u,invalidReason:h}=i.explainFromTokens(e);return h?ke.invalid(h):Nf(a,l,r,`format ${i.format}`,e,u)}static get DATE_SHORT(){return cE}static get DATE_MED(){return XG}static get DATE_MED_WITH_WEEKDAY(){return Vle}static get DATE_FULL(){return KG}static get DATE_HUGE(){return QG}static get TIME_SIMPLE(){return e7}static get TIME_WITH_SECONDS(){return t7}static get TIME_WITH_SHORT_OFFSET(){return i7}static get TIME_WITH_LONG_OFFSET(){return r7}static get TIME_24_SIMPLE(){return s7}static get TIME_24_WITH_SECONDS(){return n7}static get TIME_24_WITH_SHORT_OFFSET(){return o7}static get TIME_24_WITH_LONG_OFFSET(){return a7}static get DATETIME_SHORT(){return l7}static get DATETIME_SHORT_WITH_SECONDS(){return u7}static get DATETIME_MED(){return c7}static get DATETIME_MED_WITH_SECONDS(){return h7}static get DATETIME_MED_WITH_WEEKDAY(){return Ule}static get DATETIME_FULL(){return d7}static get DATETIME_FULL_WITH_SECONDS(){return p7}static get DATETIME_HUGE(){return f7}static get DATETIME_HUGE_WITH_SECONDS(){return m7}}function Tb(t){if(ke.isDateTime(t))return t;if(t&&t.valueOf&&Sh(t.valueOf()))return ke.fromJSDate(t);if(t&&typeof t=="object")return ke.fromObject(t);throw new as(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Fce="shortOffset";function jce(t){return"timeZoneIANA"in t}function zce(t){return t.startsWith("UTC")}function fE(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?vx(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?Vce(i):null}}}}}function vx(t,e=Oo){return t?jce(t)?t.timeZoneIANA:Uce(t,e):e}function Vce(t){return{timeZoneIANA:t}}function Uce(t,e=Oo){if(!t||!LF.has(t.timeZone))return e;const i=LF.get(t.timeZone);return zce(t.timeZone)||t.respectsDaylightSaving?i:Hce(i)}function Hce(t){const e=ke.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${cr.instance(-i).formatOffset(0,"narrow")}`}function YHe(t,e,i,r,s){if(e&&s==="date")return{timeZone:Fh,timeZoneName:void 0};const n=r.timeStyle||r.hour,o=i===Nh;return{timeZone:o?s==="timestamp-offset"?void 0:t??Fh:i,timeZoneName:o&&n?Fce:void 0}}function Bce(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Oo||t===Nh||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const Gce={year:void 0,month:void 0,day:void 0,weekday:void 0},Wce={hour:void 0,minute:void 0,second:void 0},K7={timeZone:Fh},za={year:"numeric",month:"numeric",day:"numeric"},Mb={year:"numeric",month:"long",day:"numeric"},kb={year:"numeric",month:"short",day:"numeric"},Rb={year:"numeric",month:"long",weekday:"long",day:"numeric"},Bc={hour:"numeric",minute:"numeric"},kd={...Bc,second:"numeric"},Q7={hourCycle:"h23"},Ib={...Bc,...Q7},$b={...kd,...Q7},eW={"short-date":za,"short-date-short-time":{...za,...Bc},"short-date-short-time-24":{...za,...Ib},"short-date-long-time":{...za,...kd},"short-date-long-time-24":{...za,...$b},"short-date-le":za,"short-date-le-short-time":{...za,...Bc},"short-date-le-short-time-24":{...za,...Ib},"short-date-le-long-time":{...za,...kd},"short-date-le-long-time-24":{...za,...$b},"long-month-day-year":Mb,"long-month-day-year-short-time":{...Mb,...Bc},"long-month-day-year-short-time-24":{...Mb,...Ib},"long-month-day-year-long-time":{...Mb,...kd},"long-month-day-year-long-time-24":{...Mb,...$b},"day-short-month-year":kb,"day-short-month-year-short-time":{...kb,...Bc},"day-short-month-year-short-time-24":{...kb,...Ib},"day-short-month-year-long-time":{...kb,...kd},"day-short-month-year-long-time-24":{...kb,...$b},"long-date":Rb,"long-date-short-time":{...Rb,...Bc},"long-date-short-time-24":{...Rb,...Ib},"long-date-long-time":{...Rb,...kd},"long-date-long-time-24":{...Rb,...$b},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Bc,"long-time":kd},qce=hr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),tW={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},Yce=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),Jce=Yce.find(({type:t})=>t==="month")?.value.toLowerCase();function iW(){const t=wn(),e=AD(t)?.language;return(e&&tW[e])??t}Jce!=="mart"&&(tW.bs="sr-Latn-CS");let BR=new WeakMap;const uT=eW["short-date-short-time"];function Zce(t){let e=BR.get(t);if(!e){const i=iW(),r=HD(t.timeZone??Oo),s={...t,timeZone:r};e=new Intl.DateTimeFormat(i,s),BR.set(t,e)}return e}function JHe(t){return eW[t]}function UD(t,e=uT){return Zce(e).format(t)}function ZHe(t,e=uT){return UD(new Date(t),{...e,...K7,...Wce})}function XHe(t,e=uT){return UD(new Date(`1970-01-01T${t}Z`),{...e,...K7,...Gce})}function KHe(t,e=uT){if(e.timeZone)return UD(new Date(t),e);const i=ke.fromISO(t,{setZone:!0}),r=i.offset===0?Fh:e.timeZone,s={...e,timeZone:r};return i.toLocaleString(s,{locale:iW()})}function HD(t){switch(t){case Oo:return Nle;case Nh:return Fh;default:return t}}OD(()=>{BR=new WeakMap});const Xce={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let wx=new WeakMap,rW={};function GR(t){const e=t||rW;if(!wx.has(e)){const i=wn(),r=AD(i)?.language,s=r&&Xce[r]||i;wx.set(e,new Intl.NumberFormat(s,t))}return wx.get(e)}function QHe(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function eBe(t,e){return Object.is(t,-0)&&(t=0),GR(e).format(t)}function tBe(t,e=wn()){if(!t)return null;let i=dj.get(e);if(!i){const r=GR().formatToParts(12345.6),s=[...GR({useGrouping:!1}).format(9876543210)].reverse(),n=new Map(s.map((p,m)=>[p,m])),o=new RegExp(`[${r.find(p=>p.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(p=>p.type==="decimal")?.value}]`),l=new RegExp(`[${s.join("")}]`,"g"),u=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,h=/[-\u2212\u2013\u2014\u2015]/g;i=p=>{if((p=p.trim().replaceAll(o,"").replace(a,".").replace(l,y=>String(n.get(y))).replaceAll(u,"").replaceAll(h,"-"))==="")return null;const m=Number(p);return isNaN(m)?null:m},dj.set(e,i)}return i(t)}OD(()=>{wx=new WeakMap,rW={}});const dj=new Map,sW={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Kce(t){return t in sW}function pj(t){if(Kce(t)){const e=sW[t];return e===!0?t:e}return null}const dv=[],wg=new Map;function fj(t){for(const e of wg.keys())aW(t.pattern,e)&&wg.delete(e)}function Qce(t){return dv.includes(t)||(fj(t),dv.unshift(t)),Mt(()=>{const e=dv.indexOf(t);e>-1&&(dv.splice(e,1),fj(t))})}async function nW(t){const e=wn();wg.has(t)||wg.set(t,ehe(t,e));const i=wg.get(t);return i&&await the.add(i),i}function oW(t){const e=AD(t);return e?pj(t)??pj(e.language):null}async function ehe(t,e){const i=[];for(const r of dv)if(aW(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new W("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new W("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function aW(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}OD(()=>{wg.clear()});const the=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=eo())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function ihe(t,e,i,r){const s=e.exec(i);if(!s)throw new W("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=oW(r),l=`${n}${o}.json`,u=a?`${n}${o}_${a}.json`:l;let h;try{h=await mj(t(u))}catch(p){if(u===l)throw new W("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{h=await mj(t(l))}catch(m){throw new W("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return h}async function mj(t){if(gj.fetchBundleAsset!=null)return gj.fetchBundleAsset(t);const e=await Tt(t,{responseType:"text"});return JSON.parse(e.data)}let rhe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return ihe(this.getAssetUrl,this.matcher,e,i)}};function she(t){return new rhe(t)}const gj={};Qce(she({pattern:"esri/",location:Li}));const yj={};function nhe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...yj.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=yj.baseUrl),e}let ohe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},_x=class{constructor(){this._dispatcher=new ohe,this._workerPostMessage({type:Nr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){LS(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){LS(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=gw(e);if(i&&i.type===Nr.OPEN){const{modulePath:r,jobId:s}=i;let n=await wy.loadWorker(r);n||(n=await import(r));const o=wy.connect(n);this._workerPostMessage({type:Nr.OPENED,jobId:s,data:o})}}};const WR=()=>he.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:ahe}=Nr,lhe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let H1,B1;const bj="Failed to create Worker. Fallback to execute module in main thread";async function uhe(){if(!J("esri-workers"))return vj(new _x);if(!H1&&!B1)try{const e=lhe.split("{CONFIGURATION}").join(che());H1=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){B1=e||{}}let t;if(H1)try{t=new Worker(H1,{name:"esri-worker-"+hhe++})}catch{WR().warn(bj,B1),t=new _x}else WR().warn(bj,B1),t=new _x;return vj(t)}async function vj(t){return new Promise(e=>{function i(s){const n=gw(s);n&&n.type===ahe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),WR().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new _x).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function che(){let t;if(Ct.default!=null){const s={...Ct};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(Ct));t.assetsPath=qn(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?qn(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=wn(),t.has={"esri-csp-restrictions":J("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":J("esri-2d-update-debug"),"esri-2d-log-updating":J("esri-2d-log-updating"),"featurelayer-pbf":J("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":J("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":J("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":J("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":J("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":J("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":J("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":J("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":J("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":J("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":J("featurelayer-snapshot-enabled"),"esri-atomics":J("esri-atomics"),"esri-shared-array-buffer":J("esri-shared-array-buffer"),"esri-tiles-debug":J("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":J("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":J("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=qn(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=qn(t.workers.workerPath):t.workers.workerPath=qn(Li("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ct.workers.loaderConfig,i=nhe({baseUrl:e?.baseUrl,locale:wn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:L9,fullVersion:fD,revision:N9}})}let hhe=0;const{ABORT:wj,INVOKE:dhe,OPEN:phe,OPENED:fhe,RESPONSE:Ab}=Nr;let mhe=class lW{static async create(e){const i=await uhe();return new lW(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),he.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,s=qG();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:GP(r,()=>{this._outJobs.delete(s),this._post({type:wj,jobId:s})})};this._outJobs.set(s,a),this._post({type:phe,jobId:s,modulePath:e})})}_onMessage(e){const i=gw(e);if(i)switch(i.type){case fhe:this._onOpenedMessage(i);break;case Ab:this._onResponseMessage(i);break;case wj:this._onAbortMessage(i);break;case dhe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:n}=e,o=n?new AbortController:null,a=this._inJobs,l=Ple[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:Ab,jobId:r,error:mw(h)})}zl(u)?(a.set(r,{controller:o,promise:u}),u.then(h=>{a.has(r)&&(a.delete(r),this._post({type:Ab,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),Zr(h)||this._post({type:Ab,jobId:r,error:mw(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:Ab,jobId:r},u)}_onOpenedMessage(e){const{jobId:i,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),vi(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),vi(n.abortHandle),r?n.reject(W.fromJSON(JSON.parse(r))):n.resolve(s))}_post(e,i,r){return $D(this.worker,e,i,r)}};const _j=J("host-browser")?Math.min(navigator.hardwareConcurrency-1,J("workers-pool-size")??8):0;let bp=J("esri-mobile")?Math.min(_j,3):_j;bp||(bp=J("safari")&&J("mac")?7:2);let xj=0;const xx=[];function ghe(){uW()}async function G1(t,e){const i=new Ole,{registryTarget:r,...s}=e;return await i.open(t,s),r&&Sle(r,i),i}async function yhe(t,e={}){if(typeof t!="string")throw new W("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(J("host-webworker")&&!J("esri-workers")&&(i="local"),i==="local"){let r=await wy.loadWorker(t);r||(r=await import(t)),hi(e.signal);const s=e.client||r;return G1([wy.connect(r,e.schedule)],{...e,client:s})}if(await uW(),hi(e.signal),i==="dedicated"){const r=xj++%bp;return G1([await xx[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,bp);if(r<bp){const s=new Array(r);for(let n=0;n<r;++n){const o=xj++%bp;s[n]=xx[o].open(t,e)}return G1(s,e)}}return G1(xx.map(r=>r.open(t,e)),e)}let W1=null;async function uW(){if(W1)return W1;new AbortController;const t=[];for(let e=0;e<bp;e++){const i=mhe.create(e).then(r=>(xx[e]=r,r));t.push(i)}return W1=Promise.all(t),W1}function Gh(){return[0,0,0]}function bhe(t){return[t[0],t[1],t[2]]}function Qy(t,e,i){return[t,e,i]}function vhe(t,e,i){return[t,e,i]}function whe(t,e=Gh()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function cW(){return Gh()}function hW(){return Qy(1,1,1)}function dW(){return Qy(1,0,0)}function pW(){return Qy(0,1,0)}function fW(){return Qy(0,0,1)}const _he=cW(),xhe=hW(),She=dW(),Ehe=pW(),Che=fW();Object.freeze(Object.defineProperty({__proto__:null,ONES:xhe,UNIT_X:She,UNIT_Y:Ehe,UNIT_Z:Che,ZEROS:_he,clone:bhe,create:Gh,freeze:vhe,fromArray:whe,fromValues:Qy,ones:hW,unitX:dW,unitY:pW,unitZ:fW,zeros:cW},Symbol.toStringTag,{value:"Module"}));const nBe=Math.PI/180,oBe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,xc=Ii.radius,Jo=Ii.eccentricitySquared,The={a1:xc*Jo,a2:xc*Jo*xc*Jo,a3:xc*Jo*Jo/2,a4:xc*Jo*xc*Jo*2.5,a5:xc*Jo+xc*Jo*Jo/2,a6:1-Jo},aBe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Ii.radius,f:Ii.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Dh.radius,f:Dh.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Tl.radius,f:Tl.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Tl.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var K;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(K||(K={}));const Mhe={[K.WGS84]:{[K.CGCS2000]:pi,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:pi,[K.SPHERICAL_ECEF]:w0,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:_g,[K.PLATE_CARREE]:xg,[K.WGS84]:pi,[K.WGS84_ECEF]:Cg},[K.CGCS2000]:{[K.CGCS2000]:pi,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:pi,[K.SPHERICAL_ECEF]:w0,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:_g,[K.PLATE_CARREE]:xg,[K.WGS84]:pi,[K.WGS84_ECEF]:Cg},[K.GCSMARS2000]:{[K.CGCS2000]:null,[K.GCSMARS2000]:pi,[K.GCSMOON2000]:null,[K.LON_LAT]:pi,[K.SPHERICAL_ECEF]:null,[K.SPHERICAL_MARS_PCPF]:Cj,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:null,[K.PLATE_CARREE]:null,[K.WGS84]:null,[K.WGS84_ECEF]:null},[K.GCSMOON2000]:{[K.CGCS2000]:null,[K.GCSMARS2000]:null,[K.GCSMOON2000]:pi,[K.LON_LAT]:pi,[K.SPHERICAL_ECEF]:null,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:Ej,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:null,[K.PLATE_CARREE]:null,[K.WGS84]:null,[K.WGS84_ECEF]:null},[K.WEB_MERCATOR]:{[K.CGCS2000]:v0,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:v0,[K.SPHERICAL_ECEF]:Rhe,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:pi,[K.PLATE_CARREE]:Ahe,[K.WGS84]:v0,[K.WGS84_ECEF]:Ihe},[K.WGS84_ECEF]:{[K.CGCS2000]:Tg,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:Tg,[K.SPHERICAL_ECEF]:Vhe,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:Uhe,[K.PLATE_CARREE]:Ohe,[K.WGS84]:Tg,[K.WGS84_ECEF]:pi},[K.SPHERICAL_ECEF]:{[K.CGCS2000]:Eg,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:Eg,[K.SPHERICAL_ECEF]:pi,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:Fhe,[K.PLATE_CARREE]:Phe,[K.WGS84]:Eg,[K.WGS84_ECEF]:jhe},[K.SPHERICAL_MARS_PCPF]:{[K.CGCS2000]:null,[K.GCSMARS2000]:Mj,[K.GCSMOON2000]:null,[K.LON_LAT]:Mj,[K.SPHERICAL_ECEF]:null,[K.SPHERICAL_MARS_PCPF]:pi,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:null,[K.PLATE_CARREE]:null,[K.WGS84]:null,[K.WGS84_ECEF]:null},[K.SPHERICAL_MOON_PCPF]:{[K.CGCS2000]:null,[K.GCSMARS2000]:null,[K.GCSMOON2000]:Tj,[K.LON_LAT]:Tj,[K.SPHERICAL_ECEF]:null,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:pi,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:null,[K.PLATE_CARREE]:null,[K.WGS84]:null,[K.WGS84_ECEF]:null},[K.UNKNOWN]:{[K.CGCS2000]:null,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:null,[K.SPHERICAL_ECEF]:null,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:pi,[K.WEB_MERCATOR]:null,[K.PLATE_CARREE]:null,[K.WGS84]:null,[K.WGS84_ECEF]:null},[K.LON_LAT]:{[K.CGCS2000]:pi,[K.GCSMARS2000]:pi,[K.GCSMOON2000]:pi,[K.LON_LAT]:pi,[K.SPHERICAL_ECEF]:w0,[K.SPHERICAL_MARS_PCPF]:Cj,[K.SPHERICAL_MOON_PCPF]:Ej,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:_g,[K.PLATE_CARREE]:xg,[K.WGS84]:pi,[K.WGS84_ECEF]:Cg},[K.PLATE_CARREE]:{[K.CGCS2000]:Sg,[K.GCSMARS2000]:null,[K.GCSMOON2000]:null,[K.LON_LAT]:Sg,[K.SPHERICAL_ECEF]:Dhe,[K.SPHERICAL_MARS_PCPF]:null,[K.SPHERICAL_MOON_PCPF]:null,[K.UNKNOWN]:null,[K.WEB_MERCATOR]:Lhe,[K.PLATE_CARREE]:pi,[K.WGS84]:Sg,[K.WGS84_ECEF]:Nhe}};function mW(t,e){return khe(t,e)?.projector}function khe(t,e){if(t==null||e==null)return null;if(Xl.source.spatialReference===t&&Xl.dest.spatialReference===e)return Xl;const i=Sj(t,Xl.source),r=Sj(e,Xl.dest);return i===K.UNKNOWN&&r===K.UNKNOWN?Er(t,e)?Xl.projector=pi:Xl.projector=null:Xl.projector=Mhe[i][r],Xl}function Sj(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Do(t,1)),oE(t)?e.spatialReferenceId=K.SPHERICAL_ECEF:Qp(t)?e.spatialReferenceId=K.WGS84:Ll(t)?e.spatialReferenceId=K.WEB_MERCATOR:Boe(t)?e.spatialReferenceId=K.PLATE_CARREE:t.wkt===Yoe.wkt?e.spatialReferenceId=K.WGS84_ECEF:t.wkid===Kp.CGCS2000?e.spatialReferenceId=K.CGCS2000:t.wkt===_D.wkt?e.spatialReferenceId=K.SPHERICAL_MARS_PCPF:t.wkt===xD.wkt?e.spatialReferenceId=K.SPHERICAL_MOON_PCPF:iG(t)?e.spatialReferenceId=K.GCSMARS2000:rG(t)?e.spatialReferenceId=K.GCSMOON2000:e.spatialReferenceId=K.UNKNOWN):K.UNKNOWN}function pi(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function v0(t,e,i,r){i[r]=Sy*(t[e]/Ip),i[r+1]=Sy*(gW-2*Math.atan(Math.exp(-t[e+1]/Ip))),i[r+2]=t[e+2]}function Rhe(t,e,i,r){const s=t[e]/Ip,n=gW-2*Math.atan(Math.exp(-t[e+1]/Ip)),o=Ip+t[e+2],a=Math.cos(n)*o;i[r]=Math.cos(s)*a,i[r+1]=Math.sin(s)*a,i[r+2]=Math.sin(n)*o}function Ihe(t,e,i,r){v0(t,e,i,r),Cg(i,r,i,r)}function $he(t,e,i,r,s){const n=.4999999*Math.PI,o=Ao(xy*t[e+1],-n,n),a=Math.sin(o);i[r++]=xy*t[e]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function _g(t,e,i,r){$he(t,e,i,r,Ii)}function xg(t,e,i,r){i[r]=t[e]*kj,i[r+1]=t[e+1]*kj,i[r+2]=t[e+2]}function Sg(t,e,i,r){i[r]=t[e]*Rj,i[r+1]=t[e+1]*Rj,i[r+2]=t[e+2]}function Ahe(t,e,i,r){v0(t,e,i,r),xg(i,r,i,r)}function Ohe(t,e,i,r){Tg(t,e,i,r),xg(i,r,i,r)}function Phe(t,e,i,r){Eg(t,e,i,r),xg(i,r,i,r)}function Dhe(t,e,i,r){Sg(t,e,i,r),w0(i,r,i,r)}function Lhe(t,e,i,r){Sg(t,e,i,r),_g(i,r,i,r)}function Nhe(t,e,i,r){Sg(t,e,i,r),Cg(i,r,i,r)}function BD(t,e,i,r,s){const n=s+t[e+2],o=xy*t[e+1],a=xy*t[e],l=Math.cos(o)*n;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*n}function Ej(t,e,i,r){BD(t,e,i,r,Dh.radius)}function Cj(t,e,i,r){BD(t,e,i,r,Tl.radius)}function w0(t,e,i,r){BD(t,e,i,r,Ii.radius)}function GD(t,e,i,r,s){const n=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(n*n+o*o+a*a),u=wne(a/(l===0?1:l)),h=Math.atan2(o,n);i[r++]=Sy*h,i[r++]=Sy*u,i[r]=l-s}function Tj(t,e,i,r){GD(t,e,i,r,Dh.radius)}function Mj(t,e,i,r){GD(t,e,i,r,Tl.radius)}function Eg(t,e,i,r){GD(t,e,i,r,Ii.radius)}function Fhe(t,e,i,r){Eg(t,e,i,r),_g(i,r,i,r)}function jhe(t,e,i,r){Eg(t,e,i,r),Cg(i,r,i,r)}function zhe(t,e,i,r,s){const n=xy*t[e],o=xy*t[e+1],a=t[e+2],l=Math.sin(o),u=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);i[r++]=(h+a)*u*Math.cos(n),i[r++]=(h+a)*u*Math.sin(n),i[r++]=(h*(1-s.eccentricitySquared)+a)*l}function Cg(t,e,i,r){zhe(t,e,i,r,Ii)}function Tg(t,e,i,r){const s=The,n=t[e],o=t[e+1],a=t[e+2];let l,u,h,p,m,y,v,w,S,E,I,D,O,A,z,_,Z,Q,ae,ge,ne;l=Math.abs(a),u=n*n+o*o,h=Math.sqrt(u),p=u+a*a,m=Math.sqrt(p),ge=Math.atan2(o,n),y=a*a/p,v=u/p,A=s.a2/m,z=s.a3-s.a4/m,v>.3?(w=l/m*(1+v*(s.a1+A+y*z)/m),ae=Math.asin(w),E=w*w,S=Math.sqrt(1-E)):(S=h/m*(1-y*(s.a5-A-v*z)/m),ae=Math.acos(S),E=1-S*S,w=Math.sqrt(E)),I=1-Ii.eccentricitySquared*E,D=Ii.radius/Math.sqrt(I),O=s.a6*D,A=h-D*S,z=l-O*w,Z=S*A+w*z,_=S*z-w*A,Q=_/(O/I+Z),ae+=Q,ne=Z+_*Q/2,a<0&&(ae=-ae),i[r++]=Sy*ge,i[r++]=Sy*ae,i[r]=ne}function Vhe(t,e,i,r){Tg(t,e,i,r),w0(i,r,i,r)}function Uhe(t,e,i,r){Tg(t,e,i,r),_g(i,r,i,r)}const Xl={source:{spatialReference:null,spatialReferenceId:K.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:K.UNKNOWN,metersPerUnit:1},projector:pi},xy=Qw(1),Sy=a9(1),gW=.5*Math.PI,Ip=Ii.radius,kj=Ip*Math.PI/180,Rj=180/(Ip*Math.PI);function s1(t,e,i,r,s,n,o=Math.floor(t.length/3)){const a=mW(e,s);if(a==null)return!1;if(a===pi){if(t===r&&i===n)return!0;const u=i+3*o;for(let h=i,p=n;h<u;h++,p++)r[p]=t[h];return!0}const l=i+3*o;for(let u=i,h=n;u<l;u+=3,h+=3)a(t,u,r,h);return!0}const lBe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:s1},Symbol.toStringTag,{value:"Module"}));function Ij(t,e,i,r,s,n){return q1[0]=t,q1[1]=e,q1[2]=i,s1(q1,r,0,s,n,0)}const q1=Gh();let Y1=0,t2=class qR{static fromGE(e){const i=new qR;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Y1++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Y1++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Y1++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Y1++}getInverse(){const e=new qR;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},mE=class pv{static cacheKey(e,i){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",i.wkid?.toString()??"-1",i.wkt?.toString()??"",i.wkt2?.toString()??""].join()}static fromGE(e){const i=new pv;let r="";for(const s of e.steps){const n=t2.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const i of e.steps)i instanceof t2?this.steps.push(i):this.steps.push(new t2({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new pv;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[pv.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[pv.cacheKey(e,i)];return s===void 0?null:s}};function yW(t,e,i){if(e==null||i==null||i.vcsWkid||Er(e,i)||Lh(e)||Lh(i))return null;const r=aE(e)/aE(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>Hhe(s,r);case"polyline":case"esriGeometryPolyline":return s=>Ghe(s,r);case"polygon":case"esriGeometryPolygon":return s=>Bhe(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>Whe(s,r);case"extent":case"esriGeometryEnvelope":return s=>qhe(s,r);default:return null}}function Hhe(t,e){t?.z!=null&&(t.z*=e)}function Bhe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function Ghe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function Whe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function qhe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Ca=null,jh=null,_0=null,Sx={};const WD=new Ny;function Wh(){return!!Ca&&vD()}function bW(){return!!Wh()||(Ve(WD),zh(),!1)}function vW(t,e){return!t||!e||ka(t,e)||bW()}function Yhe(t,e){return!ka(t,e)&&!Wh()}function zh(t){return _0==null&&(_0=Promise.all([Z9(),le(()=>import("./geometryEngineBase-C-7zg03I.js"),__vite__mapDeps([14,15])).then(e=>e.g),le(()=>import("./hydrated-u_tr0pNR.js"),__vite__mapDeps([158,1,2]))])),_0.then(([,e,{hydratedAdapter:i}])=>{hi(t),jh=i,Ca=e.default,Ca._enableProjection(zoe),WD.notify()})}function qh(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:(yae(t),YR(jh,t,t[0].spatialReference,e,i,r)):(gy(t),YR(jh,[t],t.spatialReference,e,i,r)[0])}function YR(t,e,i,r,s=null,n=null){if(i==null||r==null)return e;if(ka(i,r,s))return e.map(o=>Ex(o,i,r));if(s==null&&oE(i))return e.map(o=>Ex(o,i,Te.WGS84)).map(o=>bw(o,r));if(s==null&&oE(r))return e.map(o=>bw(o,Te.WGS84)).map(o=>Ex(o,Te.WGS84,r));if(s==null){const o=mE.cacheKey(i,r);Sx[o]!==void 0?s=Sx[o]:((s=_W(i,r,void 0))==null&&(s=new mE),Sx[o]=s)}if(Ca==null||t==null)throw new cT;return n!=null?Ca._project(t,e,i,r,s,n):Ca._project(t,e,i,r,s)}function Jhe(t,e){const i=wW([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function wW(t,e){if(!Wh()){for(const i of t)if(i!=null&&!Er(i.spatialReference,e)&&Jn(i.spatialReference)&&Jn(e)&&!ka(i.spatialReference,e))return Ve(WD),{pending:zh(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Er(i.spatialReference,e)?i:Jn(i.spatialReference)&&Jn(e)?bw(i,e):null)}}function _W(t,e,i=null){if(t==null||e==null)return null;if(Ca==null||jh==null)throw new cT;const r=Ca._getTransformation(jh,t,e,i,i?.spatialReference);return r!==null?mE.fromGE(r):null}function Zhe(t,e,i=null){if(Ca==null||jh==null)throw new cT;const r=Ca._getTransformationBySuitability(jh,t,e,i,i?.spatialReference);if(r!==null){const s=[];for(const n of r)s.push(mE.fromGE(n));return s}return[]}let cT=class extends W{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Xhe(){Ca=null,jh=null,_0=null,Sx={}}const Khe={get loadPromise(){return _0}};function bw(t,e){try{const i=qh(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=yW(i.type,t.spatialReference,e);return r?.(i),i}catch(i){if(!(i instanceof cT))throw i;return null}}async function xW(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await qD(r,e,null,i),bw(t,e)}function ka(t,e,i){return!i&&(!!Er(t,e)||Jn(t)&&Jn(e)&&!!mW(t,e))}function Qhe(t,e){if(Er(t,e))return!0;if(!Jn(t)||!Jn(e))return!1;const i=Qp(t)||Ll(t)||bF(t),r=Qp(e)||Ll(e)||bF(e);return i&&r}async function qD(t,e,i,r){if(Wh())return LN(r);if(Array.isArray(t)){for(const{source:s,dest:n,geographicTransformation:o}of t)if(s&&n&&!ka(s,n,o))return zh(r)}else if(t&&e&&!ka(t,e,i))return zh(r);return LN(r)}function Ex(t,e,i){return t?"x"in t?SW(t,e,new ze,i,0):"xmin"in t?kW(t,e,new it,i,0):"rings"in t?MW(t,e,new ui,i,0):"paths"in t?CW(t,e,new Mi,i,0):"points"in t?EW(t,e,new Eo,i,0):null:null}function ede(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&SW(t,t.spatialReference,e,i,r)!=null}function SW(t,e,i,r,s){ls[0]=t.x,ls[1]=t.y;const n=t.z;return ls[2]=n!==void 0?n:s,s1(ls,e,0,ls,r,0)?(i.x=ls[0],i.y=ls[1],i.spatialReference=r,n!==void 0||Lh(r)?(i.z=ls[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function tde(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&EW(t,t.spatialReference,e,i,r)!=null}function EW(t,e,i,r,s){const{points:n,hasZ:o,hasM:a}=t,l=[],u=n.length,h=[];for(const m of n)h.push(m[0],m[1],o?m[2]:s);if(!s1(h,e,0,h,r,0,u))return null;const p=o||Lh(r);for(let m=0;m<u;++m){const y=3*m,v=h[y],w=h[y+1];p&&a?l.push([v,w,h[y+2],n[m][3]]):p?l.push([v,w,h[y+2]]):a?l.push([v,w,n[m][2]]):l.push([v,w])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function ide(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&CW(t,t.spatialReference,e,i,r)!=null}function CW(t,e,i,r,s){const{paths:n,hasZ:o,hasM:a}=t,l=[];if(!RW(n,o??!1,a??!1,e,l,r,s))return null;const u=o||Lh(r);return i.paths=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function TW(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&MW(t,t.spatialReference,e,i,r)!=null}function MW(t,e,i,r,s){const{rings:n,hasZ:o,hasM:a}=t,l=[];if(!RW(n,o??!1,a??!1,e,l,r,s))return null;const u=o||Lh(r);return i.rings=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function rde(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&kW(t,t.spatialReference,e,i,r)!=null}function kW(t,e,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:h}=t,p=u?t.zmin:s;if(!Ij(n,o,p,e,ls,r))return null;const m=u||Lh(r);i.xmin=ls[0],i.ymin=ls[1],m&&(i.zmin=ls[2]);const y=u?t.zmax:s;return Ij(a,l,y,e,ls,r)?(i.xmax=ls[0],i.ymax=ls[1],m&&(i.zmax=ls[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function RW(t,e,i,r,s,n,o=0){const a=new Array;for(const h of t)for(const p of h)a.push(p[0],p[1],e?p[2]:o);if(!s1(a,r,0,a,n,0))return!1;let l=0;s.length=0;const u=e||Lh(n);for(const h of t){const p=new Array;for(const m of h)u&&i?p.push([a[l++],a[l++],a[l++],m[3]]):u?p.push([a[l++],a[l++],a[l++]]):i?(p.push([a[l++],a[l++],m[2]]),l++):(p.push([a[l++],a[l++]]),l++);s.push(p)}return!0}const ls=Gh(),cBe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ka,getTransformation:_W,getTransformations:Zhe,initializeProjection:qD,isEqualBaseGCS:Qhe,isLoaded:Wh,isLoadedOrLoad:bW,isLoadedOrLoadFor:vW,load:zh,project:qh,projectExtent:rde,projectMany:YR,projectMultipoint:tde,projectOrLoad:Jhe,projectOrLoadMany:wW,projectPoint:ede,projectPolygon:TW,projectPolyline:ide,projectWithZConversion:xW,projectWithoutEngine:Ex,requiresLoad:Yhe,test:Khe,tryProjectWithZConversion:bw,unload:Xhe},Symbol.toStringTag,{value:"Module"}));var JR,Ng;let Jr=(Ng=class extends X{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new JR({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},JR=Ng,Ng);c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Jr.prototype,"cols",void 0),c([d({type:ht,json:{write:!0}})],Jr.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],Jr.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Jr.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],Jr.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Jr.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],Jr.prototype,"scale",void 0),Jr=JR=c([R("esri.layers.support.LOD")],Jr);let sde=class{constructor(e,i,r,s,n=void 0){this.id=e,this.level=i,this.row=r,this.col=s,this.extent=n}};var Mc;const $j=new Xe({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var Fg;let Gr=(Fg=class extends X{static create(e={}){const{resolutionFactor:i=1,scales:r,size:s=256,spatialReference:n=Te.WebMercator,numLODs:o=24}=e;if(!Jn(n)){const m=[];if(r)for(let y=0;y<r.length;y++){const v=r[y];m.push(new Jr({level:y,scale:v,resolution:v}))}else{let y=5e-4;for(let v=o-1;v>=0;v--)m.unshift(new Jr({level:v,scale:y,resolution:y})),y*=2}return new Mc({dpi:96,lods:m,origin:new ze(0,0,n),size:[s,s],spatialReference:n})}const a=Us(n),l=e.origin?new ze({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ze(a?{x:a.origin[0],y:a.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=96,h=1/(Do(n)*39.37*u),p=[];if(r)for(let m=0;m<r.length;m++){const y=r[m],v=y*h;p.push(new Jr({level:m,scale:y,resolution:v}))}else{let m=Wy(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const y=Math.ceil(o/i);p.push(new Jr({level:0,scale:m,resolution:m*h}));for(let v=1;v<y;v++){const w=m/2**i,S=w*h;p.push(new Jr({level:v,scale:w,resolution:S})),m=w}}return new Mc({dpi:u,lods:p,origin:l,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=Us(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return ze.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const s=[],n=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(o=>{s.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,n[o.level]=o})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),s=r+1;return i[r]/(i[r]/i[s])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let s=0;for(;s<r;s++){const n=i[s],o=i[s+1];if(n<=e)return s;if(o===e)return s+1;if(n>e&&o<e)return s+Math.log(n/e)/Math.log(n/o)}return s}tileAt(e,i,r,s){const n=this.lodAt(e);if(!n)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(Er(i.spatialReference,this.spatialReference))o=i.x,a=i.y,s=r;else{const h=tT(i,this.spatialReference);if(h==null)return null;o=h.x,a=h.y,s=r}const l=n.resolution*this.size[0],u=n.resolution*this.size[1];return s||(s=new sde(null,0,0,0,Vs())),s.level=e,s.row=Math.floor((this.origin.y-a)/u+.001),s.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(s),s}updateTileInfo(e,i=Mc.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&i===Mc.ExtrapolateOptions.POWER_OF_TWO){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return;const s=e.level-r.level,n=r.resolution*this.size[0]/2**s,o=r.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Vs()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:s}=r,n=s*this.size[0],o=s*this.size[1];return e[0]=this.origin.x+i.col*n,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Mc.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],s=this.lods.length-i;for(let n=0;n<s;n++){const o=n+i,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Jr({level:n,scale:a,resolution:l}))}return new Mc({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const s=e[r];this._upsampleLevels[s.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/s.resolution:0},i=s}}},Mc=Fg,Fg);c([d({type:Number,json:{write:!0}})],Gr.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],Gr.prototype,"dpi",void 0),c([d({type:String,json:{read:$j.read,write:$j.write,origins:{"web-scene":{read:!1,write:!1}}}})],Gr.prototype,"format",void 0),c([d({readOnly:!0})],Gr.prototype,"isWrappable",null),c([d({type:ze,json:{write:!0}})],Gr.prototype,"origin",void 0),c([de("origin")],Gr.prototype,"readOrigin",null),c([d({type:[Jr],value:null,json:{write:!0}})],Gr.prototype,"lods",null),c([d({readOnly:!0})],Gr.prototype,"scales",void 0),c([d({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Gr.prototype,"size",void 0),c([de("size",["rows","cols"])],Gr.prototype,"readSize",null),c([me("size",{cols:{type:ht},rows:{type:ht}})],Gr.prototype,"writeSize",null),c([d({type:Te,json:{write:!0}})],Gr.prototype,"spatialReference",void 0),Gr=Mc=c([R("esri.layers.support.TileInfo")],Gr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Gr||(Gr={}));const Cx={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},i2={xsmall:544,small:768,medium:992,large:1200};function nde(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function r2(t,e){return e?Cx[t].valueToClassName[e].split(" "):[]}const ode=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=i2}initialize(){this.addHandles(Ue(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),vs))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!nde(i)){const r=JSON.stringify(i2,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=i2}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=Ls.acquire(),r=Ls.acquire();let s,n=!1;for(s in Cx){const o=this[s],a=Cx[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,r2(s,o).forEach(l=>r.push(l)),r2(s,a).forEach(l=>i.push(l)))}n&&(this._applyClassNameChanges(i,r),Ls.release(i),Ls.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(n=>s.classList.remove(n)),i.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in Cx)r2(r,this[r]).forEach(s=>i.classList.remove(s))}};return c([d()],e.prototype,"breakpoints",null),c([d()],e.prototype,"orientation",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),c([d()],e.prototype,"heightBreakpoint",void 0),e=c([R("esri.views.BreakpointsOwner")],e),e};function YD(t){return typeof t=="string"?document.getElementById(t):t??null}function Aj(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let $p=class extends Oe{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,Ue)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Ws)}addOnCollectionChange(e,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Oh(e,"after-changes",this._createSyncUpdatingCallback(),Al),Oh(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),Mt(()=>this.removeHandles(n))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Mt(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(J1)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,n);const o=s(e,i,r);return this.addHandles(o,n),Mt(()=>this.removeHandles(n))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),s=Ue(e,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(J1),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(qw(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(J1))}),J1)}}};c([d({readOnly:!0})],$p.prototype,"updating",void 0),$p=c([R("esri.core.support.UpdatingHandles")],$p);const J1=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gE=function(){return gE=Object.assign||function(e){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},gE.apply(this,arguments)},ZR={exports:{}},$i={},XR={exports:{}},yf={};function IW(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function ade(t,e,i){}function lde(t,e,i){}var ude=/javascript\s*\:/img;function cde(t,e){return ude.test(e)?"":e}yf.whiteList=IW();yf.getDefaultWhiteList=IW;yf.onAttr=ade;yf.onIgnoreAttr=lde;yf.safeAttrValue=cde;var hde={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Ob=hde;function dde(t,e){t=Ob.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,s=0,n=0,o="";function a(){if(!r){var h=Ob.trim(t.slice(s,n)),p=h.indexOf(":");if(p!==-1){var m=Ob.trim(h.slice(0,p)),y=Ob.trim(h.slice(p+1));if(m){var v=e(s,o.length,m,y,h);v&&(o+=v+"; ")}}}s=n+1}for(;n<i;n++){var l=t[n];if(l==="/"&&t[n+1]==="*"){var u=t.indexOf("*/",n+2);if(u===-1)break;n=u+1,s=n+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return Ob.trim(o)}var pde=dde,Z1=yf,fde=pde;function Oj(t){return t==null}function mde(t){var e={};for(var i in t)e[i]=t[i];return e}function $W(t){t=mde(t||{}),t.whiteList=t.whiteList||Z1.whiteList,t.onAttr=t.onAttr||Z1.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Z1.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Z1.safeAttrValue,this.options=t}$W.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=fde(t,function(l,u,h,p,m){var y=r[h],v=!1;if(y===!0?v=y:typeof y=="function"?v=y(p):y instanceof RegExp&&(v=y.test(p)),v!==!0&&(v=!1),p=o(h,p),!!p){var w={position:u,sourcePosition:l,source:m,isWhite:v};if(v){var S=s(h,p,w);return Oj(S)?h+":"+p:S}else{var S=n(h,p,w);if(!Oj(S))return S}}});return a};var gde=$W;(function(t,e){var i=yf,r=gde;function s(o,a){var l=new r(a);return l.process(o)}e=t.exports=s,e.FilterCSS=r;for(var n in i)e[n]=i[n]})(XR,XR.exports);var JD=XR.exports,ZD={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},yde=JD.FilterCSS,bde=JD.getDefaultWhiteList,yE=ZD;function AW(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var OW=new yde;function vde(t,e,i){}function wde(t,e,i){}function _de(t,e,i){}function xde(t,e,i){}function PW(t){return t.replace(Ede,"&lt;").replace(Cde,"&gt;")}function Sde(t,e,i,r){if(i=zW(i),e==="href"||e==="src"){if(i=yE.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(X1.lastIndex=0,X1.test(i))return""}else if(e==="style"){if(Pj.lastIndex=0,Pj.test(i)||(Dj.lastIndex=0,Dj.test(i)&&(X1.lastIndex=0,X1.test(i))))return"";r!==!1&&(r=r||OW,i=r.process(i))}return i=VW(i),i}var Ede=/</g,Cde=/>/g,Tde=/"/g,Mde=/&quot;/g,kde=/&#([a-zA-Z0-9]*);?/gim,Rde=/&colon;?/gim,Ide=/&newline;?/gim,X1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Pj=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Dj=/u\s*r\s*l\s*\(.*/gi;function DW(t){return t.replace(Tde,"&quot;")}function LW(t){return t.replace(Mde,'"')}function NW(t){return t.replace(kde,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function FW(t){return t.replace(Rde,":").replace(Ide," ")}function jW(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return yE.trim(e)}function zW(t){return t=LW(t),t=NW(t),t=FW(t),t=jW(t),t}function VW(t){return t=DW(t),t=PW(t),t}function $de(){return""}function Ade(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:yE.indexOf(t,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return s.push([n!==!1?n:l.position,h]),n=!1,u}else return n||(n=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return yE.forEach(s,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function Ode(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var s=t.indexOf("-->",r);if(s===-1)break;i=s+3}return e}function Pde(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}$i.whiteList=AW();$i.getDefaultWhiteList=AW;$i.onTag=vde;$i.onIgnoreTag=wde;$i.onTagAttr=_de;$i.onIgnoreTagAttr=xde;$i.safeAttrValue=Sde;$i.escapeHtml=PW;$i.escapeQuote=DW;$i.unescapeQuote=LW;$i.escapeHtmlEntities=NW;$i.escapeDangerHtml5Entities=FW;$i.clearNonPrintableCharacter=jW;$i.friendlyAttrValue=zW;$i.escapeAttrValue=VW;$i.onIgnoreTagStripAll=$de;$i.StripTagBody=Ade;$i.stripCommentTag=Ode;$i.stripBlankChar=Pde;$i.cssFilter=OW;$i.getDefaultCSSWhiteList=bde;var hT={},Gc=ZD;function Dde(t){var e=Gc.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Gc.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Lde(t){return t.slice(0,2)==="</"}function Nde(t,e,i){var r="",s=0,n=!1,o=!1,a=0,l=t.length,u="",h="";e:for(a=0;a<l;a++){var p=t.charAt(a);if(n===!1){if(p==="<"){n=a;continue}}else if(o===!1){if(p==="<"){r+=i(t.slice(s,a)),n=a,s=a;continue}if(p===">"){r+=i(t.slice(s,n)),h=t.slice(n,a+1),u=Dde(h),r+=e(n,r.length,u,h,Lde(h)),s=a+1,n=!1;continue}if(p==='"'||p==="'")for(var m=1,y=t.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=p;continue e}y=t.charAt(a-++m)}}else if(p===o){o=!1;continue}}return s<t.length&&(r+=i(t.substr(s))),r}var Fde=/[^a-zA-Z0-9\\_:.-]/gim;function jde(t,e){var i=0,r=0,s=[],n=!1,o=t.length;function a(m,y){if(m=Gc.trim(m),m=m.replace(Fde,"").toLowerCase(),!(m.length<1)){var v=e(m,y||"");v&&s.push(v)}}for(var l=0;l<o;l++){var u=t.charAt(l),h,p;if(n===!1&&u==="="){n=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:Vde(t,l+1);continue}if(n!==!1&&l===r){if(p=t.indexOf(u,l+1),p===-1)break;h=Gc.trim(t.slice(r+1,p)),a(n,h),n=!1,l=p,i=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),n===!1)if(p=zde(t,l),p===-1){h=Gc.trim(t.slice(i,l)),a(h),n=!1,i=l+1;continue}else{l=p-1;continue}else if(p=Ude(t,l-1),p===-1){h=Gc.trim(t.slice(i,l)),h=Lj(h),a(n,h),n=!1,i=l+1;continue}else continue}return i<t.length&&(n===!1?a(t.slice(i)):a(n,Lj(Gc.trim(t.slice(i))))),Gc.trim(s.join(" "))}function zde(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Vde(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function Ude(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Hde(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Lj(t){return Hde(t)?t.substr(1,t.length-2):t}hT.parseTag=Nde;hT.parseAttr=jde;var Bde=JD.FilterCSS,la=$i,UW=hT,Gde=UW.parseTag,Wde=UW.parseAttr,Tx=ZD;function K1(t){return t==null}function qde(t){var e=Tx.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Tx.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Tx.trim(t.slice(0,-1))),{html:t,closing:i}}function Yde(t){var e={};for(var i in t)e[i]=t[i];return e}function Jde(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function HW(t){t=Yde(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=la.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Jde(t.whiteList||t.allowList):t.whiteList=la.whiteList,t.onTag=t.onTag||la.onTag,t.onTagAttr=t.onTagAttr||la.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||la.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||la.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||la.safeAttrValue,t.escapeHtml=t.escapeHtml||la.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new Bde(t.css))}HW.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=la.stripBlankChar(t)),i.allowCommentTag||(t=la.stripCommentTag(t));var p=!1;i.stripIgnoreTagBody&&(p=la.StripTagBody(i.stripIgnoreTagBody,n),n=p.onIgnoreTag);var m=Gde(t,function(y,v,w,S,E){var I={sourcePosition:y,position:v,isClosing:E,isWhite:Object.prototype.hasOwnProperty.call(r,w)},D=s(w,S,I);if(!K1(D))return D;if(I.isWhite){if(I.isClosing)return"</"+w+">";var O=qde(S),A=r[w],z=Wde(O.html,function(_,Z){var Q=Tx.indexOf(A,_)!==-1,ae=o(w,_,Z,Q);return K1(ae)?Q?(Z=l(w,_,Z,h),Z?_+'="'+Z+'"':_):(ae=a(w,_,Z,Q),K1(ae)?void 0:ae):ae});return S="<"+w,z&&(S+=" "+z),O.closing&&(S+=" /"),S+=">",S}else return D=n(w,S,I),K1(D)?u(S):D},u);return p&&(m=p.remove(m)),m};var Zde=HW;(function(t,e){var i=$i,r=hT,s=Zde;function n(a,l){var u=new s(l);return u.process(a)}e=t.exports=n,e.filterXSS=n,e.FilterXSS=s,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(ZR,ZR.exports);var Ff=ZR.exports,Xde=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Kde=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=gE(gE({},Ff.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):Ff.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(n==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=e[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Ff.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?Ff.escapeAttrValue(e):!n&&!s?Ff.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,s):Ff.safeAttrValue(e,i,r,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(e))n=e.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(s=!0,a.concat([u.sanitized]))},[]);else if(Xde(e)){var o=Object.keys(e);n=o.reduce(function(a,l){var u=e[l],h=r.validate(u,i);return h.isValid?a[l]=u:(s=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?n:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const Qde=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],epe=Qde.reduce((t,e)=>(t[e]=[],t),{}),tpe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],BW=new Kde({whiteList:epe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(tpe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),GW="http://www.w3.org/",dT=`${GW}2000/svg`,WW=`${GW}1999/xlink`;let Nj=[],XD=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},KD=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),qW=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},ipe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(KD(t[r],e))return r}return-1},s2=(t,e,i,r)=>{let s=t[e];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(KD(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},rpe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},KR=[],QR=!1,YW=t=>{(t.children||[]).forEach(YW),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Fj=()=>{QR=!1,KR.forEach(YW),KR.length=0},jj=t=>{KR.push(t),QR||(QR=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Fj,{timeout:16}):setTimeout(Fj,16))},zj=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),jj(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),jj(t))},spe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,s=Object.keys(e),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")tI(t,l,!0);else if(a==="classes"){let u=Object.keys(l),h=u.length;for(let p=0;p<h;p++){let m=u[p];l[m]&&t.classList.add(m)}}else if(a==="styles"){let u=Object.keys(l),h=u.length;for(let p=0;p<h;p++){let m=u[p],y=l[m];y&&(qW(y),i.styleApplyer(t,m,y))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let h=l;l=function(p){h.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),t[a]=l):i.namespace===dT?a==="href"?t.setAttributeNS(WW,a,l):t.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?t[a]=BW.sanitize(l):eI(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function eI(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let bE,npe=(t,e,i)=>{if(e)for(let r of e)x0(r,t,void 0,i)},JW=(t,e,i)=>{npe(t,e.children,i),e.text&&(t.textContent=e.text),spe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},x0=(t,e,i,r)=>{let s,n=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")s=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let h=o.charAt(n-1),p=o.slice(n,l);h==="."?s.classList.add(p):h==="#"?s.id=p:(p==="svg"&&(r=XD(r,{namespace:dT})),r.namespace!==void 0?s=t.domNode=a.createElementNS(r.namespace,p):(s=t.domNode=t.domNode||a.createElement(p),p==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),n=l+1}}JW(s,t,r)}},tI=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},ope=(t,e,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let l=n[a],u=i[l],h=e[l];if(l==="class")h!==u&&(tI(t,h,!1),tI(t,u,!0));else if(l==="classes"){let p=t.classList,m=Object.keys(u),y=m.length;for(let v=0;v<y;v++){let w=m[v],S=!!u[w];S!==!!h[w]&&(s=!0,S?p.add(w):p.remove(w))}}else if(l==="styles"){let p=Object.keys(u),m=p.length;for(let y=0;y<m;y++){let v=p[y],w=u[v];w!==h[v]&&(s=!0,w?(qW(w),r.styleApplyer(t,v,w)):r.styleApplyer(t,v,""))}}else if(u||typeof h!="string"||(u=""),l!=="value"||eI(t)){if(u!==h){let p=typeof u;p==="function"&&r.eventHandlerInterceptor||(r.namespace===dT?l==="href"?t.setAttributeNS(WW,l,u):t.setAttribute(l,u):p==="string"?l==="innerHTML"?t[l]=BW.sanitize(u):l==="role"&&u===""?t.removeAttribute(l):eI(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]!==u&&(t[l]=u),s=!0)}}else{let p=t[l];p!==u&&(t["oninput-value"]?p===t["oninput-value"]:u!==h)&&(t[l]=u,t["oninput-value"]=void 0),u!==h&&(s=!0)}}return s},ape=(t,e,i,r,s)=>{if(i===r)return!1;r=r||Nj;let n,o=(i=i||Nj).length,a=r.length,l=0,u=0,h=!1;for(;u<a;){let p=l<o?i[l]:void 0,m=r[u];if(p!==void 0&&KD(p,m))h=bE(p,m,s)||h,l++;else{let y=ipe(i,m,l+1);if(y>=0){for(n=l;n<y;n++)zj(i[n]),s2(i,n,t,"removed");h=bE(i[y],m,s)||h,l=y+1}else x0(m,e,l<o?i[l].domNode:void 0,s),rpe(m),s2(r,u,t,"added")}u++}if(o>l)for(n=l;n<o;n++)zj(i[n]),s2(i,n,t,"removed");return h};bE=(t,e,i)=>{let r=t.domNode,s=!1;if(t===e)return!1;let n=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,s=!0,s}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=XD(i,{namespace:dT})),t.text!==e.text&&(n=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,n=ape(e,r,t.children,e.children,i)||n,n=ope(r,t.properties,e.properties,i)||n,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return n&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),s};let Q1=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,bE(r,i,e)},domNode:t.domNode});const lpe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let fv=t=>XD(lpe,t),hh={append:(t,e,i)=>(i=fv(i),x0(e,t,void 0,i),Q1(e,i)),insertBefore:(t,e,i)=>(i=fv(i),x0(e,t.parentNode,t,i),Q1(e,i)),merge:(t,e,i)=>(i=fv(i),e.domNode=t,JW(t,e,i),Q1(e,i)),replace:(t,e,i)=>(i=fv(i),x0(e,t.parentNode,t,i),t.parentNode.removeChild(t),Q1(e,i))},ZW,upe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};ZW=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let cpe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?ZW(i.children,s=>s.domNode===r):void 0}),i},hpe=(t,e,i)=>{let r=function(s){i("domEvent",s);let n=e(),o=upe(s.currentTarget,n.domNode);o.reverse();let a,l=cpe(n.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},Vj=t=>{let e,i,r=fv(t),s=r.performanceLogger,n=!0,o=!1,a=[],l=[],u=(p,m,y)=>{let v,w=()=>v;r.eventHandlerInterceptor=hpe(e,w,s),v=p(m,y(),r),a.push(v),l.push(y)},h=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let p=0;p<a.length;p++){let m=l[p]();s("rendered",void 0),a[p].update(m),s("patched",void 0)}s("renderDone",void 0),n=!0}};return e={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,e.scheduleRender()},append:(p,m)=>{u(hh.append,p,m)},insertBefore:(p,m)=>{u(hh.insertBefore,p,m)},merge:(p,m)=>{u(hh.merge,p,m)},replace:(p,m)=>{u(hh.replace,p,m)},detach:p=>{for(let m=0;m<l.length;m++)if(l[m]===p)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},kc=class extends Oe{constructor(){super(...arguments),this.items=new _e,this._watchUpdatingTracking=new $p,this._callbacks=new Map,this._projector=Vj(),this._hiddenProjector=Vj()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s?.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!i?.disableDecorations;if(!this.items.some(n=>n.visible&&!(r&&n.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],kc.prototype,"surface",void 0),c([d({readOnly:!0})],kc.prototype,"items",void 0),c([d({readOnly:!0})],kc.prototype,"needsRender",null),c([d({readOnly:!0})],kc.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],kc.prototype,"updating",null),kc=c([R("esri.views.overlay.ViewOverlay")],kc);const Uj=kc,n2=[0,0];function dpe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return n2[0]=i.left+(e?.pageXOffset??0),n2[1]=i.top+(e?.pageYOffset??0),n2}function Hj(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function ppe(t){const e=document.createElement("div");return t.appendChild(e),e}const jf=16,Pb=750,fpe=512,mpe=2,gpe=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:jf,time:Pb},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Ue(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),Ue(()=>this.navigating,r=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([Ue(()=>this.ui,(i,r)=>this._handleUIChange(i,r),vs),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=YD(i);if(s||typeof i!="string"||he.getLogger(this).error("#container",`element with id '${i}' not found`),r===s)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Hj(this.root),this._set("root",null)),this.userContent&&(Aj(this.userContent,r),Hj(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",Aj(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new Uj;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Ue(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=dy({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=vi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const r=this._get("ui");r!==i&&r?.destroy(),this._set("ui",i)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n?n[0]:0,r-=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n?n[0]:0,r+=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(Ue(()=>this.root,s=>{i.container=s?ppe(s):null},vs),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=jf,i.time=Pb;const r=dy({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=jf,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const u=this._position();l.freq=u||a?jf:Math.min(Pb,l.freq*mpe),!a&&l.freq>=fpe&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{i.freq=jf,i.time=Pb,r.resume()});this.container!=null&&s.observe(this.container);const n=Mt(()=>s.disconnect());this.addHandles([Fy(window,"resize",()=>{i.freq=jf,i.time=Pb,r.resume()}),n,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&dpe(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],e.prototype,"container",null),c([d({readOnly:!0})],e.prototype,"focused",null),c([d({readOnly:!0})],e.prototype,"height",void 0),c([d()],e.prototype,"messagesCommon",void 0),c([d({type:Uj})],e.prototype,"overlay",void 0),c([d({readOnly:!0})],e.prototype,"position",void 0),c([d({readOnly:!0})],e.prototype,"resizing",void 0),c([d({readOnly:!0})],e.prototype,"root",void 0),c([d({value:null,readOnly:!0})],e.prototype,"size",null),c([d({readOnly:!0})],e.prototype,"surface",void 0),c([d({readOnly:!0})],e.prototype,"suspended",void 0),c([d({nonNullable:!0})],e.prototype,"ui",null),c([d({readOnly:!0})],e.prototype,"userContent",void 0),c([d({readOnly:!0})],e.prototype,"width",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),e=c([R("esri.views.DOMContainer")],e),e};function fBe(t,e,i){return WP(t.map((r,s)=>e.apply(i,[r,s])))}async function ype(t,e,i){return(await WP(t.map((r,s)=>e.apply(i,[r,s])))).map(r=>r.value)}function QD(t){return{ok:!0,value:t}}function eL(t){return{ok:!1,error:t}}function bpe(t){return t!=null&&t.ok===!0?t.value:null}function vpe(t){return t!=null&&t.ok===!1?t.error:null}async function pT(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return QD(await t)}catch(e){return eL(e)}}async function wpe(t){try{return QD(await t)}catch(e){return fl(e),eL(e)}}function fT(t,e){return new Rc(t,e)}let Rc=class extends Oe{get value(){return bpe(this._result)}get error(){return vpe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=hy(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(s=>{this._result=QD(s),this._cleanup()},s=>{this._result=eL(s),this._cleanup()}),this._abortHandle=Ta(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=vi(this._abortHandle),this._abortController=null}};c([d()],Rc.prototype,"value",null),c([d()],Rc.prototype,"error",null),c([d()],Rc.prototype,"finished",null),c([d()],Rc.prototype,"promise",void 0),c([d()],Rc.prototype,"_result",void 0),Rc=c([R("esri.core.asyncUtils.ReactiveTask")],Rc);const XW=J("mac")?"Meta":"Control",_pe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),xpe=t=>_pe.has(t);let Spe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Cr=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof e=="string"?new Spe(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const m=p.indexOf(h);p.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new Epe(n,r,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[n.eventType];return u||(u=[],this._incoming[n.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new Cpe(e,{onEmit:(r,s,n,o)=>{this._manager?.emit(r.eventType,s,n,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},Epe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Cpe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},Tpe=class extends Cr{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=e;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},Mpe=class extends Cr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Wp(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},kpe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const s=e[r],n=new M8(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=tse(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)VN(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const s of i.acquired)VN(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},uo=class extends Oe{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=XW,this._latestPointerType="mouse",this._propertiesPool=new kpe({latestPointerLocation:$pe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=ic.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,h,p)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,p,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):he.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)xpe(a)||i.add(a)}s.active=n}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=i,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,s)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&n(a,e==="key-down")}const o=i.native;n("Alt",!!o?.altKey),n("Control",!!o?.ctrlKey),n("Ctrl",!!o?.ctrlKey),n("Shift",!!o?.shiftKey),n("Meta",!!o?.metaKey),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Tpe((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new Mpe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],ic.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ic.INTERNAL)}_setPointerCapture(e,i,r,s){const n=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,s){this._emitInputEvent(0,e,i,r,s)}_emitInputEvent(e,i,r,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,u={event:new Rpe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new fw,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:i,priorityIndex:r}=e.events.pop(),s=i.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new fw;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>this._onEventReceived(i,r))},disablePointerCapture:e}}};c([d({readOnly:!0})],uo.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],uo.prototype,"eventSource",void 0),c([d({constructOnly:!0})],uo.prototype,"recognizers",void 0),c([d()],uo.prototype,"_latestPointerType",void 0),c([d()],uo.prototype,"latestPointerType",null),c([d()],uo.prototype,"multiTouchActive",null),c([d({readOnly:!0})],uo.prototype,"latestPointerLocation",void 0),c([d()],uo.prototype,"_paused",void 0),c([d({readOnly:!0})],uo.prototype,"updating",null),uo=c([R("esri.views.input.InputManager")],uo);let Rpe=class{constructor(e,i,r,s,n){this.type=e,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=Wc.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Wc.STOPPED}shouldStopPropagation(){return(this._propagationState&Wc.STOPPED)!==0}defer(e){this._propagationState|=Wc.PAUSED;const i=(r,s)=>{this._propagationState&=~Wc.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&Wc.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Wc;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Wc||(Wc={}));const ic={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Ipe=class{};const $pe=Ipe;function Sc(t){return t!=null&&"open"in t&&"declaredClass"in t}function Bj(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const Ape=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Ue(()=>[this.ui,this.popup],([i,r],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&Sc(l)&&(l.view=null,Bj(l)&&(a.remove(l,n),l!==r&&r&&l.destroy()))}i&&Sc(r)&&(r.view=this,Bj(r)&&i.add(r,{key:n,position:o,internal:!0}))},Ps),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Sc(this.popup)?this.popup.viewModel.handleViewClick(i):i.defer(async()=>{await this.setupPopup(),Sc(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},ic.WIDGET)]),YC(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{le(()=>import("./Popup-k4iAyDg0.js").then(i=>i.P),__vite__mapDeps([159,4,160,67,161,162,163,9,1,2,164,165,166,66,64,65,21,20,26,167,168,169,113,170]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Sc(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void he.getLogger(this).error(new W("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){this._popupSetupTask?.abort(),Sc(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Sc(this.popup))return this._popupSetupTask=fT(async i=>{const{default:r}=await le(()=>import("./Popup-k4iAyDg0.js").then(n=>n.P),__vite__mapDeps([159,4,160,67,161,162,163,9,1,2,164,165,166,66,64,65,21,20,26,167,168,169,113,170]));if(hi(i),!this.popup||Sc(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new r(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},s){const n=[],o=[];let a=!1;const l=Rre(s,J("popup-view-fetch-timeout")??Ppe),u=m=>{const y=new Ope(m);return o.push(y),n.push(y.promise),y},h=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:u(m)};for(const m of r)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(n.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const p=kre(n).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:n,allGraphicsPromise:p,location:i}}async _getPopupHits(i,r){const{hits:s,location:n}=await this.popupHitTest(i);hi(r);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return c([d()],e.prototype,"popup",void 0),c([d()],e.prototype,"popupEnabled",void 0),e=c([R("esri.views.PopupView")],e),e};let Ope=class{constructor(e){this.layerView=e,this._resolver=eo(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const Ppe=5e3;function sc(t,e,i=_e){return e||(e=new i),e===t||(e.removeAll(),Dpe(t)?e.addMany(t):t&&e.add(t)),e}function KW(t){return t}function Dpe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var qc;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(qc||(qc={}));let Lpe=class{constructor(){this._resolver=eo(),this._status=qc.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=qc.RESOLVED,this._cleanUp()},()=>{this._status=qc.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===qc.RESOLVED}isRejected(){return this._status===qc.REJECTED}isFulfilled(){return this._status!==qc.PENDING}abort(){this._resolver.reject(Qt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=eo(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==r||Zr(s)||this._resolver.reject(s)}),e.resolve()}};const QW=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new Lpe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=c([R("esri.core.Promise")],e),e};let Sl=class extends QW(Oe){};Sl=c([R("esri.core.Promise")],Sl),function(t){t.EsriPromiseMixin=QW}(Sl||(Sl={}));const Npe="not-loaded",Fpe="loading",jpe="failed",Gj="loaded",eq=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const u=GP(n,l);this.destroyed&&l(new W("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===Npe){this._set("loadStatus",Fpe);const a=this._loadController=new AbortController;s({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",Gj),this._loadController=null},r=>{this._set("loadStatus",jpe),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=hy(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Gj}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new W("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return c([d({readOnly:!0})],e.prototype,"loaded",null),c([d({readOnly:!0})],e.prototype,"loadError",void 0),c([d({clonable:!1})],e.prototype,"loadStatus",void 0),c([d({type:[to],readOnly:!0})],e.prototype,"loadWarnings",null),e=c([R("esri.core.Loadable")],e),e};let gs=class extends eq(Sl){};gs=c([R("esri.core.Loadable")],gs),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=eq,t.isLoadable=e}(gs||(gs={}));async function mT(t,e){return await t.load(),zpe(t,e)}async function zpe(t,e){const i=[],r=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?r(...o):_e.isCollection(o)?o.forEach(a=>r(a)):gs.isLoadable(o)&&i.push(o))};e(r);let s=null;if(await ype(i,async n=>{const o=await pT(Vpe(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return t}function Vpe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let e_;function Upe(t){return e_&&!e_.destroyed||(e_=t()),e_}var iI;const Hpe=new Xe({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ji=iI=class extends Oe{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new iI({categories:this.categories?B(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=tT(this.extent,Te.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>Hpe.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};c([d()],ji.prototype,"categories",void 0),c([d()],ji.prototype,"disableExtraQuery",void 0),c([d({type:it})],ji.prototype,"extent",void 0),c([d()],ji.prototype,"filter",void 0),c([d()],ji.prototype,"num",void 0),c([d()],ji.prototype,"query",void 0),c([d()],ji.prototype,"sortField",void 0),c([d()],ji.prototype,"sortOrder",null),c([d()],ji.prototype,"start",void 0),ji=iI=c([R("esri.portal.PortalQueryParams")],ji);var rI;let Di=rI=class extends X{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new W("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new rI({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Gi(ji,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new ji,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new ji,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new ji({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,e)}throw new W("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],n=new ji({num:1,query:`typekeywords:"${t}"`});return s.queryItems(n,e)}throw new W("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};c([d()],Di.prototype,"access",void 0),c([d({type:Date})],Di.prototype,"created",void 0),c([d()],Di.prototype,"description",void 0),c([d()],Di.prototype,"id",void 0),c([d()],Di.prototype,"isInvitationOnly",void 0),c([d({type:Date})],Di.prototype,"modified",void 0),c([d()],Di.prototype,"owner",void 0),c([d()],Di.prototype,"portal",void 0),c([d()],Di.prototype,"snippet",void 0),c([d()],Di.prototype,"sortField",void 0),c([d()],Di.prototype,"sortOrder",void 0),c([d()],Di.prototype,"sourceJSON",void 0),c([d()],Di.prototype,"tags",void 0),c([d()],Di.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Di.prototype,"thumbnailUrl",null),c([d()],Di.prototype,"title",void 0),c([d({readOnly:!0})],Di.prototype,"url",null),Di=rI=c([R("esri.portal.PortalGroup")],Di);let Rd=class extends Oe{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Rd.prototype,"nextQueryParams",void 0),c([d()],Rd.prototype,"queryParams",void 0),c([d()],Rd.prototype,"results",void 0),c([d()],Rd.prototype,"total",void 0),Rd=c([R("esri.portal.PortalQueryResult")],Rd);let ou=class extends X{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new W("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],ou.prototype,"created",void 0),c([d()],ou.prototype,"id",void 0),c([d()],ou.prototype,"portal",void 0),c([d()],ou.prototype,"title",void 0),c([d({readOnly:!0})],ou.prototype,"url",null),c([d()],ou.prototype,"username",void 0),ou=c([R("esri.portal.PortalFolder")],ou);var sI;let Bt=sI=class extends X{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t?.data,r=t?.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=t.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:e}},o=await this.portal.request(i,n);for(const a of o.results){const l=t.find(p=>a.itemId===p.id),u=a.success;let h=null;u?(l.id=null,l.portal=null):a.error&&(h=new W("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:u,error:h})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const s=ou.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Di.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await le(()=>Promise.resolve().then(()=>tq),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:r});let n;return s?.items?(n=s.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Di({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new W("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new W("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new sI({sourceJSON:t});return e.read(t),e}};c([d()],Bt.prototype,"access",void 0),c([d({type:Date})],Bt.prototype,"created",void 0),c([d()],Bt.prototype,"culture",void 0),c([d()],Bt.prototype,"description",void 0),c([d()],Bt.prototype,"email",void 0),c([d()],Bt.prototype,"favGroupId",void 0),c([d()],Bt.prototype,"fullName",void 0),c([d()],Bt.prototype,"id",void 0),c([d({type:Date})],Bt.prototype,"modified",void 0),c([d()],Bt.prototype,"orgId",void 0),c([d()],Bt.prototype,"portal",void 0),c([d()],Bt.prototype,"preferredView",void 0),c([d()],Bt.prototype,"privileges",void 0),c([d()],Bt.prototype,"region",void 0),c([d()],Bt.prototype,"role",void 0),c([d()],Bt.prototype,"roleId",void 0),c([d()],Bt.prototype,"sourceJSON",void 0),c([d()],Bt.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Bt.prototype,"thumbnailUrl",null),c([d()],Bt.prototype,"units",void 0),c([d({readOnly:!0})],Bt.prototype,"userContentUrl",null),c([d({readOnly:!0})],Bt.prototype,"url",null),c([d()],Bt.prototype,"username",void 0),c([d()],Bt.prototype,"userLicenseTypeId",void 0),c([d()],Bt.prototype,"userType",void 0),Bt=sI=c([R("esri.portal.PortalUser")],Bt);var $n;let Db;const Wj={PortalGroup:()=>Promise.resolve({default:Di}),PortalItem:()=>le(()=>Promise.resolve().then(()=>tq),void 0),PortalUser:()=>Promise.resolve({default:Bt})};var xl;let fe=(xl=class extends X.JSONSupportMixin(gs){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ct.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){qj.unregister(this),this.defaultBasemap=ci(this.defaultBasemap),this.defaultDevBasemap=ci(this.defaultDevBasemap),this.defaultVectorBasemap=ci(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=vi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)Ct.request.trustedServers.includes(i)||Ct.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return woe(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=Bt.fromJSON(e),i.portal=this),i}load(e){const i=le(()=>Promise.resolve().then(()=>hfe),void 0).then(({default:r})=>{hi(e),Db=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&mt){const s=mt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==$n.AUTH_MODE_AUTO&&this.authMode!==$n.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Bpe(new WeakRef(this))),qj.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await le(async()=>{const{default:r}=await import("./ElevationLayer-D0eR0rkJ.js");return{default:r}},__vite__mapDeps([171,172,173,174,67,21,175,1,2]))).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if(i?.include3d===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,i);r.unshift(...s)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new ji;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(s=>s.type==="Web Scene");return r?new Db({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):$o(e)?Promise.reject(Qt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new ji({num:100,sortField:"title"});if(i?.length){const s=[];for(const n of i)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return $o(e)?Promise.reject(Qt()):Promise.resolve([])}fetchRegions(e){const i=this.user?.culture||this.culture||wn();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){const i=this.user?.culture||this.culture||wn();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return Upe(()=>new $n)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:wn().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),i&&(n.query.default=!0),this.request(s,n)}queryPortal(e,i,r,s){const n=Gi(ji,i),o=a=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then(l=>{const u=n.clone();return u.start=l.nextStart,new Rd({nextQueryParams:u,queryParams:n,total:l.total,results:$n._resultsToTypedArray(a,{portal:this},l,s)})}).then(l=>Promise.all(l.results.map(u=>typeof u.when=="function"?u.when():l)).then(()=>l,u=>(fl(u),l)));return r&&Wj[r]?Wj[r]().then(({default:a})=>(hi(s),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new W("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===$n.AUTH_MODE_ANONYMOUS||this.authMode===$n.AUTH_MODE_NO_PROMPT&&!mt)return Promise.reject(new W("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return mt?mt.getCredential(this.restUrl,{prompt:this.authMode!==$n.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){const i=this.credential?.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(s=>{const n=$n._resultsToTypedArray(r,{portal:this},s);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():s)).then(()=>n,()=>n)})}request(e,i={}){const r={f:"json",...i.query},{authMode:s=this.authMode===$n.AUTH_MODE_ANONYMOUS||this.authMode===$n.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:u}=i,h={authMode:s,body:n,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:u};return i.withCredentials&&(h.withCredentials=!0),Tt(this._normalizeSSL(e),h).then(p=>p.data)}toJSON(){throw new W("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new $n({sourceJSON:e})}_getHelperService(e){const i=this.helperServices&&this.helperServices[e];if(!i)throw new W("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new ji;r.query=e||(hR()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const s=await this.queryGroups(r,i);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(r,i);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new Db({portalItem:a})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(hR())return[];const s=new ji({query:r,disableExtraQuery:!0}),n=await this.queryGroups(s,i);if(!n.total)return[];const o=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=o.sortField||"name",s.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(s,i);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new Db({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=Db.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,s){let n;if(r){const o=s!=null?s.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(n=n.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,i);return typeof l.load=="function"&&l.load(o),l}))}else n=[];return n}},$n=xl,xl.AUTH_MODE_ANONYMOUS="anonymous",xl.AUTH_MODE_AUTO="auto",xl.AUTH_MODE_IMMEDIATE="immediate",xl.AUTH_MODE_NO_PROMPT="no-prompt",xl);c([d()],fe.prototype,"access",void 0),c([d()],fe.prototype,"allSSL",void 0),c([d()],fe.prototype,"authMode",void 0),c([d()],fe.prototype,"authorizedCrossOriginDomains",void 0),c([de("authorizedCrossOriginDomains")],fe.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],fe.prototype,"basemapGalleryGroupQuery",void 0),c([d({json:{name:"3DBasemapGalleryGroupQuery"}})],fe.prototype,"basemapGalleryGroupQuery3D",void 0),c([d()],fe.prototype,"bingKey",void 0),c([d()],fe.prototype,"canListApps",void 0),c([d()],fe.prototype,"canListData",void 0),c([d()],fe.prototype,"canListPreProvisionedItems",void 0),c([d()],fe.prototype,"canProvisionDirectPurchase",void 0),c([d()],fe.prototype,"canSearchPublic",void 0),c([d()],fe.prototype,"canShareBingPublic",void 0),c([d()],fe.prototype,"canSharePublic",void 0),c([d()],fe.prototype,"canSignInArcGIS",void 0),c([d()],fe.prototype,"canSignInIDP",void 0),c([d()],fe.prototype,"colorSetsGroupQuery",void 0),c([d()],fe.prototype,"commentsEnabled",void 0),c([d({type:Date})],fe.prototype,"created",void 0),c([d()],fe.prototype,"credential",void 0),c([d()],fe.prototype,"culture",void 0),c([d()],fe.prototype,"currentVersion",void 0),c([d()],fe.prototype,"customBaseUrl",void 0),c([d()],fe.prototype,"default3DBasemapQuery",void 0),c([d()],fe.prototype,"defaultBasemap",void 0),c([de("defaultBasemap")],fe.prototype,"readDefaultBasemap",null),c([d()],fe.prototype,"defaultDevBasemap",void 0),c([de("defaultDevBasemap")],fe.prototype,"readDefaultDevBasemap",null),c([d({type:it})],fe.prototype,"defaultExtent",void 0),c([d()],fe.prototype,"defaultVectorBasemap",void 0),c([de("defaultVectorBasemap")],fe.prototype,"readDefaultVectorBasemap",null),c([d()],fe.prototype,"description",void 0),c([d()],fe.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],fe.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],fe.prototype,"extraQuery",null),c([d()],fe.prototype,"featuredGroups",void 0),c([d()],fe.prototype,"featuredItemsGroupQuery",void 0),c([d()],fe.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],fe.prototype,"layoutGroupQuery",void 0),c([d()],fe.prototype,"livingAtlasGroupQuery",void 0),c([d({readOnly:!0})],fe.prototype,"hasAPIKey",null),c([d()],fe.prototype,"hasCategorySchema",void 0),c([d()],fe.prototype,"hasClassificationSchema",void 0),c([d()],fe.prototype,"helpBase",void 0),c([d()],fe.prototype,"helperServices",void 0),c([d()],fe.prototype,"helpMap",void 0),c([d()],fe.prototype,"homePageFeaturedContent",void 0),c([d()],fe.prototype,"homePageFeaturedContentCount",void 0),c([d()],fe.prototype,"httpPort",void 0),c([d()],fe.prototype,"httpsPort",void 0),c([d()],fe.prototype,"id",void 0),c([d()],fe.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],fe.prototype,"isOrganization",null),c([d()],fe.prototype,"isPortal",void 0),c([d()],fe.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],fe.prototype,"itemPageUrl",null),c([d()],fe.prototype,"layerTemplatesGroupQuery",void 0),c([d()],fe.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],fe.prototype,"modified",void 0),c([d()],fe.prototype,"name",void 0),c([d()],fe.prototype,"portalHostname",void 0),c([d()],fe.prototype,"portalMode",void 0),c([d()],fe.prototype,"portalProperties",void 0),c([d()],fe.prototype,"region",void 0),c([d()],fe.prototype,"recycleBinEnabled",void 0),c([d({readOnly:!0})],fe.prototype,"restUrl",null),c([d()],fe.prototype,"rotatorPanels",void 0),c([d()],fe.prototype,"showHomePageDescription",void 0),c([d()],fe.prototype,"sourceJSON",void 0),c([d()],fe.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],fe.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],fe.prototype,"stylesGroupQuery3d",void 0),c([d()],fe.prototype,"supportsHostedServices",void 0),c([d()],fe.prototype,"symbolSetsGroupQuery",void 0),c([d()],fe.prototype,"templatesGroupQuery",void 0),c([d()],fe.prototype,"thumbnail",void 0),c([d({readOnly:!0})],fe.prototype,"thumbnailUrl",null),c([d()],fe.prototype,"units",void 0),c([d()],fe.prototype,"url",void 0),c([d()],fe.prototype,"urlKey",void 0),c([de("urlKey")],fe.prototype,"readUrlKey",null),c([d()],fe.prototype,"user",void 0),c([de("user")],fe.prototype,"readUser",null),c([d()],fe.prototype,"use3dBasemaps",void 0),c([d()],fe.prototype,"useDefault3dBasemap",void 0),c([d()],fe.prototype,"useStandardizedQuery",void 0),c([d()],fe.prototype,"useVectorBasemaps",void 0),c([d()],fe.prototype,"vectorBasemapGalleryGroupQuery",void 0),fe=$n=c([R("esri.portal.Portal")],fe);const qj=new FinalizationRegistry(t=>{t.remove()});function Bpe(t){const e=mt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let au=class extends Oe{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:Yj(e.path,e.portalItem)}:e}set path(e){e!=null&&vn(e)?he.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return Yj(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new W("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(e,i){const{addOrUpdateResources:r}=await le(()=>import("./resourceUtils-iXW0dBIN.js"),__vite__mapDeps([176,1,2]));return await r(this.portalItem,[{resource:this,content:e,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function Yj(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&vn(t)&&(t=hD(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}c([d()],au.prototype,"portalItem",void 0),c([d({type:String,value:null})],au.prototype,"path",null),c([It("path")],au.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],au.prototype,"url",null),c([d({type:String,readOnly:!0})],au.prototype,"cdnUrl",null),c([d({type:String,readOnly:!0})],au.prototype,"itemRelativeUrl",null),au=c([R("esri.portal.PortalItemResource")],au);let vp=class extends Oe{constructor(e){super(e),this.created=null,this.rating=null}};c([d({type:Date})],vp.prototype,"created",void 0),c([d()],vp.prototype,"rating",void 0),vp=c([R("esri.portal.PortalRating")],vp);var Id;const Gpe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),Wpe=new Set(["KML","GeoJson","CSV"]);let We=Id=class extends X.JSONSupportMixin(gs){static from(t){return Zw(Id,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new it(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,l=!1,u=!1,h=!1,p=!1,m=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),u=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),s=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(u=e.includes("Spatiotemporal"),p=e.includes("Relational"),s=u||p?"mapimages":n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(m=e.includes("Map"),s=m?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",s?Li(i+s+r+".png"):null}get isLayer(){return this.type!=null&&Gpe.has(this.type)}get itemCdnUrl(){return mD(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=fe.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof vp?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new vp({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:B(this.applicationProxies),avgRating:this.avgRating,categories:B(this.categories),classification:B(this.classification),created:B(this.created),culture:this.culture,description:this.description,extent:B(this.extent),groupCategories:B(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:B(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:B(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:B(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:B(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Id({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const i=t[e];i&&(t[e]=JSON.stringify(i))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new vp(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Id)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new W("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new W("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:s,tags:n,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!r,tags:n?.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new Id({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")nc(e)?r.query={data:e}:r.query={url:qn(e)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new W("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await le(()=>import("./resourceUtils-iXW0dBIN.js"),__vite__mapDeps([176,1,2]));return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await le(()=>import("./resourceUtils-iXW0dBIN.js"),__vite__mapDeps([176,1,2]));return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i?.compress,access:i?.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await le(()=>import("./resourceUtils-iXW0dBIN.js"),__vite__mapDeps([176,1,2]));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new W("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await le(()=>import("./resourceUtils-iXW0dBIN.js"),__vite__mapDeps([176,1,2]));return e(this,t)}resourceFromPath(t){return new au({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:B(this.categories),classification:B(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:B(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:B(this.typeKeywords),url:this.url};return ere(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Id({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};c([d({type:["private","shared","org","public"]})],We.prototype,"access",void 0),c([d()],We.prototype,"accessInformation",void 0),c([d({type:String})],We.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],We.prototype,"applicationProxies",void 0),c([d()],We.prototype,"avgRating",void 0),c([d()],We.prototype,"categories",void 0),c([d()],We.prototype,"classification",void 0),c([d({type:Date})],We.prototype,"created",void 0),c([d()],We.prototype,"culture",void 0),c([d()],We.prototype,"description",void 0),c([d({readOnly:!0})],We.prototype,"displayName",null),c([d({type:it})],We.prototype,"extent",void 0),c([de("extent")],We.prototype,"readExtent",null),c([d()],We.prototype,"groupCategories",void 0),c([d({readOnly:!0})],We.prototype,"iconUrl",null),c([d()],We.prototype,"id",void 0),c([d({readOnly:!0})],We.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],We.prototype,"isOrgItem",void 0),c([d()],We.prototype,"itemControl",void 0),c([d({readOnly:!0})],We.prototype,"itemPageUrl",null),c([d({readOnly:!0})],We.prototype,"itemUrl",null),c([d()],We.prototype,"licenseInfo",void 0),c([d({type:Date})],We.prototype,"modified",void 0),c([d()],We.prototype,"name",void 0),c([d()],We.prototype,"numComments",void 0),c([d()],We.prototype,"numRatings",void 0),c([d()],We.prototype,"numViews",void 0),c([d()],We.prototype,"owner",void 0),c([d()],We.prototype,"ownerFolder",void 0),c([d({type:fe})],We.prototype,"portal",void 0),c([d()],We.prototype,"screenshots",void 0),c([d()],We.prototype,"size",void 0),c([d()],We.prototype,"snippet",void 0),c([d()],We.prototype,"sourceJSON",void 0),c([d({type:String})],We.prototype,"sourceUrl",void 0),c([d({type:String})],We.prototype,"spatialReference",void 0),c([d()],We.prototype,"tags",void 0),c([d()],We.prototype,"thumbnail",void 0),c([d({readOnly:!0})],We.prototype,"thumbnailUrl",null),c([d()],We.prototype,"title",void 0),c([d()],We.prototype,"type",void 0),c([d()],We.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(t,e){if(Wpe.has(e.type)){const i=this.portal?.restUrl;t||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return t}}})],We.prototype,"url",void 0),c([d({readOnly:!0})],We.prototype,"userItemUrl",null),We=Id=c([R("esri.portal.PortalItem")],We);const tq=Object.freeze(Object.defineProperty({__proto__:null,get default(){return We}},Symbol.toStringTag,{value:"Module"}));async function qpe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await nW("esri/t9n/basemaps");return i[t]||i[e]}const nI={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let lu=class extends Oe{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:oW(e??wn())??"global";return i=i==="no"?"nb":i,i}};c([d()],lu.prototype,"apiKey",void 0),c([d()],lu.prototype,"id",void 0),c([d()],lu.prototype,"language",void 0),c([d()],lu.prototype,"places",void 0),c([d()],lu.prototype,"serviceUrl",void 0),c([d()],lu.prototype,"worldview",void 0),lu=c([R("esri.support.BasemapStyle")],lu);const Ype=lu,t_=new WeakMap;function tL(t){return!t.destroyed&&(t_.has(t)||t.addHandles([Ue(()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||tL(e))},e=>t_.set(t,e),Ps),Mt(()=>t_.delete(t))]),t_.get(t))}function Jpe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function DBe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function Zpe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function Xpe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function LBe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function Jj(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function sh(t){return t?.type==="subtype-sublayer"}const NBe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function oI(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function FBe(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function gT(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function jBe(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}async function iL(t,e){const i=mt?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${t.slice(0,r)}/rest/info`,n=e!=null?e.signal:null,{data:o}=await Tt(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function iq(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Kpe(t){return iq(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Qpe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function efe(t){return!!Qpe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function zBe(t){const e=new _e;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||tL(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function tfe(t,e){return null}function VBe(t){return null}function aI(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function UBe(t,e){!e||!aI(t)||tfe(t.url)}const ife=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),rq=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),rfe=new Set([...rq,"link-chart"]);function sfe(t){switch(t.layerContainerType){case"basemap":return ife;case"operational-layers":return t.origin==="link-chart"?rfe:rq;default:return null}}function nfe(t,e){if(e.restrictedWebMapWriting){const i=sfe(e);return i==null||i.has(t.type)&&!gT(t)}return!0}function ofe(t,e){if(e)if(gT(t)){const i=BC("featureCollection.layers",e),r=i?.[0]?.layerDefinition;r&&Zj(t,r)}else t.type!=="group"&&Zj(t,e)}function Zj(t,e){"maxScale"in t&&(e.maxScale=WS(t.maxScale)??void 0),"minScale"in t&&(e.minScale=WS(t.minScale)??void 0)}function afe(t,e){if(ofe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=WS(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(gT(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function lI(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i?.messages&&i.messages.push(new W("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(gT(t)&&!t.isTable)e=t.resourceInfo;else if(nfe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&afe(t,e=B(e)),e}var mv;let lfe=0,An=mv=class extends X.JSONSupportMixin(gs){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+lfe++,this.baseLayers=new _e,this.referenceLayers=new _e;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&he.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{he.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=ci(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",sc(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=lI(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&r.push(n)}),this.referenceLayers.forEach(s=>{const n=lI(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&(s.type!=="scene"&&(n.isReference=!0),r.push(n))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",sc(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return mT(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>OS(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>OS(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new mv({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e?.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=B(i);return r.url&&Pl(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&Pl(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;hi(t);const s=[];if(e){const n=e.context?e.context.url:null;if(s.push(this._loadLayersFromJSON(e.data,n,t)),e.data.id&&!e.data.title){const o=e.data.id;s.push(qpe(o).then(a=>{a&&this.read({title:a},e.context)}))}}else i?s.push(this._loadFromItem(i,t)):r&&s.push(this._loadFromStylesService(r,t));await Promise.all(s)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo?.context,s=this.portalItem?.portal||r?.portal||null,n=cfe[r?.origin||""]??"web-map",{populateOperationalLayers:o}=await le(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-Dp_lCfjw.js");return{populateOperationalLayers:l}},__vite__mapDeps([177,178,179,180,181,182,1,2])),a=[];if(hi(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const l={context:{...r,origin:n,url:e,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=m=>n==="web-scene"&&m.layerType==="ArcGISSceneServiceLayer"||m.isReference,h=o(this.baseLayers,t.baseMapLayers.filter(m=>!u(m)),l);a.push(h);const p=o(this.referenceLayers,t.baseMapLayers.filter(u),l);a.push(p)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),s=Sr(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:ufe[t.type||""]??"web-map",portal:t.portal||fe.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||fe.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,r=`${i}/styles/${t.id}/self`,s=`${i}/webmaps/${t.id}`,n=t.apiKey??Ct.apiKeys.basemapStyles,[o,a]=await Promise.all([(await Tt(r,{query:{token:n},signal:e?.signal})).data,(await Tt(s,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:n},signal:e?.signal})).data]);this.thumbnailUrl??=o.thumbnailUrl;const l=Sr(s);if(this._set("resourceInfo",{data:a.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:a.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,e),n)for(const u of[...this.baseLayers,...this.referenceLayers])"apiKey"in u&&(u.apiKey=n)}static fromId(t){const e=nI[t];return e?e.itemId?new mv({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):mv.fromJSON(e,e.is3d?{origin:"web-scene",portal:new fe({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:_e}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],An.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],An.prototype,"id",void 0),c([d({type:We})],An.prototype,"portalItem",void 0),c([d()],An.prototype,"referenceLayers",null),c([d({readOnly:!0})],An.prototype,"resourceInfo",void 0),c([d({type:Te})],An.prototype,"spatialReference",void 0),c([d({type:Ype})],An.prototype,"style",void 0),c([d()],An.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],An.prototype,"title",void 0),c([me("title")],An.prototype,"writeTitle",null),An=mv=c([R("esri.Basemap")],An);const ufe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},cfe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},S0=An,hfe=Object.freeze(Object.defineProperty({__proto__:null,default:S0},Symbol.toStringTag,{value:"Module"})),vE={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function sq(t){return!!vE[t]||!!vE[t.toLowerCase()]}function rL(t){return vE[t]??vE[t.toLowerCase()]}function dfe(t){return[...rL(t)]}function o2(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function nq(t,e,i,r=1){const s=(t%360+360)%360/360,n=i<=.5?i*(e+1):i+e-i*e,o=2*i-n;return[Math.round(255*o2(o,n,s+1/3)),Math.round(255*o2(o,n,s)),Math.round(255*o2(o,n,s-1/3)),r]}function pfe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,s=e?1:17,n=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&r,o>>=i,a[3]=s*l/255),l=o&r,o>>=i,a[2]=s*l,l=o&r,o>>=i,a[1]=s*l,l=o&r,o>>=i,a[0]=s*l,a}function oq(t){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),s=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(s+16*s)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function aq(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){const s=i[0];if(s.charAt(s.length-1)==="%"){const n=i.map(o=>2.56*parseFloat(o));return i.length===4&&(n[3]=parseFloat(i[3])),Xj(n)}return Xj(i.map(n=>parseFloat(n)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return nq(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function Xj(t){return t[0]=Mg(t[0]),t[1]=Mg(t[1]),t[2]=Mg(t[2]),t[3]=t.length===4?uq(t[3]):1,t}function lq(t){let e=sq(t)?rL(t):null;return e??=aq(t),e??=oq(t),e}function HBe(t){const e=lq(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function uq(t){return cq(t,0,1)}function Mg(t){return Math.round(cq(t,0,255))}function cq(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const BBe=2.2;function i_(t){return Ao(KP(t),0,255)}function r_(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let Mx=class tn{static blendColors(e,i,r,s=new tn){return s.r=Math.round(e.r+(i.r-e.r)*r),s.g=Math.round(e.g+(i.g-e.g)*r),s.b=Math.round(e.b+(i.b-e.b)*r),s.a=e.a+(i.a-e.a)*r,s._sanitize()}static fromRgb(e,i){const r=aq(e);return r?tn.fromArray(r,i):null}static fromHex(e,i=new tn){const r=oq(e);return r?tn.fromArray(r,i):null}static fromArray(e,i=new tn){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=lq(e);return r?tn.fromArray(r,i):null}static fromJSON(e){return e!=null?new tn([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?tn.fromString(e,this):Array.isArray(e)?tn.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof tn||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=e?.capitalize??!1,r=e?.digits??6,s=r===3||r===4,n=r===4||r===8,o=`#${r_(this.r,s)}${r_(this.g,s)}${r_(this.b,s)}${n?r_(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=tn.AlphaMode.ALWAYS){const i=i_(this.r),r=i_(this.g),s=i_(this.b);return e===tn.AlphaMode.ALWAYS||this.a!==1?[i,r,s,i_(255*this.a)]:[i,r,s]}clone(){return new tn(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Mg(this.r),this.g=Mg(this.g),this.b=Mg(this.b),this.a=uq(this.a),this}_set(e,i,r,s){this.r=e,this.g=i,this.b=r,this.a=s}};Mx.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Mx||(Mx={}));const He=Mx;var uI;let kx=uI=class extends X{constructor(t){super(t),this.type="none"}clone(){return new uI({type:this.type})}};c([Re({none:"none",stayAbove:"stay-above"}),d({json:{write:{isRequired:!0}}})],kx.prototype,"type",void 0),kx=uI=c([R("esri.ground.NavigationConstraint")],kx);const ffe=Symbol("GroundInstance");function yT(t){const e=KP(100*(1-t));return Math.max(0,Math.min(e,100))}function vw(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var Kj,cI,TB;let uu=cI=(TB=class extends X.JSONSupportMixin(gs){constructor(t){super(t),this[Kj]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new _e;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&he.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{Zr(t)||he.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)ci(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",sc(t,this._get("layers")))}writeLayers(t,e,i,r){const s=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(n=>{if("write"in n){const o={};Wie(n)().write(o,r)&&s.push(o)}else r?.messages&&r.messages.push(new W("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return mT(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await le(()=>import("./ElevationQuery-zXY3jF5H.js"),__vite__mapDeps([183,1,2]));hi(e);const r=new i,s=this.layers.filter(Qj).toArray();return r.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await le(()=>import("./ElevationQuery-zXY3jF5H.js"),__vite__mapDeps([183,1,2]));hi(e);const r=new i,s=this.layers.filter(Qj).toArray();return r.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:B(this.surfaceColor),navigationConstraint:B(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new cI({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=e?.origin||"web-scene",s=e?.portal||null,n=e?.url||null,{populateOperationalLayers:o}=await le(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-Dp_lCfjw.js");return{populateOperationalLayers:l}},__vite__mapDeps([177,178,179,180,181,182,1,2]));hi(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},Kj=ffe,TB);function mfe(t){return t&&"createElevationSampler"in t}function Qj(t){return t.type==="elevation"||mfe(t)}c([d({json:{read:!1,write:{isRequired:!0}}})],uu.prototype,"layers",null),c([me("layers")],uu.prototype,"writeLayers",null),c([d({readOnly:!0})],uu.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ht,read:{reader:vw,source:"transparency"},write:{writer:(t,e)=>{e.transparency=yT(t)},target:"transparency"}}})],uu.prototype,"opacity",void 0),c([d({type:He,json:{type:[ht],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],uu.prototype,"surfaceColor",void 0),c([d({type:kx,json:{write:!0}})],uu.prototype,"navigationConstraint",void 0),uu=cI=c([R("esri.Ground")],uu);const wE=uu,gfe="randomUUID"in crypto;function eb(){if(gfe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function GBe(){return`{${eb().toUpperCase()}}`}function yfe(){return`{${eb()}}`}function bfe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const zf={Base64:0,Hex:1,String:2,Raw:3},kg=8,hq=(1<<kg)-1;function dh(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function vfe(t){const e=[];for(let i=0,r=t.length*kg;i<r;i+=kg)e[i>>5]|=(t.charCodeAt(i/kg)&hq)<<i%32;return e}function wfe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=kg)e.push(String.fromCharCode(t[i>>5]>>>i%32&hq));return e.join("")}function _fe(t){const e="0123456789abcdef",i=[];for(let r=0,s=4*t.length;r<s;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function xfe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*t.length;s<n;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function Sfe(t,e){return t<<e|t>>>32-e}function bT(t,e,i,r,s,n){return dh(Sfe(dh(dh(e,t),dh(r,n)),s),i)}function Qr(t,e,i,r,s,n,o){return bT(e&i|~e&r,t,e,s,n,o)}function es(t,e,i,r,s,n,o){return bT(e&r|i&~r,t,e,s,n,o)}function ts(t,e,i,r,s,n,o){return bT(e^i^r,t,e,s,n,o)}function is(t,e,i,r,s,n,o){return bT(i^(e|~r),t,e,s,n,o)}function Efe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,u=s,h=n;i=Qr(i,r,s,n,t[o],7,-680876936),n=Qr(n,i,r,s,t[o+1],12,-389564586),s=Qr(s,n,i,r,t[o+2],17,606105819),r=Qr(r,s,n,i,t[o+3],22,-1044525330),i=Qr(i,r,s,n,t[o+4],7,-176418897),n=Qr(n,i,r,s,t[o+5],12,1200080426),s=Qr(s,n,i,r,t[o+6],17,-1473231341),r=Qr(r,s,n,i,t[o+7],22,-45705983),i=Qr(i,r,s,n,t[o+8],7,1770035416),n=Qr(n,i,r,s,t[o+9],12,-1958414417),s=Qr(s,n,i,r,t[o+10],17,-42063),r=Qr(r,s,n,i,t[o+11],22,-1990404162),i=Qr(i,r,s,n,t[o+12],7,1804603682),n=Qr(n,i,r,s,t[o+13],12,-40341101),s=Qr(s,n,i,r,t[o+14],17,-1502002290),r=Qr(r,s,n,i,t[o+15],22,1236535329),i=es(i,r,s,n,t[o+1],5,-165796510),n=es(n,i,r,s,t[o+6],9,-1069501632),s=es(s,n,i,r,t[o+11],14,643717713),r=es(r,s,n,i,t[o],20,-373897302),i=es(i,r,s,n,t[o+5],5,-701558691),n=es(n,i,r,s,t[o+10],9,38016083),s=es(s,n,i,r,t[o+15],14,-660478335),r=es(r,s,n,i,t[o+4],20,-405537848),i=es(i,r,s,n,t[o+9],5,568446438),n=es(n,i,r,s,t[o+14],9,-1019803690),s=es(s,n,i,r,t[o+3],14,-187363961),r=es(r,s,n,i,t[o+8],20,1163531501),i=es(i,r,s,n,t[o+13],5,-1444681467),n=es(n,i,r,s,t[o+2],9,-51403784),s=es(s,n,i,r,t[o+7],14,1735328473),r=es(r,s,n,i,t[o+12],20,-1926607734),i=ts(i,r,s,n,t[o+5],4,-378558),n=ts(n,i,r,s,t[o+8],11,-2022574463),s=ts(s,n,i,r,t[o+11],16,1839030562),r=ts(r,s,n,i,t[o+14],23,-35309556),i=ts(i,r,s,n,t[o+1],4,-1530992060),n=ts(n,i,r,s,t[o+4],11,1272893353),s=ts(s,n,i,r,t[o+7],16,-155497632),r=ts(r,s,n,i,t[o+10],23,-1094730640),i=ts(i,r,s,n,t[o+13],4,681279174),n=ts(n,i,r,s,t[o],11,-358537222),s=ts(s,n,i,r,t[o+3],16,-722521979),r=ts(r,s,n,i,t[o+6],23,76029189),i=ts(i,r,s,n,t[o+9],4,-640364487),n=ts(n,i,r,s,t[o+12],11,-421815835),s=ts(s,n,i,r,t[o+15],16,530742520),r=ts(r,s,n,i,t[o+2],23,-995338651),i=is(i,r,s,n,t[o],6,-198630844),n=is(n,i,r,s,t[o+7],10,1126891415),s=is(s,n,i,r,t[o+14],15,-1416354905),r=is(r,s,n,i,t[o+5],21,-57434055),i=is(i,r,s,n,t[o+12],6,1700485571),n=is(n,i,r,s,t[o+3],10,-1894986606),s=is(s,n,i,r,t[o+10],15,-1051523),r=is(r,s,n,i,t[o+1],21,-2054922799),i=is(i,r,s,n,t[o+8],6,1873313359),n=is(n,i,r,s,t[o+15],10,-30611744),s=is(s,n,i,r,t[o+6],15,-1560198380),r=is(r,s,n,i,t[o+13],21,1309151649),i=is(i,r,s,n,t[o+4],6,-145523070),n=is(n,i,r,s,t[o+11],10,-1120210379),s=is(s,n,i,r,t[o+2],15,718787259),r=is(r,s,n,i,t[o+9],21,-343485551),i=dh(i,a),r=dh(r,l),s=dh(s,u),n=dh(n,h)}return[i,r,s,n]}function sL(t,e=zf.Hex){const i=e||zf.Base64,r=Efe(vfe(t),t.length*kg);switch(i){case zf.Raw:return r;case zf.Hex:return _fe(r);case zf.String:return wfe(r);case zf.Base64:return xfe(r)}}function Cfe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function hI(t){return nL[Tfe(t)]||kfe}function Tfe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:Mfe(t.url)}function Mfe(t){const e=P9(t);return dI[e]||dq}const nL={},dq="text/plain",kfe=nL[dq],dI={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in dI)nL[dI[t]]=t;function Rfe(t){const e=t?.origins??[void 0];return(i,r)=>{const s=Ife(t,i,r);for(const n of e){const o=QP(i,n,r);for(const a in s)o[a]=s[a]}}}function Ife(t,e,i){if(t?.type==="resource")return $fe(t,e,i);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:s}=hoe;return{read:r,write:s}}}}function $fe(t,e,i){const r=Kw(e,i);return{type:String,read:(s,n,o)=>{const a=XC(s,n,o);return r.type===String?a:typeof r.type=="function"?new r.type({url:a}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(s,n,o,a){if(!a?.resources)return typeof s=="string"?void(n[o]=Zp(s,a)):void(n[o]=s.write({},a));const l=Pfe(s),u=Zp(l,{...a,verifyItemRelativeUrls:a?.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},py.NO),h=r.type!==String&&(!Cfe(this)||a?.origin&&this.originIdOf(i)>Ju(a.origin)),p={object:this,propertyName:i,value:s,targetUrl:u,dest:n,targetPropertyName:o,context:a,params:t};a?.portalItem&&u&&!vn(u)?h&&t?.contentAddressed?pI(p):h?Afe(p):Ofe(p):a?.portalItem&&(u==null||j9(u)!=null||Gy(u)||h)?pI(p):n[o]=u}}}}function pI(t){const{targetUrl:e,params:i,value:r,context:s,dest:n,targetPropertyName:o}=t;if(!s.portalItem)return;const a=z9(e),l=fq(r,e,s);if(i?.contentAddressed&&l.type!=="json")return void s.messages?.push(new W("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const u=i?.contentAddressed&&l.type==="json"?sL(l.jsonString):a?.filename??eb(),h=Yp(i?.prefix??a?.prefix,u),p=`${h}.${hI(l)}`;if(i?.contentAddressed&&s.resources&&l.type==="json"){const v=s.resources.toKeep.find(({resource:w})=>w.path===p)??s.resources.toAdd.find(({resource:w})=>w.path===p);if(v)return void(n[o]=v.resource.itemRelativeUrl)}const m=s.portalItem.resourceFromPath(p);Gy(e)&&s.resources&&s.resources.pendingOperations.push(Kne(e).then(v=>{m.path=`${h}.${hI({type:"blob",blob:v})}`,n[o]=m.itemRelativeUrl}).catch(()=>{}));const y=i?.compress??!1;s.resources&&pq({...t,resource:m,content:l,compress:y,updates:s.resources.toAdd}),n[o]=m.itemRelativeUrl}function Afe(t){const{context:e,targetUrl:i,params:r,value:s,dest:n,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),l=fq(s,i,e),u=hI(l),h=P9(a.path),p=r?.compress??!1;u===h?(e.resources&&pq({...t,resource:a,content:l,compress:p,updates:e.resources.toUpdate}),n[o]=i):pI(t)}function Ofe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function pq({object:t,propertyName:e,updates:i,resource:r,content:s,compress:n}){const o=a=>{Dfe(t,e,a)};i.push({resource:r,content:s,compress:n,finish:o})}function fq(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function Pfe(t){return t==null?null:typeof t=="string"?t:t.url}function Dfe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let Rx=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.color=null}};c([d({type:He,json:{type:[ht],write:!0}})],Rx.prototype,"color",void 0),Rx=c([R("esri.effects.FocusAreaOutline")],Rx);const Lfe=Rx;var Ix;let fI=Ix=class extends X.JSONSupportMixin(_e.ofType(ui)){constructor(t){super(t)}clone(){return new Ix(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(i=>{if(!e.equals(i.spatialReference)){if(!ka(i.spatialReference,e))return t?.messages?.push(new to("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const s=new ui;TW(i,s,e),i=s}const r=i.toJSON(t);return delete r.spatialReference,r}).filter(i=>i!=null):this.toArray().map(i=>i.toJSON(t))}static fromJSON(t,e){const i=new Ix;return t.forEach(r=>i.add(ui.fromJSON(r,e))),i}};fI=Ix=c([R("esri.layers.support.PolygonCollection")],fI);const E0=fI;let cu=class extends X.JSONSupportMixin(Fe){constructor(e){super(e),this.id=`focusarea-${eb()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new E0}readGeometries(e,i,r){Array.isArray(e)?this.geometries=E0.fromJSON(e,r):r.hooks?.onAfterLoad?.(()=>this._loadGeometries(pf(e,r),r))}async _loadGeometries(e,i){const r=await Tt(e,{responseType:"json"});this.geometries=E0.fromJSON(r.data,i)}};c([d({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),d()],cu.prototype,"id",void 0),c([d({type:String,json:{write:!0}})],cu.prototype,"title",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],cu.prototype,"enabled",void 0),c([d({type:Lfe,json:{write:!0}})],cu.prototype,"outline",void 0),c([d({type:E0,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new E0(t.items.map(e=>e.clone()))}),Rfe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],cu.prototype,"geometries",void 0),c([de(["web-scene","portal-item"],"geometries")],cu.prototype,"readGeometries",null),cu=c([R("esri.effects.FocusArea")],cu);const Nfe=cu;let gv=class extends X.JSONSupportMixin(Fe){constructor(e){super(e),this.areas=new _e,this.style="bright"}};c([d({type:_e.ofType(Nfe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new _e(t.items.map(e=>e.clone()))})],gv.prototype,"areas",void 0),c([d({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],gv.prototype,"style",void 0),gv=c([R("esri.effects.FocusAreas")],gv);const mq=gv;function Ffe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function jfe(t){return!(!Ffe(t)||!Kpe(t)?.operations?.supportsEditing||"editingEnabled"in t&&!efe(t)||tL(t))}const zfe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Vfe="screenUtils.toPt: input not recognized!",gq=96;function Ufe(t){return t?t/72*gq:0}function Po(t){return t?72*t/gq:0}function xt(t){if(typeof t=="string"){const e=t.match(zfe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",n=r==="px"?Po(i):i;return s?-n:n}return console.warn(Vfe),null}return t}function jr(t=0,e=0){return{x:t,y:e}}function JBe(t){return t?jr(t.x,t.y):null}function ZBe(t=0,e=0){return[t,e]}function XBe(t=0,e=0,i=0){return[t,e,i]}function KBe(t){return t}function QBe(t){return t}function e8e(t){return t}function t8e(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function vT(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Hfe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Bfe(t,e,i,r,s,n,o,a,l,u,h,p,m,y,v,w){const S=new Float32Array(16);return S[0]=t,S[1]=e,S[2]=i,S[3]=r,S[4]=s,S[5]=n,S[6]=o,S[7]=a,S[8]=l,S[9]=u,S[10]=h,S[11]=p,S[12]=m,S[13]=y,S[14]=v,S[15]=w,S}const Gfe=vT();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Gfe,clone:Hfe,create:vT,fromValues:Bfe},Symbol.toStringTag,{value:"Module"}));let oL=1e-6;function Hs(){return oL}function Wfe(t){oL=t}const wT=Math.random,qfe=Math.PI/180,Yfe=180/Math.PI;function aL(t){return t*qfe}function Jfe(t){return t*Yfe}function Zfe(t,e){return Math.abs(t-e)<=oL*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:wT,equals:Zfe,getEpsilon:Hs,setEpsilon:Wfe,toDegree:Jfe,toRadian:aL},Symbol.toStringTag,{value:"Module"}));function yq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Yh(t,e,i,r,s,n,o,a,l,u,h,p,m,y,v,w,S){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=h,t[10]=p,t[11]=m,t[12]=y,t[13]=v,t[14]=w,t[15]=S,t}function _T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jh(t,e){if(t===e){const i=e[1],r=e[2],s=e[3],n=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Xfe(t,e){return bq(t,e)||_T(t),t}function bq(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],m=e[10],y=e[11],v=e[12],w=e[13],S=e[14],E=e[15],I=i*a-r*o,D=i*l-s*o,O=i*u-n*o,A=r*l-s*a,z=r*u-n*a,_=s*u-n*l,Z=h*w-p*v,Q=h*S-m*v,ae=h*E-y*v,ge=p*S-m*w,ne=p*E-y*w,ve=m*E-y*S;let xe=I*ve-D*ne+O*ge+A*ae-z*Q+_*Z;return xe?(xe=1/xe,t[0]=(a*ve-l*ne+u*ge)*xe,t[1]=(s*ne-r*ve-n*ge)*xe,t[2]=(w*_-S*z+E*A)*xe,t[3]=(m*z-p*_-y*A)*xe,t[4]=(l*ae-o*ve-u*Q)*xe,t[5]=(i*ve-s*ae+n*Q)*xe,t[6]=(S*O-v*_-E*D)*xe,t[7]=(h*_-m*O+y*D)*xe,t[8]=(o*ne-a*ae+u*Z)*xe,t[9]=(r*ae-i*ne-n*Z)*xe,t[10]=(v*z-w*O+E*I)*xe,t[11]=(p*O-h*z-y*I)*xe,t[12]=(a*Q-o*ge-l*Z)*xe,t[13]=(i*ge-r*Q+s*Z)*xe,t[14]=(w*D-v*A-S*I)*xe,t[15]=(h*A-p*D+m*I)*xe,t):null}function Kfe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],m=e[10],y=e[11],v=e[12],w=e[13],S=e[14],E=e[15];return t[0]=a*(m*E-y*S)-p*(l*E-u*S)+w*(l*y-u*m),t[1]=-(r*(m*E-y*S)-p*(s*E-n*S)+w*(s*y-n*m)),t[2]=r*(l*E-u*S)-a*(s*E-n*S)+w*(s*u-n*l),t[3]=-(r*(l*y-u*m)-a*(s*y-n*m)+p*(s*u-n*l)),t[4]=-(o*(m*E-y*S)-h*(l*E-u*S)+v*(l*y-u*m)),t[5]=i*(m*E-y*S)-h*(s*E-n*S)+v*(s*y-n*m),t[6]=-(i*(l*E-u*S)-o*(s*E-n*S)+v*(s*u-n*l)),t[7]=i*(l*y-u*m)-o*(s*y-n*m)+h*(s*u-n*l),t[8]=o*(p*E-y*w)-h*(a*E-u*w)+v*(a*y-u*p),t[9]=-(i*(p*E-y*w)-h*(r*E-n*w)+v*(r*y-n*p)),t[10]=i*(a*E-u*w)-o*(r*E-n*w)+v*(r*u-n*a),t[11]=-(i*(a*y-u*p)-o*(r*y-n*p)+h*(r*u-n*a)),t[12]=-(o*(p*S-m*w)-h*(a*S-l*w)+v*(a*m-l*p)),t[13]=i*(p*S-m*w)-h*(r*S-s*w)+v*(r*m-s*p),t[14]=-(i*(a*S-l*w)-o*(r*S-s*w)+v*(r*l-s*a)),t[15]=i*(a*m-l*p)-o*(r*m-s*p)+h*(r*l-s*a),t}function Qfe(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],h=t[9],p=t[10],m=t[11],y=t[12],v=t[13],w=t[14],S=t[15];return(e*o-i*n)*(p*S-m*w)-(e*a-r*n)*(h*S-m*v)+(e*l-s*n)*(h*w-p*v)+(i*a-r*o)*(u*S-m*y)-(i*l-s*o)*(u*w-p*y)+(r*l-s*a)*(u*v-h*y)}function vq(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=e[9],y=e[10],v=e[11],w=e[12],S=e[13],E=e[14],I=e[15];let D=i[0],O=i[1],A=i[2],z=i[3];return t[0]=D*r+O*a+A*p+z*w,t[1]=D*s+O*l+A*m+z*S,t[2]=D*n+O*u+A*y+z*E,t[3]=D*o+O*h+A*v+z*I,D=i[4],O=i[5],A=i[6],z=i[7],t[4]=D*r+O*a+A*p+z*w,t[5]=D*s+O*l+A*m+z*S,t[6]=D*n+O*u+A*y+z*E,t[7]=D*o+O*h+A*v+z*I,D=i[8],O=i[9],A=i[10],z=i[11],t[8]=D*r+O*a+A*p+z*w,t[9]=D*s+O*l+A*m+z*S,t[10]=D*n+O*u+A*y+z*E,t[11]=D*o+O*h+A*v+z*I,D=i[12],O=i[13],A=i[14],z=i[15],t[12]=D*r+O*a+A*p+z*w,t[13]=D*s+O*l+A*m+z*S,t[14]=D*n+O*u+A*y+z*E,t[15]=D*o+O*h+A*v+z*I,t}function eme(t,e,i){const r=i[0],s=i[1],n=i[2];if(e===t)t[12]=e[0]*r+e[4]*s+e[8]*n+e[12],t[13]=e[1]*r+e[5]*s+e[9]*n+e[13],t[14]=e[2]*r+e[6]*s+e[10]*n+e[14],t[15]=e[3]*r+e[7]*s+e[11]*n+e[15];else{const o=e[0],a=e[1],l=e[2],u=e[3],h=e[4],p=e[5],m=e[6],y=e[7],v=e[8],w=e[9],S=e[10],E=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=h,t[5]=p,t[6]=m,t[7]=y,t[8]=v,t[9]=w,t[10]=S,t[11]=E,t[12]=o*r+h*s+v*n+e[12],t[13]=a*r+p*s+w*n+e[13],t[14]=l*r+m*s+S*n+e[14],t[15]=u*r+y*s+E*n+e[15]}return t}function tme(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ime(t,e,i,r){let s=r[0],n=r[1],o=r[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=Hs())return void yq(t,e);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(i),u=Math.cos(i),h=1-u,p=e[0],m=e[1],y=e[2],v=e[3],w=e[4],S=e[5],E=e[6],I=e[7],D=e[8],O=e[9],A=e[10],z=e[11],_=s*s*h+u,Z=n*s*h+o*l,Q=o*s*h-n*l,ae=s*n*h-o*l,ge=n*n*h+u,ne=o*n*h+s*l,ve=s*o*h+n*l,xe=n*o*h-s*l,Be=o*o*h+u;t[0]=p*_+w*Z+D*Q,t[1]=m*_+S*Z+O*Q,t[2]=y*_+E*Z+A*Q,t[3]=v*_+I*Z+z*Q,t[4]=p*ae+w*ge+D*ne,t[5]=m*ae+S*ge+O*ne,t[6]=y*ae+E*ge+A*ne,t[7]=v*ae+I*ge+z*ne,t[8]=p*ve+w*xe+D*Be,t[9]=m*ve+S*xe+O*Be,t[10]=y*ve+E*xe+A*Be,t[11]=v*ve+I*xe+z*Be,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function rme(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[4],o=e[5],a=e[6],l=e[7],u=e[8],h=e[9],p=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+u*r,t[5]=o*s+h*r,t[6]=a*s+p*r,t[7]=l*s+m*r,t[8]=u*s-n*r,t[9]=h*s-o*r,t[10]=p*s-a*r,t[11]=m*s-l*r,t}function sme(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],u=e[8],h=e[9],p=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-u*r,t[1]=o*s-h*r,t[2]=a*s-p*r,t[3]=l*s-m*r,t[8]=n*r+u*s,t[9]=o*r+h*s,t[10]=a*r+p*s,t[11]=l*r+m*s,t}function nme(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],u=e[4],h=e[5],p=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+u*r,t[1]=o*s+h*r,t[2]=a*s+p*r,t[3]=l*s+m*r,t[4]=u*s-n*r,t[5]=h*s-o*r,t[6]=p*s-a*r,t[7]=m*s-l*r,t}function ome(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ame(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lme(t,e,i){if(e===0)return _T(t);let r=i[0],s=i[1],n=i[2],o=Math.sqrt(r*r+s*s+n*n);if(o<=Hs())return null;o=1/o,r*=o,s*=o,n*=o;const a=Math.sin(e),l=Math.cos(e),u=1-l;return t[0]=r*r*u+l,t[1]=s*r*u+n*a,t[2]=n*r*u-s*a,t[3]=0,t[4]=r*s*u-n*a,t[5]=s*s*u+l,t[6]=n*s*u+r*a,t[7]=0,t[8]=r*n*u+s*a,t[9]=s*n*u-r*a,t[10]=n*n*u+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ume(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cme(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hme(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wq(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=r+r,l=s+s,u=n+n,h=r*a,p=r*l,m=r*u,y=s*l,v=s*u,w=n*u,S=o*a,E=o*l,I=o*u;return t[0]=1-(y+w),t[1]=p+I,t[2]=m-E,t[3]=0,t[4]=p-I,t[5]=1-(h+w),t[6]=v+S,t[7]=0,t[8]=m+E,t[9]=v-S,t[10]=1-(h+y),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function dme(t,e){const i=pme,r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=r*r+s*s+n*n+o*o;return p>0?(i[0]=2*(a*o+h*r+l*n-u*s)/p,i[1]=2*(l*o+h*s+u*r-a*n)/p,i[2]=2*(u*o+h*n+a*s-l*r)/p):(i[0]=2*(a*o+h*r+l*n-u*s),i[1]=2*(l*o+h*s+u*r-a*n),i[2]=2*(u*o+h*n+a*s-l*r)),wq(t,e,i),t}const pme=Gh();function fme(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function mme(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+s*s),t[1]=Math.sqrt(n*n+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+h*h),t}function gme(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function yme(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3],l=s+s,u=n+n,h=o+o,p=s*l,m=s*u,y=s*h,v=n*u,w=n*h,S=o*h,E=a*l,I=a*u,D=a*h,O=r[0],A=r[1],z=r[2];return t[0]=(1-(v+S))*O,t[1]=(m+D)*O,t[2]=(y-I)*O,t[3]=0,t[4]=(m-D)*A,t[5]=(1-(p+S))*A,t[6]=(w+E)*A,t[7]=0,t[8]=(y+I)*z,t[9]=(w-E)*z,t[10]=(1-(p+v))*z,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function bme(t,e,i,r,s){const n=e[0],o=e[1],a=e[2],l=e[3],u=n+n,h=o+o,p=a+a,m=n*u,y=n*h,v=n*p,w=o*h,S=o*p,E=a*p,I=l*u,D=l*h,O=l*p,A=r[0],z=r[1],_=r[2],Z=s[0],Q=s[1],ae=s[2],ge=(1-(w+E))*A,ne=(y+O)*A,ve=(v-D)*A,xe=(y-O)*z,Be=(1-(m+E))*z,dt=(S+I)*z,Ke=(v+D)*_,Qe=(S-I)*_,gt=(1-(m+w))*_;return t[0]=ge,t[1]=ne,t[2]=ve,t[3]=0,t[4]=xe,t[5]=Be,t[6]=dt,t[7]=0,t[8]=Ke,t[9]=Qe,t[10]=gt,t[11]=0,t[12]=i[0]+Z-(ge*Z+xe*Q+Ke*ae),t[13]=i[1]+Q-(ne*Z+Be*Q+Qe*ae),t[14]=i[2]+ae-(ve*Z+dt*Q+gt*ae),t[15]=1,t}function vme(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,u=i*o,h=r*o,p=r*a,m=s*o,y=s*a,v=s*l,w=n*o,S=n*a,E=n*l;return t[0]=1-p-v,t[1]=h+E,t[2]=m-S,t[3]=0,t[4]=h-E,t[5]=1-u-v,t[6]=y+w,t[7]=0,t[8]=m+S,t[9]=y-w,t[10]=1-u-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wme(t,e,i,r,s,n,o){const a=1/(i-e),l=1/(s-r),u=1/(n-o);return t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(s+r)*l,t[10]=(o+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*u,t[15]=0,t}function _me(t,e,i,r,s){const n=1/Math.tan(e/2);let o;return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(r-s),t[10]=(s+r)*o,t[14]=2*s*r*o):(t[10]=-1,t[14]=-2*r),t}function xme(t,e,i,r){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(s+n);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(s-n)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function Sme(t,e,i,r,s,n,o){const a=1/(e-i),l=1/(r-s),u=1/(n-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(s+r)*l,t[14]=(o+n)*u,t[15]=1,t}function Eme(t,e,i,r){const s=e[0],n=e[1],o=e[2];let a=s-i[0],l=n-i[1],u=o-i[2];const h=Hs();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(u)<h)return void _T(t);let p=1/Math.sqrt(a*a+l*l+u*u);a*=p,l*=p,u*=p;const m=r[0],y=r[1],v=r[2];let w=y*u-v*l,S=v*a-m*u,E=m*l-y*a;p=Math.sqrt(w*w+S*S+E*E),p?(p=1/p,w*=p,S*=p,E*=p):(w=0,S=0,E=0);let I=l*E-u*S,D=u*w-a*E,O=a*S-l*w;p=Math.sqrt(I*I+D*D+O*O),p?(p=1/p,I*=p,D*=p,O*=p):(I=0,D=0,O=0),t[0]=w,t[1]=I,t[2]=a,t[3]=0,t[4]=S,t[5]=D,t[6]=l,t[7]=0,t[8]=E,t[9]=O,t[10]=u,t[11]=0,t[12]=-(w*s+S*n+E*o),t[13]=-(I*s+D*n+O*o),t[14]=-(a*s+l*n+u*o),t[15]=1}function Cme(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=r[0],l=r[1],u=r[2];let h=s-i[0],p=n-i[1],m=o-i[2],y=h*h+p*p+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,p*=y,m*=y);let v=l*m-u*p,w=u*h-a*m,S=a*p-l*h;return y=v*v+w*w+S*S,y>0&&(y=1/Math.sqrt(y),v*=y,w*=y,S*=y),t[0]=v,t[1]=w,t[2]=S,t[3]=0,t[4]=p*S-m*w,t[5]=m*v-h*S,t[6]=h*w-p*v,t[7]=0,t[8]=h,t[9]=p,t[10]=m,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t}function Tme(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Mme(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function kme(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function _q(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function Rme(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function Ime(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function $me(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ame(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=t[9],m=t[10],y=t[11],v=t[12],w=t[13],S=t[14],E=t[15],I=e[0],D=e[1],O=e[2],A=e[3],z=e[4],_=e[5],Z=e[6],Q=e[7],ae=e[8],ge=e[9],ne=e[10],ve=e[11],xe=e[12],Be=e[13],dt=e[14],Ke=e[15],Qe=Hs();return Math.abs(i-I)<=Qe*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(r-D)<=Qe*Math.max(1,Math.abs(r),Math.abs(D))&&Math.abs(s-O)<=Qe*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(n-A)<=Qe*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(o-z)<=Qe*Math.max(1,Math.abs(o),Math.abs(z))&&Math.abs(a-_)<=Qe*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-Z)<=Qe*Math.max(1,Math.abs(l),Math.abs(Z))&&Math.abs(u-Q)<=Qe*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(h-ae)<=Qe*Math.max(1,Math.abs(h),Math.abs(ae))&&Math.abs(p-ge)<=Qe*Math.max(1,Math.abs(p),Math.abs(ge))&&Math.abs(m-ne)<=Qe*Math.max(1,Math.abs(m),Math.abs(ne))&&Math.abs(y-ve)<=Qe*Math.max(1,Math.abs(y),Math.abs(ve))&&Math.abs(v-xe)<=Qe*Math.max(1,Math.abs(v),Math.abs(xe))&&Math.abs(w-Be)<=Qe*Math.max(1,Math.abs(w),Math.abs(Be))&&Math.abs(S-dt)<=Qe*Math.max(1,Math.abs(S),Math.abs(dt))&&Math.abs(E-Ke)<=Qe*Math.max(1,Math.abs(E),Math.abs(Ke))}function Ome(t){const e=Hs(),i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(s*s+a*a+h*h))<=e}function Pme(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const Dme=vq,Lme=_q;Object.freeze(Object.defineProperty({__proto__:null,add:kme,adjoint:Kfe,copy:yq,determinant:Qfe,equals:Ame,exactEquals:$me,frob:Mme,fromQuat:vme,fromQuat2:dme,fromRotation:lme,fromRotationTranslation:wq,fromRotationTranslationScale:yme,fromRotationTranslationScaleOrigin:bme,fromScaling:ame,fromTranslation:ome,fromXRotation:ume,fromYRotation:cme,fromZRotation:hme,frustum:wme,getRotation:gme,getScale:mme,getTranslation:fme,hasIdentityRotation:Pme,identity:_T,invert:bq,invertOrIdentity:Xfe,isOrthoNormal:Ome,lookAt:Eme,mul:Dme,multiply:vq,multiplyScalar:Rme,multiplyScalarAndAdd:Ime,ortho:Sme,perspective:_me,perspectiveFromFieldOfView:xme,rotate:ime,rotateX:rme,rotateY:sme,rotateZ:nme,scale:tme,set:Yh,str:Tme,sub:Lme,subtract:_q,targetTo:Cme,translate:eme,transpose:Jh},Symbol.toStringTag,{value:"Module"}));const Nme=(t,e)=>{const i=Yh(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Jh(i,i)},Fme=(t,e)=>{const i=Yh(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Jh(i,i)},jme=(t,e)=>{const i=1-e,r=Yh(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Jh(r,r)},zme=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),s=Yh(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Jh(s,s)},Vme=(t,e)=>{const i=1-2*e,r=Yh(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Jh(r,r)},Ume=(t,e)=>{const i=Yh(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Jh(i,i)},Hme=(t,e)=>{const i=1-e,r=Yh(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Jh(r,r)};let xq=class Sq{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=mn(e.strength,i.strength,r),this.radius=mn(e.radius,i.radius,r),this.threshold=mn(e.threshold,i.threshold,r)}clone(){return new Sq(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:C0(this.radius),strength:this.strength,threshold:this.threshold}}},Eq=class Cq{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(mn(e.radius,i.radius,r))}clone(){return new Cq(this.radius)}toJSON(){return{type:"blur",radius:C0(this.radius)}}},mI=class Tq{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=mn(e.amount,i.amount,r),this._updateMatrix()}clone(){return new Tq(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||vT();switch(this.type){case"brightness":this._colorMatrix=Nme(e,this.amount);break;case"contrast":this._colorMatrix=Fme(e,this.amount);break;case"grayscale":this._colorMatrix=jme(e,this.amount);break;case"invert":this._colorMatrix=Vme(e,this.amount);break;case"saturate":this._colorMatrix=Ume(e,this.amount);break;case"sepia":this._colorMatrix=Hme(e,this.amount)}}},Mq=class kq{constructor(e,i,r,s){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=mn(e.offsetX,i.offsetX,r),this.offsetY=mn(e.offsetY,i.offsetY,r),this.blurRadius=mn(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(mn(e.color[0],i.color[0],r)),this.color[1]=Math.round(mn(e.color[1],i.color[1],r)),this.color[2]=Math.round(mn(e.color[2],i.color[2],r)),this.color[3]=mn(e.color[3],i.color[3],r)}clone(){return new kq(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:C0(this.offsetX),yoffset:C0(this.offsetY),blurRadius:C0(this.blurRadius),color:e}}},Rq=class Iq{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=mn(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Iq(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||vT();this._colorMatrix=zme(e,this.angle)}},$q=class Aq{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=mn(e.amount,i.amount,r)}clone(){return new Aq(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function mn(t,e,i){return t+(e-t)*i}function C0(t){return Math.round(1e3*Po(t))/1e3}function Bme(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new mI(t.type,0);case"saturate":case"brightness":case"contrast":return new mI(t.type,1);case"opacity":return new $q(1);case"hue-rotate":return new Rq(0);case"blur":return new Eq(0);case"drop-shadow":return new Mq(0,0,0,[...rL("transparent")]);case"bloom":return new xq(0,0,1)}}function Gme(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,s)=>r.type===i[s].type)}function Wme(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let s=r.length;s<i.length;s++)r.push(Bme(i[s]))}function qme(t){const e=t[0];return!!e&&"type"in e}const a2=()=>he.getLogger("esri.support.basemapUtils");function Yme(){return{}}function Jme(t){for(const e in t){const i=t[e];ci(i),delete t[e]}}function Zme(t,e){let i;if(typeof t=="string"){const r=t in nI,s=!r&&t.includes("/");if(!r&&!s){if(hR())a2().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(nI).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");a2().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`)}return null}e&&(i=e[t]),i||(i=r?S0.fromId(t):new S0({style:{id:t}}),e&&(e[t]=i))}else i=Gi(S0,t);return i?.destroyed&&(a2().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function Xme(t){return new yl({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function l2(t){for(const e of t.values())e?.destroy();t.clear()}const ez={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Kme(t){let e=null;if(typeof t=="string")if(t in ez){const i=ez[t];e=new wE({resourceInfo:{data:{layers:[i]}}})}else he.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Gi(wE,t);return e}let Oq=0;const Pq=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Oq++})}};return e=c([R("esri.core.Identifiable")],e),e},Qme=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Oq++})}};return e=c([R("esri.core.Identifiable.NumericIdentifiable")],e),e};let yv=class extends Pq(class{}){};yv=c([R("esri.core.Identifiable")],yv),function(t){t.IdentifiableMixin=Pq,t.NumericIdentifiableMixin=Qme}(yv||(yv={}));const tb=yv;async function ege(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await le(async()=>{const{fromItem:r}=await import("./portalLayers-YoLJBtjf.js");return{fromItem:r}},__vite__mapDeps([182,180,179,178,181,1,2]));try{return await i(e)}catch(r){const s=e?.portalItem,n=s?.id||"unset",o=s?.portal?.url||Ct.portalUrl;throw he.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",r),r}}const tz={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function u2(t,e,i,r=Oo){const s=new xn(HD(r)),n=ke.fromJSDate(t,{zone:s}),o=i==="decades"||i==="centuries"?"year":Lq(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),n.plus({[o]:e}).toJSDate()}function r8e(t,e,i="milliseconds"){const r=t.getTime(),s=Dq(e,i,"milliseconds");return new Date(r+s)}function iz(t,e,i=Oo){const r=new xn(HD(i)),s=ke.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=Lq(e);return s.startOf(n).toJSDate()}function Dq(t,e,i){return t===0?0:t*tz[e]/tz[i]}function s8e(t,e){return t&&e?t.intersection(e):t||e}function Lq(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var co,jg;let Vt=(jg=class extends X{static get allTime(){return rz}static get empty(){return tge}static fromArray(e){return new co({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=e?.getTime()??null}get isAllTime(){return this.equals(co.allTime)}get isEmpty(){return this.equals(co.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=e?.getTime()??null}clone(){return new co({end:this.end,start:this.start})}equals(e){if(!e)return!1;const i=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return i===s&&r===n}expandTo(e,i=Oo){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=iz(r,e,i));let s=this.end;if(s){const n=iz(s,e,i);s=s.getTime()===n.getTime()?n:u2(n,1,e,i)}return new co({start:r,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return co.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let o,a;return s>=i&&s<=r?o=s:i>=s&&i<=n&&(o=i),r>=s&&r<=n?a=r:n>=i&&n<=r&&(a=n),o==null||a==null||isNaN(o)||isNaN(a)?co.empty:new co({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=Oo){if(this.isEmpty||this.isAllTime)return this.clone();const s=new co,{start:n,end:o}=this;return n!=null&&(s.start=u2(n,e,i,r)),o!=null&&(s.end=u2(o,e,i,r)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return rz.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new co({start:i,end:r})}},co=jg,jg);c([d({type:Date,json:{write:{allowNull:!0}}})],Vt.prototype,"end",void 0),c([de("end")],Vt.prototype,"readEnd",null),c([me("end")],Vt.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],Vt.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],Vt.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],Vt.prototype,"start",void 0),c([de("start")],Vt.prototype,"readStart",null),c([me("start")],Vt.prototype,"writeStart",null),Vt=co=c([R("esri.time.TimeExtent")],Vt);const rz=new Vt,tge=new Vt({start:void 0,end:void 0});let ige=0,mi=class extends Vl.EventedMixin(tb.IdentifiableMixin(gs)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new it(-180,-90,180,90,Te.WGS84),this.id=Date.now().toString(16)+"-layer-"+ige++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Te.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await le(async()=>{const{fromUrl:r}=await import("./arcgisLayers-BZz_6bO9.js");return{fromUrl:r}},__vite__mapDeps([184,180,179,181,1,2]))).fromUrl(i)}static fromPortalItem(e){return ege(e)}initialize(){this.when().catch(e=>{Zr(e)||he.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&(e&&=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Sr(this.url)}createLayerView(e,i){return Promise.reject(new W("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Tt(e,{query:{f:"json"},responseType:"json"})).data;throw new W("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],mi.prototype,"attributionDataUrl",void 0),c([d({readOnly:!0})],mi.prototype,"effectiveVisible",null),c([d({type:it})],mi.prototype,"fullExtent",void 0),c([d({readOnly:!0})],mi.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],mi.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],mi.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],mi.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],mi.prototype,"opacity",void 0),c([d({clonable:!1})],mi.prototype,"parent",void 0),c([d({readOnly:!0})],mi.prototype,"parsedUrl",null),c([d({type:Boolean,readOnly:!0})],mi.prototype,"persistenceEnabled",void 0),c([d({type:Boolean})],mi.prototype,"popupEnabled",void 0),c([d({type:Boolean})],mi.prototype,"attributionVisible",void 0),c([d({type:Te})],mi.prototype,"spatialReference",void 0),c([d({type:String})],mi.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],mi.prototype,"type",void 0),c([d()],mi.prototype,"url",void 0),c([d({type:Vt})],mi.prototype,"visibilityTimeExtent",void 0),c([d({type:Boolean,nonNullable:!0})],mi.prototype,"visible",void 0),mi=c([R("esri.layers.Layer")],mi);function gI(t,e,i){let r,s;if(t)for(let n=0,o=t.length;n<o;n++){if(r=t.at(n),r?.[e]===i)return r;if(r?.type==="group"&&(s=gI(r.layers,e,i),s))return s}}const rge=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new _e;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||he.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void he.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",sc(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof mi){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else zl(i)?i.then(n=>{this.destroyed||this.add(n,r)}):he.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let n=s.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(i){return gI(this.layers,"id",i)}findLayerByUid(i){return gI(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return c([d()],e.prototype,"layers",null),e=c([R("esri.support.LayersMixin")],e),e},sge=new Set(["feature","subtype-group"]);function yI(t,e,i){if(t)for(let r=0,s=t.length;r<s;r++){const n=t.at(r);if(n[e]===i)return n;if(n?.type==="group"){const o=yI(n.tables,e,i);if(o)return o}}}const nge=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new _e,this.addHandles([this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,sge.has(s.type)||he.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",sc(i,this._get("tables")))}findTableById(i){return yI(this.tables,"id",i)}findTableByUid(i){return yI(this.tables,"uid",i)}};return c([d()],e.prototype,"tables",null),e=c([R("esri.support.TablesMixin")],e),e};let ho=class extends nge(rge(Vl.EventedMixin(Oe))){constructor(e){super(e),this.allLayers=new yl({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new mq,this.allTables=Xme(this),this.basemap=null,this.editableLayers=new yl({getCollections:()=>[this.allLayers],itemFilterFunction:jfe}),this.ground=new wE,this._basemapCache=Yme()}destroy(){Jme(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=ci(this.basemap),ci(this.ground),this._set("ground",null)}castBasemap(e){return Zme(e,this._basemapCache)}castGround(e){return Kme(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};c([d({readOnly:!0,dependsOn:[]})],ho.prototype,"allLayers",void 0),c([d({type:mq,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],ho.prototype,"focusAreas",void 0),c([d({readOnly:!0})],ho.prototype,"allTables",void 0),c([d({type:S0,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],ho.prototype,"basemap",void 0),c([It("basemap")],ho.prototype,"castBasemap",null),c([d({readOnly:!0})],ho.prototype,"editableLayers",void 0),c([d({type:wE,nonNullable:!0})],ho.prototype,"ground",void 0),c([It("ground")],ho.prototype,"castGround",null),c([d()],ho.prototype,"undoRedo",void 0),ho=c([R("esri.Map")],ho);const Nq=ho;let T0=class extends _e{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(_e.ofType(this.itemType.Type))(e):new _e(e)}};function bI(t,e){return{type:t,cast:KW,set(i){const r=sc(i,this._get(e),t);r.owner=this,this._set(e,r)}}}c([d()],T0.prototype,"owner",null),T0=c([R("esri.core.support.OwningCollection")],T0);var bv;const _E=hr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Fq=_E.jsonValues.slice();Zie(Fq,"orthometric");const M0=hr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Is=bv=class extends X{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return _E.write(t,e,i)}readHeightModel(t,e,i){return _E.read(t)||(i?.messages&&i.messages.push(oge(t,{context:i})),null)}readHeightUnit(t,e,i){return M0.read(t)||(i?.messages&&i.messages.push(sz(t,{context:i})),null)}readHeightUnitService(t,e,i){return SD(t)||M0.read(t)||(i?.messages&&i.messages.push(sz(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new bv({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=cG(e);return new bv({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new bv;return e.read(t,{origin:"web-scene"}),e}};function sz(t,e){return new to("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function oge(t,e){return new to("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}c([d({type:_E.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Fq,default:"ellipsoidal",write:{isRequired:!0}}}}})],Is.prototype,"heightModel",void 0),c([me("web-scene","heightModel")],Is.prototype,"writeHeightModel",null),c([de(["web-scene","service"],"heightModel")],Is.prototype,"readHeightModel",null),c([d({type:M0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:M0.jsonValues,write:{writer:M0.write,isRequired:!0}}}}})],Is.prototype,"heightUnit",void 0),c([de("web-scene","heightUnit")],Is.prototype,"readHeightUnit",null),c([de("service","heightUnit")],Is.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Is.prototype,"vertCRS",void 0),c([de("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Is.prototype,"readVertCRS",null),Is=bv=c([R("esri.geometry.HeightModelInfo")],Is);let xE=class extends T0{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(he.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};xE=c([R("esri.support.AnalysesCollection")],xE);let c2;async function age(){return c2==null&&(c2=le(()=>import("./WhereClauseCache-F0OxMFBX.js"),__vite__mapDeps([27,28,1,2])).then(t=>new t.WhereClauseCache(500,500))),c2}async function jq(t,e){const i=await age(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function $x(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function vI(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function lge(t,e){return e.length===0?null:`${t} IN (${uge(e)})`}function uge(t){return t.map(e=>typeof e=="string"?cge(e):e).join(",")}function cge(t){return`'${t.replaceAll("'","''")}'`}function hge(t){return typeof t=="number"}function u8e(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function c8e(t){return typeof t=="boolean"}function n1(t){return typeof t=="string"||t instanceof String}function dge(t){return t==null||n1(t)}function h8e(t){return Array.isArray(t)}function zq(t){return t?.declaredClass==="esri.Graphic"}function d8e(t){return t instanceof Date}const pge="HH:mm",fge="HH:mm:ss",mge="HH:mm:ss.SSS",gge=[mge,fge,pge,"TT"],yge="yyyy-MM-dd";function nz(t){if(!t||!n1(t))return null;const e=ke.fromFormat(t,yge);return e.isValid?e:null}function oz(t){return t&&n1(t)?Cre(gge,e=>{const i=ke.fromFormat(t,e);return i.isValid?i:null})??null:null}function az(t){if(!t||!n1(t))return null;const e=ke.fromISO(t);return e.isValid?e:null}var SE;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(SE||(SE={}));const Vq=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function bge(t){return t!=null&&Vq.has(t.type)}function Uq(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Hq(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Bq(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const vge=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);YP(Vq,vge);function p8e(t,e){const i=t?.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=bge(t);return Uq(t)||Bq(t)||Hq(t)?{...wge(t,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function wge(t,e,i){return Uq(t)?{min:nz(i)?.toMillis(),max:nz(e)?.toMillis(),rawMin:i,rawMax:e}:Bq(t)?{min:oz(i)?.toMillis(),max:oz(e)?.toMillis(),rawMin:i,rawMax:e}:Hq(t)?{min:az(i)?.toMillis(),max:az(e)?.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function _ge(t){if(!t)return;const e=t.match(xge);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const xge=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Sge(t){return t.match(Ege)?.[1]?.replace(/\\'/g,"'")??null}const Ege=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let h2;function nf(){return h2||(h2=(async()=>{const[t,e,i]=await Promise.all([le(()=>import("./arcadeUtils-DfjwDH6e.js"),__vite__mapDeps([185,186,187,188,167,37,189,25,20,21,26,28,190,1,2])),le(()=>import("./batchExec-B0lpp5mU.js"),__vite__mapDeps([191,5,1,2])),le(()=>import("./aiServices-Bv5-9-Av.js").then(r=>r.ag),__vite__mapDeps([187,188,167,37,189]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),h2}const Cge=/^([0-9_])/,Tge=/[^a-z0-9_\u0080-\uffff]+/gi;function Mge(t){return t==null?null:t.trim().replaceAll(Tge,"_").replace(Cge,"F$1")||null}const kge=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Rge=["field","normalizationField"];function lz(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(uz(kge,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)uz(Rge,r,e)}}function uz(t,e,i){if(t)for(const r of t){const s=BC(r,e),n=s&&typeof s!="function"&&i.get(s);n&&Bi(r,n.name,e)}}function Gq(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),r=e.get(t.endField);t.startField=i?.name??null,t.endField=r?.name??null}else{const i=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=r?.name??null}}const d2=new Set;function xT(t,e){return t&&e?(d2.clear(),of(d2,t,e),Array.from(d2).sort()):[]}function of(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)Bs(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function Bs(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function f8e(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function m8e(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=xT(t,e);return r.length/t.fields.length>=i?["*"]:r}async function ws(t,e,i){if(!i)return;let r;const s=_ge(i);if(s)r=[s];else{const{arcadeUtils:n}=await nf();r=n.extractFieldNames(i,e?.fields?.map(o=>o.name))}for(const n of r)Bs(t,e,n)}async function lL(t,e,i){if(i&&i!=="1=1"){const r=await jq(i,e);if(!r.isStandardized)throw new W("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});of(t,e,r.fieldNames)}}function Ige({displayField:t,fields:e}){return t||(e?.length?p2(e,"name-or-title")||p2(e,"unique-identifier")||p2(e,"type-or-category")||$ge(e):null)}function $ge(t){for(const e of t){if(!e?.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function p2(t,e){for(const i of t)if(i?.valueType&&i.valueType===e)return i.name;return null}async function g8e(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function Age(t,e,i){i.onStatisticExpression?ws(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function y8e(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(Wq(t,e,s)),i.fields&&r.push(...i.fields.map(async n=>Age(t,e.fieldsIndex,n))),await Promise.all(r)}async function b8e(t,e){const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const s=[r.latestObservations.renderer?.collectRequiredFields(t,i),r.previousObservations.renderer?.collectRequiredFields(t,i),r.trackLines.renderer?.collectRequiredFields(t,i)];r.popupTemplate&&s.push(Wq(t,e,r.popupTemplate));for(const n of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(n)for(const o of n)s.push(Jq(t,i,o));await Promise.all(s)}async function Wq(t,e,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(n=>ws(t,e.fieldsIndex,n.expression)));const s=i?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(ws(t,e.fieldsIndex,n.expressionInfo.expression));await Promise.all(r)}async function v8e(t,e,i){e&&(e.timeInfo&&i?.timeExtent&&of(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&of(t,e.fieldsIndex,[e.floorInfo.floorField]),i?.where!=null&&await lL(t,e.fieldsIndex,i.where))}async function w8e(t,e,i){e&&i&&await Promise.all(i.map(r=>Oge(t,e,r)))}async function Oge(t,e,i){e&&i&&(i.valueExpression?await ws(t,e.fieldsIndex,i.valueExpression):i.field&&Bs(t,e.fieldsIndex,i.field))}function _8e(t){return t?xT(t.fieldsIndex,qq(t)):[]}function Pge(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?xT(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function x8e(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(s=>lL(t,r,s.where)))}const Dge=new Set(["oid","global-id","guid"]),Lge=new Set(["oid","global-id"]),Nge=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Fge(t){const e=new Set;Yq(t).forEach(r=>e.add(r)),Pge(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function qq(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=e;return[i,r,s,n].filter(Boolean)}function Yq(t){return qq(t).map(e=>e.toLowerCase())}function jge(t,e){return t.editable&&!Dge.has(t.type)&&!Yq(e).includes(t.name?.toLowerCase()??"")}function zge(t,e){const i=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&i===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&i===e.globalIdField.toLowerCase()||Fge(e).includes(i)||Lge.has(t.type)||Nge.some(r=>r.test(i)))}async function S8e(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i?.length&&await Promise.all(i.map(s=>Jq(t,r,s)))}async function Jq(t,e,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await ws(t,e,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{Bs(t,e,o.slice(1,-1))})}await lL(t,e,s)}function Vge(t){const e=t.defaultValue;return e!==void 0&&Xq(t,e)?e:t.nullable?null:void 0}function E8e(t){const e=typeof t=="string"?{type:t}:t;return eY(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Zq(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Uge(t){return t===null||Zq(t)}function Hge(t){return t===null||Number.isInteger(t)}function Bge(){return!0}function Xq(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?Hge:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?Uge:Zq;break;case"string":case"esriFieldTypeString":i=t.nullable?dge:n1;break;default:i=Bge}return arguments.length===1?i:i(e)}const Gge=["integer","small-integer","big-integer","long"],Wge=["single","double"],qge=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Yge=["esriFieldTypeSingle","esriFieldTypeDouble"],Kq=new Set([...Gge,...qge]),Jge=new Set([...Wge,...Yge]),Zge=YP(Kq,Jge);function Xge(t){return t!=null&&Kq.has(t.type)}function Qq(t){return t!=null&&Zge.has(t.type)}function eY(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function Kge(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function C8e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function T8e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Qge(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function cz(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function hz(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function M8e(t,e){return eye(t,e)===null}var EE,CE;function k8e(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function eye(t,e){return t==null||t.nullable&&e===null?null:Xq(t,e)?Qq(t)&&!tye(t.type,Number(e))?EE.OUT_OF_RANGE:null:CE.INVALID_TYPE}function tye(t,e){const i=typeof t=="string"?tY(t):t;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=s:e>=r&&e<=s}function tY(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return iye;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return rye;case"esriFieldTypeBigInteger":case"big-integer":return sye;case"esriFieldTypeSingle":case"single":return nye;case"esriFieldTypeDouble":case"double":return oye}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(EE||(EE={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(CE||(CE={}));const iye={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},rye={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},sye={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},nye={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},oye={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function R8e(t,e,i){switch(t){case SE.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case SE.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case CE.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case EE.OUT_OF_RANGE:{const{min:r,max:s}=tY(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${s}`}}}function aye(t,e){return!lye(t,e,null)}function lye(t,e,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function uye(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function uL(t){const e=t?.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let Ax=class extends X{constructor(e){super(e),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Ax.prototype,"type",void 0),Ax=c([R("esri.popup.content.Content")],Ax);const oc=Ax,s_=new Xe({asc:"ascending",desc:"descending"});let vv=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.field=null,this.order="ascending"}};c([d({type:String,json:{write:!0}})],vv.prototype,"field",void 0),c([d({type:s_.apiValues,json:{type:s_.jsonValues,read:s_.read,write:s_.write}})],vv.prototype,"order",void 0),vv=c([R("esri.popup.support.AttachmentsOrderByInfo")],vv);const cye=vv;let Ic=class extends Fe.ClonableMixin(oc){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};c([d({type:String,json:{write:!0}})],Ic.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],Ic.prototype,"displayType",void 0),c([d({type:[cye],json:{write:!0}})],Ic.prototype,"orderByFields",void 0),c([d({type:String,json:{write:!0}})],Ic.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ic.prototype,"type",void 0),Ic=c([R("esri.popup.content.AttachmentsContent")],Ic);const Ey=Ic;var wI;let $d=wI=class extends oc{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new wI({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?B(this.outFields):null})}};c([d()],$d.prototype,"creator",void 0),c([d()],$d.prototype,"destroyer",void 0),c([d()],$d.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],$d.prototype,"type",void 0),$d=wI=c([R("esri.popup.content.CustomContent")],$d);const hye=$d;var _I;let nm=_I=class extends X{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new _I({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],nm.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],nm.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],nm.prototype,"returnType",void 0),nm=_I=c([R("esri.popup.ElementExpressionInfo")],nm);const dye=nm;var xI;let wv=xI=class extends oc{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new xI({expressionInfo:this.expressionInfo?.clone()})}};c([d({type:dye,json:{write:!0}})],wv.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],wv.prototype,"type",void 0),wv=xI=c([R("esri.popup.content.ExpressionContent")],wv);const ST=wv;let om=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([Re(qce)],om.prototype,"dateFormat",void 0),c([d({type:Boolean,json:{write:!0}})],om.prototype,"digitSeparator",void 0),c([d({type:ht,json:{write:!0}})],om.prototype,"places",void 0),om=c([R("esri.popup.support.FieldInfoFormat")],om);const Ox=om;var SI;let Qo=SI=class extends X{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new SI({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Qo.prototype,"fieldName",void 0),c([d({type:Ox,json:{write:!0}})],Qo.prototype,"format",void 0),c([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Qo.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],Qo.prototype,"label",void 0),c([Re(new Xe({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Qo.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Qo.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],Qo.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],Qo.prototype,"visible",void 0),Qo=SI=c([R("esri.popup.FieldInfo")],Qo);const cL=Qo;var EI;let hu=EI=class extends oc{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new EI(B({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],hu.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],hu.prototype,"description",void 0),c([d({type:[cL]})],hu.prototype,"fieldInfos",void 0),c([me("fieldInfos")],hu.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],hu.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],hu.prototype,"type",void 0),hu=EI=c([R("esri.popup.content.FieldsContent")],hu);const Cy=hu;let Ad=class extends X{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],Ad.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],Ad.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],Ad.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ad.prototype,"type",void 0),Ad=c([R("esri.popup.content.mixins.MediaInfo")],Ad);const hL=Ad;var CI;let Od=CI=class extends Oe{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new CI({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],Od.prototype,"color",void 0),c([d()],Od.prototype,"fieldName",void 0),c([d()],Od.prototype,"tooltip",void 0),c([d()],Od.prototype,"value",void 0),Od=CI=c([R("esri.popup.content.support.ChartMediaInfoValueSeries")],Od);const pye=Od;var TI;let $c=TI=class extends X{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new TI({colors:B(this.colors),fields:B(this.fields),normalizeField:this.normalizeField,series:B(this.series),tooltipField:this.tooltipField})}};c([d({type:[He],json:{type:[[ht]],write:!0}})],$c.prototype,"colors",void 0),c([d({type:[String],json:{write:{isRequired:!0}}})],$c.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],$c.prototype,"normalizeField",void 0),c([d({type:[pye],json:{read:!1}})],$c.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],$c.prototype,"tooltipField",void 0),$c=TI=c([R("esri.popup.content.support.ChartMediaInfoValue")],$c);const fye=$c;let _v=class extends hL{constructor(e){super(e),this.type=null,this.value=void 0}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_v.prototype,"type",void 0),c([d({type:fye,json:{write:{isRequired:!0}}})],_v.prototype,"value",void 0),_v=c([R("esri.popup.content.mixins.ChartMediaInfo")],_v);const ET=_v,CT=hr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var MI;let Px=MI=class extends ET{constructor(t){super(t),this.type="bar-chart"}clone(){return new MI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:CT.write,isRequired:!0}}})],Px.prototype,"type",void 0),Px=MI=c([R("esri.popup.content.BarChartMediaInfo")],Px);const iY=Px;var kI;let Dx=kI=class extends ET{constructor(t){super(t),this.type="column-chart"}clone(){return new kI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:CT.write,isRequired:!0}}})],Dx.prototype,"type",void 0),Dx=kI=c([R("esri.popup.content.ColumnChartMediaInfo")],Dx);const rY=Dx;var RI;let xv=RI=class extends X{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new RI({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],xv.prototype,"linkURL",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],xv.prototype,"sourceURL",void 0),xv=RI=c([R("esri.popup.content.support.ImageMediaInfoValue")],xv);const mye=xv;var II;let am=II=class extends hL{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new II({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};c([d({type:Number,json:{write:!0}})],am.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],am.prototype,"type",void 0),c([d({type:mye,json:{write:{isRequired:!0}}})],am.prototype,"value",void 0),am=II=c([R("esri.popup.content.ImageMediaInfo")],am);const sY=am;var $I;let Lx=$I=class extends ET{constructor(t){super(t),this.type="line-chart"}clone(){return new $I({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:CT.write,isRequired:!0}}})],Lx.prototype,"type",void 0),Lx=$I=c([R("esri.popup.content.LineChartMediaInfo")],Lx);const nY=Lx;var AI;let Nx=AI=class extends ET{constructor(t){super(t),this.type="pie-chart"}clone(){return new AI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:CT.write,isRequired:!0}}})],Nx.prototype,"type",void 0),Nx=AI=c([R("esri.popup.content.PieChartMediaInfo")],Nx);const oY=Nx,OI={base:hL,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":iY,"column-chart":rY,"line-chart":nY,"pie-chart":oY,image:sY}};var PI;let ea=PI=class extends oc{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?sY.fromJSON(e):e.type==="barchart"?iY.fromJSON(e):e.type==="columnchart"?rY.fromJSON(e):e.type==="linechart"?nY.fromJSON(e):e.type==="piechart"?oY.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new PI(B({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],ea.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],ea.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],ea.prototype,"description",void 0),c([d({types:[OI]})],ea.prototype,"mediaInfos",void 0),c([de("mediaInfos")],ea.prototype,"readMediaInfos",null),c([me("mediaInfos")],ea.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],ea.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ea.prototype,"type",void 0),ea=PI=c([R("esri.popup.content.MediaContent")],ea);const ww=ea;var DI;let Sv=DI=class extends X{constructor(t){super(t),this.field=null,this.order=null}clone(){return new DI({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],Sv.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Sv.prototype,"order",void 0),Sv=DI=c([R("esri.popup.support.RelatedRecordsInfoFieldOrder")],Sv);const dL=Sv;let Ha=class extends Fe.ClonableMixin(oc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],Ha.prototype,"description",void 0),c([d({type:Number,json:{type:ht,write:!0}})],Ha.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:{isRequired:!0}}})],Ha.prototype,"displayType",void 0),c([d({type:[dL],json:{write:!0}})],Ha.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:ht,write:{isRequired:!0}}})],Ha.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],Ha.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ha.prototype,"type",void 0),Ha=c([R("esri.popup.content.RelationshipContent")],Ha);const _w=Ha;var LI;let Ev=LI=class extends oc{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new LI({text:this.text})}};c([d({type:String,json:{write:!0}})],Ev.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ev.prototype,"type",void 0),Ev=LI=c([R("esri.popup.content.TextContent")],Ev);const xw=Ev;let du=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};c([d({type:String,json:{write:!0}})],du.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],du.prototype,"description",void 0),c([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],du.prototype,"type",void 0),c([d({type:Number,json:{type:ht,write:!0}})],du.prototype,"associatedNetworkSourceId",void 0),c([d({type:Number,json:{type:ht,write:!0}})],du.prototype,"associatedAssetGroup",void 0),c([d({type:Number,json:{type:ht,write:!0}})],du.prototype,"associatedAssetType",void 0),du=c([R("esri.popup.support.UtilityNetworkAssociationType")],du);const aY=du;let Ac=class extends Fe.ClonableMixin(oc){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};c([d({type:String,json:{write:!0}})],Ac.prototype,"description",void 0),c([d({type:Number,json:{type:ht,write:!0}})],Ac.prototype,"displayCount",void 0),c([d({type:String,json:{write:!0}})],Ac.prototype,"title",void 0),c([d({type:[aY],json:{write:!0}})],Ac.prototype,"associationTypes",void 0),c([Re({utilityNetworkAssociations:"utility-network-associations"})],Ac.prototype,"type",void 0),Ac=c([R("esri.popup.content.UtilityNetworkAssociationsContent")],Ac);const pL=Ac,gye={base:null,key:"type",typeMap:{attachment:Ey,media:ww,text:xw,expression:ST,field:Cy,relationship:_w,utilityNetworkAssociations:pL}},yye={base:null,key:"type",typeMap:{attachment:Ey,media:ww,text:xw,expression:ST,field:Cy,relationship:_w}};var NI;let Pd=NI=class extends X{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new NI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Pd.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Pd.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Pd.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],Pd.prototype,"returnType",void 0),Pd=NI=c([R("esri.popup.ExpressionInfo")],Pd);const bye=Pd;var FI;let Cv=FI=class extends X{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new FI({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Cv.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Cv.prototype,"showNoDataRecords",void 0),Cv=FI=c([R("esri.popup.LayerOptions")],Cv);const vye=Cv;var jI;let Tv=jI=class extends X{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new jI({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?B(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Tv.prototype,"showRelatedRecords",void 0),c([d({type:[dL],json:{write:!0}})],Tv.prototype,"orderByFields",void 0),Tv=jI=c([R("esri.popup.RelatedRecordsInfo")],Tv);const dz=Tv;var zI;let po=zI=class extends tb.IdentifiableMixin(Oe){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new zI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],po.prototype,"active",void 0),c([d()],po.prototype,"className",void 0),c([d()],po.prototype,"disabled",void 0),c([d()],po.prototype,"icon",void 0),c([d()],po.prototype,"id",void 0),c([d()],po.prototype,"indicator",void 0),c([d()],po.prototype,"title",void 0),c([d()],po.prototype,"type",void 0),c([d()],po.prototype,"visible",void 0),po=zI=c([R("esri.support.actions.ActionBase")],po);const fL=po;var VI;let Fx=VI=class extends fL{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new VI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],Fx.prototype,"image",void 0),Fx=VI=c([R("esri.support.actions.ActionButton")],Fx);const wye=Fx;var UI;let Mv=UI=class extends fL{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new UI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],Mv.prototype,"image",void 0),c([d()],Mv.prototype,"value",void 0),Mv=UI=c([R("esri.support.actions.ActionToggle")],Mv);const _ye=Mv,Lb="relationships/",pz="expression/",xye=_e.ofType({key:"type",defaultKeyValue:"button",base:fL,typeMap:{button:wye,toggle:_ye}}),Sye={base:oc,key:"type",typeMap:{media:ww,custom:hye,text:xw,attachments:Ey,fields:Cy,expression:ST,relationship:_w,utilityNetworkAssociations:pL}},lY=new Set(["attachments","fields","media","text","expression","relationship"]),Eye=new Set([...lY,"utility-network-associations"]);let or=class extends Fe.ClonableMixin(X){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ol(Sye,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||zl(e)?e:(he.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeWebMapContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeFieldInfos(e,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(e){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>u.fieldInfos?.length);i.fieldInfos=e.filter(Boolean).map(u=>{const h=u.toJSON(s);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,s){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),of(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>r?.origin==="web-scene"?lY.has(s.type):Eye.has(s.type)).map(s=>s?.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=B(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(s=>{const n=i.fieldInfos.find(o=>o.fieldName?.toLowerCase()===s.fieldName?.toLowerCase());n?n.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const r=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=B(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),ww.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),xw.fromJSON(n)):n.type==="attachments"?Ey.fromJSON(n):n.type==="fields"?Cy.fromJSON(n):n.type==="expression"?ST.fromJSON(n):n.type==="relationship"?_w.fromJSON(n):n.type==="utilityNetworkAssociations"?pL.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!i?.startsWith(Lb))return null;const s=i.replace(Lb,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?_w.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:s}=e;return{field:`${Lb}${i}/${s}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new xw({text:e})):n.push(new Cy),Array.isArray(i)&&i.length&&n.push(ww.fromJSON({mediaInfos:i})),r&&n.push(Ey.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&a?.length&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&n.push(u)}),n.length?n:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:s}=e,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:h}=n,p=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(h),...o??[]];return a&&p.push(a),l&&p.push(l),p}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(s=>ws(e,i,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(Lb)||i.startsWith(pz))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return uL(e).filter(i=>!(i.indexOf(Lb)===0||i.indexOf(pz)===0))}};c([d({type:xye})],or.prototype,"actions",void 0),c([d()],or.prototype,"content",void 0),c([It("content")],or.prototype,"castContent",null),c([de("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],or.prototype,"readContent",null),c([me("web-scene","content",{popupElements:{type:_e.ofType(yye)},showAttachments:{type:Boolean},mediaInfos:{type:_e.ofType(OI)},description:{type:String},relatedRecordsInfo:{type:dz}})],or.prototype,"writeWebSceneContent",null),c([me("content",{popupElements:{type:_e.ofType(gye)},showAttachments:{type:Boolean},mediaInfos:{type:_e.ofType(OI)},description:{type:String},relatedRecordsInfo:{type:dz}})],or.prototype,"writeWebMapContent",null),c([d({type:[bye],json:{write:!0}})],or.prototype,"expressionInfos",void 0),c([d({type:[cL]})],or.prototype,"fieldInfos",void 0),c([me("fieldInfos")],or.prototype,"writeFieldInfos",null),c([d({type:vye})],or.prototype,"layerOptions",void 0),c([me("layerOptions")],or.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],or.prototype,"lastEditInfoEnabled",void 0),c([d()],or.prototype,"outFields",void 0),c([d()],or.prototype,"overwriteActions",void 0),c([d()],or.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],or.prototype,"title",void 0),c([me("title")],or.prototype,"writeTitle",null),or=c([R("esri.PopupTemplate")],or);const ib=or;function z8e(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function Cye(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const i=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(i)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const fz=new Xe({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Tye=0,Ui=class extends X{constructor(e){super(e),this.id="sym"+Tye++,this.type=null,this.color=new He([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:fz.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:fz.write,isRequired:!0}}})],Ui.prototype,"type",void 0),c([d({type:He,json:{write:{allowNull:!0}}})],Ui.prototype,"color",void 0),c([de("color")],Ui.prototype,"readColor",null),Ui=c([R("esri.symbols.Symbol")],Ui);var HI;let hs=HI=class extends Ui{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const n=s.valueExpressionInfo;return n?ws(t,e,n.expression):null});await Promise.all(r)}}}clone(){return new HI({data:B(this.data)})}hash(){return l8(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],hs.prototype,"color",void 0),c([d({json:{write:!0}})],hs.prototype,"data",void 0),c([de("data",["symbol"])],hs.prototype,"readData",null),c([me("data",{})],hs.prototype,"writeData",null),c([Re({CIMSymbolReference:"cim"},{readOnly:!0})],hs.prototype,"type",void 0),hs=HI=c([R("esri.symbols.CIMSymbol")],hs);let zs=class extends X{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],zs.prototype,"enabled",void 0),c([me("enabled")],zs.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],zs.prototype,"type",void 0),zs=c([R("esri.symbols.Symbol3DLayer")],zs);function Mye(t,e){const i=e.transparency!=null?vw(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new He([r[0]||0,r[1]||0,r[2]||0,i]):null}function kye(t,e){e.color=t.toJSON().slice(0,3);const i=yT(t.a);i!==0&&(e.transparency=i)}function Zh(t){return{type:He,nonNullable:t?.nonNullable,json:{type:[ht],default:null,read:{source:["color","transparency"],reader:Mye},write:{target:{color:{type:[ht],isRequired:t?.colorRequiredOnWrite},transparency:{type:ht}},writer:kye}}}}const Fl={type:Number,cast:xt,json:{write:!0}};var TE;function H8e(t){return t==="emissive"?TE.Emissive:TE.Color}(function(t){t[t.Emissive=0]="Emissive",t[t.Color=1]="Color"})(TE||(TE={}));let Dd=class extends X{constructor(e){super(e),this.color=new He([0,0,0,1]),this.extensionLength=0,this.size=Po(1)}clone(){}cloneProperties(){return{color:B(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Dd.prototype,"type",void 0),c([d(Zh({colorRequiredOnWrite:!0}))],Dd.prototype,"color",void 0),c([d({...Fl,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Dd.prototype,"extensionLength",void 0),c([d(Fl)],Dd.prototype,"size",void 0),Dd=c([R("esri.symbols.edges.Edges3D")],Dd);const mL=Dd;var BI;let jx=BI=class extends mL{constructor(t){super(t),this.type="sketch"}clone(){return new BI(this.cloneProperties())}};c([Re({sketch:"sketch"},{readOnly:!0})],jx.prototype,"type",void 0),jx=BI=c([R("esri.symbols.edges.SketchEdges3D")],jx);const Rye=jx;var GI;let zx=GI=class extends mL{constructor(t){super(t),this.type="solid"}clone(){return new GI(this.cloneProperties())}};c([Re({solid:"solid"},{readOnly:!0})],zx.prototype,"type",void 0),zx=GI=c([R("esri.symbols.edges.SolidEdges3D")],zx);const uY=zx,cY={types:{key:"type",base:mL,typeMap:{solid:uY,sketch:Rye}},json:{write:!0}};var WI;let rg=WI=class extends X{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new WI(t)}};c([d({json:{write:!1}})],rg.prototype,"strength",void 0),c([d({json:{write:!1}})],rg.prototype,"source",void 0),rg=WI=c([R("esri.symbols.support.Symbol3DEmissive")],rg);var qI;let Zn=qI=class extends X{constructor(t){super(t),this.color=null,this.emissive=new rg({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new qI(t)}};c([d(Zh())],Zn.prototype,"color",void 0),c([d({type:rg,json:{write:!1}})],Zn.prototype,"emissive",void 0),Zn=qI=c([R("esri.symbols.support.Symbol3DMaterial")],Zn);var YI,zg;let Iu=(zg=class extends zs{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new YI({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},YI=zg,zg);c([Re({Extrude:"extrude"},{readOnly:!0})],Iu.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Iu.prototype,"size",void 0),c([d({type:Zn,json:{write:!0}})],Iu.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Iu.prototype,"castShadows",void 0),c([d(cY)],Iu.prototype,"edges",void 0),Iu=YI=c([R("esri.symbols.ExtrudeSymbol3DLayer")],Iu);let k0=class extends X{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],k0.prototype,"type",void 0),k0=c([R("esri.symbols.patterns.LinePattern3D")],k0);const Iye=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var JI;const $ye=hr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let wp=JI=class extends k0{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new JI(t)}};c([d({type:["style"],json:{write:{isRequired:!0}}})],wp.prototype,"type",void 0),c([Re($ye),d({type:Iye,json:{write:{isRequired:!0}}})],wp.prototype,"style",void 0),wp=JI=c([R("esri.symbols.patterns.LineStylePattern3D")],wp);let R0=class extends X{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],R0.prototype,"type",void 0),R0=c([R("esri.symbols.patterns.Pattern3D")],R0);const Aye=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var ZI;let sg=ZI=class extends R0{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new ZI({style:this.style})}};c([d({type:["style"],json:{write:{isRequired:!0}}})],sg.prototype,"type",void 0),c([d({type:Aye,json:{read:!0,write:{isRequired:!0}}})],sg.prototype,"style",void 0),sg=ZI=c([R("esri.symbols.patterns.StylePattern3D")],sg);const Oye={types:{key:"type",base:R0,typeMap:{style:sg}},json:{write:!0}},hY={types:{key:"type",base:k0,typeMap:{style:wp}},json:{write:!0}},I0=new He("white"),Pye=new He([255,255,255,0]);function Dye(t){return t.r===0&&t.g===0&&t.b===0}var XI;let $0=XI=class extends Zn{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new XI(t)}};c([Re({multiply:"multiply",replace:"replace",tint:"tint"})],$0.prototype,"colorMixMode",void 0),$0=XI=c([R("esri.symbols.support.Symbol3DFillMaterial")],$0);function Lye(t,e=!1){return t<=t8?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function q8e(t){return(Qie(t)?t.byteLength/8:t.length)<=t8?Array.from(t):new Float64Array(t)}function Y8e(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function o1(t=zye){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function gL(t,e,i,r,s,n,o=o1()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function J8e(t,e=o1()){return Nye(t,0,t.length/3,e)}function Nye(t,e,i,r=o1()){return dY(r,KI),Fye(r,t,e,i),r}function Z8e(t,e=Lye(24)){const[i,r,s,n,o,a]=t;return e[0]=i,e[1]=r,e[2]=s,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=s,e[9]=i,e[10]=o,e[11]=a,e[12]=n,e[13]=r,e[14]=s,e[15]=n,e[16]=r,e[17]=a,e[18]=n,e[19]=o,e[20]=s,e[21]=n,e[22]=o,e[23]=a,e}function X8e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new it(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function K8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Q8e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function e9e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function Fye(t,e,i=0,r=e.length/3){let s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5];for(let h=0;h<r;h++)s=Math.min(s,e[i+3*h]),n=Math.min(n,e[i+3*h+1]),o=Math.min(o,e[i+3*h+2]),a=Math.max(a,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),u=Math.max(u,e[i+3*h+2]);t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function t9e(t,e,i){const r=e.length;let s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5];if(i)for(let h=0;h<r;h++){const p=e[h];s=Math.min(s,p[0]),n=Math.min(n,p[1]),o=Math.min(o,p[2]),a=Math.max(a,p[0]),l=Math.max(l,p[1]),u=Math.max(u,p[2])}else for(let h=0;h<r;h++){const p=e[h];s=Math.min(s,p[0]),n=Math.min(n,p[1]),a=Math.max(a,p[0]),l=Math.max(l,p[1])}t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function i9e(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function a1(t){return t[0]>=t[3]?0:t[3]-t[0]}function l1(t){return t[1]>=t[4]?0:t[4]-t[1]}function u1(t){return t[2]>=t[5]?0:t[5]-t[2]}function r9e(t){const e=a1(t),i=u1(t),r=l1(t);return Math.sqrt(e*e+i*i+r*r)}function s9e(t,e=[0,0,0]){return e[0]=t[0]+a1(t)/2,e[1]=t[1]+l1(t)/2,e[2]=t[2]+u1(t)/2,e}function n9e(t,e=[0,0,0]){return e[0]=a1(t),e[1]=l1(t),e[2]=u1(t),e}function o9e(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function jye(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function a9e(t,e){return e==null||jye(t,e)}function l9e(t,e,i,r,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+r,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+r,s}function u9e(t,e,i=t){const r=t[0]+a1(t)/2,s=t[1]+l1(t)/2,n=t[2]+u1(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=s+(t[1]-s)*e,i[2]=n+(t[2]-n)*e,i[3]=r+(t[3]-r)*e,i[4]=s+(t[4]-s)*e,i[5]=n+(t[5]-n)*e,i}function c9e(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function h9e(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function d9e(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function dY(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function p9e(t){return t?dY(t,KI):o1(KI)}function f9e(t,e){return e||(e=Vs()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function m9e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function g9e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function mz(t){return t.length===6}function y9e(t){return a1(t)===0&&l1(t)===0&&u1(t)===0}function b9e(t,e,i){if(t==null||e==null)return t===e;if(!mz(t)||!mz(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const KI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],zye=[0,0,0,0,0,0];o1();function v9e(t,{isPrimitive:e,width:i,depth:r,height:s}){const n=e?10:1;if(i==null&&s==null&&r==null)return[n*t[0],n*t[1],n*t[2]];const o=Qy(i,r,s);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const Vye=gL(-.5,-.5,-.5,.5,.5,.5),Uye=gL(-.5,-.5,0,.5,.5,1),Hye=gL(-.5,-.5,0,.5,.5,.5);function w9e(t){switch(t){case"sphere":case"cube":case"diamond":return Vye;case"cylinder":case"cone":case"inverted-cone":return Uye;case"tetrahedron":return Hye;default:return}}const yL=["butt","square","round"],Bye=[...yL,"none"],pY=["miter","bevel","round"];var QI;let Ld=QI=class extends X{constructor(t){super(t),this.color=new He([0,0,0,1]),this.size=Po(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new QI(t)}};c([d(Zh({colorRequiredOnWrite:!0}))],Ld.prototype,"color",void 0),c([d({...Fl,json:{write:{isRequired:!0}}})],Ld.prototype,"size",void 0),c([d(hY)],Ld.prototype,"pattern",void 0),c([d({type:yL,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Ld.prototype,"patternCap",void 0),Ld=QI=c([R("esri.symbols.support.Symbol3DOutline")],Ld);var Vx,Vg;let Os=(Vg=class extends zs{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Vx(e)}static fromSimpleFillSymbol(e){const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new wp({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??I0).clone(),pattern:i};return i&&e.outline?.cap&&(r.patternCap=e.outline.cap),new Vx({material:new $0({color:(e.color??Pye).clone()}),pattern:e.style&&e.style!=="solid"?new sg({style:e.style}):null,outline:r})}},Vx=Vg,Vg);c([Re({Fill:"fill"},{readOnly:!0})],Os.prototype,"type",void 0),c([d({type:$0,json:{write:!0}})],Os.prototype,"material",void 0),c([d(Oye)],Os.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Os.prototype,"castShadows",void 0),c([d({type:Ld,json:{write:!0}})],Os.prototype,"outline",void 0),c([d(cY)],Os.prototype,"edges",void 0),Os=Vx=c([R("esri.symbols.FillSymbol3DLayer")],Os);var e$;const Gye=hr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Nd=e$=class extends X{constructor(t){super(t)}readHref(t,e,i){return t?pf(t,i):e.dataURI}writeHref(t,e,i,r){t&&(nc(t)?e.dataURI=t:(e.href=Zp(t,r),vn(e.href)&&(e.href=Sa(e.href))))}clone(){return new e$({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Nd.prototype,"href",void 0),c([de("href")],Nd.prototype,"readHref",null),c([me("href",{href:{type:String},dataURI:{type:String}})],Nd.prototype,"writeHref",null),c([Re(Gye)],Nd.prototype,"primitive",void 0),Nd=e$=c([R("esri.symbols.support.IconSymbol3DLayerResource")],Nd);const _9e="circle";var t$;let ng=t$=class extends Oe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new t$({x:this.x,y:this.y})}};c([d({type:Number})],ng.prototype,"x",void 0),c([d({type:Number})],ng.prototype,"y",void 0),ng=t$=c([R("esri.symbols.support.Symbol3DAnchorPosition2D")],ng);var i$;let kv=i$=class extends X{constructor(t){super(t),this.color=new He([0,0,0,1]),this.size=Po(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new i$(t)}};c([d(Zh({colorRequiredOnWrite:!0}))],kv.prototype,"color",void 0),c([d({...Fl,json:{write:{isRequired:!0}}})],kv.prototype,"size",void 0),kv=i$=c([R("esri.symbols.support.Symbol3DIconOutline")],kv);var lm,Ug;let Yr=(Ug=class extends zs{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new lm({anchor:this.anchor,anchorPosition:B(this.anchorPosition),enabled:this.enabled,material:B(this.material),outline:B(this.outline),resource:B(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const i=e.color||I0,r=gz(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||I0).clone()}:null;return new lm({size:e.size,angle:e.angle,resource:{primitive:qye(()=>he.getLogger(this.prototype),e.style)},material:{color:i},outline:s,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||Dye(e.color)?I0:e.color,r=gz(e);return new lm({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new lm({resource:{href:k9({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},lm=Ug,Ug);function gz(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=yz(t.xoffset),s=yz(t.yoffset);return(r||s)&&e&&i?{x:-r/e,y:s/i}:null}function yz(t){return isFinite(t)?t:0}c([d({type:Zn,json:{write:!0}})],Yr.prototype,"material",void 0),c([d({type:Nd,json:{write:!0}})],Yr.prototype,"resource",void 0),c([Re({Icon:"icon"},{readOnly:!0})],Yr.prototype,"type",void 0),c([d({...Fl,json:{write:{isRequired:!0}}})],Yr.prototype,"size",void 0),c([Re({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Yr.prototype,"anchor",void 0),c([d({type:ng,json:{type:[Number],read:{reader:t=>new ng({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Yr.prototype,"anchorPosition",void 0),c([d({type:kv,json:{write:!0}})],Yr.prototype,"outline",void 0),c([d({type:Number,json:{write:!0,default:0}})],Yr.prototype,"angle",void 0),Yr=lm=c([R("esri.symbols.IconSymbol3DLayer")],Yr);const Wye={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function qye(t,e){return Wye[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Yye=["begin","end","begin-end"],fY=["arrow","circle","square","diamond","cross","x"];let Vu=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Vu.prototype,"type",void 0),c([d({type:Yye,json:{default:"begin-end",write:!0}})],Vu.prototype,"placement",void 0),c([d({type:fY,json:{default:"arrow",write:!0}})],Vu.prototype,"style",void 0),c([d({type:He,json:{type:[ht],default:null,write:!0}})],Vu.prototype,"color",void 0),Vu=c([R("esri.symbols.LineStyleMarker3D")],Vu);var Ux,Hg;let As=(Hg=class extends zs{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Po(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Ux(e)}static fromSimpleLineSymbol(e){const i={enabled:!0,size:e.width??Po(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new wp({style:e.style}):null,material:new Zn({color:(e.color||I0).clone()}),marker:e.marker?new Vu({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new Ux(i)}},Ux=Hg,Hg);c([d({type:Zn,json:{write:!0}})],As.prototype,"material",void 0),c([Re({Line:"line"},{readOnly:!0})],As.prototype,"type",void 0),c([d({type:pY,json:{write:!0,default:"miter"}})],As.prototype,"join",void 0),c([d({type:yL,json:{write:!0,default:"butt"}})],As.prototype,"cap",void 0),c([d({...Fl,json:{write:{isRequired:!0}}})],As.prototype,"size",void 0),c([d(hY)],As.prototype,"pattern",void 0),c([d({types:{key:"type",base:Vu,typeMap:{style:Vu}},json:{write:!0}})],As.prototype,"marker",void 0),As=Ux=c([R("esri.symbols.LineSymbol3DLayer")],As);var r$;const Jye=hr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Rv=r$=class extends X{clone(){return new r$({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:XC,write:Xp}})],Rv.prototype,"href",void 0),c([Re(Jye)],Rv.prototype,"primitive",void 0),Rv=r$=c([R("esri.symbols.support.ObjectSymbol3DLayerResource")],Rv);const S9e="sphere";var s$;let lp=s$=class extends Oe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new s$({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],lp.prototype,"x",void 0),c([d({type:Number})],lp.prototype,"y",void 0),c([d({type:Number})],lp.prototype,"z",void 0),lp=s$=c([R("esri.symbols.support.Symbol3DAnchorPosition3D")],lp);var n$,Bg;let $r=(Bg=class extends zs{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new n$({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},n$=Bg,Bg);c([d({type:Zn,json:{write:!0}})],$r.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],$r.prototype,"castShadows",void 0),c([d({type:Rv,json:{write:!0}})],$r.prototype,"resource",void 0),c([Re({Object:"object"},{readOnly:!0})],$r.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],$r.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],$r.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],$r.prototype,"depth",void 0),c([Re({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],$r.prototype,"anchor",void 0),c([d({type:lp,json:{type:[Number],read:{reader:t=>new lp({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],$r.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],$r.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],$r.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],$r.prototype,"roll",void 0),c([d({readOnly:!0})],$r.prototype,"isPrimitive",null),$r=n$=c([R("esri.symbols.ObjectSymbol3DLayer")],$r);var o$,Gg;let qr=(Gg=class extends zs{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new o$({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},o$=Gg,Gg);c([d({type:Zn,json:{write:!0}})],qr.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qr.prototype,"castShadows",void 0),c([Re({Path:"path"},{readOnly:!0})],qr.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],qr.prototype,"profile",void 0),c([d({type:pY,json:{write:!0,default:"miter"}})],qr.prototype,"join",void 0),c([d({type:Bye,json:{write:!0,default:"butt"}})],qr.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qr.prototype,"width",void 0),c([de("width",["width","size","height"])],qr.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],qr.prototype,"height",void 0),c([de("height",["height","size","width"])],qr.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],qr.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],qr.prototype,"profileRotation",void 0),qr=o$=c([R("esri.symbols.PathSymbol3DLayer")],qr);const Zye=["none","underline","line-through"],Xye=["normal","italic","oblique"],Kye=["normal","lighter","bold","bolder"],mY={type:Number,cast:t=>{const e=Ns(t);return e===0?1:Ao(e,.1,4)},nonNullable:!0},Qye=["left","right","center"],ebe=["baseline","top","middle","bottom"],gY={type:Qye,nonNullable:!0},yY={type:ebe,nonNullable:!0},E9e=8;var a$;let _o=a$=class extends X{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return xt(t)}clone(){return new a$({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:Zye,json:{default:"none",write:!0}})],_o.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],_o.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],_o.prototype,"size",void 0),c([It("size")],_o.prototype,"castSize",null),c([d({type:Xye,json:{default:"normal",write:!0}})],_o.prototype,"style",void 0),c([d({type:Kye,json:{default:"normal",write:!0}})],_o.prototype,"weight",void 0),_o=a$=c([R("esri.symbols.Font")],_o);var l$;let og=l$=class extends X{constructor(){super(...arguments),this.color=new He([0,0,0,1]),this.size=0}clone(){const t={color:B(this.color),size:this.size};return new l$(t)}};c([d(Zh())],og.prototype,"color",void 0),c([d(Fl)],og.prototype,"size",void 0),og=l$=c([R("esri.symbols.support.Symbol3DHalo")],og);let A0=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.color=null}};c([d(Zh())],A0.prototype,"color",void 0),A0=c([R("esri.symbols.support.Symbol3DTextBackground")],A0);var Hx,Wg;let br=(Wg=class extends zs{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,s){const n={...s,textSymbol3D:!0};i.font=e.write({},n),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Hx({enabled:this.enabled,font:this.font&&B(this.font),halo:this.halo&&B(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:B(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Hx({font:e.font!=null?e.font.clone():new _o,halo:tbe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Zn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new A0({color:e.backgroundColor.clone()}):null})}},Hx=Wg,Wg);function tbe(t,e){return t&&e!=null&&e>0?new og({color:B(t),size:e}):null}c([d({type:_o,json:{write:!0}})],br.prototype,"font",null),c([me("font")],br.prototype,"writeFont",null),c([d({type:og,json:{write:!0}})],br.prototype,"halo",void 0),c([d({...gY,json:{default:"center",write:!0}})],br.prototype,"horizontalAlignment",void 0),c([d({...mY,json:{default:1,write:!0}})],br.prototype,"lineHeight",void 0),c([d({type:Zn,json:{write:!0}})],br.prototype,"material",void 0),c([d({type:A0,json:{write:!0}})],br.prototype,"background",void 0),c([d(Fl)],br.prototype,"size",null),c([d({type:String,json:{write:!0}})],br.prototype,"text",void 0),c([Re({Text:"text"},{readOnly:!0})],br.prototype,"type",void 0),c([d({...yY,json:{default:"baseline",write:!0}})],br.prototype,"verticalAlignment",void 0),br=Hx=c([R("esri.symbols.TextSymbol3DLayer")],br);var u$,qg;let $u=(qg=class extends zs{constructor(e){super(e),this.color=c$.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new u$({color:B(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},u$=qg,qg);c([d({type:He,nonNullable:!0,json:{type:[ht],write:(t,e,i)=>e[i]=t.toArray(He.AlphaMode.UNLESS_OPAQUE),default:()=>c$.clone(),defaultEquals:t=>t.toCss(!0)===c$.toCss(!0)}})],$u.prototype,"color",void 0),c([Re({Water:"water"},{readOnly:!0})],$u.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],$u.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],$u.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],$u.prototype,"waveStrength",void 0),$u=u$=c([R("esri.symbols.WaterSymbol3DLayer")],$u);const c$=new He([0,119,190]);var h$;let Uu=h$=class extends Oe{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new h$({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],Uu.prototype,"name",void 0),c([d({type:String})],Uu.prototype,"styleUrl",void 0),c([d({type:String})],Uu.prototype,"styleName",void 0),c([d({type:fe})],Uu.prototype,"portal",void 0),Uu=h$=c([R("esri.symbols.support.StyleOrigin")],Uu);var d$;let O0=d$=class extends Oe{constructor(){super(...arguments),this.url=""}clone(){return new d$({url:this.url})}};c([d({type:String})],O0.prototype,"url",void 0),O0=d$=c([R("esri.symbols.support.Thumbnail")],O0);const bY={icon:Yr,object:$r,line:As,path:qr,fill:Os,extrude:Iu,text:br,water:$u},ibe=_e.ofType({base:zs,key:"type",typeMap:bY,errorContext:"symbol-layer"});let dn=class extends Ui{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i?.type,s=r||_e;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&he.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){sc(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const s=pf(e.styleUrl,r);return new Uu({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Uu({portal:r?.portal||fe.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new to("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,s){if(e.styleUrl&&e.name){let n=Zp(e.styleUrl,s);vn(n)&&(n=Sa(n)),i.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s?.portal&&!M9(e.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new to("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof zs||e&&bY[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([d({json:{read:!1,write:!1}})],dn.prototype,"color",null),c([d({type:ibe,nonNullable:!0,json:{write:!0}}),It(KW)],dn.prototype,"symbolLayers",null),c([d({type:Uu})],dn.prototype,"styleOrigin",void 0),c([de("styleOrigin")],dn.prototype,"readStyleOrigin",null),c([me("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],dn.prototype,"writeStyleOrigin",null),c([d({type:O0,json:{read:!1}})],dn.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],dn.prototype,"type",void 0),dn=c([R("esri.symbols.Symbol3D")],dn);let ag=class extends X{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};c([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],ag.prototype,"type",void 0),c([d({readOnly:!0})],ag.prototype,"visible",void 0),ag=c([R("esri.symbols.callouts.Callout3D")],ag);var p$;let Bx=p$=class extends X{constructor(t){super(t),this.color=new He("white")}clone(){return new p$({color:B(this.color)})}};c([d(Zh({colorRequiredOnWrite:!0}))],Bx.prototype,"color",void 0),Bx=p$=c([R("esri.symbols.callouts.LineCallout3DBorder")],Bx);const rbe=Bx;var f$;let Au=f$=class extends ag{constructor(t){super(t),this.type="line",this.color=new He([0,0,0,1]),this.size=Po(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new f$({color:B(this.color),size:this.size,border:B(this.border)})}};c([Re({line:"line"})],Au.prototype,"type",void 0),c([d(Zh({colorRequiredOnWrite:!0}))],Au.prototype,"color",void 0),c([d({...Fl,json:{write:{isRequired:!0}}})],Au.prototype,"size",void 0),c([d({type:rbe,json:{write:!0}})],Au.prototype,"border",void 0),c([d({readOnly:!0})],Au.prototype,"visible",null),Au=f$=c([R("esri.symbols.callouts.LineCallout3D")],Au);function bL(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function vY(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!bL(t)}function k9e(t){return t.type==="point-3d"||t.type==="label-3d"}function R9e(t){return t.horizontalAlignment==="center"}const wY={types:{key:"type",base:ag,typeMap:{line:Au}},json:{write:!0}};var m$;let nh=m$=class extends X{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new m$({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d({...Fl,json:{write:{isRequired:!0}}})],nh.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],nh.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],nh.prototype,"maxWorldLength",void 0),nh=m$=c([R("esri.symbols.support.Symbol3DVerticalOffset")],nh);var Gx;const _Y=_e.ofType({base:null,key:"type",typeMap:{text:br}});let ua=Gx=class extends dn{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new _Y,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return vY(this)}hasVisibleVerticalOffset(){return bL(this)}clone(){return new Gx({styleOrigin:B(this.styleOrigin),symbolLayers:B(this.symbolLayers),thumbnail:B(this.thumbnail),callout:B(this.callout),verticalOffset:B(this.verticalOffset)})}static fromTextSymbol(t){return new Gx({symbolLayers:new _e([br.fromTextSymbol(t)])})}};c([d({type:nh,json:{write:!0}})],ua.prototype,"verticalOffset",void 0),c([d(wY)],ua.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],ua.prototype,"styleOrigin",void 0),c([d({type:_Y})],ua.prototype,"symbolLayers",void 0),c([Re({LabelSymbol3D:"label-3d"},{readOnly:!0})],ua.prototype,"type",void 0),ua=Gx=c([R("esri.symbols.LabelSymbol3D")],ua);var Wx;const xY=_e.ofType({base:null,key:"type",typeMap:{line:As,path:qr}}),sbe=_e.ofType({base:null,key:"type",typeMap:{line:As,path:qr}});let va=Wx=class extends dn{constructor(t){super(t),this.symbolLayers=new xY,this.type="line-3d"}clone(){return new Wx({styleOrigin:B(this.styleOrigin),symbolLayers:B(this.symbolLayers),thumbnail:B(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Wx({symbolLayers:new _e([As.fromSimpleLineSymbol(t)])})}};c([d({type:xY,json:{type:sbe}})],va.prototype,"symbolLayers",void 0),c([Re({LineSymbol3D:"line-3d"},{readOnly:!0})],va.prototype,"type",void 0),va=Wx=c([R("esri.symbols.LineSymbol3D")],va);var qx;const SY=_e.ofType({base:null,key:"type",typeMap:{fill:Os}});let Zu=qx=class extends dn{constructor(t){super(t),this.symbolLayers=new SY,this.type="mesh-3d"}clone(){return new qx({styleOrigin:B(this.styleOrigin),symbolLayers:B(this.symbolLayers),thumbnail:B(this.thumbnail)})}static fromSimpleFillSymbol(t){return new qx({symbolLayers:new _e([Os.fromSimpleFillSymbol(t)])})}};c([d({type:SY})],Zu.prototype,"symbolLayers",void 0),c([Re({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Zu.prototype,"type",void 0),Zu=qx=c([R("esri.symbols.MeshSymbol3D")],Zu);let Iv=class extends Ui{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([Re({esriSLS:"simple-line"},{readOnly:!0})],Iv.prototype,"type",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Iv.prototype,"width",void 0),Iv=c([R("esri.symbols.LineSymbol")],Iv);var g$;let Ba=g$=class extends X{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){r?.origin==="web-map"||(e[i]=t)}clone(){return new g$({color:B(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],Ba.prototype,"placement",void 0),c([Re({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Ba.prototype,"type",void 0),c([d({type:fY})],Ba.prototype,"style",void 0),c([me("style")],Ba.prototype,"writeStyle",null),c([d({type:He,value:null,json:{write:{allowNull:!0}}})],Ba.prototype,"color",null),c([de("color")],Ba.prototype,"readColor",null),c([me("color")],Ba.prototype,"writeColor",null),Ba=g$=c([R("esri.symbols.LineSymbolMarker")],Ba);const nbe=Ba;var y$;const f2=new Xe({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ir=y$=class extends Iv{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,s,n){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=xt(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=xt(n)),o}clone(){return new y$({color:B(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};c([Re({esriSLS:"simple-line"},{readOnly:!0})],ir.prototype,"type",void 0),c([d({type:f2.apiValues,json:{read:f2.read,write:f2.write}})],ir.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],ir.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],ir.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":nbe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ir.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],ir.prototype,"miterLimit",void 0),ir=y$=c([R("esri.symbols.SimpleLineSymbol")],ir);let lg=class extends Ui{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ir}},json:{default:null,write:!0}})],lg.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],lg.prototype,"type",void 0),lg=c([R("esri.symbols.FillSymbol")],lg);function obe(t,e,i){return e.imageData?k9({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):EY(e.url,i)}function EY(t,e){if(!vn(t)){const i=lbe(e);if(i)return Yp(i,"images",t)}return pf(t,e)}function abe(t,e,i,r){if(nc(t)){const s=Jp(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&Xp(i.url,e,"url",r)}else Xp(t,e,"url",r)}const CY={json:{read:{source:["imageData","url"],reader:obe},write:{writer(t,e,i,r){abe(t,e,this.source,r)}}}},TY={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=EY(e.url,i)),r}}}};function lbe(t){if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i?.type;return r==="feature"||r==="stream"?i.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var b$;let un=b$=class extends lg{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=xt(i)),r!=null&&(s.height=xt(r)),s}clone(){const t=new b$({color:B(this.color),height:this.height,outline:B(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",B(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([Re({esriPFS:"picture-fill"},{readOnly:!0})],un.prototype,"type",void 0),c([d(CY)],un.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],un.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],un.prototype,"yscale",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],un.prototype,"width",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],un.prototype,"height",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],un.prototype,"xoffset",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],un.prototype,"yoffset",void 0),c([d(TY)],un.prototype,"source",void 0),un=b$=c([R("esri.symbols.PictureFillSymbol")],un);let Ou=class extends Ui{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ou.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],Ou.prototype,"type",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Ou.prototype,"xoffset",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Ou.prototype,"yoffset",void 0),c([d({cast:t=>t==="auto"?t:Ns(xt(t)),json:{write:!0}})],Ou.prototype,"size",void 0),Ou=c([R("esri.symbols.MarkerSymbol")],Ou);var v$;let $s=v$=class extends Ou{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=xt(e)),i!=null&&(r.height=xt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new v$({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",B(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],$s.prototype,"color",void 0),c([Re({esriPMS:"picture-marker"},{readOnly:!0})],$s.prototype,"type",void 0),c([d(CY)],$s.prototype,"url",void 0),c([d(TY)],$s.prototype,"source",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],$s.prototype,"height",void 0),c([de("height",["height","size"])],$s.prototype,"readHeight",null),c([d({type:Number,cast:xt,json:{write:!0}})],$s.prototype,"width",void 0),c([d({json:{write:!1}})],$s.prototype,"size",void 0),$s=v$=c([R("esri.symbols.PictureMarkerSymbol")],$s);var Fd;const MY=_e.ofType({base:null,key:"type",typeMap:{icon:Yr,object:$r,text:br}});let Fs=Fd=class extends dn{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new MY,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return vY(this)}hasVisibleVerticalOffset(){return bL(this)}clone(){return new Fd({verticalOffset:B(this.verticalOffset),callout:B(this.callout),styleOrigin:B(this.styleOrigin),symbolLayers:B(this.symbolLayers),thumbnail:B(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Fd({symbolLayers:new _e([Yr.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Fd({symbolLayers:new _e([Yr.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Fd(i?.callout?{symbolLayers:new _e([Yr.fromCIMSymbol(t)]),callout:new Au({size:.5,color:new He([0,0,0])}),verticalOffset:new nh({screenLength:40})}:{symbolLayers:new _e([Yr.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Fd({symbolLayers:new _e([br.fromTextSymbol(t)])})}};c([d({type:nh,json:{write:!0}})],Fs.prototype,"verticalOffset",void 0),c([d(wY)],Fs.prototype,"callout",void 0),c([d({type:MY,json:{origins:{"web-scene":{write:!0}}}})],Fs.prototype,"symbolLayers",void 0),c([Re({PointSymbol3D:"point-3d"},{readOnly:!0})],Fs.prototype,"type",void 0),Fs=Fd=c([R("esri.symbols.PointSymbol3D")],Fs);var $v;const kY=_e.ofType({base:null,key:"type",typeMap:{extrude:Iu,fill:Os,icon:Yr,line:As,object:$r,text:br,water:$u}});let Io=$v=class extends dn{constructor(t){super(t),this.symbolLayers=new kY,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Ph(he.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Ph(he.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Oh(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Al))}clone(){return new $v({styleOrigin:B(this.styleOrigin),symbolLayers:B(this.symbolLayers),thumbnail:B(this.thumbnail)})}static fromJSON(t){const e=new $v;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new $v({symbolLayers:new _e([Os.fromSimpleFillSymbol(t)])})}};c([d({type:kY,json:{write:!0}})],Io.prototype,"symbolLayers",void 0),c([Re({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Io.prototype,"type",void 0),Io=$v=c([R("esri.symbols.PolygonSymbol3D")],Io);var w$;const m2=new Xe({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Wn=w$=class extends lg{constructor(...t){super(...t),this.color=new He([0,0,0,.25]),this.outline=new ir,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new w$({color:B(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],Wn.prototype,"color",void 0),c([d()],Wn.prototype,"outline",void 0),c([Re({esriSFS:"simple-fill"},{readOnly:!0})],Wn.prototype,"type",void 0),c([d({type:m2.apiValues,json:{read:m2.read,write:m2.write}})],Wn.prototype,"style",void 0),Wn=w$=c([R("esri.symbols.SimpleFillSymbol")],Wn);var _$;const g2=new Xe({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let vr=_$=class extends Ou{constructor(...t){super(...t),this.color=new He([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ir}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=xt(e)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new _$({angle:this.angle,color:B(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};c([d()],vr.prototype,"color",void 0),c([me("color")],vr.prototype,"writeColor",null),c([Re({esriSMS:"simple-marker"},{readOnly:!0})],vr.prototype,"type",void 0),c([d()],vr.prototype,"size",void 0),c([d({type:g2.apiValues,json:{read:g2.read,write:g2.write}})],vr.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],vr.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ir}},json:{default:null,write:!0}})],vr.prototype,"outline",void 0),vr=_$=c([R("esri.symbols.SimpleMarkerSymbol")],vr);var x$;let Gt=x$=class extends Ui{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new _o,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return xt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new x$({angle:this.angle,backgroundColor:B(this.backgroundColor),borderLineColor:B(this.borderLineColor),borderLineSize:this.borderLineSize,color:B(this.color),font:this.font&&this.font.clone(),haloColor:B(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:He,json:{write:!0}})],Gt.prototype,"backgroundColor",void 0),c([d({type:He,json:{write:!0}})],Gt.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:xt})],Gt.prototype,"borderLineSize",void 0),c([d({type:_o,json:{write:!0}})],Gt.prototype,"font",void 0),c([d({...gY,json:{write:!0}})],Gt.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],Gt.prototype,"kerning",void 0),c([d({type:He,json:{write:!0}})],Gt.prototype,"haloColor",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Gt.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],Gt.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],Gt.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],Gt.prototype,"text",void 0),c([Re({esriTS:"text"},{readOnly:!0})],Gt.prototype,"type",void 0),c([d({...yY,json:{write:!0}})],Gt.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Gt.prototype,"xoffset",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Gt.prototype,"yoffset",void 0),c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Gt.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],Gt.prototype,"width",void 0),c([d({type:Number})],Gt.prototype,"lineWidth",void 0),c([me("lineWidth")],Gt.prototype,"writeLineWidth",null),c([It("lineWidth")],Gt.prototype,"castLineWidth",null),c([d(mY)],Gt.prototype,"lineHeight",void 0),c([me("lineHeight")],Gt.prototype,"writeLineHeight",null),Gt=x$=c([R("esri.symbols.TextSymbol")],Gt);var S$;let Pr=S$=class extends Ui{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:fe.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new S$({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){t9(he.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new W("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await le(()=>import("./webStyleSymbolUtils-BDTOHxqj.js"),__vite__mapDeps([192,193,1,2]));hi(t);const s=r(this,{portal:this.portal},t);s.catch(o=>{he.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return e?.set(i,n.clone()),n}};c([d({json:{write:!1}})],Pr.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Pr.prototype,"styleName",void 0),c([d({type:fe,json:{write:!1}})],Pr.prototype,"portal",void 0),c([d({type:String,json:{read:XC,write:Xp}})],Pr.prototype,"styleUrl",void 0),c([d({type:O0,json:{read:!1}})],Pr.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],Pr.prototype,"name",void 0),c([Re({styleSymbolReference:"web-style"},{readOnly:!0})],Pr.prototype,"type",void 0),c([d()],Pr.prototype,"_fetchCacheKey",null),Pr=S$=c([R("esri.symbols.WebStyleSymbol")],Pr);function O9e(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function RY(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ph={base:Ui,key:"type",typeMap:{"simple-fill":Wn,"picture-fill":un,"picture-marker":$s,"simple-line":ir,"simple-marker":vr,text:Gt,"label-3d":ua,"line-3d":va,"mesh-3d":Zu,"point-3d":Fs,"polygon-3d":Io,"web-style":Pr,cim:hs},errorContext:"symbol"},P9e={base:Ui,key:"type",typeMap:{"picture-marker":$s,"simple-marker":vr,"point-3d":Fs,cim:hs},errorContext:"symbol"},D9e={base:Ui,key:"type",typeMap:{"simple-line":ir,"line-3d":va,cim:hs},errorContext:"symbol"},L9e={base:Ui,key:"type",typeMap:{"simple-fill":Wn,"picture-fill":un,"polygon-3d":Io,cim:hs},errorContext:"symbol"},ube={base:Ui,key:"type",typeMap:{"picture-marker":$s,"simple-marker":vr,text:Gt,"web-style":Pr,cim:hs},errorContext:"symbol"},cbe=Uy({types:ph}),IY={base:Ui,key:"type",typeMap:{"simple-fill":Wn,"picture-fill":un,"picture-marker":$s,"simple-line":ir,"simple-marker":vr,text:Gt,"line-3d":va,"mesh-3d":Zu,"point-3d":Fs,"polygon-3d":Io,"web-style":Pr,cim:hs},errorContext:"symbol"},hbe={base:Ui,key:"type",typeMap:{text:Gt,"label-3d":ua},errorContext:"symbol"},bz={base:Ui,key:"type",typeMap:{"line-3d":va,"mesh-3d":Zu,"point-3d":Fs,"polygon-3d":Io,"web-style":Pr,cim:hs},errorContext:"symbol"},dbe={base:Ui,key:"type",typeMap:{"label-3d":ua},errorContext:"symbol"},$Y=Ol(ph);var E$;function pbe(t){if(!t)return null;const e={};for(const i in t){const r=Nl(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function fbe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var Yg;let Si=(Yg=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:ux(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&ine(he.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new E$({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[i,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=this.sourceLayer??this.layer;return e?Cye(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){return{aggregateGeometries:fbe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:cw(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if(i?.type==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Ws(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),Ws(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},E$=Yg,Yg);c([d({value:null,json:{read:pbe}})],Si.prototype,"aggregateGeometries",null),c([d({value:null})],Si.prototype,"attributes",null),c([d({value:null,types:Yy,json:{read:Nl}})],Si.prototype,"geometry",null),c([d({type:Boolean})],Si.prototype,"isAggregate",void 0),c([d({clonable:!1})],Si.prototype,"layer",void 0),c([d({clonable:"reference"})],Si.prototype,"origin",void 0),c([d({type:ib,value:null})],Si.prototype,"popupTemplate",null),c([d({clonable:"reference"})],Si.prototype,"sourceLayer",void 0),c([d({value:null,types:ph})],Si.prototype,"symbol",null),c([d({clonable:!1,json:{read:!1,write:!1}})],Si.prototype,"_version",void 0),c([d({type:Boolean,value:!0})],Si.prototype,"visible",null),Si=E$=c([R("esri.Graphic")],Si);let Ap=class extends T0{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([eD({Type:Si,ensureType:Gi(Si)})],Ap.prototype,"itemType",void 0),Ap=c([R("esri.support.GraphicsCollection")],Ap);let Oc=class extends Oe{constructor(e){super(e),this.view=null,this.baseLayerViews=new _e,this.referenceLayerViews=new _e,this._loadingHandle=Ue(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},vs)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};c([d({constructOnly:!0})],Oc.prototype,"view",void 0),c([d({readOnly:!0})],Oc.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],Oc.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],Oc.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],Oc.prototype,"updating",null),Oc=c([R("esri.views.BasemapView")],Oc);const mbe=Oc;let On=class extends Oe{constructor(e){super(e),this.factor=1.5,this.offset=jr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],On.prototype,"factor",void 0),c([d({nonNullable:!0})],On.prototype,"offset",void 0),c([d()],On.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],On.prototype,"size",void 0),c([d()],On.prototype,"maskUrl",void 0),c([d()],On.prototype,"maskEnabled",void 0),c([d()],On.prototype,"overlayUrl",void 0),c([d()],On.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],On.prototype,"version",null),c([d({type:Boolean})],On.prototype,"visible",void 0),On=c([R("esri.views.Magnifier")],On);const AY=On;let Yx=class{constructor(e){this._observable=new Ny,this._map=new Map(e)}get size(){return Ve(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Ve(this._observable),this._map.entries()}forEach(e,i){Ve(this._observable),this._map.forEach((r,s)=>e.call(i,r,s,this),i)}get(e){return Ve(this._observable),this._map.get(e)}has(e){return Ve(this._observable),this._map.has(e)}keys(){return Ve(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Ve(this._observable),this._map.values()}[Symbol.iterator](){return Ve(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var C$;let _p=C$=class extends X{constructor(t){super(t),this.name=null,this.code=null}clone(){return new C$({name:this.name,code:this.code})}};c([d({type:String,json:{write:{isRequired:!0}}})],_p.prototype,"name",void 0),c([d({type:[String,Number],json:{write:{isRequired:!0}}})],_p.prototype,"code",void 0),_p=C$=c([R("esri.layers.support.CodedValue")],_p);const gbe=new Xe({inherited:"inherited",codedValue:"coded-value",range:"range"});let fh=class extends X{constructor(e){super(e),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],fh.prototype,"name",void 0),c([Re(gbe),d({json:{write:{isRequired:!0}}})],fh.prototype,"type",void 0),fh=c([R("esri.layers.support.Domain")],fh);var T$,Jg;let mh=(Jg=class extends fh{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(s=>(String(s.code)===r&&(i=s.name),!!i))}return i}clone(){return new T$({codedValues:B(this.codedValues),name:this.name})}},T$=Jg,Jg);c([d({type:[_p],json:{write:{isRequired:!0}}})],mh.prototype,"codedValues",void 0),c([Re({codedValue:"coded-value"})],mh.prototype,"type",void 0),mh=T$=c([R("esri.layers.support.CodedValueDomain")],mh);var M$,Zg;let P0=(Zg=class extends fh{constructor(e){super(e),this.type="inherited"}clone(){return new M$}},M$=Zg,Zg);c([Re({inherited:"inherited"})],P0.prototype,"type",void 0),P0=M$=c([R("esri.layers.support.InheritedDomain")],P0);var k$,Xg;let up=(Xg=class extends fh{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new k$({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},k$=Xg,Xg);c([d({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],up.prototype,"maxValue",void 0),c([d({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],up.prototype,"minValue",void 0),c([Re({range:"range"})],up.prototype,"type",void 0),up=k$=c([R("esri.layers.support.RangeDomain")],up);const OY={key:"type",base:fh,typeMap:{range:up,"coded-value":mh,inherited:P0}};function TT(t){if(!t?.type)return null;switch(t.type){case"range":return up.fromJSON(t);case"codedValue":return mh.fromJSON(t);case"inherited":return P0.fromJSON(t)}return null}const vL=new Xe({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var R$;const ybe=new Xe({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var Kg;let Ar=(Kg=class extends X{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?.value??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?ybe.fromJSON(r.fieldValueType):null}clone(){return new R$({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},R$=Kg,Kg);c([d({type:String,json:{write:!0}})],Ar.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],Ar.prototype,"defaultValue",void 0),c([d()],Ar.prototype,"description",void 0),c([de("description")],Ar.prototype,"readDescription",null),c([d({types:OY,json:{read:{reader:TT},write:!0}})],Ar.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],Ar.prototype,"editable",void 0),c([d({type:ht,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Ar.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],Ar.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],Ar.prototype,"nullable",void 0),c([Re(vL)],Ar.prototype,"type",void 0),c([d()],Ar.prototype,"valueType",void 0),c([de("valueType",["description"])],Ar.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],Ar.prototype,"visible",void 0),Ar=R$=c([R("esri.layers.support.Field")],Ar);var I$;let um=I$=class extends X{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new I$({mapLayerId:t,gdbVersion:e})}};c([Re({mapLayer:"map-layer"}),d({json:{write:{isRequired:!0}}})],um.prototype,"type",void 0),c([d({type:ht,json:{write:{isRequired:!0}}})],um.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],um.prototype,"gdbVersion",void 0),um=I$=c([R("esri.layers.support.source.MapLayerSource")],um);var $$;let pu=$$=class extends X{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:s};return new $$(n)}};c([Re({queryTable:"query-table"}),d({json:{write:{isRequired:!0}}})],pu.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],pu.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],pu.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],pu.prototype,"oidFields",void 0),c([d({type:Te,json:{write:!0}})],pu.prototype,"spatialReference",void 0),c([Re(ble)],pu.prototype,"geometryType",void 0),pu=$$=c([R("esri.layers.support.source.QueryTableDataSource")],pu);var A$;let cm=A$=class extends X{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new A$({workspaceId:t,dataSourceName:e})}};c([Re({raster:"raster"}),d({json:{write:{isRequired:!0}}})],cm.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],cm.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],cm.prototype,"workspaceId",void 0),cm=A$=c([R("esri.layers.support.source.RasterDataSource")],cm);var O$;let jd=O$=class extends X{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new O$({workspaceId:t,gdbVersion:e,dataSourceName:i})}};c([Re({table:"table"}),d({json:{write:{isRequired:!0}}})],jd.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],jd.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],jd.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],jd.prototype,"dataSourceName",void 0),jd=O$=c([R("esri.layers.support.source.TableDataSource")],jd);var P$,D$;const bbe=hr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Pn=P$=class extends X{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return vz()(t,e,i)}castLeftTableSource(t){return Ol(L$(),t)}readRightTableSource(t,e,i){return vz()(t,e,i)}castRightTableSource(t){return Ol(L$(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:s};return new P$(n)}};c([Re({joinTable:"join-table"}),d({json:{write:{isRequired:!0}}})],Pn.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Pn.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],Pn.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],Pn.prototype,"leftTableSource",void 0),c([de("leftTableSource")],Pn.prototype,"readLeftTableSource",null),c([It("leftTableSource")],Pn.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],Pn.prototype,"rightTableSource",void 0),c([de("rightTableSource")],Pn.prototype,"readRightTableSource",null),c([It("rightTableSource")],Pn.prototype,"castRightTableSource",null),c([Re(bbe)],Pn.prototype,"joinType",void 0),Pn=P$=c([R("esri.layers.support.source.JoinTableDataSource")],Pn);let y2=null;function vz(){return y2||(y2=Uy({types:L$()})),y2}let b2=null;function L$(){return b2||(b2={key:"type",base:null,typeMap:{"data-layer":ca,"map-layer":um}}),b2}const vbe={key:"type",base:null,typeMap:{"join-table":Pn,"query-table":pu,raster:cm,table:jd}};var Qg;let ca=(Qg=class extends X{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new D$({fields:e,dataSource:i})}},D$=Qg,Qg);c([Re({dataLayer:"data-layer"}),d({json:{write:{isRequired:!0}}})],ca.prototype,"type",void 0),c([d({type:[Ar],json:{write:!0}})],ca.prototype,"fields",void 0),c([d({types:vbe,json:{write:!0}})],ca.prototype,"dataSource",void 0),ca=D$=c([R("esri.layers.support.source.DataLayerSource")],ca),ca.from=Gi(ca);let zd=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],zd.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],zd.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],zd.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],zd.prototype,"searchType",void 0),zd=c([R("esri.rest.support.FullTextSearch")],zd);const wbe=zd;var N$;const wz=new Xe({upperLeft:"upper-left",lowerLeft:"lower-left"});let Yc=N$=class extends X{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new N$(B({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:it,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Yc.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],Yc.prototype,"mode",void 0),c([d({type:String,json:{read:wz.read,write:wz.write}})],Yc.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Yc.prototype,"tolerance",void 0),Yc=N$=c([R("esri.rest.support.QuantizationParameters")],Yc);const _be=new Xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var F$;const _z=new Xe({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let ta=F$=class extends X{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=B(t))}clone(){return new F$({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:B(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],ta.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],ta.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],ta.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],ta.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],ta.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:_z.read},write:{target:"statisticType",writer:_z.write}}})],ta.prototype,"statisticType",void 0),c([d({type:Object})],ta.prototype,"statisticParameters",void 0),c([me("statisticParameters")],ta.prototype,"writeStatisticParameters",null),ta=F$=c([R("esri.rest.support.StatisticDefinition")],ta);var Jx;const xbe=new Xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var jp;let De=(jp=class extends X{static from(e){return Zw(Jx,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const s in e){const n=e[s];Array.isArray(n)?r[s]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?r[s]=n.getTime():r[s]=n}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new Jx(B({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},Jx=jp,jp.MAX_MAX_RECORD_COUNT_FACTOR=5,jp);c([d({json:{write:!0}})],De.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],De.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],De.prototype,"datumTransformation",void 0),c([It("datumTransformation")],De.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:!0}})],De.prototype,"distance",void 0),c([d({type:ca,json:{write:!0}})],De.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],De.prototype,"formatOf3DObjects",void 0),c([d({type:[wbe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],De.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],De.prototype,"gdbVersion",void 0),c([d({types:Yy,json:{read:Nl,write:!0}})],De.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],De.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],De.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],De.prototype,"having",void 0),c([d({type:Date})],De.prototype,"historicMoment",void 0),c([me("historicMoment")],De.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],De.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:t=>t<1?1:t>De.MAX_MAX_RECORD_COUNT_FACTOR?De.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],De.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],De.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],De.prototype,"num",void 0),c([d({json:{write:!0}})],De.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],De.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],De.prototype,"outFields",void 0),c([d({type:Te,json:{name:"outSR",write:!0}})],De.prototype,"outSpatialReference",void 0),c([d({type:[ta],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],De.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],De.prototype,"parameterValues",void 0),c([me("parameterValues")],De.prototype,"writeParameterValues",null),c([d({type:ze,json:{write:!0}})],De.prototype,"pixelSize",void 0),c([d({type:Yc,json:{write:!0}})],De.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],De.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],De.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],De.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],De.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],De.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],De.prototype,"returnZ",void 0),c([d({type:Boolean,json:{write:!0}})],De.prototype,"returnTrueCurves",void 0),c([d({type:Te,json:{write:!0}})],De.prototype,"sourceSpatialReference",void 0),c([Re(_be,{ignoreUnknown:!1,name:"spatialRel"})],De.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],De.prototype,"start",void 0),c([me("start"),me("num")],De.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],De.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],De.prototype,"text",void 0),c([d({type:Vt,json:{write:!0}})],De.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],De.prototype,"timeReferenceUnknownClient",void 0),c([Re(xbe,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],De.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],De.prototype,"where",void 0),c([me("where")],De.prototype,"writeWhere",null),De=Jx=c([R("esri.rest.support.Query")],De);function Ec(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let fo=class extends Vl.EventedAccessor{constructor(e){super(e),this._selectionMap=new Yx,this._sources=new _e,this._trashCan=[],this._layerEditHandles=new _e,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Ue(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Ue(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},vs),Oh(()=>this.sources,"change",e=>{const i=this._selectionMap,r=[];for(const s of e.removed){const n=i.get(s);n&&(i.delete(s),n.highlightHandle?.remove(),r.push({layer:s,selection:[],added:[],removed:[...n.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(vi)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){sc(e,this._sources)}syncSources(){const e=new Set,i=this.view?.map;if(!i)return;const r=s=>{Xpe(s)?(s.layers?.forEach(r),s.tables?.forEach(r)):Zpe(s)?(s.sublayers?.forEach(r),s.subtables?.forEach(r)):Jj(s)?s.sublayers?.forEach(r):Ec(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:s,selections:n}=this;if(!s&&r==="layerView")return he.getLogger(this).warn("Cannot query layer views without a view."),[];const o=e?.length?n.filter(l=>e.includes(l.layer)):n,a=[];return o.forEach(async l=>{const{layer:u,selection:h}=l;if(!h.length)return;const p=sh(u)?u.parent:u;if(p==null)return;if(r==="layer")return void a.push(Ez(p,h,i));if(xz(p)||!s||!Sz(p))return;const m=await s.whenLayerView(p).catch(()=>null);m&&a.push(Ez(m,h,i))}),(await Promise.all(a)).filter(l=>l!=null)}updateSelection(e){const i=new Map;for(const[n,o]of this._selectionMap)i.set(n,[...o.selection]);let r=!1;const s=e.current.concat(e.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Ec(o)||sh(o))&&a!==null){const l=df(i,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const n of e.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Ec(o)||sh(o))&&a!==null){const l=i.get(o),u=l?.indexOf(a);u!==void 0&&u>=0&&(l?.splice(u,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,u]of i){const h=n.get(l);h!==void 0&&o.push(h),n.set(l,{selection:u}),a.push({layer:l,selection:u,...CN(h!==void 0?h.selection:[],u)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const s=new Set(r.selection),n=new Set(i),o=Jre(s,n);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const o of e){const a=r.get(o),l=sh(o)?o.parent:o;if(l!=null&&Sz(l)){if(xz(l))continue;i.whenLayerView(l).then(u=>{a?.highlightHandle?.remove(),a!=null&&s&&n===this._vizTaskId&&"highlight"in u&&typeof u.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=u.highlight(a.selection,this.highlightName))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(vi);const e=new Set(this.sources.map(i=>sh(i)?i.parent:i));for(const i of e)Ec(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(Jj(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:s,objectId:n})=>{n!=null&&s==null&&r.push(n)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){const{deletedFeatures:r,edits:s,updatedFeatures:n}=e;if(s?.updateFeatures?.forEach(o=>{const a=o.getObjectId()??o.attributes[i.objectIdField];if(a==null||n.find(h=>h.objectId===a)?.error)return;const l=i.findSublayerForFeature(o);if(!Ec(l))return;const u=i.sublayers.find(h=>!(!Ec(h)||!this.getSelection(h)?.includes(a)));Ec(u)&&u!==l&&(this.removeFromSelection(u,[a]),this.appendToSelection(l,[a]))}),r.length){const o=[];r.forEach(({error:a,objectId:l})=>{l!=null&&a==null&&o.push(l)}),i.sublayers.forEach(a=>{Ec(a)&&this._selectionMap.has(a)&&this.removeFromSelection(a,o)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!Ebe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const s={layer:e,selection:[...i],...CN(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};c([d()],fo.prototype,"_selectionMap",void 0),c([d()],fo.prototype,"_sources",void 0),c([d({readOnly:!0,nonNullable:!0})],fo.prototype,"selections",null),c([d({readOnly:!0,nonNullable:!0})],fo.prototype,"count",null),c([d()],fo.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],fo.prototype,"hasSelection",null),c([d()],fo.prototype,"showHighlight",void 0),c([d()],fo.prototype,"sources",null),c([d()],fo.prototype,"highlightName",void 0),fo=c([R("esri.views.SelectionManager")],fo);const xz=t=>sh(t)?t.parent?.isTable===!0:t.isTable,Sbe=t=>t.layer!==void 0,Sz=t=>t?.when!==void 0,Ebe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},Ez=async(t,e,i={})=>{let r;if(Sbe(t)){const s=t;r=s===void 0?null:await s.queryFeatures(new De({...i,objectIds:e})).then(n=>({data:n,layer:t.layer}))}else{const s=t;r=s===void 0?null:await s.queryFeatures(new De({...i,objectIds:e})).then(n=>({data:n,layer:s}))}return r},Cbe=fo;let Av=class extends Fe.ClonableMixin(Oe){constructor(e){super(e),this.accentColor=new He([255,127,0]),this.textColor=new He([255,255,255])}};c([d({type:He,nonNullable:!0})],Av.prototype,"accentColor",void 0),c([d({type:He,nonNullable:!0})],Av.prototype,"textColor",void 0),Av=c([R("esri.views.Theme")],Av);const j$=Av;var Cz;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(Cz||(Cz={}));const PY=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],DY={};function LY(t){return!!DY[t]}function Tbe(t){for(const e of t)if(!LY(e))return!1;return!0}PY.forEach(t=>{DY[t]=!0});let NY=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager?.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,s){const n=Array.isArray(e)?e:e.split(",");if(!Tbe(n))return n.some(LY)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s??ic.DEFAULT;const l=this._createUniqueGroupName(),u=new Mbe(this.view,n,a,o);this._handlers.set(l,{handler:u,priority:s});for(const h of n){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],s),Mt(()=>this._removeHandler(l,n))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Mbe=class extends Cr{constructor(e,i,r,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(Ibe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s($be(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(Abe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(Obe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>s(Pbe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(Dbe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(Lbe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(Nb(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(Nb(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(Nb(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(Nbe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(Fbe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(Nb(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(Nb(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(jbe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(kbe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s(Rbe(o))})}}_wrapDrag(e){const i=e.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:h,timestamp:p}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:m,pointerType:o,button:a,buttons:u,radius:i.radius,angle:a9(i.angle),native:l,timestamp:p,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}};function kbe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function Rbe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function Ibe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,screenPoint:jr(n,o),mapPoint:c1(t,n,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}function $be(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:c1(t,n,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}function Abe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:c1(t,n,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function Obe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:c1(t,n,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function Pbe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=e.data,{cancelable:l,timestamp:u}=e;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:u,mapPoint:c1(t,n,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function c1(t,e,i){return t.toMap(jr(e,i),{exclude:[]})}function Dbe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function Lbe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:n=>t.defer(n),preventDefault:()=>t.preventDefault()}}function Nb(t,e){const{x:i,y:r,button:s,buttons:n,native:o,eventId:a}=t.data,l=o.pointerId,u=o.pointerType,{cancelable:h,timestamp:p}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:u,button:s,buttons:n,native:o,timestamp:p,eventId:a,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function Nbe(t){const{x:e,y:i,buttons:r,native:s,eventId:n}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,u=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:p,timestamp:m}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:u,origin:h,native:s,timestamp:m,eventId:n,cancelable:p,stopPropagation:()=>t.stopPropagation(),defer:y=>t.defer(y),preventDefault:()=>t.preventDefault()}}function Fbe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:s,y:n,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function jbe(t){const{action:e,state:i,device:r}=t.data,{cancelable:s,timestamp:n}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:n,action:e,buttons:o,axes:a,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}var Sw,Tz,Mz;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Sw||(Sw={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Tz||(Tz={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Mz||(Mz={}));const zbe="z",Vbe="r",FY={cancel:"Escape",complete:"Enter"},q9e={...FY,redo:Vbe,undo:zbe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Y9e={toggle:"Control"},J9e={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Z9e={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:XW,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let X9e=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=Ube.fromDefinition(e,i),s=df(this._bindings,r.key,()=>[]);return s.push(r),Mt(()=>FP(s,r))}register(e,i=ic.WIDGET){return hf([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,s=this._bindings.get(r);if(s)for(const n of s)n.process(e,i)}},Ube=class z${constructor(e,i,r,s,n){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=s,this.callback=n}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new z$(e,[],!1,!1,i);const{key:r,modifier:s,repeats:n,continuePropagation:o}=e;return new z$(r,s?Array.isArray(s)?s:[s]:[],!!n,!!o,i)}};function Hbe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return he.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function V$(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(Sw.USER)&&t.getEditableFlag(Sw.MANAGER)}function Bbe(t){return t.type==="key-down"&&t.key===FY.cancel}function Ga(t){return jr(t.x,t.y)}function jY(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?jr(e.clientX-i.left,e.clientY-i.top):jr(0,0)}function zY(t,e){return e instanceof Event?jY(t,e):Ga(e)}function VY(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Gbe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Rz(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Iz(e))break;const s=Ga(e),n=Vf(s,e.pointerType,i.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Iz(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s?.manipulator,o=s?.tool;if(n==null||o==null)break;const a=Ga(e);a.x=Ao(a.x,0,i.view.width),a.y=Ao(a.y,0,i.view.height);const l=s.start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,u?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,u&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const s=Ga(e),n=Vf(s,e.pointerType,i.forEachTool);if(Wbe(e)||i.forEachTool(u=>{if((n==null||n.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let h=!1;u.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),v2(o,r);break}case"click":{const s=Ga(e),n=Vf(s,e.pointerType,i.forEachTool),o=n?.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const s=Ga(e),n=Vf(s,e.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),v2(o,r);break}case"immediate-double-click":{const s=Ga(e),n=Vf(s,e.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&v2(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Ga(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Ga(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=kz(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=kz(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),e(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=rne(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},s=!0,n){const o=(a,l)=>a===e&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(jr(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Rz(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Ga(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,s){let n=Vf(e,r,s);const o=this._hoveredManipulators.get(i)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}};function kz(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function Vf(t,e,i){let r=null;return i(s=>{if(s.manipulators==null||!V$(s))return!1;const n=s.manipulators.intersect(t,e);return n!=null&&(r={tool:s,manipulator:n},!0)}),r}function Rz(t){return t==="mouse"}function Iz(t){return t.pointerType!=="mouse"||t.button===0}function Wbe(t){return!!t.native.shiftKey}function v2(t,e){t?.consumesClicks&&e()}const $z="attached",w2="tools",qbe=1e3;let Wa=class extends Oe{constructor(e){super(e),this._updatingHandles=new $p,this._clock=jy,this._manipulatorState=new Gbe,this.tools=new _e,this.cursor=null,this._interacting=!1,this._interactingTimeout=qbe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(PY,e=>{this._handleInputEvent(e)},ic.TOOL),...Hbe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void he.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const s=V$(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=vi(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([Ue(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],$z):this.addHandles(Ue(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles($z),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(r)}),!i&&Bbe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(w2),this._forEachTool(e=>{if(e instanceof Oe){const i=Ue(()=>[e.cursor,e.visible,e.editable],()=>{V$(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,w2)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],w2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Sw.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};c([d({constructOnly:!0,nonNullable:!0})],Wa.prototype,"view",void 0),c([d({value:null})],Wa.prototype,"activeTool",null),c([d({readOnly:!0,type:_e})],Wa.prototype,"tools",void 0),c([d({readOnly:!0})],Wa.prototype,"cursor",void 0),c([d({readOnly:!0})],Wa.prototype,"updating",null),c([d()],Wa.prototype,"_interacting",void 0),c([d({readOnly:!0})],Wa.prototype,"interacting",null),Wa=c([R("esri.views.ToolViewManager")],Wa);const Ybe=new He("cyan"),Jbe=1,Zbe=.25,Xbe=new He("black"),Kbe=.4,Qbe=.2,tGe=.25,UY="default",eve="temporary",tve=new He("yellow");var U$;let Dn=U$=class extends Oe{constructor(t){super(t),this.name=UY,this.color=Ybe.clone(),this.haloColor=null,this.haloOpacity=Jbe,this.fillOpacity=Zbe,this.shadowColor=Xbe.clone(),this.shadowOpacity=Kbe,this.shadowDifference=Qbe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new U$({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};c([d({type:String,constructOnly:!0,nonNullable:!0})],Dn.prototype,"name",void 0),c([d({type:He,nonNullable:!0})],Dn.prototype,"color",void 0),c([d({type:He})],Dn.prototype,"haloColor",void 0),c([d({nonNullable:!0})],Dn.prototype,"haloOpacity",void 0),c([d({nonNullable:!0})],Dn.prototype,"fillOpacity",void 0),c([d({type:He,nonNullable:!0})],Dn.prototype,"shadowColor",void 0),c([d({nonNullable:!0})],Dn.prototype,"shadowOpacity",void 0),c([d({nonNullable:!0})],Dn.prototype,"shadowDifference",void 0),c([d({nonNullable:!0})],Dn.prototype,"haloWidth",void 0),c([d({nonNullable:!0})],Dn.prototype,"haloBlur",void 0),Dn=U$=c([R("esri.views.support.HighlightOptions")],Dn);const Eh=Dn;function ive(){return new(_e.ofType(Eh))([new Eh({name:UY}),new Eh({name:eve,color:tve})])}let hm=class extends Oe{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":rve.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return sve[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],hm.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],hm.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],hm.prototype,"axisThreshold",null),hm=c([R("esri.views.input.gamepad.GamepadInputDevice")],hm);const wL=hm,rve=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),sve={standard:.15,spacemouse:.025,unknown:0};let Ov=class extends Oe{constructor(...e){super(...e),this.devices=new _e,this.enabledFocusMode="document"}};c([d({type:_e.ofType(wL),readOnly:!0})],Ov.prototype,"devices",void 0),c([d({type:["document","view","none"]})],Ov.prototype,"enabledFocusMode",void 0),Ov=c([R("esri.views.input.gamepad.GamepadSettings")],Ov);const nve=Ov;let Zx=class extends Oe{constructor(){super(...arguments),this.gamepad=new nve}};c([d({readOnly:!0})],Zx.prototype,"gamepad",void 0),Zx=c([R("esri.views.input.Input")],Zx);const ove=Zx,HY=()=>Ct.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,_2=()=>d({type:["pan","rotate","zoom","none"],nonNullable:!0});let Vd=class extends Oe{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};c([_2()],Vd.prototype,"dragPrimary",void 0),c([_2()],Vd.prototype,"dragSecondary",void 0),c([_2()],Vd.prototype,"dragTertiary",void 0),c([d({type:["zoom","none"],nonNullable:!0})],Vd.prototype,"mouseWheel",void 0),Vd=c([R("esri.views.navigation.NavigationActionMap")],Vd);const _L=Vd;let Pc=class extends Oe{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],Pc.prototype,"enabled",void 0),c([d({type:wL})],Pc.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],Pc.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],Pc.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],Pc.prototype,"velocityFactor",void 0),Pc=c([R("esri.views.navigation.gamepad.GamepadSettings")],Pc);const BY=Pc;let Dc=class extends Oe{constructor(e){super(e),this.actionMap=new _L,this.browserTouchPanEnabled=!0,this.gamepad=new BY,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!HY()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){i9(he.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};c([d({type:_L,nonNullable:!0})],Dc.prototype,"actionMap",void 0),c([d({type:Boolean})],Dc.prototype,"browserTouchPanEnabled",void 0),c([d({type:BY,nonNullable:!0})],Dc.prototype,"gamepad",void 0),c([d({type:Boolean})],Dc.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],Dc.prototype,"mouseWheelZoomEnabled",null),Dc=c([R("esri.views.navigation.Navigation")],Dc);const MT=Dc;function lGe(t,e,i){const r=GY(t),s=e,n=ave(r,s,i);if(r){const o=Is.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new W("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new W("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!lve(t)||n===fn.Unsupported)return new W("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(n){case fn.Units:{const o=r?.heightUnit||"unknown",a=s?.heightUnit||"unknown",l=new W("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new W("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}case fn.HeightModel:{const o=r?.heightModel||"unknown",a=s?.heightModel||"unknown",l=new W("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new W("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}case fn.CRS:{const o=r?.vertCRS||"unknown",a=s?.vertCRS||"unknown",l=new W("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new W("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}}return null}function ave(t,e,i){if(!Az(t)||!Az(e))return fn.Unsupported;if(t==null||e==null)return fn.Ok;if(!i&&t.heightUnit!==e.heightUnit)return fn.Units;if(t.heightModel!==e.heightModel)return fn.HeightModel;switch(t.heightModel){case"gravity-related-height":return fn.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?fn.Ok:fn.CRS;default:return fn.Unsupported}}var fn;function Az(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function lve(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!YY(t)}function GY(t){if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?Dl(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&WY(t)&&t.heightModelInfo?t.heightModelInfo:YY(t)?Is.deriveUnitFromSR(cve,t.spatialReference):null}function WY(t){return"heightModelInfo"in t}function qY(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function YY(t){return qY(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):JY(t)}function uve(t){return t.layers!=null||JY(t)||qY(t)||WY(t)}function JY(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(fn||(fn={}));const cve=new Is({heightModel:"gravity-related-height"});var ME;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(ME||(ME={}));let H$,x2=null;async function hve(t){x2||(x2=le(()=>import("./geometryServiceUtils-7miMCd8K.js"),__vite__mapDeps([194,1,2])).then(e=>H$=e)),await x2,hi(t)}async function ZY(t,e,i,r){if(!t)return null;const s=t.spatialReference;return Wh()||ka(s,e)?qh(t,e):H$?H$.projectGeometry(t,e,i,r):(await Promise.race([hve(r),zh(r)]),ZY(t,e,i,r))}async function uGe(t,e){try{return t?.spatialReference?await xW(t,e):null}catch{return null}}let Zt=class extends Oe{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=hy(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(e,s);n!=null&&(e=n)}return e?.length===1})&&e?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers}],n=>!(!("tileInfo"in n)||!n.tileInfo?.spatialReference.equals(i))&&(r=n,!0),n=>"tileInfo"in n);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,r=>{const s=GY(r);return!!s&&(e={heightModelInfo:s,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>uve(r));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of s)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=hy(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:fT(async n=>{try{const o=await ZY(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if($o(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const s of e)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const o=pve(s.viewingMode,n.viewingMode);if(o!==!1){r.push({spatialReference:s.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==ME.Local)&&(e=e.filter(({viewingMode:r})=>r!==ME.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const s=new dve(r,i);for(const n of e)if(this._collectCollection(n,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Zr(i)}),"loading"):e.loadStatus:"loaded"}};c([d()],Zt.prototype,"required",void 0),c([d({constructOnly:!0})],Zt.prototype,"map",void 0),c([d({constructOnly:!0})],Zt.prototype,"getSpatialReferenceSupport",void 0),c([d()],Zt.prototype,"defaultSpatialReference",void 0),c([d()],Zt.prototype,"userSpatialReference",void 0),c([d()],Zt.prototype,"sourcePreloadCount",void 0),c([d()],Zt.prototype,"priorityCollection",void 0),c([d()],Zt.prototype,"requiresExtentInSpatialReference",void 0),c([d()],Zt.prototype,"suspended",void 0),c([d({readOnly:!0})],Zt.prototype,"ready",null),c([d({readOnly:!0})],Zt.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],Zt.prototype,"spatialReference",null),c([d({readOnly:!0})],Zt.prototype,"extent",null),c([d({readOnly:!0})],Zt.prototype,"heightModelInfo",null),c([d({readOnly:!0})],Zt.prototype,"vcsWkid",null),c([d({readOnly:!0})],Zt.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],Zt.prototype,"viewingMode",null),c([d({readOnly:!0})],Zt.prototype,"tileInfo",null),c([d({readOnly:!0})],Zt.prototype,"mapCollections",null),c([d({readOnly:!0})],Zt.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],Zt.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],Zt.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],Zt.prototype,"_extentCandidatesTask",null),c([d()],Zt.prototype,"_extentTask",null),c([d()],Zt.prototype,"_projectExtentTask",void 0),Zt=c([R("esri.views.support.DefaultsFromMap")],Zt);let dve=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function pve(t,e){return t!=null?e!=null?t===e&&t:t:e}function fve(t){return"tryRecycleWith"in t}let mve=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=eo(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ta(this._controller.signal,()=>{this._recycleController?.abort();const s=new W("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!fve(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const n=e[s];if(n.type!==i)continue;const o=this.layerView.tryRecycleWith(n,{signal:r});if(o){e.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=o.then(()=>(hi(r),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let s,n;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),gve(r))s=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new W("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);hi(i),s="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const o=()=>{n=vi(n),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};n=Ta(i,o),hi(i);try{await s.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred.reject(new W("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=s,r.emit("layerview-create",{view:e,layerView:s}),e.emit("layerview-create",{layer:r,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(s){r.emit("layerview-create-error",{view:e,error:s}),e.emit("layerview-create-error",{layer:r,error:s}),this.done=!0,this._deferred.reject(new W("layerview:create-error","layerview creation failed",{layer:r,error:s}))}}};function gve(t){return t.createLayerView!==mi.prototype.createLayerView}function yve(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Ln=class extends Oe{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new $p,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=eo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(qw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const i=this.view.map;if(this.destroyed||!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=h=>{if(h!=null){for(const p of h)if(p){if(this.layerViewFilter?.(p)===!1)continue;r.add(p);const m=this._layerLayerViewInfoMap.get(p);m&&n?m.start():m||this._recyclingInfoMap.has(p)||s.push(p),"layers"in p&&p.layers&&o(p.layers)}}};for(const h of this._rootCollectionNames)o(ya(this,h));const a=new Array,l=h=>{const p=h.tryRecycle(s);p?(this._recyclingInfoMap.set(h.layer,h),this.notifyChange("updating"),p.then(()=>{this._recyclingInfoMap.delete(h.layer),this._layerLayerViewInfoMap.set(h.layer,h),this._reschedule(),this.notifyChange("updating")}).catch(m=>{Zr(m)||(this._recyclingInfoMap.delete(h.layer),h.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(h)};for(const h of this._layerLayerViewInfoMap.values())r.has(h.layer)||(this._layerLayerViewInfoMap.delete(h.layer),l(h));for(const h of this._recyclingInfoMap.values())r.has(h.layer)||(this._recyclingInfoMap.delete(h.layer),l(h));for(const h of s)this._createLayerView(h);this._refreshCollections(),a.forEach(h=>h.destroy());const u=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.referenceLayers,i?.layers].filter(h=>!!h);r.forEach(h=>"layers"in h&&u.push(h.layers)),this.addHandles(u.map(h=>this._watchUpdatingTracking.addOnCollectionChange(()=>h,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Oh(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ue(()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]},()=>this._reschedule(),Ps)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),l2(this._recyclingInfoMap),l2(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Qt()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||cse(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),l2(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new W("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in e&&e.layers?.length)&&e.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(ya(this,e),ya(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())ya(this,e)?.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void i?.removeAll();let s=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o?.layerView)continue;const a=o.layerView;a.layer=n,a.parent=r,i.at(s)!==a&&i.splice(s,0,a),"layers"in n&&yve(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<i.length&&i.splice(s)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new mve(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(Zr(r)||r.name==="cancelled:layerview-create")||he.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],Ln.prototype,"_workPromise",void 0),c([d({readOnly:!0})],Ln.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Ln.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],Ln.prototype,"_rootCollectionNames",null),c([d({constructOnly:!0})],Ln.prototype,"layerViewFilter",void 0),c([d()],Ln.prototype,"layerViewImporter",void 0),c([d()],Ln.prototype,"supportsGround",void 0),c([d({readOnly:!0})],Ln.prototype,"updating",null),c([d({readOnly:!0})],Ln.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],Ln.prototype,"view",void 0),Ln=c([R("esri.views.support.LayerViewManager")],Ln);const bve=Ln;let dm=class extends Oe{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};c([d()],dm.prototype,"featureTitleFields",void 0),c([d()],dm.prototype,"utilityNetworkFields",void 0),c([d()],dm.prototype,"globalIdField",void 0),dm=c([R("esri.views.support.RequiredFieldsOptions")],dm);const vve=dm;var Pv,zp;let Pe=(zp=class extends Vl.EventedMixin(Sl.EsriPromiseMixin(Oe)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Hy,this.updatingHandles=new $p,this.allLayerViews=new yl({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:_ve}),this.analyses=new xE,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Ap,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new _e,this.magnifier=new AY,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new ove,this.navigation=new MT,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new NY(this),this.persistableViewModels=new _e,this.requiredFieldsOptions=new vve,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Ue(()=>this.preconditionsReady,i=>{const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Pv.views.add(this)):(this._lockedSpatialReference=null,Pv.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new W("view:startup-error","View._startup failed",s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Al))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,YC(()=>this.ready)))),this.basemapView=new mbe({view:this}),this.layerViewManager=new bve({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Wa({view:this}),this.selectionManager=new Cbe({view:this}),this.addHandles([Ws(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{he.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),Ue(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Ps),Ue(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Al),Ue(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Ps)])}destroy(){this.destroyed||(Pv.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ci(this.graphics),this.analyses=ci(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ci(this.analysisViewManager),this.toolViewManager=ci(this.toolViewManager),this.layerViewManager=ci(this.layerViewManager),this.selectionManager=ci(this.selectionManager),this.basemapView=ci(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=ci(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return he.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Zt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??ive()}set highlights(e){this._set("highlights",sc(e,this._get("highlights"),_e.ofType(Eh)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||gs.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(he.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),gs.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,i=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&i&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=fT(s=>T8(J("view-readyState-waiting-delay"),null,s)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=hy(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const i=!Er(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Oo}set timeZone(e){this._userTimeZone=e,Bce(e)||he.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new j$}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new W("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&he.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Ws(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}},Pv=zp,zp.views=new _e,zp);c([d()],Pe.prototype,"_userSpatialReference",void 0),c([d()],Pe.prototype,"activeTool",null),c([d({readOnly:!0})],Pe.prototype,"allLayerViews",void 0),c([d(bI(xE,"analyses"))],Pe.prototype,"analyses",void 0),c([d()],Pe.prototype,"animation",null),c([d()],Pe.prototype,"basemapView",void 0),c([d()],Pe.prototype,"center",null),c([d()],Pe.prototype,"defaultsFromMapSettings",null),c([d()],Pe.prototype,"defaultsFromMap",null),c([d()],Pe.prototype,"displayFilterEnabled",void 0),c([d({type:it})],Pe.prototype,"extent",null),c([d()],Pe.prototype,"fatalError",void 0),c([d(bI(Ap,"graphics"))],Pe.prototype,"graphics",void 0),c([d()],Pe.prototype,"groundView",void 0),c([d({readOnly:!0,type:Is})],Pe.prototype,"heightModelInfo",null),c([d({type:_e.ofType(Eh)})],Pe.prototype,"highlights",null),c([d({readOnly:!0})],Pe.prototype,"interacting",null),c([d({constructOnly:!0})],Pe.prototype,"layerViewFilter",void 0),c([d({readOnly:!0})],Pe.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Pe.prototype,"preconditionsReady",null),c([d({readOnly:!0})],Pe.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:_e,readOnly:!0})],Pe.prototype,"layerViews",void 0),c([d()],Pe.prototype,"resolution",null),c([d({type:AY})],Pe.prototype,"magnifier",void 0),c([d({value:null,type:Nq})],Pe.prototype,"map",null),c([d()],Pe.prototype,"padding",void 0),c([d({readOnly:!0})],Pe.prototype,"ready",void 0),c([d()],Pe.prototype,"_readyStateWaitingTask",void 0),c([d({readOnly:!0})],Pe.prototype,"readyState",null),c([d({type:Te})],Pe.prototype,"spatialReference",null),c([d()],Pe.prototype,"stationary",null),c([d({readOnly:!0})],Pe.prototype,"supportsGround",void 0),c([d({type:Vt})],Pe.prototype,"timeExtent",null),c([d({type:String,nonNullable:!0})],Pe.prototype,"timeZone",null),c([d()],Pe.prototype,"tools",null),c([d()],Pe.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],Pe.prototype,"type",void 0),c([d({type:Number})],Pe.prototype,"scale",void 0),c([d({readOnly:!0})],Pe.prototype,"updating",void 0),c([d({readOnly:!0})],Pe.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],Pe.prototype,"initialExtent",null),c([d()],Pe.prototype,"cursor",null),c([d({readOnly:!0})],Pe.prototype,"input",void 0),c([d({type:MT,nonNullable:!0})],Pe.prototype,"navigation",void 0),c([d()],Pe.prototype,"layerViewManager",void 0),c([d()],Pe.prototype,"analysisViewManager",void 0),c([d()],Pe.prototype,"selectionManager",void 0),c([d()],Pe.prototype,"width",void 0),c([d()],Pe.prototype,"height",void 0),c([d({readOnly:!0})],Pe.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],Pe.prototype,"size",null),c([d({readOnly:!0})],Pe.prototype,"suspended",void 0),c([d({readOnly:!0})],Pe.prototype,"viewEvents",void 0),c([d({readOnly:!0})],Pe.prototype,"persistableViewModels",void 0),c([d()],Pe.prototype,"_isValid",void 0),c([d()],Pe.prototype,"_readyCycleForced",void 0),c([d()],Pe.prototype,"_lockedSpatialReference",void 0),c([d()],Pe.prototype,"_userTimeZone",void 0),c([d()],Pe.prototype,"_lockedTimeZone",void 0),c([d()],Pe.prototype,"_userTimeExtent",void 0),c([d()],Pe.prototype,"_lockedTimeExtent",void 0),c([d({type:j$})],Pe.prototype,"theme",void 0),c([d({readOnly:!0,type:j$})],Pe.prototype,"effectiveTheme",null),Pe=Pv=c([R("esri.views.View")],Pe);const S2=globalThis.$arcgis;S2&&!S2.views&&Object.defineProperty(S2,"views",{configurable:!1,enumerable:!0,writable:!1,value:Pe.views});const wve=Pe;function _ve(t){return t.layerViews}function Rg(t,e){return t[0]=e[0],t[1]=e[1],t}function Lr(t,e,i){return t[0]=e,t[1]=i,t}function XY(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Ew(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function KY(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function QY(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function xve(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Sve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Eve(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Cve(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Tve(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function h1(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Mve(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function kT(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function kE(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function RE(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function eJ(t){const e=t[0],i=t[1];return e*e+i*i}function tJ(t,e){return t[0]=-e[0],t[1]=-e[1],t}function kve(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function B$(t,e){const i=e[0],r=e[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function iJ(t,e){return t[0]*e[0]+t[1]*e[1]}function rJ(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Rve(t,e,i,r){const s=e[0],n=e[1];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t}function Ive(t,e=1){const i=2*wT()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function $ve(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t}function ml(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t}function Ave(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t}function Ove(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t}function Pve(t,e,i,r){const s=e[0]-i[0],n=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=s*a-n*o+i[0],t[1]=s*o+n*a+i[1],t}function Dve(t,e){const i=t[0],r=t[1],s=e[0],n=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(i*s+r*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Lve(t){return"vec2("+t[0]+", "+t[1]+")"}function Nve(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fve(t,e){const i=t[0],r=t[1],s=e[0],n=e[1],o=Hs();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function jve(t,e,i,r,s){let n=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,t[0]=e[0]+n,t[1]=e[1]+o,t}const zve=RE,xL=Ew,Vve=KY,Uve=QY,Hve=kT,Bve=kE,Gve=eJ;Object.freeze(Object.defineProperty({__proto__:null,add:XY,angle:Dve,ceil:xve,copy:Rg,cross:rJ,dist:Hve,distance:kT,div:Uve,divide:QY,dot:iJ,equals:Fve,exactEquals:Nve,floor:Sve,inverse:kve,len:zve,length:RE,lerp:Rve,max:Cve,min:Eve,mul:Vve,multiply:KY,negate:tJ,normalize:B$,projectAndScale:jve,random:Ive,rotate:Pve,round:Tve,scale:h1,scaleAndAdd:Mve,set:Lr,sqrDist:Bve,sqrLen:Gve,squaredDistance:kE,squaredLength:eJ,str:Lve,sub:xL,subtract:Ew,transformMat2:$ve,transformMat2d:ml,transformMat3:Ave,transformMat4:Ove},Symbol.toStringTag,{value:"Module"}));function Ri(){return[0,0]}function Wve(t){return[t[0],t[1]]}function d1(t,e){return[t,e]}function qve(t,e){return[t,e]}function Yve(t,e=Ri()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function sJ(){return Ri()}function nJ(){return d1(1,1)}function oJ(){return d1(1,0)}function aJ(){return d1(0,1)}const Jve=sJ(),Zve=nJ(),Xve=oJ(),Kve=aJ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Zve,UNIT_X:Xve,UNIT_Y:Kve,ZEROS:Jve,clone:Wve,create:Ri,freeze:qve,fromArray:Yve,fromValues:d1,ones:nJ,unitX:oJ,unitY:aJ,zeros:sJ},Symbol.toStringTag,{value:"Module"}));function Qve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function lJ(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function e0e(t,e,i,r,s,n,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t}function SL(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5];let l=i*n-r*s;return l?(l=1/l,t[0]=n*l,t[1]=-r*l,t[2]=-s*l,t[3]=i*l,t[4]=(s*a-n*o)*l,t[5]=(r*o-i*a)*l,t):null}function t0e(t){return t[0]*t[3]-t[1]*t[2]}function uJ(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=i[0],h=i[1],p=i[2],m=i[3],y=i[4],v=i[5];return t[0]=r*u+n*h,t[1]=s*u+o*h,t[2]=r*p+n*m,t[3]=s*p+o*m,t[4]=r*y+n*v+a,t[5]=s*y+o*v+l,t}function p1(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=Math.sin(i),h=Math.cos(i);return t[0]=r*h+n*u,t[1]=s*h+o*u,t[2]=r*-u+n*h,t[3]=s*-u+o*h,t[4]=a,t[5]=l,t}function RT(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=i[0],h=i[1];return t[0]=r*u,t[1]=s*u,t[2]=n*h,t[3]=o*h,t[4]=a,t[5]=l,t}function Ty(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=i[0],h=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=r*u+n*h+a,t[5]=s*u+o*h+l,t}function cJ(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function hJ(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function EL(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function i0e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function r0e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function s0e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function dJ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function n0e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function o0e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function a0e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function l0e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=e[0],u=e[1],h=e[2],p=e[3],m=e[4],y=e[5],v=Hs();return Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=v*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-h)<=v*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-p)<=v*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=v*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=v*Math.max(1,Math.abs(a),Math.abs(y))}const u0e=uJ,c0e=dJ;Object.freeze(Object.defineProperty({__proto__:null,add:s0e,copy:Qve,determinant:t0e,equals:l0e,exactEquals:a0e,frob:r0e,fromRotation:cJ,fromScaling:hJ,fromTranslation:EL,identity:lJ,invert:SL,mul:u0e,multiply:uJ,multiplyScalar:n0e,multiplyScalarAndAdd:o0e,rotate:p1,scale:RT,set:e0e,str:i0e,sub:c0e,subtract:dJ,translate:Ty},Symbol.toStringTag,{value:"Module"}));function kl(){return[1,0,0,1,0,0]}function h0e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function d0e(t,e,i,r,s,n){return[t,e,i,r,s,n]}const p0e=kl();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:p0e,clone:h0e,create:kl,fromValues:d0e},Symbol.toStringTag,{value:"Module"}));const n_={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Mi({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Te.WebMercator}),minus180Line:new Mi({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Te.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Mi({paths:[[[180,-180],[180,180]]],spatialReference:Te.WGS84}),minus180Line:new Mi({paths:[[[-180,-180],[-180,180]]],spatialReference:Te.WGS84})}};function xp(t,e){return Math.ceil((t-e)/(2*e))}function pJ(t,e){const i=D0(t);for(const r of i)for(const s of r)s[0]+=e;return t}function D0(t){return yg(t)?t.rings:t.paths}function f0e(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function fJ(t){return typeof t=="string"?Sr(t):B(t)}function m0e(t,e,i){const r={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map(o=>m0e(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i?.[s]);r[s]=e?o:JSON.stringify(o)}else r[s]=e?n:JSON.stringify(n);else r[s]=n}return r}function g0e(t,e){return t?e&&bD(t)?e:yD(t)??mt?.findCredential(t)?.token:null}async function mGe(t,e,i){const r=g0e(t,e);return r||(!mt&&Ct.request.useIdentity&&await le(()=>import("./IdentityManager-B5041ckN.js"),__vite__mapDeps([3,4,1,2])),(await mt.getCredential(t,i))?.token)}async function y0e(t,e,i,r){const s=fJ(t),n=e[0].spatialReference,o={...r,responseType:"json",query:{...s.query,f:"json",sr:nE(n),target:JSON.stringify({geometryType:qy(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await Tt(s.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(h=>{const p=Nl(h);return p.spatialReference=n,p})}}function b0e(t){return{geometryType:qy(t[0]),geometries:t.map(e=>e.toJSON())}}function mJ(t,e,i){const r=yle(e);return t.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function v0e(t,e,i){const r=typeof t=="string"?Sr(t):t,s=e[0].spatialReference,n=qy(e[0]),o={...i,query:{...r.query,f:"json",sr:nE(s),geometries:JSON.stringify(b0e(e))}},{data:a}=await Tt(r.path+"/simplify",o);return mJ(a.geometries,n,s)}const gJ=()=>he.getLogger("esri.geometry.support.normalizeUtils");function w0e(t){return t.type==="polygon"}function _0e(t){return t[0].type==="polygon"}function x0e(t){return t[0].type==="polyline"}function Oz(t){const e=[];let i=0,r=0;for(let s=0;s<t.length;s++){const n=t[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function S0e(t,e){if(!(t instanceof Mi||t instanceof ui)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw gJ().error(s),new W("internal:geometry",s)}const i=D0(t),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],u=s[o+1][0],h=s[o+1][1],p=Math.sqrt((u-a)*(u-a)+(h-l)*(h-l)),m=(h-l)/p,y=(u-a)/p,v=p/e;if(v>1){for(let I=1;I<=v-1;I++){const D=I*e,O=y*D+a,A=m*D+l;n.push([O,A])}const w=(p+Math.floor(v-1)*e)/2,S=y*w+a,E=m*w+l;n.push([S,E])}n.push([u,h])}}return w0e(t)?new ui({rings:r,spatialReference:t.spatialReference}):new Mi({paths:r,spatialReference:t.spatialReference})}function Pz(t,e,i){if(e){const r=S0e(t,1e6);t=tg(r,!0)}return i&&(t=pJ(t,i)),t}function Dz(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const s=xp(r,e);t[0]=r+s*(-2*e)}else if(r<i){const s=xp(r,i);t[0]=r+s*(-2*i)}}else{const r=t.x;if(r>e){const s=xp(r,e);t=t.clone().offset(s*(-2*e),0)}else if(r<i){const s=xp(r,i);t=t.clone().offset(s*(-2*i),0)}}return t}function E0e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const s=e.cutIndexes[r],n=e.geometries[r],o=D0(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let h=0;for(let m=0;m<l.length;m++){const y=l[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const p=-360*xp(h,180);for(let m=0;m<l.length;m++){const y=n.getPoint(a,m);n.setPoint(a,m,y.clone().offset(p,0))}return!0}})}if(s===i){if(_0e(t))for(const a of D0(n))t[s]=t[s].addRing(a);else if(x0e(t))for(const a of D0(n))t[s]=t[s].addPath(a)}else i=s,t[s]=n}return t}async function C0e(t,e,i){if(!Array.isArray(t))return C0e([t],e);e&&typeof e!="string"&&gJ().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??Ct.geometryServiceUrl;let s,n,o,a,l,u,h,p,m=0;const y=[],v=[];for(const O of t)if(O!=null)if(s||(s=O.spatialReference,n=Us(s),o=s.isWebMercator,u=o?102100:4326,a=n_[u].maxX,l=n_[u].minX,h=n_[u].plus180Line,p=n_[u].minus180Line),n)if(O.type==="mesh")v.push(O);else if(O.type==="point")v.push(Dz(O.clone(),a,l));else if(O.type==="multipoint"){const A=O.clone();A.points=A.points.map(z=>Dz(z,a,l)),v.push(A)}else if(O.type==="extent"){const A=O.clone()._normalize(!1,!1,n);v.push(A.rings?new ui(A):A)}else if(O.extent){const A=O.extent,z=xp(A.xmin,l)*(2*a);let _=z===0?O.clone():pJ(O.clone(),z);A.offset(z,0);let{xmin:Z,xmax:Q}=A;Z=Number(Z.toFixed(9)),Q=Number(Q.toFixed(9)),A.intersects(h)&&Q!==a?(m=Q>m?Q:m,_=Pz(_,o),y.push(_),v.push("cut")):A.intersects(p)&&Z!==l?(m=Q*(2*a)>m?Q*(2*a):m,_=Pz(_,o,360),y.push(_),v.push("cut")):v.push(_)}else v.push(O.clone());else v.push(O);else v.push(O);let w=xp(m,a),S=-90;const E=w,I=new Mi;for(;w>0;){const O=360*w-180;I.addPath([[O,S],[O,-1*S]]),S*=-1,w--}if(y.length>0&&E>0){const O=E0e(y,await y0e(r,y,I,i)),A=[],z=[];for(let Q=0;Q<v.length;Q++){const ae=v[Q];if(ae!=="cut")z.push(ae);else{const ge=O.shift(),ne=t[Q];ne!=null&&ne.type==="polygon"&&ne.rings&&ne.rings.length>1&&ge.rings.length>=ne.rings.length?(A.push(ge),z.push("simplify")):z.push(o?xh(ge):ge)}}if(!A.length)return z;const _=await v0e(r,A,i),Z=[];for(let Q=0;Q<z.length;Q++){const ae=z[Q];ae!=="simplify"?Z.push(ae):Z.push(o?xh(_.shift()):_.shift())}return Z}const D=[];for(let O=0;O<v.length;O++){const A=v[O];if(A!=="cut")D.push(A);else{const z=y.shift();D.push(o===!0?xh(z):z)}}return D}function T0e(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&Us(t.spatialReference);if(!i)return e;const[r,s]=i.valid,n=2*s,{width:o}=e;let a,{xmin:l,xmax:u}=e;if([l,u]=[u,l],t.type==="extent"||o===0||o<=s||o>n||l<r||u>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=Oz(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=Oz(t.paths);break;case"multipoint":a=t.points}const h=e.clone();for(let p=0;p<a.length;p++){let m=a[p][0];m<0?(m+=s,u=Math.max(m,u)):(m-=s,l=Math.min(m,l))}return h.xmin=l,h.xmax=u,h.width<o?(h.xmin-=s,h.xmax-=s,h):e}function CL(t,e,i){const r=Us(i);if(r==null)return t;const[s,n]=r.valid,o=2*n;let a=0,l=0;e>n?a=Math.ceil(Math.abs(e-n)/o):e<s&&(a=-Math.ceil(Math.abs(e-s)/o)),t>n?l=Math.ceil(Math.abs(t-n)/o):t<s&&(l=-Math.ceil(Math.abs(t-s)/o));let u=t+(a-l)*o;const h=u-e;return h>n?u-=o:h<s&&(u+=o),u}function gGe(t,e){const i=Us(e);if(i){const[r,s]=i.valid,n=s-r;if(t<r)for(;t<r;)t+=n;if(t>s)for(;t>s;)t-=n}return t}const yJ=96,bJ=39.37,M0e=180/Math.PI;function vJ(t){return t.wkid?t:t.spatialReference||Te.WGS84}function TL(t,e){return e.type?Lr(t,e.x,e.y):Rg(t,e)}function wJ(t){return Do(t)}function IT(t,e,i=0){let r=t.width,s=t.height;if(i!==0){const a=Qw(i),l=Math.abs(Math.cos(a)),u=Math.abs(Math.sin(a));r=t.width*l+t.height*u,s=t.width*u+t.height*l}const n=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/n,s/o)*D0e(t.spatialReference)}async function Dv(t,e,i,r){let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if(_e.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(h=>"attributes"in h),l=t.some(h=>!h.geometry);let u=t;if(a&&l&&e&&e.allLayerViews){const h=new Map;for(const v of t){const w=v.layer,S=h.get(w)||[],E=v.attributes[w.objectIdField];E!=null&&S.push(E),h.set(w,S)}const p=[];h.forEach((v,w)=>{const S=e.allLayerViews?.find(E=>E.layer.id===w.id);if(S&&"queryFeatures"in S){const E=w.createQuery();E.objectIds=v,E.returnGeometry=!0,p.push(S.queryFeatures(E))}});const m=await Promise.all(p),y=[];for(const v of m)if(v&&v.features&&v.features.length)for(const w of v.features)w.geometry!=null&&y.push(w.geometry);u=y}for(const h of u)r=await Dv(h,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new ze(t);else if(t instanceof Dr)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews?.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[t.attributes[a.objectIdField]],u.returnGeometry=!0,s=(await l.queryFeatures(u))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new it({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=T0e(s);break;default:n=s.extent}if(!n)return null;Wh()||ka(n.spatialReference,i)||await zh();const o=qh(n,i);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=CL(a.x,r.center.x,i),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function k0e(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const s=r.layer;s?.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,i=s.maxScale>i?s.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function Lz(t,e){const i=vJ(t);return Er(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:qh(t,e)}async function R0e(t,e){if(!t||!e)return new xr({targetGeometry:new ze,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=e,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;t instanceof xr?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let u=null;l?.targetGeometry?u=l.targetGeometry:t instanceof it?u=t:t instanceof Dr?u=await Dv(t,e,i):t&&(u=await Dv(t.center,e,i)||await Dv(t.target,e,i)||await Dv(t,e,i)),!u&&n?.targetGeometry?u=n.targetGeometry:!u&&e.extent&&(u=e.extent),i||(i=vJ(e.spatialReference||e.extent||u)),Wh()||Er(u.spatialReference,i)||ka(u.spatialReference,i)||await zh();const h=Lz(u,i),p="center"in h?h.center:h;e.pickClosestTarget!==!1&&p.type==="point"&&n.targetGeometry?.type==="point"&&(p.x=CL(p.x,n.targetGeometry.x,p.spatialReference));let m=0;l?m=l.rotation:t.hasOwnProperty("rotation")?m=t.rotation:n&&(m=n.rotation);let y=0;y=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0?n.scale:IT(Lz(u.extent,i),a,m);const v=k0e(t.target??t);v&&(v.min&&v.min<y?y=v.min:v.max&&v.max>y&&(y=v.max));let w=new xr({targetGeometry:p,scale:y,rotation:m});return r&&(w=r.fit(w),r.constrainByGeometry(w),r.rotationEnabled||(w.rotation=n.rotation)),w}function ys(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function I0e(t,e,i){return i?Lr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):h1(t,e,.5)}const $0e=function(){const t=Ri();return function(e,i,r){const s=i.targetGeometry;TL(t,s);const n=.5*rb(i);return e.xmin=t[0]-n*r[0],e.ymin=t[1]-n*r[1],e.xmax=t[0]+n*r[0],e.ymax=t[1]+n*r[1],e.spatialReference=s.spatialReference,e}}();function A0e(t,e,i,r,s){return G$(t,e,i.center),t.scale=IT(i,r),s?.constraints?.constrain(t),t}function O0e(t,e,i,r){return RL(t,e,i,r),SL(t,t)}const _J=function(){const t=Ri();return function(e,i,r){return xL(e,L0e(e,i),I0e(t,i,r))}}(),P0e=function(){const t=kl(),e=Ri();return function(i,r,s,n){const o=rb(r),a=ML(r);return Lr(e,o,o),hJ(t,e),p1(t,t,a),Ty(t,t,_J(e,s,n)),Ty(t,t,[0,n.top-n.bottom]),Lr(i,t[4],t[5])}}();function rb(t){return t.scale*xJ(t.targetGeometry?.spatialReference)}function xJ(t){return Jn(t)?1/(wJ(t)*bJ*yJ):1}function ML(t){return aL(t.rotation)||0}function D0e(t){return Jn(t)?wJ(t)*bJ*yJ:1}function L0e(t,e){return h1(t,e,.5)}const kL=function(){const t=Ri(),e=Ri(),i=Ri();return function(r,s,n,o,a,l){return tJ(t,s),h1(e,n,.5*l),Lr(i,1/o*l,-1/o*l),EL(r,e),a&&p1(r,r,a),RT(r,r,i),Ty(r,r,t),r}}(),RL=function(){const t=Ri();return function(e,i,r,s){const n=rb(i),o=ML(i);return TL(t,i.targetGeometry),kL(e,t,r,n,o,s)}}(),N0e=function(){const t=Ri();return function(e,i,r,s){const n=rb(i);return TL(t,i.targetGeometry),kL(e,t,r,n,0,s)}}();function SJ(t){const e=Us(t);return e?e.valid[1]-e.valid[0]:0}function F0e(t,e){return Math.round(SJ(t)/e)}const j0e=function(){const t=Ri(),e=Ri(),i=[0,0,0];return function(r,s,n){Ew(t,r,s),B$(t,t),Ew(e,r,n),B$(e,e),rJ(i,t,e);let o=Math.acos(iJ(t,e)/(RE(t)*RE(e)))*M0e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),z0e=function(){const t=Ri();return function(e,i,r,s){const n=e.targetGeometry;return ys(e,i),P0e(t,i,r,s),n.x+=t[0],n.y+=t[1],e}}(),G$=function(t,e,i){ys(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},V0e=function(){const t=Ri();return function(e,i,r,s,n){n||(n="center"),xL(t,r,s),h1(t,t,.5);const o=t[0],a=t[1];switch(n){case"center":Lr(t,0,0);break;case"left":Lr(t,-o,0);break;case"top":Lr(t,0,a);break;case"right":Lr(t,o,0);break;case"bottom":Lr(t,0,-a);break;case"top-left":Lr(t,-o,a);break;case"bottom-left":Lr(t,-o,-a);break;case"top-right":Lr(t,o,a);break;case"bottom-right":Lr(t,o,-a)}return $T(e,i,t),e}}();function yGe(t,e,i){return ys(t,e),t.rotation+=i,t}function U0e(t,e,i){return ys(t,e),t.rotation=i,t}const H0e=function(){const t=Ri();return function(e,i,r,s,n){return ys(e,i),isNaN(r)||r===0||(CJ(t,s,i,n),e.scale=i.scale*r,TJ(t,t,e,n),$T(e,e,Lr(t,t[0]-s[0],s[1]-t[1]))),e}}();function Nz(t,e,i){return ys(t,e),t.scale=i,t}const EJ=function(){const t=Ri();return function(e,i,r,s,n,o){return ys(e,i),isNaN(r)||r===0||(CJ(t,n,i,o),e.scale=i.scale*r,e.rotation+=s,TJ(t,t,e,o),$T(e,e,Lr(t,t[0]-n[0],n[1]-t[1]))),e}}(),bGe=function(){const t=Ri(),e=Ri();return function(i,r,s,n,o,a,l){return _J(e,a,l),XY(t,o,e),n?EJ(i,r,s,n,t,a):H0e(i,r,s,t,a)}}(),CJ=function(){const t=kl();return function(e,i,r,s){return ml(e,i,O0e(t,r,s,1))}}(),TJ=function(){const t=kl();return function(e,i,r,s){return ml(e,i,RL(t,r,s,1))}}(),$T=function(){const t=Ri(),e=kl();return function(i,r,s){ys(i,r);const n=rb(r),o=i.targetGeometry;return cJ(e,ML(r)),RT(e,e,d1(n,n)),ml(t,s,e),o.x+=t[0],o.y+=t[1],i}}();function MJ(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function B0e(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function G0e(t,e,i,r,s,n){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function kJ(t,e,i,r){const s=e[r],n=e[r+1];t[r]=i[0]*s+i[2]*n+i[4],t[r+1]=i[1]*s+i[3]*n+i[5]}function W0e(t,e,i,r=0,s=0,n=2){const o=s||e.length/n;for(let a=r;a<o;a++)kJ(t,e,i,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:B0e,create:MJ,fromValues:G0e,transform:kJ,transformMany:W0e},Symbol.toStringTag,{value:"Module"}));function q0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Y0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function RJ(t,e,i,r,s,n,o,a,l,u){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t}function IJ(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function J0e(t,e){if(t===e){const i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Z0e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=h*o-a*u,m=-h*n+a*l,y=u*n-o*l;let v=i*p+r*m+s*y;return v?(v=1/v,t[0]=p*v,t[1]=(-h*r+s*u)*v,t[2]=(a*r-s*o)*v,t[3]=m*v,t[4]=(h*i-s*l)*v,t[5]=(-a*i+s*n)*v,t[6]=y*v,t[7]=(-u*i+r*l)*v,t[8]=(o*i-r*n)*v,t):null}function X0e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t[0]=o*h-a*u,t[1]=s*u-r*h,t[2]=r*a-s*o,t[3]=a*l-n*h,t[4]=i*h-s*l,t[5]=s*n-i*a,t[6]=n*u-o*l,t[7]=r*l-i*u,t[8]=i*o-r*n,t}function K0e(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*(u*n-o*l)+i*(-u*s+o*a)+r*(l*s-n*a)}function IL(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=i[0],y=i[1],v=i[2],w=i[3],S=i[4],E=i[5],I=i[6],D=i[7],O=i[8];return t[0]=m*r+y*o+v*u,t[1]=m*s+y*a+v*h,t[2]=m*n+y*l+v*p,t[3]=w*r+S*o+E*u,t[4]=w*s+S*a+E*h,t[5]=w*n+S*l+E*p,t[6]=I*r+D*o+O*u,t[7]=I*s+D*a+O*h,t[8]=I*n+D*l+O*p,t}function W$(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=i[0],y=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=a,t[5]=l,t[6]=m*r+y*o+u,t[7]=m*s+y*a+h,t[8]=m*n+y*l+p,t}function $J(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=Math.sin(i),y=Math.cos(i);return t[0]=y*r+m*o,t[1]=y*s+m*a,t[2]=y*n+m*l,t[3]=y*o-m*r,t[4]=y*a-m*s,t[5]=y*l-m*n,t[6]=u,t[7]=h,t[8]=p,t}function Q0e(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function ewe(t,e,i){const r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function twe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function iwe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function rwe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function swe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function nwe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,u=i*o,h=r*o,p=r*a,m=s*o,y=s*a,v=s*l,w=n*o,S=n*a,E=n*l;return t[0]=1-p-v,t[3]=h-E,t[6]=m+S,t[1]=h+E,t[4]=1-u-v,t[7]=y-w,t[2]=m-S,t[5]=y+w,t[8]=1-u-p,t}function owe(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10],p=h*o-a*u,m=-h*n+a*l,y=u*n-o*l,v=i*p+r*m+s*y;if(!v)return null;const w=1/v;return t[0]=p*w,t[1]=(-h*r+s*u)*w,t[2]=(a*r-s*o)*w,t[3]=m*w,t[4]=(h*i-s*l)*w,t[5]=(-a*i+s*n)*w,t[6]=y*w,t[7]=(-u*i+r*l)*w,t[8]=(o*i-r*n)*w,t}function awe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],m=e[10],y=e[11],v=e[12],w=e[13],S=e[14],E=e[15],I=i*a-r*o,D=i*l-s*o,O=i*u-n*o,A=r*l-s*a,z=r*u-n*a,_=s*u-n*l,Z=h*w-p*v,Q=h*S-m*v,ae=h*E-y*v,ge=p*S-m*w,ne=p*E-y*w,ve=m*E-y*S;let xe=I*ve-D*ne+O*ge+A*ae-z*Q+_*Z;return xe?(xe=1/xe,t[0]=(a*ve-l*ne+u*ge)*xe,t[1]=(l*ae-o*ve-u*Q)*xe,t[2]=(o*ne-a*ae+u*Z)*xe,t[3]=(s*ne-r*ve-n*ge)*xe,t[4]=(i*ve-s*ae+n*Q)*xe,t[5]=(r*ae-i*ne-n*Z)*xe,t[6]=(w*_-S*z+E*A)*xe,t[7]=(S*O-v*_-E*D)*xe,t[8]=(v*z-w*O+E*I)*xe,t):null}function lwe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function uwe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function cwe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function hwe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function AJ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function dwe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function pwe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function fwe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function mwe(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=e[0],m=e[1],y=e[2],v=e[3],w=e[4],S=e[5],E=e[6],I=e[7],D=e[8],O=Hs();return Math.abs(i-p)<=O*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-m)<=O*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(s-y)<=O*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-v)<=O*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-w)<=O*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-S)<=O*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(l-E)<=O*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(u-I)<=O*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(h-D)<=O*Math.max(1,Math.abs(h),Math.abs(D))}function gwe(t){const e=Hs(),i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(s*s+a*a+h*h))<=e}const ywe=IL,bwe=AJ;Object.freeze(Object.defineProperty({__proto__:null,add:hwe,adjoint:X0e,copy:Y0e,determinant:K0e,equals:mwe,exactEquals:fwe,frob:cwe,fromMat2d:swe,fromMat4:q0e,fromQuat:nwe,fromRotation:iwe,fromScaling:rwe,fromTranslation:twe,identity:IJ,invert:Z0e,isOrthoNormal:gwe,mul:ywe,multiply:IL,multiplyScalar:dwe,multiplyScalarAndAdd:pwe,normalFromMat4:awe,normalFromMat4Legacy:owe,projection:lwe,rotate:$J,scale:Q0e,scaleByVec2:ewe,set:RJ,str:uwe,sub:bwe,subtract:AJ,translate:W$,transpose:J0e},Symbol.toStringTag,{value:"Module"}));function Xx(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function vwe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function wwe(t,e,i,r,s,n,o,a,l){const u=new Float32Array(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=r,u[4]=s,u[5]=n,u[6]=o,u[7]=a,u[8]=l,u}Object.freeze(Object.defineProperty({__proto__:null,clone:vwe,create:Xx,fromValues:wwe},Symbol.toStringTag,{value:"Module"}));function OJ(){return new Float32Array(2)}function _we(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function My(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function PJ(){return OJ()}function DJ(){return My(1,1)}function LJ(){return My(1,0)}function NJ(){return My(0,1)}const xwe=PJ(),Swe=DJ(),Ewe=LJ(),Cwe=NJ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Swe,UNIT_X:Ewe,UNIT_Y:Cwe,ZEROS:xwe,clone:_we,create:OJ,fromValues:My,ones:DJ,unitX:LJ,unitY:NJ,zeros:PJ},Symbol.toStringTag,{value:"Module"}));function Twe(t){return t instanceof Float32Array&&t.length>=2}function Mwe(t){return Array.isArray(t)&&t.length>=2}function E2(t){return Twe(t)||Mwe(t)}var q$;const Kl=[0,0];let fu=q$=class extends X{constructor(t){super(t),this._viewpoint2D={center:Ri(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new it,this.id=0,this.inverseTransform=kl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=kl(),this.transformNoRotation=kl(),this.displayMat3=Xx(),this.displayViewMat3=Xx(),this.viewMat3=Xx(),this.viewMat2d=MJ(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=ys(i,t.viewpoint),this._set("size",Rg(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new q$({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return E2(e)?ml(t,e,this.inverseTransform):(Kl[0]=e,Kl[1]=i,ml(t,Kl,this.inverseTransform))}toScreen(t,e,i){return E2(e)?ml(t,e,this.transform):(Kl[0]=e,Kl[1]=i,ml(t,Kl,this.transform))}toScreenNoRotation(t,e,i){return E2(e)?ml(t,e,this.transformNoRotation):(Kl[0]=e,Kl[1]=i,ml(t,Kl,this.transformNoRotation))}wrapMapCoordinate(t,e){Rg(t,e);const[i]=e,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=SJ(n)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=CL(i,r,n)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return kL(t,i,s,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new xr({targetGeometry:new ze(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!e||!i)return;this.resolution=rb(o),this.rotation=r,this.scale=i,this.spatialReference=e,Rg(this.center,t);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;RJ(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=IJ(this.viewMat3),h=My(n[0]/2,n[1]/2),p=My(-n[0]/2,-n[1]/2),m=aL(r);W$(u,u,h),$J(u,u,m),W$(u,u,p),IL(this.displayViewMat3,this.displayMat3,u);const y=EL(this.viewMat2d,h);return p1(y,y,m),Ty(y,y,p),$0e(this.extent,o,n),RL(this.transform,o,n,s),SL(this.inverseTransform,this.transform),N0e(this.transformNoRotation,o,n,s),this.worldScreenWidth=F0e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};c([d({readOnly:!0})],fu.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],fu.prototype,"pixelRatio",null),c([d({json:{write:!0}})],fu.prototype,"size",null),c([d()],fu.prototype,"spatialReference",void 0),c([d({type:xr,json:{write:!0}})],fu.prototype,"viewpoint",null),c([d({readOnly:!0})],fu.prototype,"visibleArea",null),fu=q$=c([R("esri.views.2d.ViewState")],fu);const Fz=fu;var Y$,J$;let Hu=Y$=class extends Oe{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Y$({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Hu.prototype,"left",void 0),c([d()],Hu.prototype,"top",void 0),c([d()],Hu.prototype,"right",void 0),c([d()],Hu.prototype,"bottom",void 0),Hu=Y$=c([R("esri.views.2d.PaddedViewState.Padding")],Hu);let pm=J$=class extends Fz{constructor(...t){super(...t),this.paddedViewState=new Fz,this._updateContent=(()=>{const e=Ri();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;Lr(e,r.left+r.right,r.top+r.bottom),Ew(e,i,e),Rg(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(Ue(()=>[this.size,this.padding],()=>this._updateContent(),Al)),this.padding=new Hu,this.size=[0,0]}set padding(t){this._set("padding",t||new Hu)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=z0e(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=e,{x:o,y:a,spatialReference:l}=r,u=this._viewpoint2D;u.center[0]=o,u.center[1]=a,u.rotation=s,u.scale=n,u.spatialReference=l,this._update()}}clone(){return new J$({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],pm.prototype,"paddedViewState",void 0),c([d({type:Hu})],pm.prototype,"padding",null),c([d()],pm.prototype,"viewpoint",null),pm=J$=c([R("esri.views.2d.PaddedViewState")],pm);const $L=pm;var ns;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(ns||(ns={}));const FJ=Symbol("Yield");let kwe=class{constructor(){this._tasks=new Array,this._numPendingTasks=Wp(0),this._running=Wp(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return FJ;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return new Promise((s,n)=>{this._tasks.push(new jz(s,n,e,i,r)),++this._numPendingTasks.value,this._updateRunning()}).finally(()=>--this._numPendingTasks.value)}unshift(e,i,r){return new Promise((s,n)=>{this._tasks.unshift(new jz(s,n,e,i,r)),++this._numPendingTasks.value,this._updateRunning()}).finally(()=>--this._numPendingTasks.value)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateRunning();try{const r=$o(i.signal);if(r&&!i.abortCallback)i.reject(Qt());else{const s=r?i.abortCallback?.(Qt()):i.callback(e);zl(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(r){i.reject(r)}return!0}cancelAll(){const e=Qt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._updateRunning()}},jz=class{constructor(e,i,r,s=void 0,n=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}},Lv=class extends Oe{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],Lv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],Lv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Lv=c([R("esri.views.support.debugFlags")],Lv);const Rwe=new Lv;function Iwe(){return new IE.Scheduler}var at;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.OVERLAY_RENDERER="overlay renderer",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(at||(at={}));const wo=0,zz=new Map([[at.RESOURCE_CONTROLLER_IMMEDIATE,wo],[at.RESOURCE_CONTROLLER,4],[at.SLIDE,wo],[at.STREAM_DATA_LOADER,wo],[at.ELEVATION_QUERY,wo],[at.TERRAIN_SURFACE,1],[at.SURFACE_GEOMETRY_UPDATES,1],[at.LOD_RENDERER,2],[at.GRAPHICS_CORE,2],[at.I3S_CONTROLLER,2],[at.POINT_CLOUD_LAYER,2],[at.FEATURE_TILE_FETCHER,2],[at.CLOUDS_GENERATOR,2],[at.OVERLAY,4],[at.OVERLAY_RENDERER,4],[at.STAGE,4],[at.GRAPHICS_DECONFLICTOR,4],[at.FILTER_VISIBILITY,4],[at.SCALE_VISIBILITY,4],[at.FRUSTUM_VISIBILITY,4],[at.POINT_OF_INTEREST_FREQUENT,6],[at.POINT_OF_INTEREST_INFREQUENT,30],[at.LABELER,8],[at.FEATURE_QUERY_ENGINE,8],[at.FEATURE_TILE_TREE,16],[at.FEATURE_TILE_TREE_ACTIVE,wo],[at.ELEVATION_ALIGNMENT,12],[at.ELEVATION_ALIGNMENT_SCENE,14],[at.TEXT_TEXTURE_ATLAS,12],[at.TEXTURE_UNLOAD,12],[at.LINE_OF_SIGHT_TOOL,16],[at.LINE_OF_SIGHT_TOOL_INTERACTIVE,wo],[at.SNAPPING,wo],[at.SHADOW_ACCUMULATOR,30],[at.MAPVIEW_FETCH_QUEUE,wo],[at.MAPVIEW_LAYERVIEW_UPDATE,2],[at.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,wo]]);function Vz(t){return zz.has(t)?zz.get(t):typeof t=="number"?t:1}const $we=6.5,Uz=1,Awe=30,Owe=1e3/30,Pwe=100,Hz=.9;var IE,fd;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=Wp(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new f0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=ns.INTERACTING,this._tasks=new m0,this._runQueue=new m0,this._load=0,this._idleStateCallbacks=new m0,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Ue(()=>Rwe.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,vs);for(const n of Object.keys(at))this.performanceInfo.tasks.set(at[n],new f0(at[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),vi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(n,o){const a=new i(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new f0(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===ns.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===ns.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==ns.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=$we,a=n.frameDuration,l=Uz;switch(this.state){case ns.IDLE:o=0,a=Math.max(Pwe,n.frameDuration),l=Awe;break;case ns.INTERACTING:a=Math.max(Owe,n.frameDuration);case ns.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==ns.IDLE&&a<Uz&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ns.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case ns.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return fd.SCHEDULED;let o=fd.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=fd.READY:o!==fd.READY&&(o=fd.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*Hz+n*(1-Hz)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===wo&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==wo&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===FJ&&(o.blockFrame=this._frameNumber)}catch(l){he.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,at.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-n;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(at))this._frameTaskTimes.set(at[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new kwe,this._handles=new Hy,this._basePriority=Vz(o),this.schedulePriority=this._basePriority,this._task=Wp(a??this._queue),this._handles.add(Ws(()=>this.task.running,l=>n.taskRunningChanged(l)))}remove(){this.processQueue(AL),this._scheduler.removeTask(this),this.schedule=Bz.schedule,this.reschedule=Bz.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=Vz(n);this._basePriority!==wo&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class r{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n){this._begin=this.now(),this._budget=n,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(IE||(IE={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(fd||(fd={}));const AL=new IE.Budget;AL.enabled=!1;let Dwe=class{remove(){}processQueue(){}schedule(e,i,r){try{if($o(i)){const s=Qt();return r?Promise.resolve(r(s)):Promise.reject(s)}return Hk(e(AL))}catch(s){return Promise.reject(s)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const Bz=new Dwe;let Lwe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=Iwe(),this._schedulerHandle=Ws(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||zl(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=ns.ANIMATING:this.view.interacting?this._scheduler.state=ns.INTERACTING:this._scheduler.state=ns.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==ns.IDLE||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new $L,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Ue(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=dy(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function Nwe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let s,n,o,a;const l=[0,0],u=Fwe(t);for(let m=0;m<u.length;m++){const y=u[m];for(let v=0;v<y.length-1;v++){jae(l,r,y,v);const w=kT(r,l);(s==null||w<s)&&(s=w,n=[...l],o=m,a=v)}}if(s==null||!n||o==null||a==null)throw new W("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,p]=n;return{coordinate:new ze({x:h,y:p,spatialReference:i}),distance:s}}function Fwe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var Z$;let cp=Z$=class extends tb.NumericIdentifiableMixin(Oe){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return qh(this.geometry,this.spatialReference)}catch(t){return he.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?e1(this.normalizedGeometry,i):ED(this.normalizedGeometry,i))return t;const{coordinate:r}=Nwe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){return new Z$({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};c([d({constructOnly:!0})],cp.prototype,"geometry",void 0),c([d({readOnly:!0})],cp.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],cp.prototype,"spatialReference",void 0),cp=Z$=c([R("esri.views.2d.constraints.GeometryConstraint")],cp);var X$;let Nv=X$=class extends tb.NumericIdentifiableMixin(Oe){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new X$({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],Nv.prototype,"enabled",void 0),c([d()],Nv.prototype,"rotationEnabled",void 0),Nv=X$=c([R("esri.views.2d.constraints.RotationConstraint")],Nv);const jJ=Nv;var K$;let rn=K$=class extends tb.NumericIdentifiableMixin(Oe){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(h=>h.clone()),e.sort((h,p)=>p.scale-h.scale),e.forEach((h,p)=>h.level=p);for(const h of e)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!u&&r>0&&r>=h.scale&&(a=t?t.level:-1,u=!0),t=h;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?e.length-1:a),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),i=e[s].scale,r=e[n].scale,e.splice(0,s),e.splice(n-s+1),e.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&n){const u=(l-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*u,s.y=n.y+(s.y-n.y)*u}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],r=e[s+1],r===t)return s+this.effectiveMinZoom+1;if(i>t&&r<t)return s+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new K$({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};c([d({readOnly:!0})],rn.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],rn.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],rn.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],rn.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],rn.prototype,"effectiveMaxScale",void 0),c([d()],rn.prototype,"lods",void 0),c([d()],rn.prototype,"minZoom",void 0),c([d()],rn.prototype,"maxZoom",void 0),c([d()],rn.prototype,"minScale",void 0),c([d()],rn.prototype,"maxScale",void 0),c([d()],rn.prototype,"snapToZoom",void 0),rn=K$=c([R("esri.views.2d.constraints.ZoomConstraint")],rn);const zJ=rn,jwe={base:null,key:"type",typeMap:{extent:it,polygon:ui}};let Pi=class extends Oe{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new _e}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new cp({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new jJ({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===s&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===a?e:new zJ({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>i.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0})],Pi.prototype,"effectiveLODs",null),c([d({readOnly:!0})],Pi.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],Pi.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],Pi.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],Pi.prototype,"effectiveMaxZoom",null),c([d({types:jwe,value:null})],Pi.prototype,"geometry",null),c([d({type:[Jr]})],Pi.prototype,"lods",void 0),c([d()],Pi.prototype,"minScale",void 0),c([d()],Pi.prototype,"maxScale",void 0),c([d()],Pi.prototype,"minZoom",void 0),c([d()],Pi.prototype,"maxZoom",void 0),c([d()],Pi.prototype,"rotationEnabled",void 0),c([d()],Pi.prototype,"snapToZoom",void 0),c([d({type:_e})],Pi.prototype,"customConstraints",void 0),c([d()],Pi.prototype,"view",void 0),c([d({readOnly:!0})],Pi.prototype,"version",null),c([d({type:cp,readOnly:!0})],Pi.prototype,"_geometry",null),c([d({type:jJ})],Pi.prototype,"_rotation",null),c([d({readOnly:!0,type:zJ})],Pi.prototype,"_zoom",null),Pi=c([R("esri.views.2d.MapViewConstraints")],Pi);const Gz=Pi;let rs=class extends Oe{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Ue(()=>this.constraints?.version,i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Al)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new ze({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void he.getLogger(this).error(new W("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const r=this.viewpoint;G$(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void he.getLogger(this).error(new W("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void he.getLogger(this).error(new W("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;A0e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;U0e(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;Nz(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new W("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new W("mapview:invalid-viewpoint","geometry not defined"))}catch(n){r=new W("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(r)return void he.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new xr({targetGeometry:new ze,scale:0,rotation:0});ys(s,i),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.constraints?.zoomToScale(e)??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;Nz(r,r,i),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),u=this._get("zoom"),h=u!=null&&r!=null&&r.zoomToScale(u)||void 0;let p,m,y;const v=l?.rotation,w=l?.targetGeometry;w?.type==="extent"?p=w:w?.type==="point"&&(m=w,y=l?.scale);const S=n??p;return{center:s??m??S?.center,rotation:a??v,scale:(o??h??y??(S&&IT(S,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,s){const n=e.targetGeometry;try{this._project(e,r)}catch(o){he.getLogger(this).warn(new to("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:o})),e.targetGeometry=s||new ze({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new $L({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,o=new ze({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const l=i.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=l}const r=i.clone(),[s,n]=i.center;let o=null;try{o=this._project(new ze({x:s,y:n,spatialReference:i.spatialReference}),e)}catch(l){vD()||he.getLogger(this).warn(new to("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:l}))}o||(o=new ze({x:0,y:0,spatialReference:e}));const a=G$(new xr({targetGeometry:new ze,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const u=[i.size[0]/2,i.size[1]/2],h=[u[0]+20,u[1]],p=i.toMap([0,0],h),{x:m,y}=this._project(new ze({x:p[0],y:p[1],spatialReference:i.spatialReference}),e);p[0]=m,p[1]=y,r.toScreen(p,p);const v=j0e(u,p,h),w=Math.hypot(p[0]-u[0],p[1]-u[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new ze({x:0,y:0,spatialReference:e})):(a.scale*=w,a.scale>J("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[e,i],V0e(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[e.x,e.y]),n=this.state.spatialReference;return new ze({x:r,y:s,spatialReference:n})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),s=[r.x,r.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),jr(s[0],s[1])}_project(e,i){const r=e?.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||Er(i,r.spatialReference))return e;const s=qh(r,i);if(!s)throw new W("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return zwe(e)?(e.targetGeometry=s,e):s}};function zwe(t){return t?.declaredClass==="esri.Viewpoint"}c([d({type:ze})],rs.prototype,"center",null),c([d()],rs.prototype,"constraints",void 0),c([d({type:it})],rs.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],rs.prototype,"padding",null),c([d()],rs.prototype,"ready",void 0),c([d()],rs.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],rs.prototype,"resolution",null),c([d({type:Number})],rs.prototype,"rotation",null),c([d({type:Number})],rs.prototype,"scale",null),c([d({readOnly:!0})],rs.prototype,"state",void 0),c([d({type:xr})],rs.prototype,"viewpoint",null),c([d({readOnly:!0})],rs.prototype,"visibleArea",null),c([d()],rs.prototype,"zoom",null),rs=c([R("esri.views.2d.ViewStateManager")],rs);const Wz=160;let Fv=class extends Oe{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Wz&&this.clear()},Wz))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],Fv.prototype,"_timer",void 0),c([d()],Fv.prototype,"stationary",null),Fv=c([R("esri.views.2d.support.StationaryManager")],Fv);const Vwe=t=>{let e=class extends t{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new rs({constraints:new Gz({view:this})}),this.stationaryManager=new Fv,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new Lwe(this),this.viewEvents=new NY(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Ue(()=>this.viewpoint,()=>this.stationaryManager.flip(),Al)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const s=()=>{this.destroyed||i===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};i.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r?.destroy()}get padding(){return this.stateManager?.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return c([d({readOnly:!0})],e.prototype,"animationManager",void 0),c([d({readOnly:!0})],e.prototype,"fullOpacity",void 0),c([d()],e.prototype,"stateManager",void 0),c([d()],e.prototype,"constraintsInfo",null),c([d()],e.prototype,"extent",null),c([d({readOnly:!0})],e.prototype,"state",null),c([d({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),c([d()],e.prototype,"renderingOptions",void 0),c([d({readOnly:!0})],e.prototype,"interacting",null),c([d()],e.prototype,"stationary",null),c([d()],e.prototype,"animation",null),c([d({type:Gz})],e.prototype,"constraints",null),c([d()],e.prototype,"padding",null),c([d()],e.prototype,"resizeAlign",null),c([d()],e.prototype,"rotation",null),c([d({readOnly:!0})],e.prototype,"viewEvents",void 0),c([d({type:xr})],e.prototype,"viewpoint",null),e=c([R("esri.views.Viewport2DBaseMixin")],e),e};let Lc=class extends Sl{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=eo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new W("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,i){i||(i=zl(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};c([d({readOnly:!0})],Lc.prototype,"done",null),c([d({readOnly:!0,type:String})],Lc.prototype,"state",void 0),c([d()],Lc.prototype,"target",void 0),Lc=c([R("esri.views.ViewAnimation")],Lc),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Lc||(Lc={}));const Q$=Lc;let Kx=class extends Oe{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void he.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new Q$;this.view.animation=r,await YC(()=>this.view.ready,i);const s={...i,animate:i?.animate??!HY(),animationMode:i?.animationMode??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:h,allLayerViews:p}=this.view,m=R0e(e,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:h,allLayerViews:p,pickClosestTarget:i?.pickClosestTarget??!0});return r?.update(m),this._gotoTask={},s.animate?this._gotoAnimated(m,s):this._gotoImmediate(m,s)}_gotoImmediate(e,i){const r=this._gotoTask,s=this.view.animation,n=e.then(o=>{if(hi(i),r!==this._gotoTask)throw new W("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(e,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then(o=>{if(hi(i),r!==this._gotoTask)throw new W("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(e,i,r,s){const n=()=>e===this._gotoTask;return C8(r,s).finally(()=>{n()&&(i.done||i.stop())})}};c([d({constructOnly:!0})],Kx.prototype,"view",void 0),Kx=c([R("esri.views.2d.GoToManager")],Kx);function VJ(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function UJ(t,e){return e.some(i=>VJ(t,i))}function qz(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(s=>s.value===t).map(s=>s.key)}let Yz=class extends Cr{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){VJ(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Uwe=class extends Cr{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,u=this._startScale*l,h=u/this._currentScale;a.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:h}=l;if(!h||!u)return void a.end();const p=l.snapScale(this._currentScale),m=(n.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},AT=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Hwe=class extends Cr{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new AT({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&UJ(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Bwe=class extends Cr{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new AT({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&UJ(o.data,this.pointerActions)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function HJ(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function Gwe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Wwe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function qwe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function BJ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function GJ(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function WJ(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Ywe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Jwe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Zwe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function Xwe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function Kwe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function Qwe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function e1e(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function t1e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function qJ(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function i1e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function YJ(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}function JJ(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s}function ZJ(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function r1e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function s1e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function eA(t,e){const i=e[0],r=e[1],s=e[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function XJ(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function n1e(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2];return t[0]=s*l-n*a,t[1]=n*o-r*l,t[2]=r*a-s*o,t}function o1e(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],u=s*l-n*a,h=n*o-r*l,p=r*a-s*o,m=Math.sqrt(u*u+h*h+p*p);return t[0]=u/m,t[1]=h/m,t[2]=p/m,t}function a1e(t,e,i,r){const s=e[0],n=e[1],o=e[2];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t}function l1e(t,e,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,u=o*(n-1),h=o*(3-2*n);return t[0]=e[0]*a+i[0]*l+r[0]*u+s[0]*h,t[1]=e[1]*a+i[1]*l+r[1]*u+s[1]*h,t[2]=e[2]*a+i[2]*l+r[2]*u+s[2]*h,t}function u1e(t,e,i,r,s,n){const o=1-n,a=o*o,l=n*n,u=a*o,h=3*n*a,p=3*l*o,m=l*n;return t[0]=e[0]*u+i[0]*h+r[0]*p+s[0]*m,t[1]=e[1]*u+i[1]*h+r[1]*p+s[1]*m,t[2]=e[2]*u+i[2]*h+r[2]*p+s[2]*m,t}function c1e(t,e=1){const i=wT,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=s*e,t}function h1e(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12],t[1]=i[1]*r+i[5]*s+i[9]*n+i[13],t[2]=i[2]*r+i[6]*s+i[10]*n+i[14],t}function d1e(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=r*i[0]+s*i[3]+n*i[6],t[1]=r*i[1]+s*i[4]+n*i[7],t[2]=r*i[2]+s*i[5]+n*i[8],t}function p1e(t,e,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=e[0],l=e[1],u=e[2],h=s*u-n*l,p=n*a-r*u,m=r*l-s*a,y=s*m-n*p,v=n*h-r*m,w=r*p-s*h,S=2*o;return t[0]=a+h*S+2*y,t[1]=l+p*S+2*v,t[2]=u+m*S+2*w,t}function f1e(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function m1e(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function g1e(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function y1e(t,e){eA(Jz,t),eA(Zz,e);const i=XJ(Jz,Zz);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Jz=Gh(),Zz=Gh();function b1e(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function v1e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function w1e(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=e[0],o=e[1],a=e[2],l=Hs();return Math.abs(i-n)<=l*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function _1e(t,e,i){const r=i[0]-e[0],s=i[1]-e[1],n=i[2]-e[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=s*o,t[2]=n*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const x1e=BJ,S1e=GJ,E1e=WJ,C1e=YJ,T1e=JJ,M1e=HJ,k1e=ZJ;Object.freeze(Object.defineProperty({__proto__:null,abs:Zwe,add:qwe,angle:y1e,bezier:u1e,ceil:Ywe,clamp:e1e,copy:Gwe,cross:n1e,crossAndNormalize:o1e,direction:_1e,dist:C1e,distance:YJ,div:E1e,divide:WJ,dot:XJ,equals:w1e,exactEquals:v1e,floor:Jwe,hermite:l1e,inverse:s1e,len:M1e,length:HJ,lerp:a1e,max:Qwe,min:Kwe,mul:S1e,multiply:GJ,negate:r1e,normalize:eA,random:c1e,rotateX:f1e,rotateY:m1e,rotateZ:g1e,round:t1e,scale:qJ,scaleAndAdd:i1e,set:Wwe,sign:Xwe,sqrDist:T1e,sqrLen:k1e,squaredDistance:JJ,squaredLength:ZJ,str:b1e,sub:x1e,subtract:BJ,transformMat3:d1e,transformMat4:h1e,transformQuat:p1e},Symbol.toStringTag,{value:"Module"}));function Zo(t){let e=t*t;return t<0&&(e*=-1),e}function R1e(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function I1e(t,e,i){const r=i,s=t.state,n=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=Zo(s.axes[0]),r.translation[1]=Zo(s.axes[1]),r.translation[2]=Zo(s.buttons[7])-Zo(s.buttons[6]),r.heading=Zo(s.axes[2]),r.tilt=Zo(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*Zo(s.axes[0]),r.translation[1]=1.2*Zo(s.axes[1]),r.translation[2]=2*-Zo(s.axes[2]),r.heading=1.2*Zo(s.axes[5]),r.tilt=1.2*Zo(s.axes[3])),r.tilt*=o,qJ(r.translation,r.translation,a),r}function $1e(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let A1e=class extends Cr{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Hy,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Ue(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=dy({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},vs)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,R1e(this._transformation)):(this._currentDevice=e.data.device,I1e(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const i=this._transformation;if($1e(i))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=P1e*s*e;$T(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*D1e*e,a=this._view.constraints.rotationEnabled?-i.heading*O1e*e:0,l=this._view.size,u=[l[0]/2,l[1]];EJ(r,r,o,a,u,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const O1e=.06,P1e=.7,D1e=6e-4;function KJ(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Mt(()=>document.removeEventListener("visibilitychange",e))}let L1e=class extends Cr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=KJ(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},N1e=class extends Cr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=KJ(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var ug;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(ug||(ug={}));let F1e=class extends Cr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=ug.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=ug.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case ug.IN:o=n.zoomIn();break;case ug.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),e.stopPropagation()}};const j1e=.6;let z1e=class extends Cr{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=e.data,o=1/j1e**(1/60*n),a=i.zoom(o,[r,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},V1e=class extends Cr{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new AT({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Xz(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>B1e(i,t.axisThreshold))}:{buttons:[],axes:[]}}function U1e(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function H1e(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function B1e(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let G1e=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,Xz(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(Kz(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new wL(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=dy({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;Kz(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=Xz(n),l=r||H1e(a);o&&(o.timestamp===s.timestamp||!o.active&&l||U1e(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(e,i,r){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function W1e(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function Kz(t){for(const e of navigator.getGamepads())W1e(e)&&t(e)}const Qz=J("edge"),q1e=J("chrome"),Y1e=J("ff"),J1e=J("safari"),e5="esri-view-surface",Uf={touchNone:`${e5}--touch-none`,touchPan:`${e5}--touch-pan`};var Vp;let Z1e=(Vp=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new G1e(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=ci(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(C2[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&C2[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(C2[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Uf.touchNone:Uf.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Uf.touchPan:Uf.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Uf.touchNone),this._element.classList.remove(Uf.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=jY(this._element,e);return Vp.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&J("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:Qz&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Qz?r*=.7:q1e||J1e?r*=.6:Y1e&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},Vp.test={disableSubpixelCoordinates:!1},Vp);const C2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let X1e=class extends Cr{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const QJ=()=>({maximumClickDelay:300}),K1e=(t={})=>({...QJ(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),OL=(t={})=>({...QJ(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function $E(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Q1e(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function e_e(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:jr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[D,O]=t,[A,z]=[O.x-D.x,O.y-D.y];return e.radius=Math.sqrt(A*A+z*z)/2,e.center.x=(D.x+O.x)/2,e.center.y=(D.y+O.y)/2,e}let i=0,r=0;for(let D=0;D<t.length;D++)i+=t[D].x,r+=t[D].y;i/=t.length,r/=t.length;const s=t.map(D=>D.x-i),n=t.map(D=>D.y-r);let o=0,a=0,l=0,u=0,h=0,p=0,m=0;for(let D=0;D<s.length;D++){const O=s[D],A=n[D],z=O*O,_=A*A;o+=z,a+=_,l+=O*A,u+=z*O,h+=_*A,p+=O*_,m+=A*z}const y=.5*(u+p),v=.5*(h+m),w=o*a-l*l,S=(y*a-v*l)/w,E=(o*v-l*y)/w,I=jr(S+i,E+r);return{radius:Math.sqrt(S*S+E*E+(o+a)/t.length),center:I}}function Op(t){const{native:e}=t,{pointerId:i,button:r,pointerType:s}=e;return s==="mouse"?`${i}:${r}`:`${s}`}let t_e=class extends Cr{constructor(e={},i=jy){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=jr(0,0),this._pointerState=new Map,this._parameters=OL(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new AT({start:(r,s)=>this._dragStart(r,s),update:(r,s)=>this._dragUpdate(s),end:(r,s)=>this._dragEnd(s)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=vi(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=vi(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=T2("begin",jr(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=T2("update",jr(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=T2("end",jr(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=Op(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),$E(s.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,s=Op(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function T2(t,e,i){const{button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let i_e=class extends Cr{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:r_e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=o_(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=Qx(s,eZ(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=o_(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=o_(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=Qx(r,i)-e,r.lastAngle=Qx(r,i)-e})}_emitEvent(e,i,r){const s=o_(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function eZ(t){const e=[];return t.forEach(i=>{e.push(jr(i.event.x,i.event.y))}),e_e(e)}function o_(t){const e=eZ(t);let i=0;return t.forEach(r=>{let s=Qx(r,e),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function r_e(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function Qx(t,e){const i=t.event,r=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,r)}var t5;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(t5||(t5={}));let s_e=class extends Cr{constructor(e={},i=jy){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=OL(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=Op(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=Op(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),$E(n,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(i))):$E(s,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=Op(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},n_e=class extends Cr{constructor(e={},i=jy){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=K1e(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=vi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(a_("update",s,i),void 0,s.modifiers):Q1e(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(a_("start",s,i)):this._pointerDrag.emit(a_("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(a_("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&e.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function a_(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let o_e=class extends Cr{constructor(e={},i=jy){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=OL(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=vi(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=vi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,s=a_e(i);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;$E(o,i)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=Op(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,s=Op(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function a_e(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const l_={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},i5=Symbol("handles");let Ud=class extends Oe{initialize(){const e=()=>this.view?.ready;this.addHandles([Ws(()=>!e(),()=>this._disconnect()),Ws(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(i5),this._inputManager=ci(this._inputManager)}_connect(){const e=this.view.surface,i=new Z1e(e,this.view.input),r=[new s_e,new n_e,new o_e,new i_e(this.view.navigation),new t_e],s=new uo({eventSource:i,recognizers:r}),n=new Hwe(this.view,["primary"]),o=new Bwe(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new X1e],ic.INTERNAL),s.installHandlers("navigation",[new V1e(this.view),new A1e(this.view),new z1e(this.view),new Yz(this.view),new Yz(this.view,[l_.counter]),n,new L1e(this.view,l_.pan),new F1e(this.view,l_.zoom),new N1e(this.view,l_.rotate),o,new Uwe(this.view,"touch")],ic.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,this.addHandles([Ue(()=>this.view?.navigation?.browserTouchPanEnabled,a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},vs),Ue(()=>{const{actionMap:a}=this.view.navigation;return{panActions:qz("pan",a),rotateActions:qz("rotate",a)}},({panActions:a,rotateActions:l})=>{n.pointerActions=a,o.pointerActions=l},Ps)],i5)}get test(){}};c([d()],Ud.prototype,"view",void 0),c([d()],Ud.prototype,"latestPointerType",null),c([d()],Ud.prototype,"latestPointerLocation",null),c([d()],Ud.prototype,"multiTouchActive",null),Ud=c([R("esri.views.2d.input.MapViewInputManager")],Ud);const l_e=Ud,u_e=t=>{let e=class extends t{constructor(...i){super(...i),this.goToManager=new Kx({view:this}),this.inputManager=new l_e({view:this}),this.addHandles([this.on("resize",r=>this.stateManager.resize(r.width,r.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,r,s,n){return this.inputManager&&this.viewEvents.on(i,r,s,n)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}toMap(i){if(!this.ready)return null;const r=VY(i)?zY(this,i):i;return this.stateManager.toMap(r)}};return c([d()],e.prototype,"goToManager",void 0),c([d({readOnly:!0})],e.prototype,"interacting",null),c([d()],e.prototype,"stationary",null),c([d({readOnly:!0})],e.prototype,"inputManager",void 0),e=c([R("esri.views.Viewport2DMixin")],e),e};let r5=class{constructor(e){this._view=e,this.viewpoint=new xr({targetGeometry:new ze,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return xJ(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=fG(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=Qw(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=av(e.center.x,i.center.x,s),l.y=av(e.center.y,i.center.y,s),this.viewpoint.scale=av(e.scale,i.scale+a,o);let u=e.rotation;const h=i.rotation;Math.abs(h-u)>=180&&(u+=360*(u<h?1:-1)),this.viewpoint.rotation=av(u,h,n)}copyFrom(e){ys(this.viewpoint,e.viewpoint),this._view=e.view}};function Fb(t,e,i,r){const s=3*t,n=3*(i-t)-s,o=1-s-n,a=3*e,l=3*(r-e)-a,u=1-a-l;function h(v){return((o*v+n)*v+s)*v}function p(v){return((u*v+l)*v+a)*v}function m(v){return(3*o*v+2*n)*v+s}function y(v,w){let S,E,I,D,O,A;for(I=v,A=0;A<8;A++){if(D=h(I)-v,Math.abs(D)<w)return I;if(O=m(I),Math.abs(O)<1e-6)break;I-=D/O}if(S=0,E=1,I=v,I<S)return S;if(I>E)return E;for(;S<E;){if(D=h(I),Math.abs(D-v)<w)return I;v>D?S=I:E=I,I=.5*(E-S)+S}return I}return function(v,w=1e-6){return p(y(v,w))}}const xo={};xo.ease=Fb(.25,.1,.25,1),xo.linear=Fb(0,0,1,1),xo.easeIn=xo["ease-in"]=Fb(.42,0,1,1),xo.easeOut=xo["ease-out"]=Fb(0,0,.58,1),xo.easeInOut=xo["ease-in-out"]=Fb(.42,0,.58,1);const c_e=t=>t,Cw=t=>t*t,AE=t=>1-Cw(1-t),s5=t=>t<.5?Cw(2*t)/2:(AE(2*(t-.5))+1)/2,OE=t=>t*t*t,tA=t=>1-OE(1-t),n5=t=>t<.5?OE(2*t)/2:(tA(2*(t-.5))+1)/2,PE=t=>t*t*t*t,iA=t=>1-PE(1-t),o5=t=>t<.5?PE(2*t)/2:(iA(2*(t-.5))+1)/2,DE=t=>t*t*t*t*t,rA=t=>1-DE(1-t),a5=t=>t<.5?DE(2*t)/2:(rA(2*(t-.5))+1)/2,LE=t=>1-Math.cos(t*Math.PI/2),sA=t=>1-LE(1-t),l5=t=>t<.5?LE(2*t)/2:(sA(2*(t-.5))+1)/2,NE=t=>2**(10*(t-1)),FE=t=>1-NE(1-t),u5=t=>t<.5?NE(2*t)/2:(FE(2*(t-.5))+1)/2,jE=t=>-(Math.sqrt(1-t*t)-1),nA=t=>1-jE(1-t),c5=t=>t<.5?jE(2*t)/2:(nA(2*(t-.5))+1)/2;function Lo(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function No(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const h5=No(Lo(1),1),d5=No(Lo(1),0),zE=No(Lo(1),.5),p5=No(Lo(2),1),f5=No(Lo(2),0),m5=No(Lo(2),.5),g5=No(Lo(3),1),y5=No(Lo(3),0),b5=No(Lo(3),.5),v5=No(Lo(4),1),w5=No(Lo(4),0),_5=No(Lo(4),.5),x5={linear:c_e,"in-quad":Cw,"out-quad":AE,"in-out-quad":s5,"in-coast-quad":h5,"out-coast-quad":d5,"in-out-coast-quad":zE,"in-cubic":OE,"out-cubic":tA,"in-out-cubic":n5,"in-coast-cubic":p5,"out-coast-cubic":f5,"in-out-coast-cubic":m5,"in-quart":PE,"out-quart":iA,"in-out-quart":o5,"in-coast-quart":g5,"out-coast-quart":y5,"in-out-coast-quart":b5,"in-quint":DE,"out-quint":rA,"in-out-quint":a5,"in-coast-quint":v5,"out-coast-quint":w5,"in-out-coast-quint":_5,"in-sine":LE,"out-sine":sA,"in-out-sine":l5,"in-expo":NE,"out-expo":FE,"in-out-expo":u5,"in-circ":jE,"out-circ":nA,"in-out-circ":c5,"quad-in":Cw,"quad-out":AE,"quad-in-out":s5,"quad-in-coast":h5,"quad-out-coast":d5,"quad-in-out-coast":zE,"cubic-in":OE,"cubic-out":tA,"cubic-in-out":n5,"cubic-in-coast":p5,"cubic-out-coast":f5,"cubic-in-out-coast":m5,"quart-in":PE,"quart-out":iA,"quart-in-out":o5,"quart-in-coast":g5,"quart-out-coast":y5,"quart-in-out-coast":b5,"quint-in":DE,"quint-out":rA,"quint-in-out":a5,"quint-in-coast":v5,"quint-out-coast":w5,"quint-in-out-coast":_5,"sine-in":LE,"sine-out":sA,"sine-in-out":l5,"expo-in":NE,"expo-out":FE,"expo-in-out":u5,"circ-in":jE,"circ-out":nA,"circ-in-out":c5,ease:t=>xo.ease(t),"ease-in":t=>xo.easeIn(t),"ease-out":t=>xo.easeOut(t),"ease-in-out":t=>xo.easeInOut(t)};let h_e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const VE={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},tZ={maxDuration:4e3};let d_e=class iZ{constructor(e){this._createCamera=e,this.compared=new h_e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:VE.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new iZ(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??VE.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Hs()}get hasFov(){return Math.abs(this.compared.fov)>Hs()}get hasRotate(){return this.compared.rotate>Hs()}},p_e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},f_e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],u=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+u.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+u.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(u.compared.targetZoom)){const{sourceZoom:h,targetZoom:p}=u.compared,m=i.zoom*(p-h)+h,y=this.segments[0].definition.compared.sourceZoom,v=this.segments[this.segments.length-1].definition.compared.targetZoom,w=Math.abs(p-y)>Math.abs(h-y)?p:h;i.zoomOffset=w-v,i.zoom=(m-y)/(w-y)}else i.zoom=1;return i}e-=l.time,r+=u.compared.pan,s+=u.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},M2=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const n=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;r&&(s&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&s&&n){const u=o+a+o*a;this._zoomPixelFlow=o*a/u*l,this._panPixelFlow=a/u*l,this._rotatePixelFlow=o/u*l}else if(r&&s){const u=1+o;this._zoomPixelFlow=o/u*l,this._panPixelFlow=1/u*l}else if(r&&n){const u=1+a;this._zoomPixelFlow=a/u*l,this._rotatePixelFlow=1/u*l}else if(s&&n){const u=this._panPixelsAtSource/this._rotatePixels,h=1+u;this._panPixelFlow=u/h*l,this._rotatePixelFlow=1/h*l}else s?this._panPixelFlow=l:r?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const u=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=u,this._panPixelFlow/=u,this._rotatePixelFlow/=u}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/m_e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const m_e=Qw(45);function g_e(t,e,i){const r=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function y_e(t,e,i){const r=1/e,s=Math.log(t.compared.sourceZoom*r),n=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,u=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*n*o*l*u-t.halfWindowSize*s*n*o*l+t.halfWindowSize*s*n*o*u/(a*a)}function b_e(t,e,i){const r=e-t.compared.sourceZoom,s=1/r,n=1/e,o=Math.log(t.compared.sourceZoom*n),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function v_e(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function w_e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function __e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function x_e(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function S_e(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function E_e(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function C_e(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function T_e(t,e,i){const r=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,n=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*s*n*a+t.halfWindowSize*r*s*n*l/(o*o)+t.halfWindowSize*s*n*a*l/e}function M_e(t,e,i){const r=e-t.compared.targetZoom,s=1/r,n=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function k_e(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function R_e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function I_e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function $_e(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,s=t.halfWindowPanAtZoom(r),n=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?n*(i-s):n*(i+s)}function A_e(t,e){let i=O_e(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,o=s?v_e:g_e,a=s?w_e:y_e,l=s?__e:b_e,u=n?k_e:C_e,h=n?R_e:T_e,p=n?I_e:M_e,m=A=>o(t,A,r)+x_e(t,A,r)+u(t,A,r),y=A=>a(t,A,r)+S_e(t,A,r)+h(t,A,r),v=A=>l(t,A,r)+E_e(t,A,r)+p(t,A,r);let w=m(i);const S=$_e(t);let E;const I=e.maximumIterations||20,D=e.maximumDistance!=null?e.maximumDistance:1/0;for(E=0;E<I;E++){const A=e.desiredSlope??1e-6;let z=y(i);Math.abs(z)>A&&(z+=A);const _=z/v(i);if(isNaN(_)||i>=D&&_<0){if(!isFinite(D))return null;i=D,w=m(i);break}if(i-=_,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const Z=m(i);if(Math.abs(Z-w)/w<=.005)break;w=Z}return isNaN(w)||w>S*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function O_e(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let P_e=class extends f_e{constructor(e,i){super(),this._preallocSegments=[new M2,new M2,new M2],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i?.apex?A_e(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=AE(r.zoom):e===this._descensionSegment&&(r.zoom=Cw(r.zoom))}_updateWithApex(e,i){const[r,s,n]=this._preallocSegments,o=i?.ascensionFactor??.5,a=Math.min(1-o,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=e,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const D_e=new p_e;let L_e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=zE,this.definition=new d_e(e),this.path=new P_e}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Dre(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?zE:FE)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,D_e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??VE.minDuration/r,n=i.maxDuration??VE.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,s),n)}};const N_e=2e3,F_e=64;let j_e=class{constructor(e){this._view=e,this._animation=new L_e(()=>new r5(this._view)),this._current=new r5(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){ys(this._current.viewpoint,e),ys(this._source.viewpoint,e),ys(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),ys(e,this._current.viewpoint)}},fm=class extends Oe{constructor(e){super(e),this._animation=null,this._destinationViewState=new $L,this.updateFunction=null,this.easing=x5.ease,this.viewpoint=new xr({targetGeometry:new ze,scale:0,rotation:0}),this._updateTask=dy({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new j_e(e.view)}destroy(){this._updateTask=vi(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const s=this.viewpoint;ys(s,i);const n=e.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(i.scale,n.scale)*F_e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??tZ.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?x5[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,z_e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new Q$({target:e.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==Q$.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,s=this._transition.duration,n=s>0?r/s:1,o=n>=1;this._transition.applyRatio(this.viewpoint,n),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function z_e(t,e,i,r){if(e?.duration!=null)return!0;const{time:s,isLinear:n}=t,o=e?.speedFactor||1;if(s>(e?.maxDuration??tZ.maxDuration/o))return!1;if(n){const l=Ri(),u=jr(...r.toScreen(l,...i.center)),h=jr(...i.toScreen(l,...r.center)),p=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],m=u!=null&&u.x>-1*r.size[0]&&u.x<(1.5+.5)*r.size[0]&&u.y>-1*r.size[1]&&u.y<(1.5+.5)*r.size[1];if(s>N_e/o&&!p&&!m)return!1}return!0}c([d()],fm.prototype,"easing",void 0),c([d()],fm.prototype,"view",void 0),c([d()],fm.prototype,"viewpoint",void 0),fm=c([R("esri.views.2d.AnimationManager")],fm);const V_e=fm;function ni(){return Promise.all([le(()=>import("./webglDeps-4A6eiEnb.js"),__vite__mapDeps([195,196,21,197,198,1,2])),le(()=>import("./mapViewDeps-DiZ3bZgh.js"),__vite__mapDeps([199,113,79,80,20,21,81,82,83,84,78,49,200,88,201,197,196,152,129,202,85,203,103,204,136,135,91,25,26,86,5,1,2,205,89,90,206,8,134,195,198,207,98,208,209,210,149,146,127,211,65,77,23,16,29,212,213,87,214,93,215,95,54,75,216,217,218,219,145,220,221]))])}const jb=()=>ni().then(()=>le(()=>import("./TileLayerView2D-CEpx3DXd.js"),__vite__mapDeps([222,113,83,79,80,20,21,81,82,84,78,49,206,8,204,203,196,103,136,135,91,25,26,134,207,201,197,152,129,202,85,98,208,209,65,88,200,86,5,1,2,89,90,149,146,127,215,77,23,16,29,95,54,75,223,224,219,225,170,226,217,218,227,228,229,230,231,232]))),md=()=>ni().then(()=>le(()=>import("./FeatureLayerView2D-B8uvnVkQ.js").then(t=>t.F),__vite__mapDeps([233,204,25,20,21,26,234,235,236,23,16,32,1,2,225,170,218,79,80,81,82,83,84,78,49,197,196,219,203,103,136,135,91,200,88,201,152,129,202,85,86,5,98,205,237,97,229,232,227]))),S5={"base-dynamic":()=>ni().then(()=>le(()=>import("./BaseDynamicLayerView2D-CMX2htv5.js"),__vite__mapDeps([238,239,203,78,49,196,21,103,204,136,135,91,25,20,26,224,201,197,152,129,88,225,170,240,227,1,2]))),"base-tile":jb,"bing-maps":jb,catalog:()=>ni().then(()=>le(()=>import("./CatalogLayerView2D-D58q7_gL.js"),__vite__mapDeps([241,225,204,170,1,2]))),"catalog-dynamic-group":()=>ni().then(()=>le(()=>import("./CatalogDynamicGroupLayerView2D-CaEHKir0.js"),__vite__mapDeps([242,225,204,170,1,2]))),"catalog-footprint":()=>ni().then(()=>le(()=>import("./CatalogFootprintLayerView2D-CdTXfq2m.js"),__vite__mapDeps([243,233,204,25,20,21,26,234,235,236,23,16,32,1,2,225,170,218,79,80,81,82,83,84,78,49,197,196,219,203,103,136,135,91,200,88,201,152,129,202,85,86,5,98,205,237,97,229,232,227]))),csv:md,"geo-rss":()=>ni().then(()=>le(()=>import("./GeoRSSLayerView2D-CxjferMY.js"),__vite__mapDeps([244,225,204,170,216,217,218,79,80,20,21,81,82,83,84,78,49,197,196,219,203,103,136,135,91,25,26,200,88,201,152,129,202,85,86,5,1,2,215,206,113,8,77,23,16,29,95,54,75]))),feature:md,geojson:md,parquet:md,graphics:()=>ni().then(()=>le(()=>import("./GraphicsLayerView2D-DlmsSCSZ.js"),__vite__mapDeps([245,225,204,170,216,217,218,79,80,20,21,81,82,83,84,78,49,197,196,219,203,103,136,135,91,25,26,200,88,201,152,129,202,85,86,5,1,2,215,206,113,8,77,23,16,29,95,54,75]))),group:()=>ni().then(()=>le(()=>import("./GroupLayerView2D-BrkWBoCz.js"),__vite__mapDeps([246,225,204,170,1,2]))),imagery:()=>ni().then(()=>le(()=>import("./ImageryLayerView2D-DeB_eakJ.js"),__vite__mapDeps([247,248,196,21,49,111,203,78,103,204,136,135,91,25,20,26,225,170,215,79,80,81,82,83,84,206,113,8,77,85,23,16,29,200,88,201,197,152,129,202,86,5,1,2,95,54,75,226,217,218,219,239,224,240,116,234,232,227]))),"imagery-tile":()=>ni().then(()=>le(()=>import("./ImageryTileLayerView2D-BIahckXZ.js"),__vite__mapDeps([249,250,248,196,21,49,111,203,78,103,204,136,135,91,25,20,26,225,170,115,251,219,201,197,152,129,88,202,85,252,116,234,232,227,1,2]))),kml:()=>ni().then(()=>le(()=>import("./KMLLayerView2D-XOnTOzvV.js"),__vite__mapDeps([253,254,224,204,201,197,196,21,152,129,88,239,203,78,49,103,136,135,91,25,20,26,225,170,216,217,218,79,80,81,82,83,84,219,200,202,85,86,5,1,2,215,206,113,8,77,23,16,29,95,54,75,214,93,116,210,195,198,149,146,127,208,251]))),"knowledge-graph":()=>ni().then(()=>le(()=>import("./KnowledgeGraphLayerView2D-CtFOA5Zh.js"),__vite__mapDeps([255,225,204,170,1,2]))),"link-chart":()=>ni().then(()=>le(()=>import("./KnowledgeGraphLayerView2D-CtFOA5Zh.js"),__vite__mapDeps([255,225,204,170,1,2]))),"knowledge-graph-sublayer":md,"map-image":()=>ni().then(()=>le(()=>import("./MapImageLayerView2D-QhExKq2e.js"),__vite__mapDeps([256,239,203,78,49,196,21,103,204,136,135,91,25,20,26,224,201,197,152,129,88,225,170,215,79,80,81,82,83,84,206,113,8,77,85,23,16,29,200,202,86,5,1,2,95,54,75,226,217,218,219,240,257,229,231,234,227,228,230,232]))),"map-notes":()=>ni().then(()=>le(()=>import("./MapNotesLayerView2D-T5wiCACe.js"),__vite__mapDeps([258,225,204,170,216,217,218,79,80,20,21,81,82,83,84,78,49,197,196,219,203,103,136,135,91,25,26,200,88,201,152,129,202,85,86,5,1,2,215,206,113,8,77,23,16,29,95,54,75]))),media:()=>ni().then(()=>le(()=>import("./MediaLayerView2D-CO0IWfCA.js"),__vite__mapDeps([259,260,95,54,113,83,79,80,20,21,81,82,84,78,49,206,8,204,203,196,103,136,135,91,25,26,134,207,201,197,152,129,202,85,98,208,209,65,88,200,86,5,1,2,89,90,149,146,127,215,77,23,16,29,75,212,261,213,225,170]))),"ogc-feature":()=>ni().then(()=>le(()=>import("./OGCFeatureLayerView2D-Bx6l2y-R.js"),__vite__mapDeps([262,233,204,25,20,21,26,234,235,236,23,16,32,1,2,225,170,218,79,80,81,82,83,84,78,49,197,196,219,203,103,136,135,91,200,88,201,152,129,202,85,86,5,98,205,237,97,229,232,227]))),"open-street-map":jb,"oriented-imagery":md,route:()=>ni().then(()=>le(()=>import("./RouteLayerView2D-BuiMRtyN.js"),__vite__mapDeps([263,264,265,225,204,170,216,217,218,79,80,20,21,81,82,83,84,78,49,197,196,219,203,103,136,135,91,25,26,200,88,201,152,129,202,85,86,5,1,2,215,206,113,8,77,23,16,29,95,54,75]))),stream:()=>ni().then(()=>le(()=>import("./StreamLayerView2D-BZw4S1rs.js"),__vite__mapDeps([266,233,204,25,20,21,26,234,235,236,23,16,32,1,2,225,170,218,79,80,81,82,83,84,78,49,197,196,219,203,103,136,135,91,200,88,201,152,129,202,85,86,5,98,205,237,97,229,232,227]))),"subtype-group":()=>ni().then(()=>le(()=>import("./SubtypeGroupLayerView2D-gPPL3vTW.js"),__vite__mapDeps([267,233,204,25,20,21,26,234,235,236,23,16,32,1,2,225,170,218,79,80,81,82,83,84,78,49,197,196,219,203,103,136,135,91,200,88,201,152,129,202,85,86,5,98,205,237,97,229,232,227]))),tile:jb,"vector-tile":()=>ni().then(()=>le(()=>import("./VectorTileLayerView2D-DA-KeOic.js"),__vite__mapDeps([268,134,84,65,21,82,83,209,135,81,136,196,203,78,49,103,204,91,25,20,26,219,35,137,138,113,225,170,227,1,2]))),video:()=>ni().then(()=>le(()=>import("./VideoLayerView2D-DNy9m_6R.js"),__vite__mapDeps([269,270,165,164,261,103,203,78,49,196,21,204,136,135,91,25,20,26,200,79,80,81,82,83,84,88,201,197,152,129,202,85,86,5,1,2,213,225,170,216,217,218,219,215,206,113,8,77,23,16,29,95,54,75]))),wcs:()=>ni().then(()=>le(()=>import("./ImageryTileLayerView2D-BIahckXZ.js"),__vite__mapDeps([249,250,248,196,21,49,111,203,78,103,204,136,135,91,25,20,26,225,170,115,251,219,201,197,152,129,88,202,85,252,116,234,232,227,1,2]))),"web-tile":jb,wfs:md,wms:()=>ni().then(()=>le(()=>import("./WMSLayerView2D-t4yKZn2s.js"),__vite__mapDeps([271,239,203,78,49,196,21,103,204,136,135,91,25,20,26,224,201,197,152,129,88,225,170,240,227,272,234,1,2]))),wmts:()=>ni().then(()=>le(()=>import("./WMTSLayerView2D-BYbaSR95.js"),__vite__mapDeps([273,223,224,204,201,197,196,21,152,129,88,203,78,49,103,136,135,91,25,20,26,219,225,170,227,1,2]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function U_e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new W(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const E5={hasLayerViewModule:t=>S5[t.type]!=null,importLayerView:t=>{const e=S5[t.type];if(e==null)throw U_e(t);return e(t)}};var Bn;let sb=(Bn=class{static getId(e,i,r,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${s}`}constructor(e,i,r,s){this.set(e,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,s){this.set(e,i,r,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new Bn(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,o,a,l]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Bn(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const s=this.clone();return s.col+=e,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Bn(e,i,r,s),new Bn(e,i,r+1,s),new Bn(e,i+1,r,s),new Bn(e,i+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},Bn.pool=new zy(Bn,null,null,25,50),Bn);function Hf(t,e){return[t,e]}function gd(t,e,i){return t[0]=e,t[1]=i,t}function H_e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}const Xo=new sb("0/0/0/0");let B_e=class rZ{static create(e,i,r=null){const s=Us(e.spatialReference),n=i.origin||Hf(e.origin.x,e.origin.y),o=Hf(e.size[0]*i.resolution,e.size[1]*i.resolution),a=Hf(-1/0,-1/0),l=Hf(1/0,1/0),u=Hf(1/0,1/0);r!=null&&(gd(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),gd(l,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),gd(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:p}=i;let m,y,v,w;return!r&&h&&p&&(gd(a,h[0],p[0]),gd(l,h[1],p[1]),gd(u,h[1]-h[0]+1,p[1]-p[0]+1)),e.isWrappable?(m=Hf(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),u[1]),y=!0,v=s.origin,w=s.valid):(m=u,y=!1),new rZ(i.level,i.resolution,i.scale,n,a,l,u,o,m,y,v,w)}constructor(e,i,r,s,n,o,a,l,u,h,p,m){this.level=e,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=u,this.wrap=h,this._spatialReferenceOrigin=p,this._spatialReferenceValid=m}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?s[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){Xo.set(i);const s=r?Xo.col:this.denormalizeCol(Xo.col,Xo.world),n=Xo.row;return H_e(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,i,r=!1){Xo.set(i);const s=r?Xo.col:this.denormalizeCol(Xo.col,Xo.world);return Array.isArray(e)?gd(e,this.getXForColumn(s),this.getYForRow(Xo.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(Xo.row)),e}};var Up;let PL=(Up=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const o=e.getWorldForColumn(n);yield new sb(e.level,i,e.normalizeCol(n),o)}}forEach(e,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)e.call(i,n,o,s.normalizeCol(u),s.getWorldForColumn(u))}},Up.pool=new zy(Up),Up),k2=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const di=new sb("0/0/0/0");let G_e=class sZ{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,s]=e,[n,o]=i,a=n-r,l=o-s,u=l!==0?a/l:0,h=(Math.ceil(s)-s)*u,p=(Math.floor(s)-s)*u;return new sZ(r,Math.floor(s),Math.ceil(o),u,a<0?h:p,a<0?p:h,a<0?n:r,a<0?r:n)}constructor(e,i,r,s,n,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const kn=[[0,0],[0,0],[0,0],[0,0]],W_e=1e-6;let q_e=class{constructor(e,i=null,r=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter(a=>a.level>=r&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>B_e.create(e,a,i));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){di.set(i);const s=this._infoByLevel[di.level];return s?s.getTileBounds(e,di,r):e}getTileCoords(e,i,r=!1){di.set(i);const s=this._infoByLevel[di.level];return s?s.getTileCoords(e,di,r):e}getTileCoverage(e,i=192,r=!0,s="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=PL.pool.acquire(n),a=this._wrap;let l,u,h,p=1/0,m=-1/0;const y=o.spans;kn[0][0]=kn[0][1]=kn[1][1]=kn[3][0]=-i,kn[1][0]=kn[2][0]=e.size[0]+i,kn[2][1]=kn[3][1]=e.size[1]+i;for(const E of kn)e.toMap(E,E),E[0]=n.getColumnForX(E[0]),E[1]=n.getRowForY(E[1]);const v=[];let w=3;for(let E=0;E<4;E++){if(kn[E][1]===kn[w][1]){w=E;continue}const I=G_e.create(kn[E],kn[w]);p=Math.min(I.ymin,p),m=Math.max(I.ymax,m),v[I.ymin]===void 0&&(v[I.ymin]=[]),v[I.ymin].push(I),w=E}if(p==null||m==null||m-p>100)return null;let S=[];for(l=p;l<m;){v[l]!=null&&(S=S.concat(v[l])),u=1/0,h=-1/0;for(let E=S.length-1;E>=0;E--){const I=S[E];u=Math.min(u,I.getLeftCol()),h=Math.max(h,I.getRightCol())}if(u=Math.floor(u),h=Math.floor(h),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const E=Math.floor(h/n.worldSize[0]);for(let I=Math.floor(u/n.worldSize[0]);I<=E;I++)y.push(new k2(l,Math.max(n.getFirstColumnForWorld(I),u),Math.min(n.getLastColumnForWorld(I),h)))}else y.push(new k2(l,u,h));else u>n.last[0]||h<n.first[0]||(u=Math.max(u,n.first[0]),h=Math.min(h,n.last[0]),y.push(new k2(l,u,h)));l+=1;for(let E=S.length-1;E>=0;E--){const I=S[E];I.ymax>=l?I.incrRow():S.splice(E,1)}}return o}getTileParentId(e){di.set(e);const i=this._infoByLevel[di.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(di,this._lodInfos[r],di),di.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){di.set(i);const r=this._infoByLevel[di.level],s=e.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(di,s,di);const o=s.denormalizeCol(di.col,di.world);for(const a of e.spans)if(a.row===di.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,l,u]=e.spans.reduce((w,S)=>(w[0]=Math.min(w[0],S.row),w[1]=Math.max(w[1],S.row),w[2]=Math.min(w[2],S.colFrom),w[3]=Math.max(w[3],S.colTo),w),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(di.col,di.world),p=s.getColumnForX(r.getXForColumn(h)),m=s.getRowForY(r.getYForRow(di.row)),y=s.getColumnForX(r.getXForColumn(h+1))-1,v=s.getRowForY(r.getYForRow(di.row+1))-1;return!(p>u||y<l||m>a||v<o)}const n=s.denormalizeCol(di.col,di.world);return e.spans.some(o=>o.row===di.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=Us(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+W_e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const s=this._infoByLevel[r.level];return e.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(r.col*s.resolution/i.resolution+.01),e.row=Math.floor(r.row*s.resolution/i.resolution+.01)),e)}},Y_e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},J_e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Yx,this._controllers=new Yx,this._processingItems=new Yx,this._pausedSignal=Wp(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new fw(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=vi(this._schedule),this._task=vi(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const s=new AbortController;let n=null;i&&(n=Ta(i,()=>s.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),a(),u.reject(Qt())},a=()=>{l.remove(),n?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=GP(s.signal,o),u=eo();return this._deferreds.set(e,u),this._controllers.set(e,s),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Qt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=qw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,s=new Y_e(e,r);this._processingItems.set(e,s);try{i=this.process(e,r.signal)}catch(n){this._processError(s,n)}zl(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){}};const C5=[0,0];let mu=class extends Oe{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:s}=this;this._queue=new J_e({concurrency:e,scheduler:r,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return i(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=ci(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(e.key),n=df(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(e.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if($8(a,l=>i.has(l))){const l=Math.abs(o-r);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(C5,a);const l=kT(C5,s);l<o&&(o=l,n=a)}return n}};c([d({constructOnly:!0})],mu.prototype,"concurrency",void 0),c([d({constructOnly:!0})],mu.prototype,"priority",void 0),c([d({constructOnly:!0})],mu.prototype,"process",void 0),c([d({constructOnly:!0})],mu.prototype,"scheduler",void 0),c([d()],mu.prototype,"state",void 0),c([d({constructOnly:!0})],mu.prototype,"tileInfoView",void 0),mu=c([R("esri.views.2d.tiling.TileQueue")],mu);const l7e=mu;let Z_e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];T5(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,e))}_pruneAroundCenterTile(e,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],u=r*o[1],h=[0,0],p=[0,0];for(n.sort((m,y)=>(h[0]=a.x+l*(m.col+.5),h[1]=a.y-u*(m.row+.5),p[0]=a.x+l*(y.col+.5),p[1]=a.y-u*(y.row+.5),kE(h,i)-kE(p,i)));n.length>0;){const m=n.pop();if(this._removeTile(m.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),T5(this._tilePerId,e)}};function T5(t,e){t.delete(e)}const yd=new sb(0,0,0,0),Ql=new Map,zb=[],R2=[];let c7e=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Z_e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,u=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>a||s<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,r.forEach(E=>E.visible=!0);let v=0,w=0;if(p.length>0)for(const{row:E,colFrom:I,colTo:D}of p)for(let O=I;O<=D;O++){v++;const A=yd.set(y,E,m.normalizeCol(O),m.getWorldForColumn(O)).id;let z=r.get(A);if(z)z.isReady?(Ql.set(A,z),w++):u||this._addParentTile(A,Ql);else{if(this._tileCache?.has(A)){if(z=this._tileCache.pop(A),this.tileIndex.set(A,z),z.isReady){Ql.set(A,z),w++;continue}}else z=this.acquireTile(yd),this.tileIndex.set(A,z);u||this._addParentTile(A,Ql)}}const S=w===v;for(const[E,I]of r){if(Ql.has(E))continue;yd.set(E);const D=this.tileInfoView.intersects(h,yd),O=this.cachePolicy==="purge"?yd.level!==y:yd.level>y;!D||!u&&S?!O&&D||zb.push(I):I.isReady?O&&this.cachePolicy==="purge"&&this._hasReadyAncestor(yd,y)?zb.push(I):R2.push(I):O&&zb.push(I)}for(const E of R2)E.isReady&&Ql.set(E.key.id,E);for(const E of zb)this._tileCache?this._tileCache.add(E):this.releaseTile(E),r.delete(E.key.id);for(const E of Ql.values())this.tiles.push(E);for(const E of r.values())Ql.has(E.key.id)||(E.visible=!1);this._tileCache?.prune(y,n,o),PL.pool.release(h),R2.length=0,zb.length=0,Ql.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){for(const i of this.tileIndex.values())e(i);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s?.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache?.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s?.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const r=Vs();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const n=Vs();if(this.tileInfoView.getTileBounds(n,s.key,!0),tle(n,r))return!0}return!1}},X_e=class{constructor(e,i={}){this.events=new Vl,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",r);s||(s=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=hf([Fy(this._canvas,"webglcontextlost",n=>this.events.emit("webgl-context-lost",n))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||J("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=J("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,s,n,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${s}, ${n}, ${o}, ${a}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:s},pixelRatio:n}=e,o=s[0],a=s[1],l=Math.round(o*n),u=Math.round(a*n);i.width===l&&i.height===u||(i.width=l,i.height=u),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,s]=e.center,[n,o]=i.center,[a,l]=e.toScreen([0,0],n,o),[u,h]=e.toScreen([0,0],r,s),p=u-a,m=h-l,y=e.scale/i.scale,v=i.rotation-e.rotation,w=kl();return lJ(w),RT(w,w,[y,y]),p1(w,w,Qw(v)),Ty(w,w,[p,m]),w}};function K_e(t,e,i,r,s){nZ(t,e,i||0,r||t.length-1,s||Q_e)}function nZ(t,e,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,o=e-i+1,a=Math.log(n),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);nZ(t,e,Math.max(i,Math.floor(e-o*l/n+u)),Math.min(r,Math.floor(e+(n-o)*l/n+u)),s)}var h=t[e],p=i,m=r;for(Vb(t,i,e),s(t[r],h)>0&&Vb(t,i,r);p<m;){for(Vb(t,p,m),p++,m--;s(t[p],h)<0;)p++;for(;s(t[m],h)>0;)m--}s(t[i],h)===0?Vb(t,i,m):Vb(t,++m,r),m<=e&&(i=m+1),e<=m&&(r=m-1)}}function Vb(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function Q_e(t,e){return t<e?-1:t>e?1:0}function UE(t,e){if(!(this instanceof UE))return new UE(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function exe(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function Bf(t,e){jv(t,0,t.children.length,e,t)}function jv(t,e,i,r,s){s||(s=mm(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=e;o<i;o++)n=t.children[o],zv(s,t.leaf?r(n):n);return s}function zv(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function M5(t,e){return t.minX-e.minX}function k5(t,e){return t.minY-e.minY}function I2(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u_(t){return t.maxX-t.minX+(t.maxY-t.minY)}function txe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function ixe(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function $2(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c_(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function mm(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R5(t,e,i,r,s){for(var n,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(n=e+Math.ceil((i-e)/r/2)*r,K_e(t,n,e,i,s),o.push(e,n,n,i))}UE.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!c_(t,e))return i;for(var s,n,o,a,l=[];e;){for(s=0,n=e.children.length;s<n;s++)o=e.children[s],c_(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):$2(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!c_(t,e))return!1;for(var r,s,n,o,a=[];e;){for(r=0,s=e.children.length;r<s;r++)if(n=e.children[r],c_(t,o=e.leaf?i(n):n)){if(e.leaf||$2(t,o))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=mm([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),n=!0),o.leaf&&(s=exe(t,o.children,e))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!$2(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:M5,compareMinY:k5,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var s,n=i-e+1,o=this._maxEntries;if(n<=o)return Bf(s=mm(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=mm([])).leaf=!1,s.height=r;var a,l,u,h,p=Math.ceil(n/o),m=p*Math.ceil(Math.sqrt(o));for(R5(t,e,i,m,this.compareMinX),a=e;a<=i;a+=m)for(R5(t,a,u=Math.min(a+m-1,i),p,this.compareMinY),l=a;l<=u;l+=p)h=Math.min(l+p-1,u),s.children.push(this._build(t,l,h,r-1));return Bf(s,this.toBBox),s},_chooseSubtree:function(t,e,i,r){for(var s,n,o,a,l,u,h,p;r.push(e),!e.leaf&&r.length-1!==i;){for(h=p=1/0,s=0,n=e.children.length;s<n;s++)l=I2(o=e.children[s]),(u=txe(t,o)-l)<p?(p=u,h=l<h?l:h,a=o):u===p&&l<h&&(h=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,s=i?t:r(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),zv(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=mm(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,Bf(i,this.toBBox),Bf(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=mm([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Bf(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,s,n,o,a,l,u,h;for(l=u=1/0,r=e;r<=i-e;r++)o=ixe(s=jv(t,0,r,this.toBBox),n=jv(t,r,i,this.toBBox)),a=I2(s)+I2(n),o<l?(l=o,h=r,u=a<u?a:u):o===l&&a<u&&(u=a,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:M5,s=t.leaf?this.compareMinY:k5;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var s,n,o=this.toBBox,a=jv(t,0,e,o),l=jv(t,i-e,i,o),u=u_(a)+u_(l);for(s=e;s<i-e;s++)n=t.children[s],zv(a,t.leaf?o(n):n),u+=u_(a);for(s=i-e-1;s>=e;s--)n=t.children[s],zv(l,t.leaf?o(n):n),u+=u_(l);return u},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)zv(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Bf(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function rxe(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}let I5=class oZ{constructor(e,i){this.key=new sb(0,0,0,0),this.bounds=Vs(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Qae(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return rxe(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=Ls.acquire();for(let r=0;r<e.length;r++)i[r]=new oZ(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Yc.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const bd={added:[],removed:[]},A2=new Set,sxe=new sb(0,0,0,0);function nxe(t,e){const i=Us(e);if(!i)return null;const[r,s]=i.valid;return t[2]>s?[Vs([t[0],t[1],s,t[3]]),Vs([r,t[1],r+t[2]-s,t[3]])]:t[0]<r?[Vs([r,t[1],t[2],t[3]]),Vs([s-(r-t[0]),t[1],s,t[3]])]:null}let oxe=class extends Vl{constructor(e){super(),this._tiles=new Map,this._index=UE(9,J("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||TD(e)===0||MD(e)===0)return[];const i=nxe(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const s=new I5(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of e.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const h=sxe.set(n,o,s.normalizeCol(u),s.getWorldForColumn(u)).id;if(A2.add(h),!this.has(h)){const p=new I5(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),bd.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];A2.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),bd.removed.push(a))}(bd.added.length||bd.removed.length)&&this.emit("update",bd),PL.pool.release(i),A2.clear(),bd.added.length=0,bd.removed.length=0}};const f7e=1e-30,$5=512,h_=16777216,m7e=8,g7e=29,y7e=24,b7e=4,v7e=0,w7e=0,_7e=0,x7e=1,S7e=2,E7e=3,C7e=4,T7e=5,M7e=6,k7e=12,R7e=13,I7e=5,axe=6,$7e=5,A7e=6;var A5;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(A5||(A5={}));const aZ=6,lxe=1<<aZ,O7e=lxe<<1,P7e=1.05,D7e=3,L7e=1,N7e=3,F7e=3,j7e=5,z7e=6,V7e=1.15,uxe=4,U7e=128,cxe=256,H7e=cxe-2*uxe,B7e=2,G7e=128,W7e=1,q7e=10,Y7e=1024,J7e=128,Z7e=4,X7e=1,K7e=1<<20,Q7e=.75,eWe=10,tWe=.75,iWe=256,rWe=32,sWe=512,nWe=0,oWe=1,hxe=1,aWe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],lWe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ub=256;var O5,P5,D5,L5,N5,oA,F5,j5,rl,aA,L0,xi,HE,Mo,lA,tr,Le,BE,ky,Pp,uA,Tw,z5,V5,U5;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(O5||(O5={})),function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(P5||(P5={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(D5||(D5={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(L5||(L5={})),function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(N5||(N5={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(oA||(oA={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(F5||(F5={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(j5||(j5={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"}(rl||(rl={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(aA||(aA={})),function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(L0||(L0={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(xi||(xi={})),function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(HE||(HE={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Mo||(Mo={})),function(t){t[t.MIN_LOD=33082]="MIN_LOD",t[t.MAX_LOD=33083]="MAX_LOD",t[t.BASE_LEVEL=33084]="BASE_LEVEL",t[t.MAX_LEVEL=33085]="MAX_LEVEL",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"}(lA||(lA={})),function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(tr||(tr={})),function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"}(Le||(Le={})),function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(BE||(BE={})),function(t){t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(ky||(ky={})),function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"}(Pp||(Pp={})),function(t){t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"}(uA||(uA={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(Tw||(Tw={})),function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(z5||(z5={})),function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(V5||(V5={})),function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(U5||(U5={}));const uWe=33984;var GE,H5;(function(t){t[t.Texture=0]="Texture",t[t.TileTexture=1]="TileTexture",t[t.BufferObject=2]="BufferObject",t[t.VertexArrayObject=3]="VertexArrayObject",t[t.Shader=4]="Shader",t[t.Program=5]="Program",t[t.FramebufferObject=6]="FramebufferObject",t[t.Renderbuffer=7]="Renderbuffer",t[t.TransformFeedback=8]="TransformFeedback",t[t.Sync=9]="Sync",t[t.UNCOUNTED=10]="UNCOUNTED",t[t.LinesOfCode=10]="LinesOfCode",t[t.Uniform=11]="Uniform",t[t.COUNT=12]="COUNT"})(GE||(GE={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"}(H5||(H5={}));const cWe=36064,hWe=36065,dWe=36066,pWe=33306,fWe=36096,mWe=36128;var Or,B5,G5,W5,q5,Y5,J5,Jc,Z5;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Or||(Or={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(B5||(B5={})),function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"}(G5||(G5={})),function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"}(W5||(W5={})),function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"}(q5||(q5={})),function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(Y5||(Y5={})),function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(J5||(J5={})),function(t){t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"}(Jc||(Jc={})),function(t){t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"}(Z5||(Z5={}));const dxe=()=>he.getLogger("esri.views.webgl.checkWebGLError");function pxe(t){switch(t){case Jc.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case Jc.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case Jc.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case Jc.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case Jc.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case Jc.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const lZ=!!J("enable-feature:webgl-debug");function uZ(){return lZ}function gWe(){return lZ}function vd(t,e=uZ()){if(e){const i=t.getError();if(i){const r=pxe(i),s=new Error().stack;dxe().error(new W("webgl-error","WebGL error occurred",{message:r,stack:s}))}}}var WE;(function(t){t[t.TextureDescriptor=0]="TextureDescriptor",t[t.Texture=1]="Texture",t[t.Renderbuffer=2]="Renderbuffer"})(WE||(WE={}));function fxe(t){switch(t){case rl.BYTE:case rl.UNSIGNED_BYTE:return 1;case rl.SHORT:case rl.UNSIGNED_SHORT:case rl.HALF_FLOAT:return 2;case rl.FLOAT:case rl.INT:case rl.UNSIGNED_INT:return 4}}function mxe(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function yWe(t,e,i,r,s=0){const n=t.gl;t.bindBuffer(i);for(const o of r){const a=e.get(o.name);if(a==null){console.warn(`There is no location for vertex attribute '${o.name}' defined.`);continue}const l=s*o.stride;if(o.count<=4)n.vertexAttribPointer(a,o.count,o.type,o.normalized,o.stride,o.offset+l),n.enableVertexAttribArray(a),o.divisor>0&&t.gl.vertexAttribDivisor(a,o.divisor);else if(o.count===9)for(let u=0;u<3;u++)n.vertexAttribPointer(a+u,3,o.type,o.normalized,o.stride,o.offset+12*u+l),n.enableVertexAttribArray(a+u),o.divisor>0&&t.gl.vertexAttribDivisor(a+u,o.divisor);else if(o.count===16)for(let u=0;u<4;u++)n.vertexAttribPointer(a+u,4,o.type,o.normalized,o.stride,o.offset+16*u+l),n.enableVertexAttribArray(a+u),o.divisor>0&&t.gl?.vertexAttribDivisor(a+u,o.divisor);else console.error("Unsupported vertex attribute element count: "+o.count);if(uZ()){const u=mxe(t),h=fxe(o.type),p=o.offset,m=Math.round(h/p)!==h/p?`. Offset not a multiple of stride. DataType requires ${h} bytes, but descriptor has an offset of ${p}`:"";u&&console.error(`Unable to bind vertex attribute "${o.name}" with baseInstanceOffset ${l}${m}:`,u,o)}}}function bWe(t,e,i,r){const s=t.gl;t.bindBuffer(i);for(const n of r){const o=e.get(n.name);if(n.count<=4)s.disableVertexAttribArray(o),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(o,0);else if(n.count===9)for(let a=0;a<3;a++)s.disableVertexAttribArray(o+a),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(o+a,0);else if(n.count===16)for(let a=0;a<4;a++)s.disableVertexAttribArray(o+a),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(o+a,0);else console.error("Unsupported vertex attribute element count: "+n.count)}t.unbindBuffer(oA.ARRAY_BUFFER)}function gxe(t){switch(t){case tr.ALPHA:case tr.LUMINANCE:case tr.RED:case tr.RED_INTEGER:case Le.R8:case Le.R8I:case Le.R8UI:case Le.R8_SNORM:case uA.STENCIL_INDEX8:return 1;case tr.LUMINANCE_ALPHA:case tr.RG:case tr.RG_INTEGER:case Le.RGBA4:case Le.R16F:case Le.R16I:case Le.R16UI:case Le.RG8:case Le.RG8I:case Le.RG8UI:case Le.RG8_SNORM:case Le.RGB565:case Le.RGB5_A1:case Pp.DEPTH_COMPONENT16:return 2;case tr.RGB:case tr.RGB_INTEGER:case Le.RGB8:case Le.RGB8I:case Le.RGB8UI:case Le.RGB8_SNORM:case Le.SRGB8:case Pp.DEPTH_COMPONENT24:return 3;case tr.RGBA:case tr.RGBA_INTEGER:case Le.RGBA8:case Le.R32F:case Le.R11F_G11F_B10F:case Le.RG16F:case Le.R32I:case Le.R32UI:case Le.RG16I:case Le.RG16UI:case Le.RGBA8I:case Le.RGBA8UI:case Le.RGBA8_SNORM:case Le.SRGB8_ALPHA8:case Le.RGB9_E5:case Le.RGB10_A2UI:case Le.RGB10_A2:case Pp.DEPTH_COMPONENT32F:case ky.DEPTH24_STENCIL8:return 4;case ky.DEPTH32F_STENCIL8:return 5;case Le.RGB16F:case Le.RGB16I:case Le.RGB16UI:return 6;case Le.RG32F:case Le.RG32I:case Le.RG32UI:case Le.RGBA16F:case Le.RGBA16I:case Le.RGBA16UI:return 8;case Le.RGB32F:case Le.RGB32I:case Le.RGB32UI:return 12;case Le.RGBA32F:case Le.RGBA32I:case Le.RGBA32UI:return 16;case Or.COMPRESSED_RGB_S3TC_DXT1_EXT:case Or.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Or.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Or.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Or.COMPRESSED_R11_EAC:case Or.COMPRESSED_SIGNED_R11_EAC:case Or.COMPRESSED_RGB8_ETC2:case Or.COMPRESSED_SRGB8_ETC2:case Or.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Or.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Or.COMPRESSED_RG11_EAC:case Or.COMPRESSED_SIGNED_RG11_EAC:case Or.COMPRESSED_RGBA8_ETC2_EAC:case Or.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let cZ=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=WE.TextureDescriptor,this.target=Mo.TEXTURE_2D,this.pixelFormat=tr.RGBA,this.dataType=Tw.UNSIGNED_BYTE,this.samplingMode=xi.LINEAR,this.wrapMode=HE.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function yxe(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:gxe(t.internalFormat))*(t.target===Mo.TEXTURE_CUBE_MAP?6:1))}const Hb=()=>he.getLogger("esri/views/webgl/textureUtils");function Bb(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&Hb().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=t;if(s&&(hZ(s)||dZ(s))){const{linearFilterDepth:n,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&Hb().error("Depth textures cannot have mipmaps"),n?a!==xi.LINEAR&&a!==xi.NEAREST&&Hb().error("Depth textures cannot sample mipmaps"):(a!==xi.NEAREST&&Hb().error("Depth textures without filtering must use NEAREST filtering"),o&&Hb().error("Depth textures without filtering cannot use compare function"))}}function bxe(t){return t in Le}function hZ(t){return t in Pp}function dZ(t){return t in ky}function vxe(t){return t!=null&&t in Or}function gm(t){return t!=null&&"type"in t&&t.type==="compressed"}function wxe(t){return t!=null&&"byteLength"in t}function X5(t){return t!=null&&!gm(t)&&!wxe(t)}function Gf(t){return t===Mo.TEXTURE_3D||t===Mo.TEXTURE_2D_ARRAY}function K5(t,e,i,r=1){let s=Math.max(e,i);return t===Mo.TEXTURE_3D&&(s=Math.max(s,r)),Math.floor(Math.log2(s))+1}function d_(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case Tw.FLOAT:switch(t.pixelFormat){case tr.RGBA:return Le.RGBA32F;case tr.RGB:return Le.RGB32F;default:throw new W("texture:unknown-format","Unable to derive format")}case Tw.UNSIGNED_BYTE:switch(t.pixelFormat){case tr.RGBA:return Le.RGBA8;case tr.RGB:return Le.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===BE.DEPTH_STENCIL?ky.DEPTH24_STENCIL8:e===BE.DEPTH_COMPONENT?Pp.DEPTH_COMPONENT24:e,t.internalFormat}function _xe(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let xxe=class pZ extends cZ{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case Le.R16F:case Le.R32F:case Le.R8_SNORM:case Le.R8:this.pixelFormat=tr.RED;break;case Le.R8I:case Le.R8UI:case Le.R16I:case Le.R16UI:case Le.R32I:case Le.R32UI:this.pixelFormat=tr.RED_INTEGER}}static validate(e,i){return new pZ(e,i)}};const eu=()=>he.getLogger("esri/views/webgl/Texture");var ar;let Sxe=(ar=class{constructor(e,i=null,r=null){if(this.type=WE.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const s=xxe.validate(e,i);if(!s)throw new W("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===Mo.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return yxe(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(GE.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new W("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===Mo.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!gm(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Or&&(this._descriptor.internalFormat=void 0),this._setData(e),!gm(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,s,n,o,a=0){o||eu().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||eu().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=d_(l);const{context:u,pixelFormat:h,dataType:p,target:m,isImmutable:y}=l;if(y&&!this._wasImmutablyAllocated)throw new W("texture:uninitialized","Cannot update immutable texture before allocation!");const v=u.bindTexture(this,ar.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>l.width||r+n>l.height)&&eu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:w}=u;a&&(s&&n||eu().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),w.pixelStorei(w.UNPACK_SKIP_ROWS,a)),X5(o)?w.texSubImage2D(m,e,i,r,s,n,h,p,o):gm(o)?w.compressedTexSubImage2D(m,e,i,r,s,n,l.internalFormat,o.levels[e]):w.texSubImage2D(m,e,i,r,s,n,h,p,o),a&&w.pixelStorei(w.UNPACK_SKIP_ROWS,0),u.bindTexture(v,ar.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,n,o,a,l){l||eu().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||eu().error("An attempt to update an uninitialized texture!");const u=this._descriptor;u.internalFormat=d_(u);const{context:h,pixelFormat:p,dataType:m,isImmutable:y,target:v}=u;if(y&&!this._wasImmutablyAllocated)throw new W("texture:uninitialized","Cannot update immutable texture before allocation!");Gf(v)||eu().warn("Attempting to set 3D texture data on a non-3D texture");const w=h.bindTexture(this,ar.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(ar.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>u.width||r+o>u.height||s+a>u.depth)&&eu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=h;if(gm(l))l=l.levels[e],S.compressedTexSubImage3D(v,e,i,r,s,n,o,a,u.internalFormat,l);else{const E=l;S.texSubImage3D(v,e,i,r,s,n,o,a,p,m,E)}h.bindTexture(w,ar.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new W("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,Bb(e)}e.samplingMode===xi.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=xi.LINEAR_MIPMAP_NEAREST):e.samplingMode===xi.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=xi.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,ar.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ar.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,ar.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new W("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,Bb(e)}e.samplingMode===xi.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=xi.LINEAR):e.samplingMode===xi.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=xi.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,Bb(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?xi.LINEAR:xi.NEAREST),Bb(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=hy(this._compressionAbortController)}_setData(e,i){const r=this._descriptor,s=r.context?.gl;if(!s)return;vd(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),r.context.instanceCounter.increment(GE.Texture,this)),Bb(r);const n=r.context.bindTexture(this,ar.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(ar.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),vd(s);const o=i??r.target,a=Gf(o);if(X5(e))this._setDataFromTexImageSource(e,o);else{const{width:l,height:u,depth:h}=r;if(l==null||u==null)throw new W("texture:missing-size","Width and height must be specified!");if(a&&h==null)throw new W("texture:missing-depth","Depth must be specified!");if(r.internalFormat=d_(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,l,u,h),gm(e)){if(!vxe(r.internalFormat))throw new W("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,l,u,h,e),vd(s),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),vd(s),r.context.bindTexture(n,ar.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=Mo.TEXTURE_CUBE_MAP_POSITIVE_X;i<=Mo.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,s=this._descriptor;s.internalFormat=d_(s);const n=Gf(i),{width:o,height:a,depth:l}=_xe(e);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=a),n&&s.depth,n&&(s.depth=l),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,s.internalFormat,s.hasMipmap,o,a,l),this._texImage(i,0,s.internalFormat,o,a,l,e),vd(r),s.hasMipmap&&(this.generateMipmap(),vd(r))}_setDataFromCompressedSource(e,i,r){const s=this._descriptor,{width:n,height:o,depth:a}=s,l=e.levels,u=K5(r,n,o,a),h=Math.min(u,l.length)-1;this._descriptor.context.gl.texParameteri(s.target,lA.MAX_LEVEL,h),this._forEachMipmapLevel((p,m,y,v)=>{const w=l[Math.min(p,l.length-1)];this._compressedTexImage(r,p,i,m,y,v,w)},h)}_texStorage(e,i,r,s,n,o){const{gl:a}=this._descriptor.context;if(!bxe(i)&&!hZ(i)&&!dZ(i))throw new W("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?K5(e,s,n,o):1;if(Gf(e)){if(o==null)throw new W("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,s,n,o)}else a.texStorage2D(e,l,i,s,n);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,n,o,a){const l=this._descriptor.context.gl,u=Gf(e),{isImmutable:h,pixelFormat:p,dataType:m}=this._descriptor;if(h){if(a!=null){const y=a;if(u){if(o==null)throw new W("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,s,n,o,p,m,y)}else l.texSubImage2D(e,i,0,0,s,n,p,m,y)}}else{const y=a;if(u){if(o==null)throw new W("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,s,n,o,0,p,m,y)}else l.texImage2D(e,i,r,s,n,0,p,m,y)}}_compressedTexImage(e,i,r,s,n,o,a){const l=this._descriptor.context.gl,u=Gf(e);if(this._descriptor.isImmutable){if(a!=null)if(u){if(o==null)throw new W("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,s,n,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,s,n,r,a)}else if(u){if(o==null)throw new W("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,s,n,o,0,a)}else l.compressedTexImage2D(e,i,r,s,n,0,a)}async _compressOnWorker(e){const{width:i,height:r,context:s,flipped:n,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=this._descriptor.compress?.compressionTracker,u=this._descriptor.compress?.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:p}=s.capabilities;if(!ar.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!h&&!p)return;this.abortCompression();const m=new AbortController;this._compressionAbortController=m,l?.increment();try{let y;e instanceof Uint8Array?y=e.buffer:(y=await createImageBitmap(e,{imageOrientation:n?"flipY":"none"}),hi(m));const v={data:y,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===tr.RGBA?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!h,hasS3TC:!!p},w=await ar.compressionWorkerHandle.invoke(v,m.signal,"low");if(hi(m),w.compressedTexture&&this.hasWebGLTextureObject){const S=this.usedMemory;this._descriptor.internalFormat=w.internalFormat,this._setData(w.compressedTexture),u?.(S-this.usedMemory)}}catch(y){Zr(y)||eu().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===Mo.TEXTURE_3D;if(r==null||s==null||l&&n==null)throw new W("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let u=0;e(u,r,s,n),o&&(r!==1||s!==1||l&&n!==1)&&!(u>=i);++u)r=Math.max(1,r>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}_applySamplingMode(){const e=this._descriptor,i=e.context?.gl;let r=e.samplingMode,s=e.samplingMode;r===xi.LINEAR_MIPMAP_NEAREST||r===xi.LINEAR_MIPMAP_LINEAR?(r=xi.LINEAR,e.hasMipmap||(s=xi.LINEAR)):r!==xi.NEAREST_MIPMAP_NEAREST&&r!==xi.NEAREST_MIPMAP_LINEAR||(r=xi.NEAREST,e.hasMipmap||(s=xi.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){const e=this._descriptor,i=e.context?.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,i=e.context?.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),vd(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},ar.TEXTURE_UNIT_FOR_UPDATES=0,ar.compressionWorkerHandle=null,ar);const O2=()=>he.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Exe(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Cxe=[0,0,0,0];let fZ=class{constructor(){this.type="single",this._highlightOptions=new Eh,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Ub),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,axe),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<aZ)-1,activeGradient:this}]}_updateGradientTexture(e){const i=Txe(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,Exe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*hxe,u=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,h=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let p;u&&!h?O2().error("The outer rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!u&&h?O2().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):u&&h&&O2().error("The highlight is "+Math.max(u,h)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(w,S,E){m[0]=(1-E)*w[0]+E*S[0],m[1]=(1-E)*w[1]+E*S[1],m[2]=(1-E)*w[2]+E*S[2],m[3]=(1-E)*w[3]+E*S[3]}const{_texelData:v}=this;for(let w=0;w<Ub;++w)p=s+w/(Ub-1)*(a-s),p<s?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):p<n?y(Cxe,r.outlineColor,(p-s)/(n-s)):p<o?[m[0],m[1],m[2],m[3]]=r.outlineColor:p<a?y(r.outlineColor,r.fillColor,(p-o)/(a-o)):[m[0],m[1],m[2],m[3]]=r.fillColor,v[4*w]=255*m[0],v[4*w+1]=255*m[1],v[4*w+2]=255*m[2],v[4*w+3]=255*m[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const w=new cZ;w.wrapMode=HE.CLAMP_TO_EDGE,w.width=Ub,w.height=1,this._shadeTex=new Sxe(e,w)}this._shadeTex.updateData(0,0,0,Ub,1,this._texelData)}};function Txe(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Mxe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new fZ),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:e,activeGradient:s}),e<<=1}return i}};var Q5,e4,t4,i4,r4,s4,qE,n4,o4;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(Q5||(Q5={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(e4||(e4={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(t4||(t4={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(i4||(i4={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(r4||(r4={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"}(s4||(s4={})),function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"}(qE||(qE={})),function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(n4||(n4={})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"}(o4||(o4={}));const mZ={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:aA.EQUAL,mask:255,op:{fail:L0.KEEP,zFail:L0.KEEP,zPass:L0.REPLACE}}}},kxe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Rxe={...mZ,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Ixe({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),o=1/2**(r-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:Do(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function gZ(t){return t.passOptions?.type==="highlight"}function yZ(t){return t.passOptions?.type==="hittest"}function $xe(t){if(!yZ(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function Axe(t){if(!gZ(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function xWe(t,e,i){const r={};for(const s in i)typeof i[s]!="function"?r[s]=i[s]:r[s]=i[s](t,e);return r}function SWe(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:Ixe(t,e),hittestRequest:$xe(t),highlight:Axe(t)}}function EWe(t){return{inside:t.selection===qE.InsideEffect,outside:t.selection===qE.OutsideEffect}}function Oxe(t){return yZ(t)?kxe:gZ(t)&&t.passOptions.stepType==="clear"?Rxe:mZ}function CWe(t){const{row:e,col:i}=t.key,r=i*$5,s=e*$5;return{tileOffsetFromLocalOrigin:[r%h_,s%h_],maxIntsToLocalOrigin:[Math.floor(r/h_),Math.floor(s/h_)]}}const Pxe=new Xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function TWe(t){return Pxe.toJSON(t)}function MWe(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:s}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function Dxe(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Mxe:new fZ),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function kWe(t,e,i,r){const{painter:s,highlightGradient:n}=t,{highlight:o}=s.effects;if(!n)return;const a=t.passOptions,l=n.getReasonsWithGradients();for(let u=0;u<l.length;u++){const h={...t,passOptions:{type:"highlight",activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(h),i(h),u<l.length-1){let m=0;for(let y=u+1;y<l.length;y++)m|=l[y].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[u].activeGradient,activeReasons:m,stepType:"clear",highlightAll:e}})}const p={...t,passOptions:{type:"highlight",activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(Oxe(t)),s.updatePipelineState(t.context),o.draw(p),o.unbind()}t.passOptions=a}const p_=t=>parseFloat(t)/100;function Lxe(t,e,i){const r=typeof t.left=="string"?p_(t.left)*e:t.left,s=typeof t.right=="string"?p_(t.right)*e:t.right,n=typeof t.top=="string"?p_(t.top)*i:t.top,o=typeof t.bottom=="string"?p_(t.bottom)*i:t.bottom,a=n;return{xmin:r,xmax:Math.max(e-s,r),ymin:a,ymax:Math.max(i-o,n)}}function bZ(t,e,i,r){switch(e.type){case"rect":{const{width:s,height:n}=t,{xmin:o,xmax:a,ymin:l,ymax:u}=Lxe(e,s,n),{x:h,y:p}=i;return h>o&&h<a&&p>l&&p<u}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||CD(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?ED(e.geometry,r):e1(e.geometry,r))}}function Nxe(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function Fxe(t,e){if(!t.highlights){if(!e)return;t.highlights=new _e([new Eh])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function jxe(t,e,i){const r=VY(e)?zY(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;i?.include?l4(i.include,a4(t,m=>{s.add(m),P2(m,y=>n.add(y))},(m,y)=>{n.add(m),s.add(y)},m=>{a||(a=new Set),a.add(m)},m=>s.add(m),()=>o=!0)):(o=!0,s=new Set(t.allLayerViews),s.forEach(m=>{P2(m,y=>n.add(y))})),i?.exclude&&l4(i.exclude,a4(t,m=>{s.delete(m),P2(m,y=>n.delete(y))},m=>n.delete(m),m=>{l||(l=new Set),l.add(m)}));const u=t.toMap(r),h=t.allLayerViews.filter(m=>!m.suspended&&s.has(m)&&m.clips.every(y=>bZ(t,y,r,u))).reverse();let p=[...o?t.graphicsView.hitTest(u).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:u})):[],...await Promise.all(h.map(m=>m.hitTest(u,r)).toArray())].filter(Ah).flat().filter(Ah);return p=p.filter(m=>m.type!=="graphic"||m.layer?.type!=="subtype-group"||n.has(m.graphic.layer)),a&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||a?.has(cA(m.graphic)))),l&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||!l?.has(cA(m.graphic)))),{screenPoint:r,results:p}}function a4(t,e,i,r,s,n){return o=>{if(o instanceof Si){if(o.layer===t)n?.();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&s?.(a)}r(cA(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function l4(t,e){if(t)if(YS(t))for(const i of t)if(YS(i))for(const r of i)e(r);else e(i);else e(t)}function cA(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function P2({layer:t},e){t?.type==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}let Gb=null,YE=!0;function zxe(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(YE)try{return new ImageData(t,e)}catch{YE=!1}return vZ(t,e,i)}function RWe(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(YE)try{return new ImageData(t,e,i)}catch{YE=!1}const s=vZ(e,i,r);return s.data.set(t,0),s}function Vxe(){return Gb||(Gb=document.createElement("canvas"),Gb.width=1,Gb.height=1),Gb}function vZ(t,e,i){return i||(i=Vxe()),i.getContext("2d").createImageData(t,e)}async function Uxe(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await Tt(i,{...e,responseType:"image"});return r}catch(r){throw Zr(r)?r:new W("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function IWe(t,e){const{arrayBuffer:i,mediaType:r}=await Hxe(t,e),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await le(()=>import("./gif-BL02RuXt.js"),__vite__mapDeps([274,1,2]));if(n(i))return o(i,e)}if(s){const{isAnimatedPNG:n,parseApng:o}=await le(()=>import("./apng-DoQ_KTeQ.js"),__vite__mapDeps([275,15,1,2]));if(n(i))return o(i,e)}return Uxe(new Blob([i],{type:r}),e)}async function Hxe(t,e){const i=Jp(t);if(i?.isBase64)return{arrayBuffer:_9(i.data),mediaType:i.mediaType};const r=await Tt(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function wZ(t,e,i){const{ctx:r,canvas:s}=xZ(t,i),n=r.getImageData(0,0,t.width,t.height),o=EZ(s,e);return SZ(s),{dataUrl:o,data:n}}function _Z(t,e){const{ctx:i,canvas:r}=xZ(t,e),s=i.getImageData(0,0,t.width,t.height);return SZ(r),s}function xZ(t,e){const i=Bxe();e.premultipliedAlpha&&Yxe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&qxe(r),{ctx:r,canvas:i}}function SZ(t){t.width=0,t.height=0}function Bxe(){return D2==null&&(D2=document.createElement("canvas")),D2}let D2=null;function EZ(t,e){const i=Jxe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function CZ(t,e){const i=Wxe(t),r=Xxe[i];return{format:i,quality:Ao(e??r,0,100)}}function TZ(t,e){return e/Math.max(t[0],t[1])}function Gxe(t,e,i,r=0,s=0,n=t.width-r,o=t.height-s,a=!1){const{data:l}=t,{width:u,height:h,data:p}=e,m=n/u,y=o/h,v=Math.ceil(m/2),w=Math.ceil(y/2),S=t.width;for(let E=0;E<h;E++)for(let I=0;I<u;I++){const D=4*(I+(a?h-E-1:E)*u);let O=0,A=0,z=0,_=0,Z=0,Q=0;const ae=(E+.5)*y;for(let ge=Math.floor(E*y);ge<(E+1)*y;ge++){const ne=Math.abs(ae-(ge+.5))/w,ve=(I+.5)*m,xe=ne*ne;for(let Be=Math.floor(I*m);Be<(I+1)*m;Be++){const dt=Math.abs(ve-(Be+.5))/v,Ke=Math.sqrt(xe+dt*dt);if(Ke>=1)continue;let Qe=2*Ke*Ke*Ke-3*Ke*Ke+1;const gt=4*(r+Be+(s+ge)*S);Q+=Qe*l[gt+3],A+=Qe,!i&&l[gt+3]<255&&(Qe=Qe*l[gt+3]/255),z+=Qe*l[gt],_+=Qe*l[gt+1],Z+=Qe*l[gt+2],O+=Qe}}p[D]=z/O,p[D+1]=_/O,p[D+2]=Z/O,p[D+3]=Q/A}return e}function Wxe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Zxe}}function qxe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Yxe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+3];if(s!==255&&s>0){const n=255/s;e[r]=e[r]*n,e[r+1]=e[r+1]*n,e[r+2]=e[r+2]*n}}}const Jxe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},u4=98,Zxe="png",Xxe={png:100,jpg:u4,jpeg:u4},$We=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:zxe,encode:wZ,encodeData:_Z,getFormatAndQuality:CZ,getMaximumResolutionScale:TZ,resampleHermite:Gxe,toDataUrl:EZ},Symbol.toStringTag,{value:"Module"})),MZ={flipY:!0,premultipliedAlpha:!0};async function Kxe(t,e){const i=await kZ(t,e),{format:r,quality:s}=CZ(e?.format,e?.quality);return wZ(i,{format:r,quality:s},MZ)}async function Qxe(t,e){const i=await kZ(t,e);return _Z(i,MZ)}function kZ(t,e){const i=iSe(e||{},tSe(t.stage,t.size),t.size,t.padding),r=eSe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e?.rotation)}function eSe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const s=e.find(n=>n.layer.id===r.id);s?.container&&i.push(s.container)}),i}function tSe(t,e){return Math.min(4,TZ(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function iSe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const n=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,u=t.area||{x:0,y:0,width:n,height:o};if(s){const h=n/o,p=s[0]/s[1];if(p>h){const m=u.width/p;u={x:u.x,y:Math.round(u.y+(u.height-m)/2),width:u.width,height:Math.round(m)}}else{const m=u.height*p;u={x:Math.round(u.x+(u.width-m)/2),y:u.y,width:Math.round(m),height:u.height}}}else s=[u.width,u.height];return s[0]>u.width?(a=Math.min(s[0]/u.width,e),l=s[0]/u.width/a):(a=1,l=s[0]/u.width),{cropArea:{x:Math.round((u.x+r.left)*a),y:Math.round((u.y+r.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const rSe=t=>t.includes("Brush");let RZ=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),rSe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},sSe=class{constructor(e){this.getUnmaskedRenderer=e}};function nSe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new sSe(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let c4;function oSe(){return c4??=uSe(),c4}let aSe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function lSe(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=nSe(i)?.getUnmaskedRenderer()??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function uSe(){const t=new aSe,e=lSe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function cSe(t){const e=oSe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new W("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new W("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new W("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new W("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function hSe(t){return t&&"nodeType"in t}function dSe(t){return t&&typeof t.render=="function"}const h4={component:"esri-component"};let Hd=class extends Oe{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(h4.component),i&&i.classList.remove(h4.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||hSe(e)?(this._set("widget",null),YD(e)):(dSe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d()],Hd.prototype,"id",null),c([d()],Hd.prototype,"node",null),c([It("node")],Hd.prototype,"castNode",null),c([d({readOnly:!0})],Hd.prototype,"widget",void 0),Hd=c([R("esri.views.ui.Component")],Hd);const eS=Hd,IZ="calcite-mode-",$Z="dark",pSe="light",fSe=/\W/g,mSe="--esri-calcite-mode-name";function AZ(){return getComputedStyle(document.body).getPropertyValue(mSe).replaceAll(fSe,"").toLowerCase()}function LWe(){return AZ()===$Z}function gSe(){const t=AZ();switch(t){case $Z:case pSe:return`${IZ}${t}`;default:return null}}function ySe(t){const e=gSe();e&&(bSe(t),t.classList.add(e))}function bSe(t){Array.from(t.classList).forEach(e=>{e.startsWith(IZ)&&t.classList.remove(e)})}const OT=new Map;function OZ(){OT.clear()}function vSe(t){return OT.get(t)}function wSe(t,e){OT.set(t,e)}function L2(t){OT.delete(t)}function _Se(...t){const e=Ls.acquire();for(let r=0;r<t.length;r++){const s=t[r],n=typeof s;if(n==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(n==="object")for(const o in s)s[o]&&e.push(o)}const i=e.join(" ");return Ls.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{OZ();for(const s of r)t.get(s.target)?.(s)}),i=(r,s,n)=>(t.set(r,s),e.observe(r,n),Mt(()=>{e.unobserve(r),t.delete(r)}));return(r,s,n)=>{let o=null;return hf([Ue(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=i(a,s,n))},Ps),Mt(()=>o?.remove())])}})();function xSe(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function NWe(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function FWe(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function SSe(t){return t==="Enter"||t===" "}async function ESe(t,e){await Bre(Ww(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const CSe={left:0,top:0,bottom:0,right:0},PZ={bottom:30,top:15,right:15,left:15},tu="esri-ui",Qs={ui:tu,corner:`${tu}-corner`,innerContainer:`${tu}-inner-container`,manualContainer:`${tu}-manual-container`,cornerContainer:`${tu}-corner-container`,topLeft:`${tu}-top-left`,topRight:`${tu}-top-right`,bottomLeft:`${tu}-bottom-left`,bottomRight:`${tu}-bottom-right`};function TSe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function f_(t){return t===0?"0":`${t}px`}function N2(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function F2(t,{top:e,bottom:i,left:r,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=s}let qa=class extends Vl.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=wn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&F2(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&F2(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Ue(()=>[this.view?.padding,this.container],this._applyViewPadding,vs),Ue(()=>this.padding,this._applyUIPadding,vs),Ue(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},vs),JG(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Qs.ui),ySe(e),this._attachContainers(e)),i&&(i.classList.remove(Qs.ui),F2(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(e-r-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...PZ,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(e-r-s,0)}add(e,i){let r,s,n;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=N2(e);o&&({index:r,position:i,component:e,key:s}=o),i&&typeof i=="object"&&({index:r,key:s,position:i,internal:n}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),s,n)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const n=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===s.position&&l.index>s.index&&l.index--}),this._components.splice(n,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,i);return}const r=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(n=>n==null?!1:!(this._componentMap.get(n)?.internal??!1)||i.removeInternal);for(const n of s)this.remove(n)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const s=N2(e)||N2(i);if(s&&(r=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const n=this.remove(e);n&&this.add(n,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>i.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:s})=>r??s)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,s,n){e instanceof eS||(e=new eS({node:e}));const{widget:o}=e;o!=null&&o instanceof Oe&&o.addHandles(Mt(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._components.some(a=>this._componentMap.get(a)?.position===i&&this._componentMap.get(a)?.index===r)&&this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===i&&l.index>=r&&l.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:s,position:i,internal:n,index:r})}_find(e){return e?e instanceof eS?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??CSe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Qs.innerContainer,Qs.cornerContainer);const i=document.createElement("div");i.classList.add(Qs.innerContainer,Qs.manualContainer);const r=document.createElement("div");r.classList.add(Qs.topLeft,Qs.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(Qs.topRight,Qs.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(Qs.bottomLeft,Qs.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(Qs.bottomRight,Qs.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=xSe();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:r,"top-trailing":a?r:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:s}=e,n=this._positionNameToContainerLookup[i],o=s!=null&&s>-1;if(TSe(r.widget)&&r.widget.startup(),!o)return void n.appendChild(r.node);const a=Array.from(n.children);if(a.length!==0){for(const l of a){const u=this._findByNode(l);if(u&&s<(this._componentMap.get(u)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}n.appendChild(r.node)}else n.appendChild(r.node)}_toPixelPosition(e){return{top:f_(e.top),left:f_(e.left),right:f_(e.right),bottom:f_(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(Ah).filter(s=>i.includeInternal||!this._componentMap.get(s)?.internal).map(({widget:s,node:n})=>s??n)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};c([d()],qa.prototype,"_locale",void 0),c([d()],qa.prototype,"container",null),c([d()],qa.prototype,"height",null),c([d({value:PZ})],qa.prototype,"padding",null),c([It("padding")],qa.prototype,"castPadding",null),c([d()],qa.prototype,"view",void 0),c([d()],qa.prototype,"width",null),qa=c([R("esri.views.ui.UI")],qa);const MSe=qa,kSe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},RSe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},ISe=t=>({...RSe,...t}),$Se=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},ASe=(t,e)=>t.find(e),d4=(t,e,i=!1)=>{let r=t;return e.forEach((s,n)=>{const o=r?.children?ASe(r.children,a=>a.domNode===s):void 0;i&&!o&&n!==e.length-1||(r=o)}),r},OSe=t=>{let e;const i={...kSe,...t},r=ISe(i),s=r.performanceLogger;let n,o=!0,a=!1;const l=[],u=[],h=(m,y,v)=>{let w;r.eventHandlerInterceptor=(E,I,D,O)=>function(A){let z;s("domEvent",A);const _=$Se(A.currentTarget,w.domNode),Z=_.some(ae=>customElements.get(ae?.tagName?.toLowerCase()));if(A.eventPhase===Event.CAPTURING_PHASE||!Z)_.reverse(),z=d4(w.getLastRender(),_);else{const ae=A.composedPath(),ge=ae.slice(ae.indexOf(A.currentTarget),ae.indexOf(w.domNode)).reverse();z=d4(w.getLastRender(),ge,!0)}let Q;return z&&(Q=i.handleInterceptedEvent(e,z,this,A)),s("domEventProcessed",A),Q},i.postProcessProjectionOptions?.(r);const S=v();w=m(y,S,r),r.eventHandlerInterceptor=void 0,l.push(w),u.push(v),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(w,S)};let p=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let m=0;m<l.length;m++){const y=u[m]();s("rendered",void 0);try{l[m].update(y)}catch(v){console.error(v)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,l,u)),e={renderNow:p,scheduleRender:()=>{n||a||(n=requestAnimationFrame(p))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(m,y)=>{h(hh.append,m,y)},insertBefore:(m,y)=>{h(hh.insertBefore,m,y)},merge:(m,y)=>{h(hh.merge,m,y)},replace:(m,y)=>{h(hh.replace,m,y)},detach:m=>{for(let y=0;y<u.length;y++)if(u[y]===m)return u.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const PSe="calcite-mode-auto",DSe="calcite-mode-dark",zWe={rtl:"calcite--rtl"},VWe={filter:250,nextTick:0,resize:150,reposition:100},UWe=25;function p4(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(DSe)||t.contains(PSe)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const N0=globalThis.calciteConfig,HWe=N0?.focusTrapStack||[],LSe=N0?.logLevel||"info",f4="3.2.1",NSe="2025-05-29",FSe="618973fec";function jSe(){if(N0&&N0.version)return;console.info(`Using Calcite Components ${f4} [Date: ${NSe}, Revision: ${FSe}]`);const t=N0||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:f4,writable:!1}),globalThis.calciteConfig=t}function zSe(){document.readyState==="interactive"?p4():document.addEventListener("DOMContentLoaded",()=>p4(),{once:!0}),jSe()}zSe();const VSe=qB({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.2.1/",hydratedAttribute:"calcite-hydrated"}),{customElement:DL,getAssetPath:DZ,setAssetPath:USe}=VSe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */let LZ=!1;const HSe=t=>{LZ=!0,USe(t)};let NZ;function BSe(){LZ||HSe(qn(Li(NZ)))}function LL(t){const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push(t[i]?.());return e.length>0?Promise.all(e):null}NZ="components/assets";const FZ=Symbol("widget"),jZ=Symbol("widget-test-data"),GSe=[],WSe={},JE=new WeakMap;function zZ(t,e){let i=e.children;if(i?.length)for(let s=0;s<i.length;++s)i[s]=zZ(t,i[s]);else i=GSe;const r=e.vnodeSelector;if(ZE(r)){const s=e.properties||WSe,n=s.key||r,o={key:n,afterCreate:qSe,afterUpdate:YSe,afterRemoved:VZ,parentWidget:t,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function qSe(t,e,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){const o=new s(n);o.container=t,JE.set(t,o),o.afterCreate?.(o,t),r.addHandles(Mt(()=>VZ(t))),queueMicrotask(()=>{o[jZ].projector.renderNow()})}function YSe(t,e,i,{widgetProperties:r}){const s=JE.get(t);s&&(s.set(r),s.afterUpdate?.(s,t))}function VZ(t){const e=JE.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),JE.delete(t))}function ZE(t){return typeof t=="function"&&t[FZ]}const m4=new Set;function JSe(t){m4.add(t),t.finally(()=>m4.delete(t))}function ZSe(t){return Mt()}var g4;let XSe=0;function UZ(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?UZ(t[r],e[r]):t[r]=e[r]);return t}const KSe=OSe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,s,n,o)=>{const a=e?.(r,s,n,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||l){const u=r[2].toLowerCase()+r.slice(3),h=y=>a?.call(n,y);n.addEventListener(u,h,l);const p=()=>n.removeEventListener(u,h,l),m=o.afterRemoved;o.afterRemoved=y=>{m?.(y),p()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(OZ(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let j2=!1;var Hp;let Rr=(Hp=class extends Sl.EsriPromiseMixin(Vl.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=KSe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=qC(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:u,propertyName:h})=>{if(this.destroyed)return;let p=await nW(u);this.uiStrings&&Object.keys(this.uiStrings)&&(p=UZ(B(p),this.uiStrings)),this[h]=p}));if(this.destroyed)return;for(const u of l)u.status==="rejected"&&he.getLogger(this).error("widget-intl:locale-error",this.declaredClass,u.reason)}await this.loadLocale()}),this.addHandles(ZSe()),BSe();const r="esri-widget-uid-"+eb(),s=this.render.bind(this);this._trackingTarget=new Bw(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=s()??n(),u=l.properties??={};if(u.key??=r,ZE(l.vnodeSelector)){if(!this.visible)return n()}else this.visible?u.styles||(u.styles={}):(u.class="",u.styles={display:"none"}),u.styles.display??="";let h=0;return l.children?.forEach(p=>{ZE(p.vnodeSelector)||(p.properties??={},p.properties.key??=`${this.id}--${h++}`)}),zZ(this,l)};this.render=()=>{if(j2)return o();let l=vSe(this)??null;if(l)return l;this._trackingTarget.clear(),j2=!0;try{l=$l(this._trackingTarget,o)}catch(u){throw he.getLogger(this).error(u),u}finally{j2=!1}return l&&wSe(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),JSe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(DN):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(ci(this._trackingTarget),ci(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,L2(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return YD(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+XSe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(g4=FZ,jZ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(L2(this),this._projector.scheduleRender())}classes(...e){return _Se.apply(this,e)}renderNow(){L2(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(Ue(()=>this.viewModel,(i,r)=>{r&&this.removeHandles("delegated-events"),i&&WC(i)&&this.addHandles(this._delegatedEventNames.map(s=>Fy(i,s,n=>{this.emit(s,n)})),"delegated-events")},Ps)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(DN),this.scheduleRender()};this.addHandles([JG(e),Ue(()=>this.uiStrings,e)]),this.addHandles(Ws(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},Hp[g4]=!0,Hp.vnodeSelector="div",Hp);c([d()],Rr.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Rr.prototype,"container",null),c([It("container")],Rr.prototype,"castContainer",null),c([d()],Rr.prototype,"icon",null),c([d()],Rr.prototype,"id",null),c([d()],Rr.prototype,"label",null),c([d()],Rr.prototype,"renderable",null),c([d()],Rr.prototype,"uiStrings",void 0),c([d()],Rr.prototype,"viewModel",void 0),c([d({value:!0})],Rr.prototype,"visible",null),c([d()],Rr.prototype,"key",void 0),c([d()],Rr.prototype,"children",void 0),c([d()],Rr.prototype,"afterCreate",void 0),c([d()],Rr.prototype,"afterUpdate",void 0),c([d()],Rr.prototype,"afterRemoved",void 0),Rr=c([R("esri.widgets.Widget")],Rr);const PT=Rr;var y4,b4,v4,w4,_4,x4,S4,E4,C4,T4,M4,k4,R4,I4,$4;(function(t){t.U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet"})(y4||(y4={})),function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.Basis="Basis",t.Etc1="Etc1",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"}(b4||(b4={})),function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.FeatureVariable="FeatureVariable",t.NotSet="NotSet"}(v4||(v4={})),function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"}(w4||(w4={})),function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"}(_4||(_4={})),function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"}(x4||(x4={})),function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"}(S4||(S4={})),function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"}(E4||(E4={})),function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"}(C4||(C4={})),function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"}(T4||(T4={})),function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"}(M4||(M4={})),function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"}(k4||(k4={})),function(t){t.Pbr="Pbr",t.Unlit="Unlit"}(R4||(R4={})),function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.Ga8="Ga8",t.Etc1="Etc1",t.Etc2="Etc2",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.NotSet="NotSet"}(I4||(I4={})),function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"}($4||($4={}));const QSe=new Map;function eEe(t){return QSe.get(t)}function A4(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function tEe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function Wb(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function iEe(t){return t.type==="bing-maps"}const iu=[];let ym=class extends Oe{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new _e,this.view=null,this._allLayerViewsChange=i=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(s=>Ue(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i?.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Oh(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ws(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;if(iu.length=0,!e||!i)return void this._clear();i.forEach(s=>{if(s.suspended||!s.layer?.attributionVisible)return;const n=s.layer;if(A4(n,"user"))return void Wb(iu,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const a=this._fetchedAttributionData.get(s);return void(a?Wb(iu,s,this._getDynamicAttribution(a,e,n)):A4(n)&&Wb(iu,s,n.copyright))}return void this._fetchAttributionData(s)}const o="portalItem"in n?n.portalItem?.accessInformation:void 0;Wb(iu,s,o||n.copyright)});const r=i.find(s=>s.layer?.type==="integrated-mesh-3dtiles");if(this.view&&r){const s=eEe(this.view);if(s){const n=s.getAttributionText();for(let o=0;o<n.length;++o)Wb(iu,r,n[o])}}tEe(this.items,iu)&&(this.items.removeAll(),this.items.addMany(iu)),iu.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await pT(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,iEe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const o=r[n],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),p=l.zoomMax-(i&&l.zoomMax?1:0),m=new it({xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Te.WGS84}),y={extent:xh(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:n};for(let v=h;v<=p;v++)s[v]??=[],s[v].push(y)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,r){const{extent:s,scale:n}=i;let o=r.tileInfo?.scaleToZoom(n)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const a=e[o],l=tT(s.center.clone().normalize(),Te.WebMercator),u=new Set;return a?a.filter(h=>{const p=h.id,m=!u.has(p)&&l&&h.extent&&e1(h.extent,l);return m&&u.add(p),m}).sort((h,p)=>p.score-h.score||h.objectId-p.objectId).map(h=>h.attribution).join(", "):""}};c([d({readOnly:!0,type:_e})],ym.prototype,"items",void 0),c([d({readOnly:!0})],ym.prototype,"state",null),c([d()],ym.prototype,"view",void 0),ym=c([R("esri.widgets.Attribution.AttributionViewModel")],ym);const HZ=ym,Rl={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function rEe(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:nEe(t[e])}}}function sEe(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function nEe(t){return function(e,...i){sEe(e)?SSe(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function DT(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var oEe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},BZ=function(t,e){for(var i=0,r=t.length;i<r;i++){var s=t[i];Array.isArray(s)?BZ(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=oEe(s)),e.push(s))}},aEe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return BZ(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function bn(t,e,...i){return typeof t!="function"||ZE(t)?aEe(t,e??null,...i):t(e,...i)}function GWe(...t){return t}const Wf="esri-attribution",qf={base:Wf,poweredBy:`${Wf}__powered-by`,sources:`${Wf}__sources`,open:`${Wf}--open`,sourcesOpen:`${Wf}__sources--open`,link:`${Wf}__link`};let Ms=class extends PT{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new HZ}initialize(){this.addHandles(Oh(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[qf.open]:this._isOpen};return bn("div",{bind:this,class:this.classes(qf.base,Rl.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return bn("div",{class:qf.poweredBy},"Powered by"," ",bn("a",{class:qf.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[qf.sourcesOpen]:e,[Rl.interactive]:i};return bn("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(qf.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=e,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],Ms.prototype,"_isOpen",void 0),c([d()],Ms.prototype,"_isInteractive",null),c([d()],Ms.prototype,"_attributionTextOverflowed",void 0),c([d()],Ms.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ms.prototype,"attributionText",null),c([d()],Ms.prototype,"icon",null),c([d()],Ms.prototype,"itemDelimiter",void 0),c([d()],Ms.prototype,"label",null),c([d(),DT("esri/widgets/Attribution/t9n/Attribution")],Ms.prototype,"messages",void 0),c([d()],Ms.prototype,"view",null),c([d({type:HZ})],Ms.prototype,"viewModel",void 0),c([rEe()],Ms.prototype,"_toggleState",null),Ms=c([R("esri.widgets.Attribution")],Ms);const lEe=Ms;function uEe(){const t=J("mapview-essential-goto-duration");return t==null?t:t}function cEe(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function hEe(t,e,i){return t.goTo(e,i)}const dEe=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return x8(r),this.goToOverride?this.goToOverride(r,i):hEe(r,i.target,i.options)}};return c([d()],e.prototype,"goToOverride",void 0),c([d()],e.prototype,"view",void 0),e=c([R("esri.widgets.support.GoTo")],e),e};let Bd=class extends dEe(Oe){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(vs)}destroy(){this.view=null}get canShowNorth(){return cEe(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:uEe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?Ue(()=>e?.rotation,this._updateForRotation,vs):Ue(()=>e?.camera,this._updateForCamera,vs))}_watchForView(e){this.addHandles(Ue(()=>this.view,this._updateRotationWatcher,e))}};c([d({readOnly:!0})],Bd.prototype,"canShowNorth",null),c([d({readOnly:!0})],Bd.prototype,"orientation",void 0),c([d({readOnly:!0})],Bd.prototype,"state",null),c([d()],Bd.prototype,"view",void 0),Bd=c([R("esri.widgets.Compass.CompassViewModel")],Bd);const GZ=Bd,O4="esri-compass",P4={base:O4,iconContainer:`${O4}__icon-container`};let gu=class extends PT{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new GZ,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return LL({button:()=>le(()=>Promise.resolve().then(()=>g3),void 0),icon:()=>le(()=>Promise.resolve().then(()=>dAe),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return bn("div",{class:this.classes(P4.base,Rl.widget)},bn("calcite-button",{class:Rl.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},bn("div",{"aria-hidden":"true",class:P4.iconContainer,title:r.reset},bn("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};c([d()],gu.prototype,"goToOverride",null),c([d()],gu.prototype,"icon",null),c([d()],gu.prototype,"label",null),c([d(),DT("esri/widgets/Compass/t9n/Compass")],gu.prototype,"messages",void 0),c([d()],gu.prototype,"view",null),c([d({type:GZ})],gu.prototype,"viewModel",void 0),gu=c([R("esri.widgets.Compass")],gu);const pEe=gu,D4="esri-navigation-toggle",L4={base:D4,isLayoutHorizontal:`${D4}--horizontal`};let bm=class extends Oe{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||tne(he.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(Ws(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};c([d({readOnly:!0})],bm.prototype,"state",null),c([d()],bm.prototype,"_navigationMode",void 0),c([d()],bm.prototype,"view",void 0),bm=c([R("esri.widgets.NavigationToggle.NavigationToggleViewModel")],bm);const WZ=bm;let yu=class extends PT{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new WZ({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;ESe(r),this.toggle()},e?.isDefaultUI||ene(he.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return LL({button:()=>le(()=>Promise.resolve().then(()=>g3),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return bn("div",{class:this.classes(L4.base,Rl.widget,{[L4.isLayoutHorizontal]:this.layout==="horizontal"})},bn("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:i?"outline-fill":"solid",class:Rl.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),bn("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:i?"solid":"outline-fill",class:Rl.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};c([d()],yu.prototype,"icon",null),c([d()],yu.prototype,"label",null),c([d({value:"vertical"})],yu.prototype,"layout",null),c([d(),DT("esri/widgets/NavigationToggle/t9n/NavigationToggle")],yu.prototype,"messages",void 0),c([d()],yu.prototype,"view",null),c([d({type:WZ})],yu.prototype,"viewModel",void 0),yu=c([R("esri.widgets.NavigationToggle")],yu);const fEe=yu;let Gd=class extends Oe{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};c([d({readOnly:!0})],Gd.prototype,"canZoomIn",null),c([d({readOnly:!0})],Gd.prototype,"canZoomOut",null),c([d()],Gd.prototype,"view",void 0),c([d()],Gd.prototype,"_scale",null),Gd=c([R("esri.widgets.Zoom.ZoomConditions2D")],Gd);const mEe=Gd;let vm=class extends Oe{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],vm.prototype,"canZoomIn",null),c([d({readOnly:!0})],vm.prototype,"canZoomOut",null),c([d()],vm.prototype,"view",void 0),vm=c([R("esri.widgets.Zoom.ZoomConditions3D")],vm);const gEe=vm;let Nc=class extends Oe{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new mEe({view:e}):e.type==="3d"&&(this._zoomConditions=new gEe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():ow(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():ow(e.goTo({zoomFactor:.5})))}};c([d()],Nc.prototype,"_zoomConditions",void 0),c([d()],Nc.prototype,"canZoomIn",null),c([d()],Nc.prototype,"canZoomOut",null),c([d({readOnly:!0})],Nc.prototype,"state",null),c([d()],Nc.prototype,"view",null),Nc=c([R("esri.widgets.Zoom.ZoomViewModel")],Nc);const qZ=Nc,N4={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let bu=class extends PT{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new qZ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return LL({button:()=>le(()=>Promise.resolve().then(()=>g3),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[N4.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return bn("div",{class:this.classes(N4.base,Rl.widget,e)},bn("calcite-button",{class:Rl.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),bn("calcite-button",{class:Rl.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};c([d()],bu.prototype,"icon",null),c([d()],bu.prototype,"label",null),c([d({value:"vertical"})],bu.prototype,"layout",null),c([d(),DT("esri/widgets/Zoom/t9n/Zoom")],bu.prototype,"messages",void 0),c([d()],bu.prototype,"view",null),c([d({type:qZ})],bu.prototype,"viewModel",void 0),bu=c([R("esri.widgets.Zoom")],bu);const yEe=bu;function bEe(t){return t?.view!==void 0}let tS=class extends MSe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const s=this._find(r),n=s?.widget;bEe(n)&&(n.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Ue(()=>this.components,this._componentsWatcher,vs),Ue(()=>this.view,this._updateViewAwareWidgets,vs)])}_add(e,i,r,s,n){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,s,n)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new eS({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new lEe({view:i});case"compass":return new pEe({view:i});case"navigation-toggle":return new fEe({view:i,isDefaultUI:!0});case"zoom":return new yEe({view:i})}}};c([d()],tS.prototype,"components",void 0),tS=c([R("esri.views.ui.DefaultUI")],tS);const YZ=tS;let iS=class extends YZ{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],iS.prototype,"components",void 0),iS=c([R("esri.views.ui.2d.DefaultUI2D")],iS);const JZ=iS;let ZZ=class hA{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new W(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new hA(this.major,this.minor,this._context)}static parse(e,i=""){const[r,s]=e.split("."),n=/^\s*\d+\s*$/;if(!r?.match||!n.test(r))throw new W((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s?.match||!n.test(s))throw new W((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(s,10);return new hA(o,a,i)}},Ig=class extends ZZ{constructor(e,i){super(e,i,"webmap")}};function z2(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const XZ=new Ig(2,34);var dA;let rS=dA=class extends X{constructor(t){super(t),this.color=new He([0,0,0,1])}clone(){return new dA(B({color:this.color}))}};c([d({type:He,json:{write:!0}})],rS.prototype,"color",void 0),rS=dA=c([R("esri.webmap.background.ColorBackground")],rS);const LT=rS;let KZ,QZ,eX,tX,iX,rX,sX;async function vEe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([le(()=>import("./webglDeps-4A6eiEnb.js"),__vite__mapDeps([195,196,21,197,198,1,2])),le(()=>import("./mapViewDeps-DiZ3bZgh.js"),__vite__mapDeps([199,113,79,80,20,21,81,82,83,84,78,49,200,88,201,197,196,152,129,202,85,203,103,204,136,135,91,25,26,86,5,1,2,205,89,90,206,8,134,195,198,207,98,208,209,210,149,146,127,211,65,77,23,16,29,212,213,87,214,93,215,95,54,75,216,217,218,219,145,220,221]))]);QZ=t,eX=e,tX=i,iX=r,rX=s,sX=n,KZ=o}var ey;let yt=(ey=class extends u_e(Vwe(ode(Ape(gpe(wve))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new yl({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new MT({actionMap:new _L({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new _e,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new RZ,this.type="2d",this.view2dType=null,this.ui=new JZ,this.test={takeScreenshot:async i=>Qxe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},ghe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=ci(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new oxe(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,i=this.spatialReference;return{lods:e?.spatialReference?.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(i?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(s?.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return vW(i.spatialReference,r)}get background(){return z2(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get highlightOptions(){return Nxe(this)}set highlightOptions(e){Fxe(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resolution(){return this.stateManager.resolution??0}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(J("esri-2d-log-updating")){const r=this.allLayerViews.reduce((s,n)=>({...s,[`${n.layer.id}(${n.layer.type})`]:!n.destroyed&&!("layerViews"in n)&&n.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new ui({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,i){return jxe(this,e,i)}async takeScreenshot(e){return Kxe(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return z2(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return z2(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return E5.hasLayerViewModule(e)}importLayerView(e){return E5.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(he.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const i=this.toMap(e),r=await this.hitTest(e),s=this.allLayerViews.toArray().filter(u=>u.clips.every(h=>bZ(this,h,e,i))).reverse(),n=new globalThis.Map(s.map(u=>[u.layer.uid,u])),o=[];let a=0,l=0;for(;a<r.results.length||l<s.length;){const u=r.results.at(a);if(u&&u.type!=="graphic"){++a;continue}const h=n.get((u?.layer??u?.graphic.layer)?.uid);if((!u||h)&&l<s.length&&s.at(l)!==h){const p=s.at(l);"fetchPopupFeaturesAtLocation"in p&&o.push({mapPoint:i,layerView:p}),++l}else u&&(o.push({graphic:u.graphic,layerView:h}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=cSe(this.type);if(J("safari")&&J("safari")<9&&(e=new W("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:J("safari")})),e!=null){he.getLogger(this).warn("#validate()",e.message);const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");throw n.innerHTML="https://esriurl.com/systemRequirements",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/systemRequirements",i.appendChild(r),i.appendChild(s),i.appendChild(n),this.surface.appendChild(i),e}}loadAsyncDependencies(){return vEe()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:s,size:n}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o?.viewpoint,u=l?.targetGeometry?.extent??i,h=u?.center,p=l?.rotation??0,m=l?.scale||u&&IT(u,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),y=a.center??h,v=a.rotation??p,w=a.scale??m;return y&&w?new xr({targetGeometry:y,scale:w,rotation:v}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new X_e(this.surface),r=new KZ(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new rX,this._magnifierView.magnifier=this.magnifier,this._gridView=new sX;const s=new tX({view:this});this._set("labelManager",s);const n=new V_e({view:this});this._set("animationManager",n);const o=new iX({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),Ue(()=>this.stationary,l=>r.stationary=l,Ps),Ue(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},Ps),Ue(()=>this.magnifier,l=>this._magnifierView.magnifier=l,Ps),Ue(()=>this.grid,l=>this._gridView.grid=l,Ps),Ue(()=>this.renderingOptions,l=>r.renderingOptions=l,Ps),Ue(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=Dxe(r.highlightGradient,this.highlights.items)},Ps),Ue(()=>this.state.id,()=>r.state=this.state,Ps)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new q_e(Gr.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new QZ({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new eX(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:i,padding:r,size:s,stage:n}=this;return{allLayerViews:i,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},ey.type="2d",ey);c([d({constructOnly:!0})],yt.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],yt.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],yt.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],yt.prototype,"graphicsTileStore",null),c([d()],yt.prototype,"graphicsView",void 0),c([d()],yt.prototype,"constraintsInfo",null),c([d()],yt.prototype,"initialExtentRequired",null),c([d()],yt.prototype,"labelManager",void 0),c([d({type:MT,nonNullable:!0})],yt.prototype,"navigation",void 0),c([d({constructOnly:!0})],yt.prototype,"renderCanvas",void 0),c([d()],yt.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],yt.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],yt.prototype,"supportsGround",void 0),c([d()],yt.prototype,"defaultsFromMapSettings",null),c([d({readOnly:!0})],yt.prototype,"typeSpecificPreconditionsReady",null),c([d({type:LT})],yt.prototype,"background",null),c([d()],yt.prototype,"center",null),c([d({type:_e})],yt.prototype,"floors",void 0),c([d()],yt.prototype,"grid",void 0),c([d({type:Eh})],yt.prototype,"highlightOptions",null),c([d()],yt.prototype,"map",void 0),c([d()],yt.prototype,"padding",null),c([d({readOnly:!0})],yt.prototype,"rendering",null),c([d({readOnly:!0})],yt.prototype,"resolution",null),c([d()],yt.prototype,"scale",null),c([d({constructOnly:!0})],yt.prototype,"spatialReferenceLocked",void 0),c([d({readOnly:!0})],yt.prototype,"tileInfo",null),c([d({type:RZ,readOnly:!0})],yt.prototype,"timeline",void 0),c([d({readOnly:!0})],yt.prototype,"type",void 0),c([d({readOnly:!0})],yt.prototype,"updating",null),c([d({readOnly:!0})],yt.prototype,"view2dType",void 0),c([d({readOnly:!0})],yt.prototype,"visibleArea",null),c([d()],yt.prototype,"zoom",null),c([d({readOnly:!0})],yt.prototype,"navigating",null),c([d(),It(t=>t instanceof YZ?t:Zw(JZ,t))],yt.prototype,"ui",void 0),yt=c([R("esri.views.View2D")],yt);const wEe=yt;let sS=class extends wEe{constructor(e){super(e),this.view2dType="map"}};c([d({readOnly:!0})],sS.prototype,"view2dType",void 0),sS=c([R("esri.views.MapView")],sS);const nX=sS;let _Ee=class oX{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(iR),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new oX,r=this._originStores[lt.DEFAULTS];r&&r.forEach((s,n)=>{i.set(n,B(s),lt.DEFAULTS)});for(let s=lt.SERVICE;s<iR;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{e&&e.has(a)||i.set(a,B(o),s)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=lt.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),n!==i}return!1}delete(e,i=lt.USER){const r=this._originStores[i];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],s=r?.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),n!==s}originOf(e){return this._propertyOriginMap.get(e)||lt.DEFAULTS}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const aX=t=>{let e=class extends t{constructor(...i){super(...i);const r=Gs(this),s=r.store,n=new _Ee;r.store=n,d9(r,s,n)}read(i,r){f9(this,i,r)}getAtOrigin(i,r){const s=V2(this),n=Ju(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach(a=>{o[a]=s.get(a,n)}),o}originOf(i){return uw(this.originIdOf(i))}originIdOf(i){return V2(this).originOf(i)}revert(i,r){const s=V2(this),n=Ju(r),o=Gs(this);let a;a=typeof i=="string"?i==="*"?s.keys(n):[i]:i,a.forEach(l=>{o.invalidate(l),s.revert(l,n),o.commit(l)})}};return e=c([R("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function V2(t){return Gs(t).store}let F4=class extends aX(Oe){};F4=c([R("esri.core.ReadOnlyMultiOriginJSONSupport")],F4);const xEe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){Gs(this).clearOrigin(i,Ju(r))}write(i,r){return y9(this,i=i||{},r),i}setAtOrigin(i,r,s){Gs(this).setAtOrigin(i,r,Ju(s))}removeOrigin(i){const r=j4(this),s=Ju(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),lt.USER)}updateOrigin(i,r){const s=j4(this),n=Ju(r),o=ya(this,i);for(let a=n+1;a<iR;++a)s.delete(i,a);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return e=c([R("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function j4(t){return Gs(t).store}const NT=t=>{let e=class extends xEe(aX(t)){constructor(...i){super(...i)}};return e=c([R("esri.core.MultiOriginJSONSupport")],e),e};let pA=class extends NT(Oe){};pA=c([R("esri.core.MultiOriginJSONSupport")],pA);async function SEe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return tg(t);const i=Te.WGS84;return await qD(e,i),qh(t,i)}function EEe(t,e){if(!NL(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function NL(t,e){return!!t.typeKeywords?.includes(e)}function aqe(t){return NL(t,FL.HOSTED_SERVICE)}function CEe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function lqe(t,e,i){i?EEe(t,e):CEe(t,e)}async function uqe(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return SEe(i)}const FL={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function TEe(t){const{portal:e,isOrgItem:i,itemControl:r}=t,s=e.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!s?.includes("features:user:fullEdit");const a=r==="update"||r==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}let Fc=class extends X{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};c([d({type:String,json:{write:{isRequired:!0}}})],Fc.prototype,"facilityIdField",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Fc.prototype,"layerId",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Fc.prototype,"nameField",void 0),c([d({type:String,json:{write:!0}})],Fc.prototype,"siteIdField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Fc.prototype,"sublayerId",void 0),Fc=c([R("esri.layers.support.FacilityLayerInfo")],Fc);const MEe=Fc;let ia=class extends X{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"facilityIdField",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"layerId",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"levelIdField",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"levelNumberField",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"longNameField",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"shortNameField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ia.prototype,"sublayerId",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],ia.prototype,"verticalOrderField",void 0),ia=c([R("esri.layers.support.LevelLayerInfo")],ia);const kEe=ia;let Wd=class extends X{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};c([d({type:String,json:{write:{isRequired:!0}}})],Wd.prototype,"layerId",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Wd.prototype,"nameField",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Wd.prototype,"siteIdField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Wd.prototype,"sublayerId",void 0),Wd=c([R("esri.layers.support.SiteLayerInfo")],Wd);const REe=Wd;let wm=class extends X{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};c([d({type:kEe,json:{write:{isRequired:!0}}})],wm.prototype,"levelLayer",void 0),c([d({type:MEe,json:{write:{isRequired:!0}}})],wm.prototype,"facilityLayer",void 0),c([d({type:REe,json:{write:!0}})],wm.prototype,"siteLayer",void 0),wm=c([R("esri.support.MapFloorInfo")],wm);const IEe=wm;var El;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(El||(El={}));var fA;let _m=fA=class extends X{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new fA(B({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};c([d({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],_m.prototype,"activeRange",void 0),c([d({type:[Number],json:{write:!0}})],_m.prototype,"currentRangeExtent",void 0),c([d({type:[Number],json:{write:!0}})],_m.prototype,"fullRangeExtent",void 0),_m=fA=c([R("esri.webdoc.RangeInfo")],_m);const jL=_m;var mA;let Ya=mA=class extends X{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new mA(B({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};c([d({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Ya.prototype,"enabled",void 0),c([d({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Ya.prototype,"longNames",void 0),c([d({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Ya.prototype,"minimized",void 0),c([d({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Ya.prototype,"pinnedLevels",void 0),c([d({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Ya.prototype,"site",void 0),c([d({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Ya.prototype,"facility",void 0),c([d({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Ya.prototype,"level",void 0),Ya=mA=c([R("esri.webdoc.widgets.FloorFilter")],Ya);const $Ee=Ya;var gA;const m_=new Xe({slider:"slider",picker:"picker"});let xm=gA=class extends X{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new gA({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};c([d({type:m_.apiValues,nonNullable:!0,json:{type:m_.jsonValues,default:null,read:{reader:m_.read},write:{isRequired:!0,writer:m_.write}}})],xm.prototype,"interactionMode",void 0),c([d({type:ht,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],xm.prototype,"numStops",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],xm.prototype,"stopInterval",void 0),xm=gA=c([R("esri.webdoc.widgets.Range")],xm);const AEe=xm,zL=hr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let wa=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Dq(this.value,this.unit,"milliseconds")}};c([Re(zL,{nonNullable:!0})],wa.prototype,"unit",void 0),c([d({type:Number,json:{write:!0},nonNullable:!0})],wa.prototype,"value",void 0),wa=c([R("esri.time.TimeInterval")],wa);var yA;let pr=yA=class extends X{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?Vt.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Bi(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,s=i.startTime!=null?new Date(i.startTime):null;return new Vt({start:s,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,s=t.start;r&&(i.endTime=r!=null?r.getTime():null),s&&(i.startTime=s!=null?s.getTime():null)}readStopInterval(t,e,i){return t?wa.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const s=t.toJSON(r);Bi("properties.timeStopInterval",{interval:s.value,units:s.unit},e)}readStops(t){return t?.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t?.length&&Bi(i,t.map(r=>r.getTime()),e)}clone(){return new yA(B({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};c([d({type:Vt,json:{type:[[ht,Vy]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],pr.prototype,"currentTimeExtent",void 0),c([de("currentTimeExtent")],pr.prototype,"readCurrentTimeExtent",null),c([me("currentTimeExtent")],pr.prototype,"writeCurrentTimeExtent",null),c([d({type:Vt,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],pr.prototype,"fullTimeExtent",void 0),c([de("fullTimeExtent")],pr.prototype,"readFullTimeExtent",null),c([me("fullTimeExtent")],pr.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],pr.prototype,"loop",void 0),c([d({type:ht,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const t=!!this.stopInterval,e=!!this.stops?.length,i=!(t||e);return{enabled:i,isRequired:i}}}}})],pr.prototype,"numStops",void 0),c([d({type:[1,2],nonNullable:!0,json:{type:ht,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],pr.prototype,"numThumbs",void 0),c([d({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],pr.prototype,"stopDelay",void 0),c([d({type:wa,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:zL.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){const t=this.numStops!=null,e=!!this.stops?.length;return{enabled:!e,isRequired:!(t||e)}}}}})],pr.prototype,"stopInterval",void 0),c([de("stopInterval")],pr.prototype,"readStopInterval",null),c([me("stopInterval")],pr.prototype,"writeStopInterval",null),c([d({type:[Date],json:{type:[ht],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],pr.prototype,"stops",void 0),c([de("stops")],pr.prototype,"readStops",null),c([me("stops")],pr.prototype,"writeStops",null),pr=yA=c([R("esri.webdoc.widgets.TimeSlider")],pr);const OEe=pr;var bA;let Sm=bA=class extends X{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new bA(B({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};c([d({type:AEe,json:{write:!0}})],Sm.prototype,"range",void 0),c([d({type:OEe,json:{write:!0}})],Sm.prototype,"timeSlider",void 0),c([d({type:$Ee,json:{write:!0}})],Sm.prototype,"floorFilter",void 0),Sm=bA=c([R("esri.webdoc.Widgets")],Sm);const PEe=Sm,DEe={width:600,height:400},g_=1.5;function LEe(t,e){e=e||DEe;let{width:i,height:r}=e;const s=i/r;return s<g_?r=i/g_:s>g_&&(i=r*g_),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function NEe(t,e){return{...lX(t,e),readResourcePaths:[]}}function mqe(t,e,i){const r=Sr(t.itemUrl);return{...lX(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function lX(t,e){return{origin:e,url:Sr(t.itemUrl),portal:t.portal||fe.getDefault(),portalItem:t}}let Zc=class extends X{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(s=>s.toJSON()),i=this.geometries[0],r={};return r.outSR=nE(this.outSpatialReference),r.inSR=nE(i.spatialReference),r.geometries=JSON.stringify({geometryType:qy(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};c([d()],Zc.prototype,"geometries",void 0),c([d({type:Te,json:{read:{source:"outSR"}}})],Zc.prototype,"outSpatialReference",void 0),c([d()],Zc.prototype,"transformation",void 0),c([d()],Zc.prototype,"transformForward",void 0),Zc=c([R("esri.rest.support.ProjectParameters")],Zc);const FEe=Gi(Zc);async function jEe(t,e,i){e=FEe(e);const r=fJ(t),s={...r.query,f:"json",...e.toJSON()},n=e.outSpatialReference,o=qy(e.geometries[0]),a=f0e(s,i);return Tt(r.path+"/project",a).then(({data:{geometries:l}})=>mJ(l,o,n))}function zEe(t,e){return e.resourceInfo?uX(e,e.resourceInfo,{origin:t.origin}):e.portalItem?.id?VEe(t,e,e.portalItem):Promise.resolve()}function uX(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||fe.getDefault()),le(()=>import("./layersCreator-Dp_lCfjw.js"),__vite__mapDeps([177,178,179,180,181,182,1,2])).then(({populateOperationalLayers:s})=>{const n=[],o=e.operationalLayers;o?.length&&n.push(s(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l?.length&&n.push(s(t.tables,l,a)),Promise.allSettled(n).then(()=>{})})}async function VEe(t,e,i){if(await i.load().catch(o=>{throw new W(`${t.name}:load-portal-item`,"Failed to load portal item",{error:o})}),i.type!==t.itemType)throw new W(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const s=NEe(i,t.origin);await UEe(t,e,r,s),e.resourceReferences={portalItem:i,paths:s.readResourcePaths};const n=await BEe(e.initialViewProperties,i,he.getLogger(e));if(n){const o=e.initialViewProperties?.clone()??t.createInitialViewProperties();o.viewpoint=n,e.initialViewProperties=o}}function UEe(t,e,i,r){const s=HEe(t,i);return e.read(s,r),uX(e,s,r)}function HEe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function BEe(t,e,i){if(t?.viewpoint?.targetGeometry)return null;const s=await GEe(t,e,i);return s?new xr({targetGeometry:s}):null}async function GEe(t,e,i){const r=t?.spatialReference,s=e?.extent;if(!r||!s)return null;if(r.isWGS84)return s.clone();if(r.isWebMercator)return xh(s);const{getGeometryServiceURL:n}=await le(()=>import("./geometryServiceUtils-7miMCd8K.js"),__vite__mapDeps([194,1,2]));try{const o=await n(e),a=new Zc({geometries:[s],outSpatialReference:r});return(await jEe(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function z4(t){return{enabled:!!t?.length}}var vA;let Em=vA=class extends X{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new vA({exactMatch:this.exactMatch,type:this.type,name:this.name})}};c([d({type:Boolean,json:{write:!0}})],Em.prototype,"exactMatch",void 0),c([d({type:String,json:{write:!0}})],Em.prototype,"name",void 0),c([Re(vL)],Em.prototype,"type",void 0),Em=vA=c([R("esri.webdoc.applicationProperties.SearchLayerField")],Em);const WEe=Em;var wA;let Cm=wA=class extends X{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new wA(B({field:this.field,id:this.id,subLayer:this.subLayer}))}};c([d({type:WEe,json:{write:{isRequired:!0}}})],Cm.prototype,"field",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Cm.prototype,"id",void 0),c([d({type:ht,json:{write:!0}})],Cm.prototype,"subLayer",void 0),Cm=wA=c([R("esri.webdoc.applicationProperties.SearchLayer")],Cm);const qEe=Cm;var _A;let Tm=_A=class extends X{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new _A({exactMatch:this.exactMatch,type:this.type,name:this.name})}};c([d({type:Boolean,json:{write:!0}})],Tm.prototype,"exactMatch",void 0),c([d({type:String,json:{write:!0}})],Tm.prototype,"name",void 0),c([Re(vL)],Tm.prototype,"type",void 0),Tm=_A=c([R("esri.webdoc.applicationProperties.SearchTableField")],Tm);const YEe=Tm;var xA;let Vv=xA=class extends X{constructor(t){super(t),this.field=null,this.id=null}clone(){return new xA(B({field:this.field,id:this.id}))}};c([d({type:YEe,json:{write:{isRequired:!0}}})],Vv.prototype,"field",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Vv.prototype,"id",void 0),Vv=xA=c([R("esri.webdoc.applicationProperties.SearchTable")],Vv);const JEe=Vv;var SA;const cX=_e.ofType(qEe),hX=_e.ofType(JEe);let Ja=SA=class extends X{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new cX,this.tables=new hX}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new SA(B({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};c([d({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Ja.prototype,"addressSearchEnabled",void 0),c([de("addressSearchEnabled")],Ja.prototype,"readAddressSearchEnabled",null),c([me("addressSearchEnabled")],Ja.prototype,"writeAddressSearchEnabled",null),c([d({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Ja.prototype,"enabled",void 0),c([d({type:String,json:{write:!0}})],Ja.prototype,"hintText",void 0),c([d({type:cX,json:{write:{overridePolicy:z4},origins:{"web-scene":{write:{isRequired:!0}}}}})],Ja.prototype,"layers",void 0),c([d({type:hX,json:{read:!0,write:{overridePolicy:z4}}})],Ja.prototype,"tables",void 0),Ja=SA=c([R("esri.webdoc.applicationProperties.Search")],Ja);const ZEe=Ja;var EA;let nS=EA=class extends X{constructor(t){super(t),this.search=null}clone(){return new EA(B({search:this.search}))}};c([d({type:ZEe,json:{write:!0}})],nS.prototype,"search",void 0),nS=EA=c([R("esri.webdoc.applicationProperties.Viewing")],nS);const XEe=nS;var CA;let Mm=CA=class extends X{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new CA(B({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};c([d({json:{write:!0}})],Mm.prototype,"editing",void 0),c([d({json:{write:!0}})],Mm.prototype,"offline",void 0),c([d({type:XEe,json:{write:!0}})],Mm.prototype,"viewing",void 0),Mm=CA=c([R("esri.webmap.ApplicationProperties")],Mm);const KEe=Mm;var TA;let Yu=TA=class extends X{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return R9(this.url)}get isDataURI(){return nc(this.url)}clone(){return new TA({url:this.url})}};c([d({type:String,json:{write:{isRequired:!0}}})],Yu.prototype,"url",void 0),c([d()],Yu.prototype,"isSecureUrl",null),c([d()],Yu.prototype,"isDataURI",null),Yu=TA=c([R("esri.webdoc.support.SlideThumbnail")],Yu);const QEe={type:Vt,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?Vt.fromArray(t):Vt.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r?.messages&&r.messages.push(new W("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[ht,Vy]]}}}}};var MA;let Za=MA=class extends tb.IdentifiableMixin(X){constructor(t){super(t),this.name=null,this.thumbnail=new Yu,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Yu({url:t}):Gi(Yu,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&he.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return xr.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:s}=t;if(s==null||s.type==="extent")s!=null&&(e.extent=s.toJSON()),e[i]=t.toJSON();else{const n="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r?.messages?r.messages.push(new W("property:unsupported",n)):he.getLogger(this).error(n)}}clone(){return new MA(B({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};c([d({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Za.prototype,"name",void 0),c([d({type:Yu,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Za.prototype,"thumbnail",void 0),c([It("thumbnail")],Za.prototype,"castThumbnail",null),c([d(QEe)],Za.prototype,"timeExtent",void 0),c([d({type:xr,nonNullable:!0,json:{write:!0}})],Za.prototype,"viewpoint",null),c([de("viewpoint",["extent","viewpoint"])],Za.prototype,"readViewpoint",null),c([me("viewpoint")],Za.prototype,"writeViewpoint",null),Za=MA=c([R("esri.webmap.Bookmark")],Za);const eCe=Za;let vu=class extends Fe.ClonableMixin(Oe){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=Oo,this.viewpoint=null}};c([d({type:LT})],vu.prototype,"background",void 0),c([d({type:jL})],vu.prototype,"rangeInfo",void 0),c([d({type:Te})],vu.prototype,"spatialReference",void 0),c([d({type:Vt})],vu.prototype,"timeExtent",void 0),c([d({nonNullable:!0})],vu.prototype,"timeZone",void 0),c([d({type:xr})],vu.prototype,"viewpoint",void 0),vu=c([R("esri.webmap.InitialViewProperties")],vu);const XE=vu,dX=_e.ofType(eCe),tCe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),iCe="ArcGIS Pro",rCe=FL.JSAPI;let si=class extends NT(gs.LoadableMixin(Sl.EsriPromiseMixin(Nq))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new dX,this.floorInfo=null,this.initialViewProperties=new XE,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=qC(async(i,r,s)=>{const{save:n,saveAs:o}=await le(()=>import("./webdocSaveUtils-Cid266ut.js"),__vite__mapDeps([276,277,278,279,176,1,2,280]));switch(i){case El.SAVE:return n(this.context,this,r);case El.SAVE_AS:return o(this.context,this,s,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=ci(this.portalItem)}initialize(){if(this.when().catch(e=>{he.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=rCe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=F9}readInitialViewProperties(e,i){const r=new XE;i.background&&(r.background=LT.fromJSON(i.background));const s=i.initialState?.timeExtent;s&&(r.timeExtent=Vt.fromArray(s));const n=i.initialState?.viewpoint;return n&&(n.rotation&&Ig.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===iCe&&(n.rotation*=-1),r.viewpoint=xr.fromJSON(n)),i.mapRangeInfo&&(r.rangeInfo=jL.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=Te.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,s){if(!e)return;e.background?.color&&(i.background=e.background.write({},s));const{timeExtent:n,viewpoint:o}=e;if(o||n){const a={};o&&(a.viewpoint=o.write({},s)),n&&(a.timeExtent=n.toArray()),i.initialState=a}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(s)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},s)),i.timeZone=e.timeZone}writeLayers(e,i,r,s){i[r]=this._writeLayers(e,s,"operational-layers")}readSourceVersion(e,i){const[r,s]=i.version.split(".");return new Ig(parseInt(r,10),parseInt(s,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,s){const n=this._writeLayers(e,s,"tables");n.length&&(i[r]=n)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(zEe(this.context,this)),Promise.resolve(this)}loadAll(){return mT(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();m9(this,e,s=>super.read(e,s),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new W("webmap:not-loaded","Web map must be loaded before it can be serialized");throw he.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(El.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(El.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){const i=this.resourceInfo;return this._collectAllLayersJSON([...i?.baseMap?.baseMapLayers||[],...i?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(r=>r.id===e.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:O9(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(s=>lI(s,r==="tables"?null:this.getLayerJSONFromResourceInfo(s),i)).filter(Ah).toArray()}_validateJSON(e){const i=Ig.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){const e=this.applicationProperties,i=e?.viewing?.search,r=o=>this.allLayers.some(a=>a.id===o);if(i?.layers&&(i.layers=i.layers.filter(o=>r(o.id))),i?.tables&&(i.tables=i.tables.filter(o=>this.tables.some(a=>a.id===o.id))),e){const o=e.editing?.locationTracking;o?.info&&!r(o.info.layerId)&&(e.editing=null)}const s="presentation"in this?this.presentation:null,n=s?.slides;n&&n.forEach(o=>{o.visibleLayers&&(o.visibleLayers=o.visibleLayers.filter(a=>r(a.id)))})}async _updateFromInternal(e,i){if(i??={},await YC(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){if(i.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new xr({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),s=r.width/2;return r.xmin=i.x-s,r.xmax=i.x+s,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=LEe(e,i.thumbnailSize),s=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(nc(e)){const i=Jp(e),r=i?.mediaType,s=r&&tCe.get(r.toLowerCase())||null,n=`thumbnail${Date.now()}`;return s?`${n}.${s}`:n}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};c([d()],si.prototype,"_updateFromPromise",void 0),c([d({type:KEe,json:{write:!0}})],si.prototype,"applicationProperties",void 0),c([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],si.prototype,"authoringApp",null),c([me("authoringApp")],si.prototype,"writeAuthoringApp",null),c([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],si.prototype,"authoringAppVersion",null),c([me("authoringAppVersion")],si.prototype,"writeAuthoringAppVersion",null),c([d({type:dX,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],si.prototype,"bookmarks",void 0),c([d({type:IEe,json:{name:"mapFloorInfo",write:!0}})],si.prototype,"floorInfo",void 0),c([d({type:XE,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:LT},"initialState.timeExtent":{type:Vt},"initialState.viewpoint":{type:xr},mapRangeInfo:{type:jL},spatialReference:{type:Te},"timeZone:":{type:String}}}}})],si.prototype,"initialViewProperties",void 0),c([de("initialViewProperties")],si.prototype,"readInitialViewProperties",null),c([me("initialViewProperties")],si.prototype,"writeInitialViewProperties",null),c([d({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],si.prototype,"layers",void 0),c([me("layers")],si.prototype,"writeLayers",null),c([d({type:We})],si.prototype,"portalItem",void 0),c([d()],si.prototype,"resourceInfo",void 0),c([d({readOnly:!0,type:Ig,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],si.prototype,"sourceVersion",void 0),c([de("sourceVersion")],si.prototype,"readSourceVersion",null),c([me("sourceVersion")],si.prototype,"writeSourceVersion",null),c([d({json:{read:!1,write:{ignoreOrigin:!0}}})],si.prototype,"tables",void 0),c([me("tables")],si.prototype,"writeTables",null),c([d()],si.prototype,"thumbnailUrl",null),c([d()],si.prototype,"updatingFromView",null),c([d({type:PEe,json:{write:!0}})],si.prototype,"widgets",void 0),si=c([R("esri.WebDocument2D")],si);const sCe=si,Kt=(t=>t)(["operational-layers","basemap","ground"]);var kA;let qd=kA=class extends X{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new kA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],qd.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],qd.prototype,"name",void 0),c([d({type:["boolean","date","number","string"],json:{write:!0}})],qd.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],qd.prototype,"title",void 0),qd=kA=c([R("esri.form.ExpressionInfo")],qd);const nCe=qd;let Yd=class extends X{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([d({type:String,json:{write:!0}})],Yd.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Yd.prototype,"label",void 0),c([d()],Yd.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Yd.prototype,"visibilityExpression",void 0),Yd=c([R("esri.form.elements.Element")],Yd);const Vh=Yd;let oS=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.type=null}};c([d()],oS.prototype,"type",void 0),oS=c([R("esri.form.elements.inputs.attachments.Input")],oS);const Uh=oS,FT=["any","capture","upload"];let km=class extends Uh{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};c([d({type:["audio"],readOnly:!0,json:{write:!0}})],km.prototype,"type",void 0),c([d({type:FT,json:{write:!0}})],km.prototype,"inputMethod",void 0),c([d({type:Number,json:{write:!0}})],km.prototype,"maxDuration",void 0),km=c([R("esri.form.elements.inputs.attachments.AudioInput")],km);const V4=km;let Uv=class extends Uh{constructor(e){super(e),this.type="document",this.maxFileSize=null}};c([d({type:["document"],readOnly:!0,json:{write:!0}})],Uv.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],Uv.prototype,"maxFileSize",void 0),Uv=c([R("esri.form.elements.inputs.attachments.DocumentInput")],Uv);const U4=Uv;let Rm=class extends Uh{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};c([d({type:["image"],readOnly:!0,json:{write:!0}})],Rm.prototype,"type",void 0),c([d({type:FT,json:{write:!0}})],Rm.prototype,"inputMethod",void 0),c([d({type:Number,json:{write:!0}})],Rm.prototype,"maxImageSize",void 0),Rm=c([R("esri.form.elements.inputs.attachments.ImageInput")],Rm);const H4=Rm;let Hv=class extends Uh{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};c([d({type:["signature"],readOnly:!0,json:{write:!0}})],Hv.prototype,"type",void 0),c([d({type:FT,json:{write:!0}})],Hv.prototype,"inputMethod",void 0),Hv=c([R("esri.form.elements.inputs.attachments.SignatureInput")],Hv);const B4=Hv;let Im=class extends Uh{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};c([d({type:["video"],readOnly:!0,json:{write:!0}})],Im.prototype,"type",void 0),c([d({type:FT,json:{write:!0}})],Im.prototype,"inputMethod",void 0),c([d({type:Number,json:{write:!0}})],Im.prototype,"maxDuration",void 0),Im=c([R("esri.form.elements.inputs.attachments.VideoInput")],Im);const G4=Im;function pX(t){return{nestableTypes:{base:Uh,key:"type",typeMap:{audio:V4,document:U4,image:H4,signature:B4,video:G4}},allTypes:{base:Uh,key:"type",typeMap:{attachment:t,audio:V4,document:U4,image:H4,signature:B4,video:G4}}}}function oCe(t,e,i){return t?t.map(r=>Ol(e.nestableTypes,r)):null}function aCe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function lCe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(s=>r[s.type]).map(s=>s.toJSON())}let sl=class extends Uh{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return oCe(e,U2)}readInputs(e,i){return aCe(i.inputTypes,U2)}writeInputs(e,i){i.inputTypes=lCe(e,U2)}};c([d({type:["attachment"],readOnly:!0,json:{write:!0}})],sl.prototype,"type",void 0),c([d({type:["any","exact","exactOrNone"],json:{write:!0}})],sl.prototype,"attachmentAssociationType",void 0),c([d({json:{write:{isRequired:!0}}})],sl.prototype,"inputTypes",void 0),c([It("inputTypes")],sl.prototype,"castInputs",null),c([de("inputTypes")],sl.prototype,"readInputs",null),c([me("inputTypes")],sl.prototype,"writeInputs",null),sl=c([R("esri.form.elements.inputs.attachments.AttachmentInput")],sl);const U2=pX(sl),uCe=sl;var RA;const cCe=pX(uCe);let Nn=RA=class extends Vh{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new RA({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};c([d({type:Boolean,json:{write:!0}})],Nn.prototype,"allowUserRename",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Nn.prototype,"attachmentKeyword",void 0),c([d({type:Boolean,json:{write:!0}})],Nn.prototype,"displayFilename",void 0),c([d({type:String,json:{write:!0}})],Nn.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],Nn.prototype,"filenameExpression",void 0),c([d({types:cCe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Nn.prototype,"input",void 0),c([d({type:Number,json:{write:!0}})],Nn.prototype,"maxAttachmentCount",void 0),c([d({type:Number,json:{write:!0}})],Nn.prototype,"minAttachmentCount",void 0),c([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Nn.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0}})],Nn.prototype,"useOriginalFilename",void 0),Nn=RA=c([R("esri.form.elements.AttachmentElement")],Nn);const W4=Nn;let aS=class extends X{constructor(e){super(e),this.type=null}};c([d()],aS.prototype,"type",void 0),aS=c([R("esri.form.elements.inputs.Input")],aS);const ac=aS;let Bv=class extends ac{constructor(e){super(e),this.maxLength=null,this.minLength=0}};c([d({type:Number,json:{write:!0}})],Bv.prototype,"maxLength",void 0),c([d({type:Number,json:{write:!0}})],Bv.prototype,"minLength",void 0),Bv=c([R("esri.form.elements.inputs.TextInput")],Bv);const VL=Bv;var IA;let lS=IA=class extends VL{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new IA({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],lS.prototype,"type",void 0),lS=IA=c([R("esri.form.elements.inputs.BarcodeScannerInput")],lS);const hCe=lS;var $A;let $m=$A=class extends ac{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new $A({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([d({type:String,json:{write:!0}})],$m.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],$m.prototype,"showNoValueOption",void 0),c([d({type:["combo-box"],json:{read:!1,write:!0}})],$m.prototype,"type",void 0),$m=$A=c([R("esri.form.elements.inputs.ComboBoxInput")],$m);const dCe=$m;var AA;function q4(t){return t??null}function Y4(t){return t??null}let Xa=AA=class extends ac{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return q4(e.max)}writeMax(t,e){e.max=Y4(t)}readMin(t,e){return q4(e.min)}writeMin(t,e){e.min=Y4(t)}clone(){return new AA({max:this.max,min:this.min})}};c([d({type:String,json:{type:String,write:!0}})],Xa.prototype,"max",void 0),c([de("max")],Xa.prototype,"readMax",null),c([me("max")],Xa.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],Xa.prototype,"min",void 0),c([de("min")],Xa.prototype,"readMin",null),c([me("min")],Xa.prototype,"writeMin",null),c([d({type:["date-picker"],json:{read:!1,write:!0}})],Xa.prototype,"type",void 0),Xa=AA=c([R("esri.form.elements.inputs.DatePickerInput")],Xa);const pCe=Xa;var OA;function H2(t){return t??null}function B2(t){return t??null}let sn=OA=class extends ac{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return H2(e.max)}writeMax(t,e){e.max=B2(t)}readMin(t,e){return H2(e.min)}writeMin(t,e){e.min=B2(t)}readTimeResolution(t,e){return H2(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=B2(t)}clone(){return new OA({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([d({type:Boolean,json:{write:!0}})],sn.prototype,"includeTimeOffset",void 0),c([d({type:String,json:{type:String,write:!0}})],sn.prototype,"max",void 0),c([de("max")],sn.prototype,"readMax",null),c([me("max")],sn.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],sn.prototype,"min",void 0),c([de("min")],sn.prototype,"readMin",null),c([me("min")],sn.prototype,"writeMin",null),c([d({type:String,json:{type:String,write:!0}})],sn.prototype,"timeResolution",void 0),c([de("timeResolution")],sn.prototype,"readTimeResolution",null),c([me("timeResolution")],sn.prototype,"writeTimeResolution",null),c([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],sn.prototype,"type",void 0),sn=OA=c([R("esri.form.elements.inputs.DateTimeOffsetPickerInput")],sn);const fCe=sn;var PA;function J4(t){return t!=null?new Date(t):null}function Z4(t){return t?t.getTime():null}let ra=PA=class extends ac{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return J4(e.max)}writeMax(t,e){e.max=Z4(t)}readMin(t,e){return J4(e.min)}writeMin(t,e){e.min=Z4(t)}clone(){return new PA({includeTime:this.includeTime,max:this.max,min:this.min})}};c([d({type:Boolean,json:{write:!0}})],ra.prototype,"includeTime",void 0),c([d({type:Date,json:{type:Number,write:!0}})],ra.prototype,"max",void 0),c([de("max")],ra.prototype,"readMax",null),c([me("max")],ra.prototype,"writeMax",null),c([d({type:Date,json:{type:Number,write:!0}})],ra.prototype,"min",void 0),c([de("min")],ra.prototype,"readMin",null),c([me("min")],ra.prototype,"writeMin",null),c([d({type:["datetime-picker"],json:{read:!1,write:!0}})],ra.prototype,"type",void 0),ra=PA=c([R("esri.form.elements.inputs.DateTimePickerInput")],ra);const mCe=ra;var DA;let Am=DA=class extends ac{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new DA({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([d({type:String,json:{write:!0}})],Am.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],Am.prototype,"showNoValueOption",void 0),c([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Am.prototype,"type",void 0),Am=DA=c([R("esri.form.elements.inputs.RadioButtonsInput")],Am);const gCe=Am;var LA;let Om=LA=class extends ac{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new LA({offValue:this.offValue,onValue:this.onValue})}};c([d({type:[String,Number],json:{write:!0}})],Om.prototype,"offValue",void 0),c([d({type:[String,Number],json:{write:!0}})],Om.prototype,"onValue",void 0),c([d({type:["switch"],json:{read:!1,write:!0}})],Om.prototype,"type",void 0),Om=LA=c([R("esri.form.elements.inputs.SwitchInput")],Om);const yCe=Om;var NA;let uS=NA=class extends VL{constructor(t){super(t),this.type="text-area"}clone(){return new NA({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-area"],json:{read:!1,write:!0}})],uS.prototype,"type",void 0),uS=NA=c([R("esri.form.elements.inputs.TextAreaInput")],uS);const bCe=uS;var FA;let cS=FA=class extends VL{constructor(t){super(t),this.type="text-box"}clone(){return new FA({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-box"],json:{read:!1,write:!0}})],cS.prototype,"type",void 0),cS=FA=c([R("esri.form.elements.inputs.TextBoxInput")],cS);const vCe=cS;var jA;function G2(t){return t??null}function W2(t){return t??null}let Fn=jA=class extends ac{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return G2(e.max)}writeMax(t,e){e.max=W2(t)}readMin(t,e){return G2(e.min)}writeMin(t,e){e.min=W2(t)}readTimeResolution(t,e){return G2(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=W2(t)}clone(){return new jA({max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([d({type:String,json:{type:String,write:!0}})],Fn.prototype,"max",void 0),c([de("max")],Fn.prototype,"readMax",null),c([me("max")],Fn.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],Fn.prototype,"min",void 0),c([de("min")],Fn.prototype,"readMin",null),c([me("min")],Fn.prototype,"writeMin",null),c([d({type:String,json:{type:String,write:!0}})],Fn.prototype,"timeResolution",void 0),c([de("timeResolution")],Fn.prototype,"readTimeResolution",null),c([me("timeResolution")],Fn.prototype,"writeTimeResolution",null),c([d({type:["time-picker"],json:{read:!1,write:!0}})],Fn.prototype,"type",void 0),Fn=jA=c([R("esri.form.elements.inputs.TimePickerInput")],Fn);const wCe=Fn,_Ce={base:ac,key:"type",typeMap:{"barcode-scanner":hCe,"combo-box":dCe,"date-picker":pCe,"datetime-picker":mCe,"datetimeoffset-picker":fCe,"radio-buttons":gCe,switch:yCe,"text-area":bCe,"text-box":vCe,"time-picker":wCe}};var zA;let mo=zA=class extends Vh{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new zA({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};c([d({types:OY,json:{read:{reader:TT},write:!0}})],mo.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],mo.prototype,"editable",void 0),c([d({type:String,json:{write:!0}})],mo.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],mo.prototype,"fieldName",void 0),c([d({type:String,json:{write:!0}})],mo.prototype,"hint",void 0),c([d({types:_Ce,json:{read:{source:"inputType"},write:{target:"inputType"}}})],mo.prototype,"input",void 0),c([d({type:String,json:{write:!0}})],mo.prototype,"requiredExpression",void 0),c([d({type:String,json:{read:!1,write:!0}})],mo.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],mo.prototype,"valueExpression",void 0),mo=zA=c([R("esri.form.elements.FieldElement")],mo);const X4=mo;var VA;let wu=VA=class extends Vh{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new VA({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:B(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([d({type:Number,json:{write:!0}})],wu.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],wu.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],wu.prototype,"editableExpression",void 0),c([d({type:[dL],json:{write:!0}})],wu.prototype,"orderByFields",void 0),c([d({type:Number,json:{write:!0}})],wu.prototype,"relationshipId",void 0),c([d({type:["relationship"],json:{read:!1,write:!0}})],wu.prototype,"type",void 0),wu=VA=c([R("esri.form.elements.RelationshipElement")],wu);const K4=wu;var UA;let Pm=UA=class extends Vh{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new UA({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};c([d({type:String,json:{write:!0}})],Pm.prototype,"text",void 0),c([d({type:String,json:{write:!0}})],Pm.prototype,"textFormat",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Pm.prototype,"type",void 0),Pm=UA=c([R("esri.form.elements.TextElement")],Pm);const Q4=Pm;let Dm=class extends Fe.ClonableMixin(Vh){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};c([d({type:[aY],json:{write:{isRequired:!0}}})],Dm.prototype,"associationTypes",void 0),c([d({type:String,json:{write:!0}})],Dm.prototype,"editableExpression",void 0),c([d({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Dm.prototype,"type",void 0),Dm=c([R("esri.form.elements.UtilityNetworkAssociationsElement")],Dm);const eV=Dm,xCe=t=>t.type==="field",SCe=t=>t.type==="group",ECe=t=>t.type==="text";function fX(t){return{typesWithGroup:{base:Vh,key:"type",typeMap:{attachment:W4,field:X4,group:t,relationship:K4,text:Q4,utilityNetworkAssociations:eV}},typesWithoutGroup:{base:Vh,key:"type",typeMap:{attachment:W4,field:X4,relationship:K4,text:Q4,utilityNetworkAssociations:eV}}}}function mX(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function gX(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>s.toJSON())}function yX(t,e,i=!0){return t?t.map(r=>Ol(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var HA;let nl=HA=class extends Vh{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return yX(t,q2,!1)}readElements(t,e){return mX(e.formElements,q2,!1)}writeElements(t,e){e.formElements=gX(t,q2,!1)}clone(){return new HA({description:this.description,elements:B(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({json:{write:!0}})],nl.prototype,"elements",void 0),c([It("elements")],nl.prototype,"castElements",null),c([de("elements",["formElements"])],nl.prototype,"readElements",null),c([me("elements")],nl.prototype,"writeElements",null),c([d({type:["collapsed","expanded"],json:{write:!0}})],nl.prototype,"initialState",void 0),c([d({type:String,json:{read:!1,write:!0}})],nl.prototype,"type",void 0),nl=HA=c([R("esri.form.elements.GroupElement")],nl);const q2=fX(nl),CCe=nl;var BA;const Y2=fX(CCe);let sa=BA=class extends X{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return yX(t,Y2)}readElements(t,e){return mX(e.formElements,Y2)}writeElements(t,e){e.formElements=gX(t,Y2)}clone(){return new BA({description:this.description,expressionInfos:B(this.expressionInfos),elements:B(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:s,expressionInfos:n,title:o}=this;if(F0(i,t,r),F0(i,t,o),!s)return[];const a=TCe(s,n).map(l=>ws(i,t,l));await Promise.all(a);for(const l of s)bX(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function bX(t,e,i){const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(F0(t,r,i.label),F0(t,r,i.description),i.type){case"field":Bs(t,r,i.fieldName);break;case"group":i.elements.forEach(s=>bX(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(n=>n.id===i.relationshipId);s&&Bs(t,r,s.keyField)}of(t,r,i.orderByFields?.map(s=>s.field));break;case"text":F0(t,r,i.text)}}function TCe(t,e){if(!e||e.length===0)return[];const i=vX(t),r=[];for(const s of e)i.has(s.name)&&r.push(s.expression);return r}function vX(t){const e=new Set;for(const i of t)if(jN(e,i.visibilityExpression),!ECe(i)){if(SCe(i))FS(e,vX(i.elements));else if(jN(e,i.editableExpression),xCe(i)){const{requiredExpression:r,valueExpression:s}=i;FS(e,[r,s])}}return e}function F0(t,e,i){of(t,e,uL(i))}c([d({type:String,json:{write:!0}})],sa.prototype,"description",void 0),c([d({json:{write:!0}})],sa.prototype,"elements",void 0),c([It("elements")],sa.prototype,"castElements",null),c([de("elements",["formElements"])],sa.prototype,"readElements",null),c([me("elements")],sa.prototype,"writeElements",null),c([d({type:[nCe],json:{write:!0}})],sa.prototype,"expressionInfos",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],sa.prototype,"preserveFieldValuesWhenHidden",void 0),c([d({type:String,json:{write:!0}})],sa.prototype,"title",void 0),sa=BA=c([R("esri.form.FormTemplate")],sa);const MCe=sa;function tV(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const s of r)s.length>2&&(s[2]*=i)}function kCe(t,e,i){if(!t&&!e||!i)return;const r=aE(i);iV(t,i,r),iV(e,i,r)}function iV(t,e,i){if(t)for(const r of t)RCe(r.geometry,e,i)}function RCe(t,e,i){if(!t?.spatialReference||Er(t.spatialReference,e))return;const r=aE(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)tV(t,t.rings,r);else if("paths"in t)tV(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=r)}}function rV(t,e,i){if(!i?.features||!i.hasZ)return;const r=yW(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}var GA;const WA=new Xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let gr=GA=class extends X{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Si)}writeGeometryType(t,e,i,r){if(t)return void WA.write(t,e,i,r);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void WA.write(n.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Nl(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Te.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new GA(this.cloneProperties())}cloneProperties(){return B({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const s=t?.[i];r.geometry=s?.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,s]}=t,n=u=>Math.round((u-r)/e),o=u=>Math.round((s-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let u=0,h=a.length;u<h;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,h--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=m=>m*n+r,l=m=>s-m*o;let u=null,h=null;if(this.hasZ&&i?.scale?.[2]!=null){const{translate:[,,m],scale:[,,y]}=i;u=v=>v*y+m}if(this.hasM&&i?.scale?.[3]!=null){const{translate:[,,,m],scale:[,,,y]}=i;h=v=>v==null?v:v*y+m}const p=this._getHydrationFunction(t,a,l,u,h);for(const{geometry:m}of e)m!=null&&p&&p(m);return this.transform=null,this}readFeaturesWithClass(t,e,i){const r=Te.fromJSON(e.spatialReference),s=[];for(let n=0;n<t.length;n++){const o=t[n],a=i.fromJSON(o),l=o.geometry?.spatialReference;a.geometry==null||l||(a.geometry.spatialReference=r);const u=o.aggregateGeometries,h=a.aggregateGeometries;if(u&&h!=null)for(const p in h){const m=h[p],y=u[p],v=y?.spatialReference;m==null||v||(m.spatialReference=r)}s.push(a)}return s}_quantizePoints(t,e,i){let r,s;const n=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const u=e(l[0]),h=i(l[1]);u===r&&h===s||(n.push([u-r,h-s]),r=u,s=h)}else r=e(l[0]),s=i(l[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const s=yg(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._quantizePoints(l,e,i);u&&n.push(u)}return n.length>0?(yg(r)?r.rings=n:r.paths=n,r):null}:t==="multipoint"?r=>{const s=this._quantizePoints(r.points,e,i);return s&&s.length>0?(r.points=s,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,s){return t==="point"?n=>{n.x=e(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:t==="polyline"||t==="polygon"?n=>{const o=yg(n)?n.rings:n.paths;let a,l;for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let m=0,y=p.length;m<y;m++){const v=p[m];m>0?(a+=v[0],l+=v[1]):(a=v[0],l=v[1]),v[0]=e(a),v[1]=i(l)}}if(r&&s)for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let m=0,y=p.length;m<y;m++){const v=p[m];v[2]=r(v[2]),v[3]=s(v[3])}}else if(r)for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let m=0,y=p.length;m<y;m++){const v=p[m];v[2]=r(v[2])}}else if(s)for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let m=0,y=p.length;m<y;m++){const v=p[m];v[2]=s(v[2])}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=i(n.ymin),n.xmax=e(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:t==="multipoint"?n=>{const o=n.points;let a,l;for(let u=0,h=o.length;u<h;u++){const p=o[u];u>0?(a+=p[0],l+=p[1]):(a=p[0],l=p[1]),p[0]=e(a),p[1]=i(l)}if(r&&s)for(let u=0,h=o.length;u<h;u++){const p=o[u];p[2]=r(p[2]),p[3]=s(p[3])}else if(r)for(let u=0,h=o.length;u<h;u++){const p=o[u];p[2]=r(p[2])}else if(s)for(let u=0,h=o.length;u<h;u++){const p=o[u];p[2]=s(p[2])}}:null}};c([d({type:String,json:{write:!0}})],gr.prototype,"displayFieldName",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],gr.prototype,"exceededTransferLimit",void 0),c([d({type:[Si],json:{write:!0}})],gr.prototype,"features",void 0),c([de("features")],gr.prototype,"readFeatures",null),c([d({type:[Ar],json:{write:!0}})],gr.prototype,"fields",void 0),c([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:WA.read}}})],gr.prototype,"geometryType",void 0),c([me("geometryType")],gr.prototype,"writeGeometryType",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],gr.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],gr.prototype,"hasZ",void 0),c([d({types:Yy,json:{write:!0}})],gr.prototype,"queryGeometry",void 0),c([de("queryGeometry")],gr.prototype,"readQueryGeometry",null),c([d({type:Te,json:{write:!0}})],gr.prototype,"spatialReference",void 0),c([me("spatialReference")],gr.prototype,"writeSpatialReference",null),c([d({json:{write:!0}})],gr.prototype,"transform",void 0),gr=GA=c([R("esri.rest.support.FeatureSet")],gr),gr.prototype.toJSON.isDefaultToJSON=!0;let ICe=0,Pu=class extends gs.LoadableMixin(Sl.EsriPromiseMixin(_e)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);rV(e,this.layer.spatialReference,r);const s=gr.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],l=this._idToClientGeometry.get(a);l!==void 0&&(o.geometry=l)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new W("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return rV(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:it.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new W("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const p=o(h);p!=null&&s.push(p)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(n.push(this._serializeFeature(h)),a&&h.geometry!=null){const p=o(h);p!=null&&a.set(p,h)}}kCe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateIdToClientGeometries(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new W("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);s||a.geometry==null||(s=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const l in o){const u=o[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),u===-1?delete h.attributes[a]:h.attributes[a]=u,n._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=e.attributes?.[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),s=(ICe++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?ui.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await yhe("MemorySourceWorker",{strategy:J("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",v=>{he.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),v.preventDefault()}));const p={features:h.features,fields:i?.map(v=>v.toJSON()),geometryType:kF.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:u?null:r&&r.toJSON(),timeInfo:a?.toJSON()??null,dateFieldsTimeZone:l},m=await this._connection.invoke("load",p,{signal:e});for(const v of m.warnings)he.getLogger(this.layer).warn("#load()",`${v.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:v});m.featureErrors.length&&he.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=kF.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(m.assignedObjectIds)}};c([eD({Type:Si,ensureType:Gi(Si)})],Pu.prototype,"itemType",void 0),c([d()],Pu.prototype,"type",void 0),c([d({constructOnly:!0})],Pu.prototype,"layer",void 0),c([d({readOnly:!0})],Pu.prototype,"_workerGeometryType",null),c([d()],Pu.prototype,"sourceJSON",void 0),Pu=c([R("esri.layers.graphics.sources.MemorySource")],Pu);function $Ce(t){return"portalItem"in t}const ACe=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):$Ce(this)?this.portalItem?.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([d({type:String})],e.prototype,"apiKey",null),e=c([R("esri.layers.mixins.APIKeyMixin")],e),e},OCe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Dl(this.url);if(i?.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",goe(i,he.getLogger(this)))}};return c([d()],e.prototype,"title",null),c([d({type:String})],e.prototype,"url",null),e=c([R("esri.layers.mixins.ArcGISService")],e),e};let sV=class extends SyntaxError{constructor(e,i,r,s){super(e),this.expected=i,this.found=r,this.location=s,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const s=e.find(l=>l.source===this.location.source);s&&(r=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,a=this.location.source+":"+o.line+":"+o.column;if(r){const l=this.location.end,u="".padEnd(o.line.toString().length," "),h=r[n.line-1],p=(n.line===l.line?l.column:h.length+1)-n.column||1;i+=`
 --> `+a+`
`+u+` |
`+o.line+" | "+h+`
`+u+" | "+"".padEnd(n.column-1," ")+"".padEnd(p,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(m){return m.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(m){return s?m.replace(s,y=>"\\u{"+r(y)+"}"):m}function o(m){return n(m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,y=>"\\x0"+r(y)).replace(/[\x10-\x1F\x7F-\x9F]/g,y=>"\\x"+r(y)))}function a(m){return n(m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,y=>"\\x0"+r(y)).replace(/[\x10-\x1F\x7F-\x9F]/g,y=>"\\x"+r(y)))}const l={literal:m=>'"'+o(m.text)+'"',class(m){const y=m.parts.map(v=>Array.isArray(v)?a(v[0])+"-"+a(v[1]):a(v));return"["+(m.inverted?"^":"")+y.join("")+"]"+(m.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:m=>m.description};function u(m){return l[m.type](m)}function h(m){const y=m.map(u);if(y.sort(),y.length>0){let v=1;for(let w=1;w<y.length;w++)y[w-1]!==y[w]&&(y[v]=y[w],v++);y.length=v}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function p(m){return m?'"'+o(m)+'"':"end of input"}return"Expected "+h(e)+" but "+p(i)+" found."}};function PCe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,s={start:id};let n=id;const o="none",a=")",l=",",u="(",h="%",p="px",m="cm",y="mm",v="in",w="pt",S="pc",E="deg",I="rad",D="grad",O="turn",A="#",z=".",_="e",Z=/^[ \t\n\r]/,Q=/^[a-z\-]/,ae=/^[0-9a-fA-F]/,ge=/^[+\-]/,ne=/^[0-9]/,ve=Vr("none"),xe=Ft("none",!1),Be=Ft(")",!1),dt=Ft(",",!1),Ke=Yi([" ","	",`
`,"\r"],!1,!1,!1),Qe=Vr("function"),gt=Ft("(",!1),Sn=Vr("identifier"),qs=Yi([["a","z"],"-"],!1,!1,!1),En=Vr("percentage"),Cn=Ft("%",!1),Ys=Vr("length"),xs=Ft("px",!1),Ss=Ft("cm",!1),uc=Ft("mm",!1),Fo=Ft("in",!1),Hl=Ft("pt",!1),Js=Ft("pc",!1),_f=Vr("angle"),Tn=Ft("deg",!1),cc=Ft("rad",!1),xf=Ft("grad",!1),Sf=Ft("turn",!1),Qh=Vr("number"),Bl=Vr("color"),Zs=Ft("#",!1),Gl=Yi([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Ef=Yi(["+","-"],!1,!1,!1),ro=Yi([["0","9"]],!1,!1,!1),Es=Ft(".",!1),jo=Ft("e",!1);function Ra(){return[]}function Ne(j,te){return{type:"function",name:j,parameters:te||[]}}function Tr(j,te){return te.length>0?k1(j,te,3):[j]}function Cf(j){return{type:"quantity",value:j.value,unit:j.unit}}function cb(j){return{type:"color",colorType:j.type,value:j.value}}function hb(j){return j}function Tf(){return Ge()}function Mf(j){return{value:j,unit:"%"}}function Ia(j){return{value:j,unit:"px"}}function Mn(j){return{value:j,unit:"cm"}}function zo(j){return{value:j,unit:"mm"}}function Ot(j){return{value:j,unit:"in"}}function ed(j){return{value:j,unit:"pt"}}function $a(j){return{value:j,unit:"pc"}}function kf(j){return{value:j,unit:"deg"}}function Wl(j){return{value:j,unit:"rad"}}function td(j){return{value:j,unit:"grad"}}function Mr(j){return{value:j,unit:"turn"}}function ql(j){return{value:j,unit:null}}function Rf(){return{type:"hex",value:Ge()}}function P(j){return{type:"function",value:j}}function L(){return{type:"named",value:Ge()}}function q(){return parseFloat(Ge())}let N=0|e.peg$currPos,pe=N;const Se=[{line:1,column:1}];let Je,Ee=N,Ze=e.peg$maxFailExpected||[],oe=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');n=s[e.startRule]}function Ge(){return t.substring(pe,N)}function Nt(j=N){const te=t.codePointAt(j);return te===void 0?"":String.fromCodePoint(te)}function Ft(j,te){return{type:"literal",text:j,ignoreCase:te}}function Yi(j,te,ye,qe){return{type:"class",parts:j,inverted:te,ignoreCase:ye,unicode:qe}}function Aa(){return{type:"end"}}function Vr(j){return{type:"other",description:j}}function If(j){let te,ye=Se[j];if(ye)return ye;if(j>=Se.length)te=Se.length-1;else for(te=j;!Se[--te];);for(ye=Se[te],ye={line:ye.line,column:ye.column};te<j;)t.charCodeAt(te)===10?(ye.line++,ye.column=1):ye.column++,te++;return Se[j]=ye,ye}function Yl(j,te,ye){const qe=If(j),Pt=If(te);return{source:r,start:{offset:j,line:qe.line,column:qe.column},end:{offset:te,line:Pt.line,column:Pt.column}}}function et(j){N<Ee||(N>Ee&&(Ee=N,Ze=[]),Ze.push(j))}function Oa(j,te,ye){return new sV(sV.buildMessage(j,te),j,te,ye)}function id(){let j;return j=rd(),j===i&&(j=sd()),j}function rd(){let j,te;return oe++,j=N,wi(),t.substr(N,4)===o?(te=o,N+=4):(te=i,oe===0&&et(xe)),te!==i?(wi(),pe=j,j=Ra()):(N=j,j=i),oe--,j===i&&oe===0&&et(ve),j}function sd(){let j,te;if(j=[],te=Pa(),te!==i)for(;te!==i;)j.push(te),te=Pa();else j=i;return j}function Pa(){let j,te,ye,qe;return j=N,wi(),te=E1(),te!==i?(wi(),ye=$f(),ye===i&&(ye=null),wi(),t.charCodeAt(N)===41?(qe=a,N++):(qe=i,oe===0&&et(Be)),qe!==i?(wi(),pe=j,j=Ne(te,ye)):(N=j,j=i)):(N=j,j=i),j}function $f(){let j,te,ye,qe,Pt,ii,Ai,Ji;if(j=N,te=nd(),te!==i){for(ye=[],qe=N,Pt=wi(),t.charCodeAt(N)===44?(ii=l,N++):(ii=i,oe===0&&et(dt)),ii===i&&(ii=null),Ai=wi(),Ji=nd(),Ji!==i?(Pt=[Pt,ii,Ai,Ji],qe=Pt):(N=qe,qe=i);qe!==i;)ye.push(qe),qe=N,Pt=wi(),t.charCodeAt(N)===44?(ii=l,N++):(ii=i,oe===0&&et(dt)),ii===i&&(ii=null),Ai=wi(),Ji=nd(),Ji!==i?(Pt=[Pt,ii,Ai,Ji],qe=Pt):(N=qe,qe=i);pe=j,j=Tr(te,ye)}else N=j,j=i;return j}function nd(){let j,te;return j=N,te=C1(),te===i&&(te=T1(),te===i&&(te=uM(),te===i&&(te=pb()))),te!==i&&(pe=j,te=Cf(te)),j=te,j===i&&(j=N,te=cM(),te!==i&&(pe=j,te=cb(te)),j=te),j}function wi(){let j,te;for(oe++,j=[],te=t.charAt(N),Z.test(te)?N++:(te=i,oe===0&&et(Ke));te!==i;)j.push(te),te=t.charAt(N),Z.test(te)?N++:(te=i,oe===0&&et(Ke));return oe--,j}function E1(){let j,te,ye;return oe++,j=N,te=db(),te!==i?(t.charCodeAt(N)===40?(ye=u,N++):(ye=i,oe===0&&et(gt)),ye!==i?(pe=j,j=te):(N=j,j=i)):(N=j,j=i),oe--,j===i&&(te=i,oe===0&&et(Qe)),j}function db(){let j,te,ye;if(oe++,j=N,te=[],ye=t.charAt(N),Q.test(ye)?N++:(ye=i,oe===0&&et(qs)),ye!==i)for(;ye!==i;)te.push(ye),ye=t.charAt(N),Q.test(ye)?N++:(ye=i,oe===0&&et(qs));else te=i;return te!==i&&(pe=j,te=Tf()),j=te,oe--,j===i&&(te=i,oe===0&&et(Sn)),j}function C1(){let j,te,ye;return oe++,j=N,wi(),te=Xs(),te!==i?(t.charCodeAt(N)===37?(ye=h,N++):(ye=i,oe===0&&et(Cn)),ye!==i?(pe=j,j=Mf(te)):(N=j,j=i)):(N=j,j=i),oe--,j===i&&oe===0&&et(En),j}function T1(){let j,te,ye;return oe++,j=N,wi(),te=Xs(),te!==i?(t.substr(N,2)===p?(ye=p,N+=2):(ye=i,oe===0&&et(xs)),ye!==i?(pe=j,j=Ia(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,wi(),te=Xs(),te!==i?(t.substr(N,2)===m?(ye=m,N+=2):(ye=i,oe===0&&et(Ss)),ye!==i?(pe=j,j=Mn(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,wi(),te=Xs(),te!==i?(t.substr(N,2)===y?(ye=y,N+=2):(ye=i,oe===0&&et(uc)),ye!==i?(pe=j,j=zo(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,wi(),te=Xs(),te!==i?(t.substr(N,2)===v?(ye=v,N+=2):(ye=i,oe===0&&et(Fo)),ye!==i?(pe=j,j=Ot(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,wi(),te=Xs(),te!==i?(t.substr(N,2)===w?(ye=w,N+=2):(ye=i,oe===0&&et(Hl)),ye!==i?(pe=j,j=ed(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,wi(),te=Xs(),te!==i?(t.substr(N,2)===S?(ye=S,N+=2):(ye=i,oe===0&&et(Js)),ye!==i?(pe=j,j=$a(te)):(N=j,j=i)):(N=j,j=i)))))),oe--,j===i&&oe===0&&et(Ys),j}function uM(){let j,te,ye;return oe++,j=N,te=Xs(),te!==i?(t.substr(N,3)===E?(ye=E,N+=3):(ye=i,oe===0&&et(Tn)),ye!==i?(pe=j,j=kf(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,te=Xs(),te!==i?(t.substr(N,3)===I?(ye=I,N+=3):(ye=i,oe===0&&et(cc)),ye!==i?(pe=j,j=Wl(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,te=Xs(),te!==i?(t.substr(N,4)===D?(ye=D,N+=4):(ye=i,oe===0&&et(xf)),ye!==i?(pe=j,j=td(te)):(N=j,j=i)):(N=j,j=i),j===i&&(j=N,te=Xs(),te!==i?(t.substr(N,4)===O?(ye=O,N+=4):(ye=i,oe===0&&et(Sf)),ye!==i?(pe=j,j=Mr(te)):(N=j,j=i)):(N=j,j=i)))),oe--,j===i&&(te=i,oe===0&&et(_f)),j}function pb(){let j,te;return oe++,j=N,wi(),te=Xs(),te!==i?(pe=j,j=ql(te)):(N=j,j=i),oe--,j===i&&oe===0&&et(Qh),j}function cM(){let j,te,ye,qe;if(oe++,j=N,t.charCodeAt(N)===35?(te=A,N++):(te=i,oe===0&&et(Zs)),te!==i){if(ye=[],qe=t.charAt(N),ae.test(qe)?N++:(qe=i,oe===0&&et(Gl)),qe!==i)for(;qe!==i;)ye.push(qe),qe=t.charAt(N),ae.test(qe)?N++:(qe=i,oe===0&&et(Gl));else ye=i;ye!==i?(pe=j,j=Rf()):(N=j,j=i)}else N=j,j=i;return j===i&&(j=N,te=Pa(),te!==i&&(pe=j,te=P(te)),j=te,j===i&&(j=N,te=db(),te!==i&&(pe=j,te=L()),j=te)),oe--,j===i&&(te=i,oe===0&&et(Bl)),j}function Xs(){let j,te,ye,qe,Pt,ii,Ai,Ji;for(j=N,te=t.charAt(N),ge.test(te)?N++:(te=i,oe===0&&et(Ef)),te===i&&(te=null),ye=N,qe=[],Pt=t.charAt(N),ne.test(Pt)?N++:(Pt=i,oe===0&&et(ro));Pt!==i;)qe.push(Pt),Pt=t.charAt(N),ne.test(Pt)?N++:(Pt=i,oe===0&&et(ro));if(t.charCodeAt(N)===46?(Pt=z,N++):(Pt=i,oe===0&&et(Es)),Pt!==i){if(ii=[],Ai=t.charAt(N),ne.test(Ai)?N++:(Ai=i,oe===0&&et(ro)),Ai!==i)for(;Ai!==i;)ii.push(Ai),Ai=t.charAt(N),ne.test(Ai)?N++:(Ai=i,oe===0&&et(ro));else ii=i;ii!==i?(qe=[qe,Pt,ii],ye=qe):(N=ye,ye=i)}else N=ye,ye=i;if(ye===i)if(ye=[],qe=t.charAt(N),ne.test(qe)?N++:(qe=i,oe===0&&et(ro)),qe!==i)for(;qe!==i;)ye.push(qe),qe=t.charAt(N),ne.test(qe)?N++:(qe=i,oe===0&&et(ro));else ye=i;if(ye!==i){if(qe=N,t.charCodeAt(N)===101?(Pt=_,N++):(Pt=i,oe===0&&et(jo)),Pt!==i){if(ii=t.charAt(N),ge.test(ii)?N++:(ii=i,oe===0&&et(Ef)),ii===i&&(ii=null),Ai=[],Ji=t.charAt(N),ne.test(Ji)?N++:(Ji=i,oe===0&&et(ro)),Ji!==i)for(;Ji!==i;)Ai.push(Ji),Ji=t.charAt(N),ne.test(Ji)?N++:(Ji=i,oe===0&&et(ro));else Ai=i;Ai!==i?(Pt=[Pt,ii,Ai],qe=Pt):(N=qe,qe=i)}else N=qe,qe=i;qe===i&&(qe=null),pe=j,j=q()}else N=j,j=i;return j}function M1(j,te){return j.map(function(ye){return ye[te]})}function k1(j,te,ye){return[j].concat(M1(te,ye))}Je=n();const od=Je!==i&&N===t.length;function fb(){throw Je!==i&&N<t.length&&et(Aa()),Oa(Ze,Ee<t.length?Nt(Ee):null,Ee<t.length?Yl(Ee,Ee+1):Yl(Ee,Ee))}return e.peg$library?{peg$result:Je,peg$currPos:N,peg$FAILED:i,peg$maxFailExpected:Ze,peg$maxFailPos:Ee,peg$success:od,peg$throw:od?void 0:fb}:od?Je:void fb()}function wX(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=nV(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new W("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:nV(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!Gme(e[i].effects,e[i+1].effects))throw new W("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Wme(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function nV(t){let e;if(!t)return[];try{e=PCe(t)}catch(i){throw new W("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>DCe(i))}function DCe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return LCe(t);case"opacity":return NCe(t);case"hue-rotate":return FCe(t);case"blur":return jCe(t);case"drop-shadow":return zCe(t);case"bloom":return VCe(t)}}catch(e){throw e.details.filter=t,e}throw new W("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function LCe(t){let e=1;return nb(t.parameters,1),t.parameters.length===1&&(e=ha(t.parameters[0])),new mI(t.name,e)}function NCe(t){let e=1;return nb(t.parameters,1),t.parameters.length===1&&(e=ha(t.parameters[0])),new $q(e)}function FCe(t){let e=0;return nb(t.parameters,1),t.parameters.length===1&&(e=qCe(t.parameters[0])),new Rq(e)}function jCe(t){let e=0;return nb(t.parameters,1),t.parameters.length===1&&(e=BL(t.parameters[0]),f1(e,t.parameters[0])),new Eq(e)}function zCe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new W("effect:type-error","Accepts only one color",{});i=YCe(r)}else{const s=BL(r);if(Object.isFrozen(e))throw new W("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&f1(s,r)}if(e.length<2||e.length>3)throw new W("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Mq(e[0],e[1],e[2]||0,i||_X("black"))}function VCe(t){let e=1,i=0,r=0;return nb(t.parameters,3),t.parameters[0]&&(e=ha(t.parameters[0])),t.parameters[1]&&(i=BL(t.parameters[1]),f1(i,t.parameters[1])),t.parameters[2]&&(r=ha(t.parameters[2])),new xq(e,i,r)}function nb(t,e){if(t.length>e)throw new W("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function jT(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in HL)return"<length>";if(t.unit in UL)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function f1(t,e){if(t<0)throw new W("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function UCe(t){if(t.type!=="quantity"||t.unit!==null)throw new W("effect:type-error",`Expected <double>, Actual: ${jT(t)}`,{term:t})}function HCe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new W("effect:type-error",`Expected <double> or <percentage>, Actual: ${jT(t)}`,{term:t})}const UL={deg:1,grad:.9,rad:180/Math.PI,turn:360};function BCe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&UL[t.unit]!=null))throw new W("effect:type-error",`Expected <angle>, Actual: ${jT(t)}`,{term:t})}const HL={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function GCe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&HL[t.unit]!=null))throw new W("effect:type-error",`Expected <length>, Actual: ${jT(t)}`,{term:t})}function ha(t){HCe(t);const e=t.value;return f1(e,t),t.unit==="%"?.01*e:e}function WCe(t){return UCe(t),f1(t.value,t),t.value}function qCe(t){return BCe(t),t.value*UL[t.unit]||0}function BL(t){return GCe(t),t.value*HL[t.unit]||0}function YCe(t){switch(t.colorType){case"hex":return pfe(t.value);case"named":return _X(t.value);case"function":return XCe(t.value)}}function _X(t){if(!sq(t))throw new W("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return dfe(t)}const JCe=/^rgba?/i,ZCe=/^hsla?/i;function XCe(t){if(nb(t.parameters,4),JCe.test(t.name))return[ha(t.parameters[0]),ha(t.parameters[1]),ha(t.parameters[2]),t.parameters[3]?ha(t.parameters[3]):1];if(ZCe.test(t.name))return nq(WCe(t.parameters[0]),ha(t.parameters[1]),ha(t.parameters[2]),t.parameters[3]?ha(t.parameters[3]):1);throw new W("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function Mw(t,e,i){try{return QCe(t)}catch(r){i?.messages?.push(r)}return null}function kw(t,e,i,r){try{const s=KCe(t);Bi(i,s,e)}catch(s){r.messages&&r.messages.push(s)}}function KCe(t){const e=wX(t);return e?qme(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function QCe(t){if(!t||t.length===0)return null;if(eTe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:oV(i.value)});return e}return oV(t)}function eTe(t){const e=t[0];return!!e&&"scale"in e}function oV(t){if(!t?.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[ru(i,"amount")];break;case"blur":r=[ru(i,"radius","pt")];break;case"hue-rotate":r=[ru(i,"angle","deg")];break;case"drop-shadow":r=[ru(i,"xoffset","pt"),ru(i,"yoffset","pt"),ru(i,"blurRadius","pt"),tTe(i,"color")];break;case"bloom":r=[ru(i,"strength"),ru(i,"radius","pt"),ru(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;wX(s),e.push(s)}return e.join(" ")}function ru(t,e,i){if(t[e]==null)throw new W("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function tTe(t,e){if(t[e]==null)throw new W("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const iTe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Kt}},"portal-item":{read:!0,write:{layerContainerTypes:Kt}}}}},aV={read:{reader:Mw},write:{allowNull:!0,writer:kw,layerContainerTypes:Kt}},rTe={json:{read:!1,write:!1,origins:{"web-map":aV,"portal-item":aV}}},xX=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([d(iTe)],e.prototype,"blendMode",void 0),c([d(rTe)],e.prototype,"effect",void 0),e=c([R("esri.layers.mixins.BlendLayer")],e),e},sTe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return c([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=c([R("esri.layers.mixins.CustomParametersMixin")],e),e},SX=96;function Aqe(t,e){const i=t.extent,r=t.width,s=Do(i?.spatialReference);return i&&r?i.width/r*s*oG*SX:0}function Oqe(t,e){return t/(Do(e)*oG*SX)}function Pqe(t,e,i){return nTe(t,e)&&oTe(t,i)}function nTe(t,e){return e===0||xa(t,e)||t<e}function oTe(t,e){return e===0||xa(t,e)||t>e}function aTe(t,e){return xa(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const lV={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let Du=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.id=eb(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};c([d({type:String,json:{write:!0}})],Du.prototype,"id",void 0),c([d({type:Number,json:lV})],Du.prototype,"maxScale",void 0),c([d({type:Number,json:lV})],Du.prototype,"minScale",void 0),c([d({type:String,json:{write:!0}})],Du.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Du.prototype,"where",void 0),Du=c([R("esri.layers.support.DisplayFilter")],Du);function lTe(t,e){return{...e,filterMode:t.mode}}function Lqe(t,e){return EX(t,e).next().value??null}function Nqe(t,e,i){const r=uTe(t);if(r&&(l9(e,r[0])||rR(i,r[1])))return"";const s=Array.from(EX(t,e,i)),n=cTe(s,e,i)?"1=1":s.map(o=>o.where||"1=1").reduce((o,a)=>vI(o,a),"");return n&&n!=="1=1"?n:""}function uTe(t){if(CX(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],Rw(i)),e[1]=Math.min(e[1],KE(r));return e}function*EX(t,e,i){if(CX(t)==="manual"){const r=t.filters.find(s=>s.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)hTe(r.minScale,r.maxScale,e,i)&&(yield r)}}function cTe(t,e,i){if(t.length===0)return!0;const r=Rw(t.at(0)?.minScale),s=KE(t.at(-1)?.maxScale);if(rR(r,e)||l9(s,i))return!0;for(let n=0;n<t.length-1;n++){const o=t[n],a=t[n+1];if(rR(Rw(a.minScale),KE(o.maxScale)))return!0}return!1}function hTe(t,e,i,r){return t=Rw(t),i=Rw(i),e=KE(e),!(!xa(i,t)&&(r??i)>t)&&!_ne(e,i)&&(r===void 0||!xa(r,t))}function CX(t){return"mode"in t?t.mode:t.filterMode}function Rw(t){return t||Number.POSITIVE_INFINITY}function KE(t){return t||0}let Jd=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.activeFilterId=null,this.filters=new(_e.ofType(Du)),this.mode="manual"}writeFilters(e,i,r,s){const n=e.toArray();this.mode==="scale"&&n.sort((o,a)=>{const l=aTe(a.minScale,o.minScale),u=o.maxScale-a.maxScale;return l===0?u:l}),i[r]=n.map(o=>o.toJSON(s))}write(e,i){return super.write(e,lTe(this,i))}};c([d({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],Jd.prototype,"activeFilterId",void 0),c([d({type:_e.ofType(Du),nonNullable:!0,json:{write:!0}})],Jd.prototype,"filters",void 0),c([me("filters")],Jd.prototype,"writeFilters",null),c([d({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Jd.prototype,"mode",void 0),Jd=c([R("esri.layers.support.DisplayFilterInfo")],Jd);const dTe=t=>{let e=class extends t{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return c([d(pTe)],e.prototype,"displayFilterEnabled",void 0),c([d(fTe)],e.prototype,"displayFilterInfo",void 0),e=c([R("esri.layers.mixins.DisplayFilteredLayer")],e),e},pTe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Kt,writer(t,e,i){Bi(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},fTe={type:Jd,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Kt},origins:{"web-scene":{write:!1,read:!1}}}},qA=yfe(),TX=new Map,MX=new Map;async function jqe(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let s=TX.get(r);if(!s){const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Tt(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===e}async function uV(t,e,i=!1){if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=MX.get(r)?.entries();if(s){for(const[n,o]of s)if(o.name===e){const a=!o.stack?.hasForwardEdits();if(!a&&i){const[{deleteForwardEdits:l},{default:u}]=await Promise.all([le(()=>import("./deleteForwardEdits-CE5t3-R4.js"),__vite__mapDeps([281,1,2])),le(()=>import("./DeleteForwardEditsParameters-dtHLK5Pz.js"),__vite__mapDeps([282,1,2]))]),h=await l(r,n,new u({sessionId:qA,moment:o.moment}));return h.success&&o.stack?.clearForwardEdits(),h.success}return a}}return!0}function hS(t,e){if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=MX.get(i)?.entries();if(r){for(const[s,n]of r)if(n.name===e)return n.lockType==="edit"}return!1}const GL=new Vl.EventEmitter;function kX(t){return GL.on("apply-edits",new WeakRef(t))}function RX(t){return GL.on("update-moment",new WeakRef(t))}function cV(t,e,i=null,r=!1){const s=eo();return r=e==null||r,GL.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const IX=Symbol();function zqe(t){return t!=null&&typeof t=="object"&&IX in t}function qb(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function j0(t,e,i){const r=new URL(t).host,s=TX.get(r),n=o=>!o||o===s;return n(e)&&n(i)||e===i}const mTe=t=>{var r;var e;let i=(r=class extends t{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=n=>{const{serviceUrl:o,layerId:a,gdbVersion:l,mayReceiveServiceEdits:u,result:h}=n,p=o===this.url,m=a!=null&&this.layerId!=null&&a===this.layerId,y=qb(this),v=qb(this)&&j0(o,l,this.gdbVersion);if(!p||y&&!v||!m&&!u)return;const w=h.then(S=>{if(this.lastEditsEventDate=new Date,m&&(S.addedFeatures.length||S.updatedFeatures.length||S.deletedFeatures.length||S.addedAttachments.length||S.updatedAttachments.length||S.deletedAttachments.length))return this.emit("edits",B(S)),S;const E=S.editedFeatures?.find(({layerId:D})=>D===this.layerId);if(E){const{adds:D,updates:O,deletes:A}=E.editedFeatures,z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:D?D.map(({attributes:_})=>({objectId:this.objectIdField&&_[this.objectIdField],globalId:this.globalIdField&&_[this.globalIdField]})):[],deletedFeatures:A?A.map(({attributes:_})=>({objectId:this.objectIdField&&_[this.objectIdField],globalId:this.globalIdField&&_[this.globalIdField]})):[],updatedFeatures:O?O.map(({current:{attributes:_}})=>({objectId:this.objectIdField&&_[this.objectIdField],globalId:this.globalIdField&&_[this.globalIdField]})):[],editedFeatures:B(S.editedFeatures),exceededTransferLimit:!1,historicMoment:B(S.historicMoment)};return this.emit("edits",z),z}const I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:B(S.editedFeatures),exceededTransferLimit:!1,historicMoment:B(S.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,I.historicMoment)&&this.emit("edits",I),I}).then(S=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,S.historicMoment)&&(this.historicMoment=S.historicMoment),S));this.emit("apply-edits",{result:w})},this._updateMomentHandler=n=>{const{serviceUrl:o,gdbVersion:a,moment:l}=n,u=o===this.url,h=qb(this),p=qb(this)&&j0(o,a,this.gdbVersion),m=qb(this)&&!j0(o,this.gdbVersion,null);u&&h&&p&&m&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(kX(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(RX(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,n,o){return"historicMoment"in this&&this.historicMoment!==o&&hS(s,n)}},e=IX,r);return c([d()],i.prototype,"lastEditsEventDate",void 0),i=c([R("esri.layers.mixins.EditBusLayer")],i),i};var YA;const J2=new Xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Z2=new Xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ka=YA=class extends X{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new De({geometry:B(i),objectIds:B(n),spatialRelationship:r,timeExtent:B(s),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new YA({geometry:B(e),objectIds:B(s),spatialRelationship:i,timeExtent:B(r),where:t,units:n,distance:o})}};c([d({type:String,json:{write:!0}})],Ka.prototype,"where",void 0),c([d({types:Yy,json:{write:!0}})],Ka.prototype,"geometry",void 0),c([d({type:J2.apiValues,json:{name:"spatialRel",read:{reader:J2.read},write:{allowNull:!1,writer:J2.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Ka.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Ka.prototype,"distance",void 0),c([d({type:[Number],json:{write:!0}})],Ka.prototype,"objectIds",void 0),c([d({type:Z2.apiValues,json:{read:Z2.read,write:{writer:Z2.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Ka.prototype,"units",void 0),c([d({type:Vt,json:{write:!0}})],Ka.prototype,"timeExtent",void 0),Ka=YA=c([R("esri.layers.support.FeatureFilter")],Ka);const gTe=Ka;var JA;const hV={read:{reader:Mw},write:{writer:kw,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},dV={read:{reader:Mw},write:{writer:kw,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},pV={name:"showExcludedLabels",default:!0};let Zd=JA=class extends X{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const i=super.write(t,e);if(e?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return e.messages?.push(new W("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return e.messages?.push(new W("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new JA({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([d({type:gTe,json:{write:{allowNull:!0,writer(t,e,i,r){const s=t?.write({},r);s&&Object.keys(s).length!==0?Bi(i,s,e):Bi(i,null,e)}}}})],Zd.prototype,"filter",void 0),c([d({json:{read:Mw,write:{writer:kw,allowNull:!0},origins:{"web-map":hV,"portal-item":hV}}})],Zd.prototype,"includedEffect",void 0),c([d({json:{read:Mw,write:{writer:kw,allowNull:!0},origins:{"web-map":dV,"portal-item":dV}}})],Zd.prototype,"excludedEffect",void 0),c([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":pV,"portal-item":pV}}})],Zd.prototype,"excludedLabelsVisible",void 0),Zd=JA=c([R("esri.layers.support.FeatureEffect")],Zd);const fV={write:{allowNull:!0}},yTe={type:Zd,json:{origins:{"web-map":fV,"portal-item":fV}}},bTe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return c([d(yTe)],e.prototype,"featureEffect",void 0),e=c([R("esri.layers.mixins.FeatureEffectLayer")],e),e};var ZA;let Gv=ZA=class extends X{constructor(t){super(t)}async collectRequiredFields(t,e){return ws(t,e,this.expression)}clone(){return new ZA({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};c([d({type:String,json:{write:{isRequired:!0}}})],Gv.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],Gv.prototype,"title",void 0),Gv=ZA=c([R("esri.symbols.support.FeatureExpressionInfo")],Gv);const mV=Gv,zT={unknown:1,inches:Fi(1,"meters","inches"),feet:Fi(1,"meters","feet"),"us-feet":Fi(1,"meters","us-feet"),yards:Fi(1,"meters","yards"),miles:Fi(1,"meters","miles"),"nautical-miles":Fi(1,"meters","nautical-miles"),millimeters:Fi(1,"meters","millimeters"),centimeters:Fi(1,"meters","centimeters"),decimeters:Fi(1,"meters","decimeters"),meters:Fi(1,"meters","meters"),kilometers:Fi(1,"meters","kilometers"),"decimal-degrees":1/lae(1,"meters",Ii.radius)};function Vqe(t){return!!t&&zT[t]!=null}function Uqe(t){return 1/(zT[t]||1)}function vTe(){const t=Object.keys(zT);return FP(t,"decimal-degrees"),t.sort(),t}const wTe=vTe();var XA;const y_=hr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),gV=new Xe({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var ty;let ol=(ty=class extends X{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,s){i[r]=e.write({},s),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}clone(){return new XA({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Ere(this.featureExpressionInfo,e.featureExpressionInfo)}},XA=ty,ty);c([d({type:mV,json:{write:!0}})],ol.prototype,"featureExpressionInfo",void 0),c([de("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ol.prototype,"readFeatureExpressionInfo",null),c([me("featureExpressionInfo",{featureExpressionInfo:{type:mV},"featureExpression.value":{type:[0]}})],ol.prototype,"writeFeatureExpressionInfo",null),c([d({type:y_.apiValues,nonNullable:!0,json:{type:y_.jsonValues,read:y_.read,write:{writer:y_.write,isRequired:!0}}})],ol.prototype,"mode",null),c([d({type:Number,json:{write:!0}})],ol.prototype,"offset",void 0),c([d({type:wTe,json:{type:String,read:gV.read,write:gV.write}})],ol.prototype,"unit",null),ol=XA=c([R("esri.symbols.support.ElevationInfo")],ol);let Lm=class extends X{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};c([d({type:String,json:{write:!0}})],Lm.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Lm.prototype,"label",void 0),c([d()],Lm.prototype,"type",void 0),Lm=c([R("esri.tables.elements.AttributeTableElement")],Lm);const ob=Lm;let Wv=class extends Fe.ClonableMixin(ob){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};c([d({type:["auto"],json:{write:!0}})],Wv.prototype,"displayType",void 0),c([d({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Wv.prototype,"type",void 0),Wv=c([R("esri.tables.elements.AttributeTableAttachmentElement")],Wv);const $X=Wv;let Xd=class extends Fe.ClonableMixin(ob){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};c([d({type:String,json:{read:!1,write:!1}})],Xd.prototype,"description",void 0),c([d({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Xd.prototype,"fieldName",void 0),c([d({type:String,json:{read:!1,write:!1}})],Xd.prototype,"label",void 0),c([d({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Xd.prototype,"type",void 0),Xd=c([R("esri.tables.elements.AttributeTableFieldElement")],Xd);const AX=Xd;let qv=class extends Fe.ClonableMixin(ob){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};c([d({type:Number,json:{type:ht,write:{enabled:!0,isRequired:!0}}})],qv.prototype,"relationshipId",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],qv.prototype,"type",void 0),qv=c([R("esri.tables.elements.AttributeTableRelationshipElement")],qv);const OX=qv,PX={base:ob,key:"type",typeMap:{attachment:$X,field:AX,relationship:OX}};function _Te(t){return{typesWithGroup:{base:ob,key:"type",typeMap:{attachment:$X,field:AX,group:t,relationship:OX}},typesWithoutGroup:PX}}let Yv=class extends Fe.ClonableMixin(ob){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};c([d({types:[PX],json:{name:"attributeTableElements",write:!0}})],Yv.prototype,"elements",void 0),c([d({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Yv.prototype,"type",void 0),Yv=c([R("esri.tables.elements.AttributeTableGroupElement")],Yv);const xTe=Yv;let Jv=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.field=null,this.order=null}};c([d({type:String,json:{write:!0}})],Jv.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Jv.prototype,"order",void 0),Jv=c([R("esri.tables.support.FieldOrder")],Jv);const STe=Jv;var KA;const ETe=_Te(xTe);let Zv=KA=class extends X{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new KA({elements:B(this.elements),orderByFields:B(this.orderByFields)})}};c([d({types:[ETe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],Zv.prototype,"elements",void 0),c([d({type:[STe],json:{write:!0}})],Zv.prototype,"orderByFields",void 0),Zv=KA=c([R("esri.tables.AttributeTableTemplate")],Zv);const CTe=Zv,TTe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Kt}}},VT={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},UT={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Kt}}},MTe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Xp}}},kTe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Kt}}},RTe={value:null,type:ol,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Kt}}};function Jqe(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const DX={write:{enabled:!0,layerContainerTypes:Kt},read:!0},QA={type:Number,json:{origins:{"web-document":DX,"portal-item":{write:{layerContainerTypes:Kt}}}}},ITe={...QA,json:{...QA.json,origins:{"web-document":{...DX,write:{enabled:!0,layerContainerTypes:Kt,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?vw(e.layerDefinition.drawingInfo.transparency):void 0:vw(e.drawingInfo.transparency)}}},Zqe={type:it,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=it.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Te.fromJSON(e.spatialReference)),i}}}},read:!1}},$Te={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ATe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Kt}}},OTe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Kt}}},LX={json:{write:{ignoreOrigin:!0,layerContainerTypes:Kt},origins:{"web-map":{read:!1,write:!1}}}},PTe={type:CTe,json:{name:"attributeTableInfo",write:!0}};let _u=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};c([d()],_u.prototype,"creatorField",void 0),c([d()],_u.prototype,"creationDateField",void 0),c([d()],_u.prototype,"editorField",void 0),c([d()],_u.prototype,"editDateField",void 0),c([d()],_u.prototype,"realm",void 0),c([d(fE("dateFieldsTimeReference",!0))],_u.prototype,"timeZone",void 0),_u=c([R("esri.layers.support.EditFieldsInfo")],_u);let al=class extends Fe.ClonableMixin(X){constructor(e){super(e)}};c([d({constructOnly:!0,json:{write:!0}})],al.prototype,"name",void 0),c([d({constructOnly:!0,json:{write:!0}})],al.prototype,"fields",void 0),c([d({constructOnly:!0,json:{write:!0}})],al.prototype,"isAscending",void 0),c([d({constructOnly:!0,json:{write:!0}})],al.prototype,"indexType",void 0),c([d({constructOnly:!0,json:{write:!0}})],al.prototype,"isUnique",void 0),c([d({constructOnly:!0,json:{write:!0}})],al.prototype,"description",void 0),al=c([R("esri.layers.support.FeatureIndex")],al);async function NX(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=FX(t));const r=DTe(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let n=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;e.start+=r}return n}function DTe(t){return FX(t)*LTe(t)}function LTe(t){return t.capabilities.query.maxRecordCount||2e3}function FX(t){return t.capabilities.query.supportsMaxRecordCountFactor?De.MAX_MAX_RECORD_COUNT_FACTOR:1}var eO;let Xv=eO=class extends X{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new eO({minValue:this.minValue,maxValue:this.maxValue})}};c([d({type:Number,json:{write:!0}})],Xv.prototype,"minValue",void 0),c([d({type:Number,json:{write:!0}})],Xv.prototype,"maxValue",void 0),Xv=eO=c([R("esri.renderers.support.AuthoringInfoClassBreakInfo")],Xv);var tO;let Xc=tO=class extends X{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new tO({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:B(this.classBreakInfos)})}};c([d({type:String,json:{write:!0}})],Xc.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],Xc.prototype,"normalizationField",void 0),c([d({type:String,json:{write:!0}})],Xc.prototype,"label",void 0),c([d({type:[Xv],json:{write:!0}})],Xc.prototype,"classBreakInfos",void 0),Xc=tO=c([R("esri.renderers.support.AuthoringInfoFieldInfo")],Xc);var iO;let Nm=iO=class extends X{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new iO({label:this.label,value:this.value,size:this.size})}};c([d({type:String,json:{write:!0}})],Nm.prototype,"label",void 0),c([d({type:Number,json:{write:!0}})],Nm.prototype,"size",void 0),c([d({type:Number,json:{write:!0}})],Nm.prototype,"value",void 0),Nm=iO=c([R("esri.renderers.support.AuthoringInfoSizeStop")],Nm);const NTe=Nm;var rO;const b_=new Xe({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),v_=new Xe({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),yV={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},bV=["high-to-low","above-and-below","centered-on","extremes"],vV=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],wV=["seconds","minutes","hours","days","months","years"],FTe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],jTe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let fr=rO=class extends X{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new rO({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:B(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([d({types:yV,json:{write:!0}})],fr.prototype,"endTime",void 0),c([It("endTime")],fr.prototype,"castEndTime",null),c([d({type:String,json:{write:!0}})],fr.prototype,"field",void 0),c([d({type:Number,json:{write:!0}})],fr.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0}})],fr.prototype,"minSliderValue",void 0),c([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],fr.prototype,"normalizationField",null),c([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],fr.prototype,"referenceSizeScale",null),c([d({type:FTe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],fr.prototype,"referenceSizeSymbolStyle",null),c([d({type:jTe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],fr.prototype,"spikeSymbolStyle",null),c([d({types:yV,json:{write:!0}})],fr.prototype,"startTime",void 0),c([It("startTime")],fr.prototype,"castStartTime",null),c([d({type:[NTe],json:{origins:{"web-scene":{write:!1}},write:!0}})],fr.prototype,"sizeStops",null),c([d({type:b_.apiValues,value:null,json:{type:b_.jsonValues,read:b_.read,write:b_.write}})],fr.prototype,"style",null),c([d({type:vV,value:null,json:{type:vV,origins:{"web-scene":{type:bV,write:{writer:(t,e)=>{bV.includes(t)&&(e.theme=t)}}}},write:!0}})],fr.prototype,"theme",null),c([d({type:v_.apiValues,json:{type:v_.jsonValues,read:v_.read,write:v_.write}})],fr.prototype,"type",void 0),c([d({type:wV,json:{type:wV,write:!0}})],fr.prototype,"units",void 0),fr=rO=c([R("esri.renderers.support.AuthoringInfoVisualVariable")],fr);const zTe=fr;let $g=class extends X{constructor(e){super(e),this.type=null}};c([d({readOnly:!0,json:{read:!1,write:!0}})],$g.prototype,"type",void 0),$g=c([R("esri.rest.support.ColorRamp")],$g);var sO;let Bu=sO=class extends $g{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new sO({fromColor:B(this.fromColor),toColor:B(this.toColor),algorithm:this.algorithm})}};c([Re({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Bu.prototype,"algorithm",void 0),c([d({type:He,json:{type:[ht],write:!0}})],Bu.prototype,"fromColor",void 0),c([d({type:He,json:{type:[ht],write:!0}})],Bu.prototype,"toColor",void 0),c([d({type:["algorithmic"]})],Bu.prototype,"type",void 0),Bu=sO=c([R("esri.rest.support.AlgorithmicColorRamp")],Bu);var nO;let cg=nO=class extends $g{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new nO({colorRamps:B(this.colorRamps)})}};c([d({type:[Bu],json:{write:!0}})],cg.prototype,"colorRamps",void 0),c([d({type:["multipart"]})],cg.prototype,"type",void 0),cg=nO=c([R("esri.rest.support.MultipartColorRamp")],cg);const VTe={key:"type",base:$g,typeMap:{algorithmic:Bu,multipart:cg}};function UTe(t){return t?.type?t.type==="algorithmic"?Bu.fromJSON(t):t.type==="multipart"?cg.fromJSON(t):null:null}var oO;const wd=new Xe({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),w_=new Xe({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),_V=new Xe({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),xV=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],HTe=["high-to-low","above-and-below","above","below"],BTe=["flow-line","wave-front"],GTe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let fi=oO=class extends X{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?UTe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new oO({classificationMethod:this.classificationMethod,colorRamp:B(this.colorRamp),fadeRatio:B(this.fadeRatio),fields:this.fields?.slice(),field1:B(this.field1),field2:B(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};c([d({type:wd.apiValues,value:null,json:{type:wd.jsonValues,read:wd.read,write:wd.write,origins:{"web-document":{default:"manual",type:wd.jsonValues,read:wd.read,write:wd.write}}}})],fi.prototype,"classificationMethod",null),c([d({types:VTe,json:{write:!0}})],fi.prototype,"colorRamp",void 0),c([de("colorRamp")],fi.prototype,"readColorRamp",null),c([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fi.prototype,"fadeRatio",void 0),c([d({type:[String],value:null,json:{write:!0}})],fi.prototype,"fields",null),c([d({type:Xc,value:null,json:{write:!0}})],fi.prototype,"field1",null),c([d({type:Xc,value:null,json:{write:!0}})],fi.prototype,"field2",null),c([d({type:BTe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fi.prototype,"flowTheme",null),c([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],fi.prototype,"focus",null),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],fi.prototype,"isAutoGenerated",void 0),c([d({type:Number,value:null,json:{type:ht,write:!0}})],fi.prototype,"numClasses",null),c([d({type:xV,json:{type:xV,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],fi.prototype,"lengthUnit",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fi.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fi.prototype,"minSliderValue",void 0),c([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fi.prototype,"statistics",null),c([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],fi.prototype,"standardDeviationInterval",null),c([d({type:w_.apiValues,value:null,json:{type:w_.jsonValues,read:w_.read,write:w_.write,origins:{"web-scene":{type:_V.jsonValues,write:{writer:_V.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],fi.prototype,"type",null),c([d({type:[zTe],json:{write:!0}})],fi.prototype,"visualVariables",void 0),c([d({type:GTe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fi.prototype,"univariateSymbolStyle",null),c([d({type:HTe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fi.prototype,"univariateTheme",null),fi=oO=c([R("esri.renderers.support.AuthoringInfo")],fi);const X2=new Xe({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Xn=class extends X{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([d({type:fi,json:{write:!0}})],Xn.prototype,"authoringInfo",void 0),c([d({type:X2.apiValues,readOnly:!0,json:{type:X2.jsonValues,read:!1,write:{writer:X2.write,ignoreOrigin:!0,isRequired:!0}}})],Xn.prototype,"type",void 0),Xn=c([R("esri.renderers.Renderer")],Xn);let Kv=class extends Fe.ClonableMixin(X){constructor(){super(...arguments),this.showLegend=null,this.title=null}};c([d({type:Boolean,json:{write:!0}})],Kv.prototype,"showLegend",void 0),c([d({type:String,json:{write:!0}})],Kv.prototype,"title",void 0),Kv=c([R("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Kv);const jX=Kv,K2=new Xe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let os=class extends X{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(he.getLogger(this).error(".field: field must be a string value"),null):Jw(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([d()],os.prototype,"index",void 0),c([d({type:K2.apiValues,readOnly:!0,json:{read:K2.read,write:{writer:K2.write,isRequired:!0}}})],os.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],os.prototype,"field",void 0),c([It("field")],os.prototype,"castField",null),c([d({type:String,json:{write:!0}})],os.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],os.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],os.prototype,"arcadeRequired",null),c([d({type:jX,json:{write:!0}})],os.prototype,"legendOptions",void 0),os=c([R("esri.renderers.visualVariables.VisualVariable")],os);var aO;let Kd=aO=class extends X{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new aO({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([d({type:He,json:{type:[ht],write:{isRequired:!0}}})],Kd.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Kd.prototype,"label",void 0),c([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Kd.prototype,"value",void 0),c([me("value")],Kd.prototype,"writeValue",null),Kd=aO=c([R("esri.renderers.visualVariables.support.ColorStop")],Kd);const WTe=Kd;var lO;let Kc=lO=class extends os{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new lO({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],Kc.prototype,"cache",null),c([d({type:["color"],json:{type:["colorInfo"]}})],Kc.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Kc.prototype,"normalizationField",void 0),c([d({type:[WTe],json:{write:!0}})],Kc.prototype,"stops",null),Kc=lO=c([R("esri.renderers.visualVariables.ColorVariable")],Kc);var uO;let jc=uO=class extends X{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return vw(e.transparency)}writeOpacity(t,e,i){e[i]=yT(t)}clone(){return new uO({label:this.label,opacity:this.opacity,value:this.value})}};c([d({type:String,json:{write:!0}})],jc.prototype,"label",void 0),c([d({type:Number,json:{type:ht,write:{target:"transparency",isRequired:!0}}})],jc.prototype,"opacity",void 0),c([de("opacity",["transparency"])],jc.prototype,"readOpacity",null),c([me("opacity")],jc.prototype,"writeOpacity",null),c([d({type:Number,json:{write:{isRequired:!0}}})],jc.prototype,"value",void 0),jc=uO=c([R("esri.renderers.visualVariables.support.OpacityStop")],jc);const qTe=jc;var cO;let Gu=cO=class extends os{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new cO({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],Gu.prototype,"cache",null),c([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Gu.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Gu.prototype,"normalizationField",void 0),c([d({type:[qTe],json:{write:!0}})],Gu.prototype,"stops",null),Gu=cO=c([R("esri.renderers.visualVariables.OpacityVariable")],Gu);var hO;let Qc=hO=class extends os{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new hO({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};c([d({readOnly:!0})],Qc.prototype,"cache",null),c([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Qc.prototype,"axis",void 0),c([d({type:["rotation"],json:{type:["rotationInfo"]}})],Qc.prototype,"type",void 0),c([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Qc.prototype,"rotationType",void 0),Qc=hO=c([R("esri.renderers.visualVariables.RotationVariable")],Qc);function YTe(t){return xt(t)}var dO;let da=dO=class extends X{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new dO({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};c([d({type:String,json:{write:!0}})],da.prototype,"label",void 0),c([d({type:Number,cast:xt,json:{write:{isRequired:!0}}})],da.prototype,"size",void 0),c([d({type:Number,json:{write:{isRequired:!0}}})],da.prototype,"value",void 0),c([d({type:Boolean,json:{write:!1}})],da.prototype,"useMinValue",void 0),c([d({type:Boolean,json:{write:!1}})],da.prototype,"useMaxValue",void 0),da=dO=c([R("esri.renderers.visualVariables.support.SizeStop")],da);let dS=class extends jX{constructor(){super(...arguments),this.customValues=null}};c([d({type:[Number],json:{write:!0}})],dS.prototype,"customValues",void 0),dS=c([R("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],dS);const JTe=dS;var rc,wr;function hg(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function af(t){return t!=null&&!isNaN(t)&&isFinite(t)}function zX(t){return t.valueExpression?rc.Expression:t.field&&typeof t.field=="string"?rc.Field:rc.Unknown}function ZTe(t,e){const i=e||zX(t),r=t.valueUnit||"unknown";return i===rc.Unknown?wr.Constant:t.stops?wr.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?wr.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?wr.Proportional:wr.Additive:wr.Identity:wr.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(rc||(rc={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(wr||(wr={}));const VX=()=>he.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),HT=t=>VX().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),BT=()=>VX().error("Use of arcade expressions requires an arcade context"),SV=new Si,pS=Math.PI,UX=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function HX(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(v=>v.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void HT("ColorVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let a=s?e:null;const l=r.field,{ipData:u,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!l&&!h){const v=r.stops;return v&&v[0]&&v[0].color}if(typeof a!="number")if(h){if(i?.arcade==null)return void BT();const v={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,S=w.getViewInfo(v),E=w.createExecContext(n,S,i.timeZone);if(!p){const I=w.createSyntaxTree(r.valueExpression);p=w.createFunction(I),r.cache.compiledFunc=p}a=w.executeFunction(p,E)}else o&&(a=o[l]);const m=r.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||s||!isNaN(y)&&y!==0)){af(y)&&!s&&(a/=y);const v=WL(a,u);if(v){const w=v[0],S=v[1],E=w===S?r.stops[w].color:He.blendColors(r.stops[w].color,r.stops[S].color,v[2],i?.color);return new He(E)}}}function BX(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(v=>v.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void HT("OpacityVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let a=s?e:null;const l=r.field,{ipData:u,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!l&&!h){const v=r.stops;return v&&v[0]&&v[0].opacity}if(typeof a!="number")if(h){if(i?.arcade==null)return void BT();const v={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,S=w.getViewInfo(v),E=w.createExecContext(n,S,i.timeZone);if(!p){const I=w.createSyntaxTree(r.valueExpression);p=w.createFunction(I),r.cache.compiledFunc=p}a=w.executeFunction(p,E)}else o&&(a=o[l]);const m=r.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||s||!isNaN(y)&&y!==0)){af(y)&&!s&&(a/=y);const v=WL(a,u);if(v){const w=v[0],S=v[1];if(w===S)return r.stops[w].opacity;{const E=r.stops[w].opacity;return E+(r.stops[S].opacity-E)*v[2]}}}}function GX(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(y=>y.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void HT("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a?.attributes,u=r.field,{hasExpression:h}=r.cache;let p=r.cache.compiledFunc,m=null;if(!u&&!h)return m;if(h){if(i?.arcade==null)return void BT();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(y),S=v.createExecContext(a,w,i.timeZone);if(!p){const E=v.createSyntaxTree(r.valueExpression);p=v.createFunction(E),r.cache.compiledFunc=p}m=v.executeFunction(p,S)}else l&&(m=l[u]);return m=typeof m!="number"||isNaN(m)?null:n+o*m,m}function XTe(t,e,i){const r=typeof e=="number",s=r?null:e,n=s?.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const h=i?.scale,p=i?.view;o=h==null||p==="3d"?KTe(t):h}else if(!r)switch(t.inputValueType){case rc.Expression:{if(i?.arcade==null)return void BT();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,m=p.getViewInfo(h),y=p.createExecContext(s,m,i.timeZone);if(!l){const v=p.createSyntaxTree(t.valueExpression);l=p.createFunction(v),t.cache.compiledFunc=l}o=p.executeFunction(l,y);break}case rc.Field:n&&(o=n[t.field]);break;case rc.Unknown:o=null}if(!af(o))return null;if(r||!t.normalizationField)return o;const u=n?parseFloat(n[t.normalizationField]):null;return af(u)&&u!==0?o/u:null}function KTe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function GT(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(n=>n.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void HT("SizeVariable");const s=qX(XTe(r,e,i),r,e,i,r.cache.ipData);return s==null||isNaN(s)?void 0:s}function _n(t,e,i){return t==null?null:hg(t)?GT(t,e,i):af(t)?t:null}function WX(t,e,i){return af(i)&&t>i?i:af(e)&&t<e?e:t}function QTe(t,e,i,r){const s=_n(e.minSize,i,r)||e.minDataValue;return t==null&&s==null?null:(t??0)+(s??0)}function eMe(t,e,i){const r=t.stops;let s=r?.length&&r[0].size;return s==null&&(s=t.minSize),_n(s,e,i)}function tMe(t,e,i,r){const s=_n(e.minSize,i,r);if(t==null)return s;const{minDataValue:n,maxDataValue:o}=e;if(n==null||o==null)return null;const a=(t-n)/(o-n),l=_n(e.maxSize,i,r),u=r?.shape;if(t<=n)return s;if(t>=o)return l;if(s==null||l==null)return null;if(e.scaleBy==="area"&&u){const h=u==="circle",p=h?pS*(s/2)**2:s*s,m=p+a*((h?pS*(l/2)**2:l*l)-p);return h?2*Math.sqrt(m/pS):Math.sqrt(m)}return s+a*(l-s)}function iMe(t,e,i,r){const s=_n(e.minSize,i,r);if(t==null||s==null)return s;const n=r?.shape,{minDataValue:o}=e;if(o==null)return null;const a=t/o,l=_n(e.maxSize,i,r);let u=null;return u=n==="circle"?2*Math.sqrt(a*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(a*s**2):a*s,WX(u,s,l)}function rMe(t,e,i,r,s){if(t==null)return null;const[n,o,a]=WL(t,s);if(n===o)return _n(e.stops?.[n].size,i,r);{const l=_n(e.stops?.[n].size,i,r),u=_n(e.stops?.[o].size,i,r);return l==null||u==null?null:l+(u-l)*a}}function sMe(t,e,i,r){const s=(r?.resolution??1)*zT[e.valueUnit],n=_n(e.minSize,i,r),o=_n(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return n;let l=null;return l=a==="area"?2*Math.sqrt(t/pS)/s:a==="radius"||a==="distance"?2*t/s:t/s,WX(l,n,o)}function qX(t,e,i,r,s){switch(e.transformationType){case wr.Additive:return QTe(t,e,i,r);case wr.Constant:return eMe(e,i,r);case wr.ClampedLinear:return tMe(t,e,i,r);case wr.Proportional:return iMe(t,e,i,r);case wr.Stops:return rMe(t,e,i,r,s);case wr.RealWorldSize:return sMe(t,e,i,r);case wr.Identity:return t;case wr.Unknown:return null}}function nMe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const s={scale:e,view:i};let n=_n(t.minSize,SV,s),o=_n(t.maxSize,SV,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function oMe(t,e,i){if(!t.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach(l=>{const u=HX(l,e,i);r.push({variable:l,value:u})}),n.forEach(l=>{const u=BX(l,e,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=GX(l,e,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=GT(l,e,i);r.push({variable:l,value:u})}),r}function WL(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((s,n)=>t<s?(r=n,!0):(i=n,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function aMe(t,e,i){const r=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":GT(s,e,i)??"proportional";switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const sYe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:aMe,getColor:HX,getOpacity:BX,getRotationAngle:GX,getSize:GT,getSizeForValue:qX,getSizeFromNumberOrVariable:_n,getSizeRangeAtScale:nMe,getVisualVariableValues:oMe,viewScaleRE:UX},Symbol.toStringTag,{value:"Module"}));var pO;const __=new Xe({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),fO=new Xe({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function EV(t){if(t!=null)return typeof t=="string"||typeof t=="number"?YTe(t):t.type==="size"?hg(t)?t:(delete(t={...t}).type,new kt(t)):void 0}function CV(t,e,i){if(typeof t!="object")return t;const r=new kt;return r.read(t,i),r}let kt=pO=class extends os{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&UX.test(this.valueExpression)}}set index(t){hg(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),hg(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return zX(this)}set maxDataValue(t){t&&this.stops&&(he.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(he.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return EV(t)}readMaxSize(t,e,i){return CV(t,e,i)}set minDataValue(t){t&&this.stops&&(he.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(he.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return EV(t)}readMinSize(t,e,i){return CV(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(he.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return ZTe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new W("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?fO.read(t):null}clone(){return new pO({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:hg(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:hg(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===wr.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===wr.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};c([d({readOnly:!0})],kt.prototype,"cache",null),c([d({type:__.apiValues,json:{type:__.jsonValues,origins:{"web-map":{read:!1}},read:__.read,write:__.write}})],kt.prototype,"axis",void 0),c([d()],kt.prototype,"index",null),c([d({type:String,readOnly:!0})],kt.prototype,"inputValueType",null),c([d({type:JTe,json:{write:!0}})],kt.prototype,"legendOptions",void 0),c([d({type:Number,value:null,json:{write:!0}})],kt.prototype,"maxDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],kt.prototype,"maxSize",null),c([It("maxSize")],kt.prototype,"castMaxSize",null),c([de("maxSize")],kt.prototype,"readMaxSize",null),c([d({type:Number,value:null,json:{write:!0}})],kt.prototype,"minDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],kt.prototype,"minSize",null),c([It("minSize")],kt.prototype,"castMinSize",null),c([de("minSize")],kt.prototype,"readMinSize",null),c([d({type:String,json:{write:!0}})],kt.prototype,"normalizationField",void 0),c([d({readOnly:!0})],kt.prototype,"arcadeRequired",null),c([d({type:String})],kt.prototype,"scaleBy",void 0),c([d({type:[da],value:null,json:{write:!0}})],kt.prototype,"stops",null),c([d({type:["outline"],json:{write:!0}})],kt.prototype,"target",void 0),c([d({type:String,readOnly:!0})],kt.prototype,"transformationType",null),c([d({type:["size"],json:{type:["sizeInfo"]}})],kt.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],kt.prototype,"useSymbolValue",void 0),c([d({type:String,json:{write:!0}})],kt.prototype,"valueExpression",void 0),c([de("valueExpression",["valueExpression","expression"])],kt.prototype,"readValueExpression",null),c([me("web-scene","valueExpression")],kt.prototype,"writeValueExpressionWebScene",null),c([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],kt.prototype,"valueRepresentation",void 0),c([d({type:fO.apiValues,json:{write:fO.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],kt.prototype,"valueUnit",void 0),c([de("valueUnit")],kt.prototype,"readValueUnit",null),kt=pO=c([R("esri.renderers.visualVariables.SizeVariable")],kt);const lMe={color:Kc,size:kt,opacity:Gu,rotation:Qc},uMe=new Xe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),cMe=/^\[([^\]]+)\]$/i;let fS=class extends Oe{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(i=>!!i),e?.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:s,rotationType:n}=i,o=s?.match(cMe),a=o?.[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:a})),e)return e.map(l=>{const u=uMe.read(l.type),h=lMe[u];h||(he.getLogger(this).warn(`Unknown variable type: ${u}`),r?.messages&&r.messages.push(new to("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:r})));const p=new h;return p.read(l,r),p})}writeVariables(e,i){const r=[];for(const s of e){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([d()],fS.prototype,"visualVariables",null),fS=c([R("esri.renderers.visualVariables.VisualVariableFactory")],fS);const hMe={base:os,key:"type",typeMap:{opacity:Gu,color:Kc,rotation:Qc,size:kt}},ab=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new fS}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:i})=>i)??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){return this.visualVariables?.filter(s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target))??[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&Bs(i,r,n.field),n.normalizationField&&Bs(i,r,n.normalizationField),n.valueExpression&&(dMe(n.valueExpression,i,r)||await ws(i,r,n.valueExpression)))}};return c([d({types:[hMe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),c([de("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),c([me("visualVariables")],e.prototype,"writeVisualVariables",null),e=c([R("esri.renderers.mixins.VisualVariablesMixin")],e),e};function dMe(t,e,i){const r=Sge(t);return r!=null&&(Bs(e,i,r),!0)}const qL=[252,146,31,255],pMe=[153,153,153,255],fMe={type:"esriSMS",style:"esriSMSCircle",size:6,color:qL,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},mMe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:qL},gMe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},yMe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},bMe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},vMe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},wMe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},QE=vr.fromJSON(fMe),YL=ir.fromJSON(mMe),YX=Wn.fromJSON(gMe),_Me=Gt.fromJSON(yMe);function oYe(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return QE;case"polyline":return YL;case"polygon":case"extent":return YX}return null}const aYe=vr.fromJSON(bMe),lYe=ir.fromJSON(vMe),uYe=Wn.fromJSON(wMe),xMe=Fs.fromSimpleMarkerSymbol(QE),SMe=va.fromSimpleLineSymbol(YL),EMe=Io.fromSimpleFillSymbol(YX),CMe=new Zu({symbolLayers:new _e([new Os({material:{color:qL},edges:new uY({size:Po(1),color:new He(pMe)})})])}),TMe=new va({symbolLayers:new _e([new As({material:{color:new He([0,0,0])},size:Po(1)})])}),MMe=new Io({symbolLayers:new _e([new Os({outline:{color:new He([0,0,0]),size:Po(1)}})])});function cYe(t){if(t==null)return null;switch(t.type){case"mesh":return CMe;case"point":case"multipoint":return xMe;case"polyline":return SMe;case"polygon":case"extent":return EMe}return null}const TV="#useCIMFallbackSymbology()",Yf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function kMe(t,e=Yf){if(!t)return{symbol:null};const{retainId:i=Yf.retainId,ignoreDrivers:r=Yf.ignoreDrivers,hasLabelingContext:s=Yf.hasLabelingContext,retainCIM:n=Yf.retainCIM,cimFallbackEnabled:o=Yf.cimFallbackEnabled}=e;let a=null;if(RY(t)||t instanceof Pr)a=t.clone();else if(t.type==="cim"){const l=t.data?.symbol?.type;switch(l){case"CIMPointSymbol":a=n?t.clone():Fs.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=TMe.clone(),e?.logWarning?.(TV,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=MMe.clone(),e?.logWarning?.(TV,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new W("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${l||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof ir)a=va.fromSimpleLineSymbol(t);else if(t instanceof vr)a=Fs.fromSimpleMarkerSymbol(t);else if(t instanceof $s)a=Fs.fromPictureMarkerSymbol(t);else if(t instanceof Wn)a=e.geometryType&&e.geometryType==="mesh"?Zu.fromSimpleFillSymbol(t):Io.fromSimpleFillSymbol(t);else{if(!(t instanceof Gt))return{error:new W("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=s?ua.fromTextSymbol(t):Fs.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof Pr||a.symbolLayers.forEach(l=>l.ignoreDrivers=!0),{symbol:a}}function eC(t,e,i,r){const s=JX(t,{},{context:r,isLabelSymbol:!1});s!=null&&Bi(i,s,e)}function MV(t,e,i,r){const s=JX(t,{},{context:r,isLabelSymbol:!0});s!=null&&(e[i]=s)}function kV(t){return RY(t)||t instanceof Pr}function RMe(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function JX(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:s}=i,n=r?.origin,o=r?.messages;if(n==="web-scene"&&!kV(t)){const a=kMe(t,{retainCIM:!0,hasLabelingContext:s});return a.symbol!=null?a.symbol.write(e,r):(o?.push(new W("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:a.error})),null)}return oI(r?.layer)&&RMe(t)?(o?.push(new W("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:t,context:r})),null):(n==="web-map"||n==="portal-item"&&!oI(r?.layer))&&kV(t)?(o?.push(new W("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function hYe(t,e){return cbe(t,null,e)}const WT={types:IY,json:{write:{writer:eC},origins:{"web-scene":{types:bz,write:{writer:eC},read:{reader:Uy({types:bz})}}}}},JL=HP({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},WT),ZL={types:{base:Ui,key:"type",typeMap:{"simple-fill":ph.typeMap["simple-fill"],"picture-fill":ph.typeMap["picture-fill"],"polygon-3d":ph.typeMap["polygon-3d"],cim:ph.typeMap.cim}},json:{write:{writer:eC},origins:{"web-scene":{type:Io,write:{writer:eC}}}}},mS={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var mO;let js=mO=class extends ab(Xn){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new mO({description:this.description,label:this.label,symbol:B(this.symbol),visualVariables:B(this.visualVariables),authoringInfo:B(this.authoringInfo)})}};c([d({type:String,json:{write:!0}})],js.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],js.prototype,"label",void 0),c([d(JL)],js.prototype,"symbol",void 0),c([Re({simple:"simple"})],js.prototype,"type",void 0),js=mO=c([R("esri.renderers.SimpleRenderer")],js);const IMe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function gO(t){return t instanceof Oe}function RV(t){return t instanceof _e?Object.keys(t.items):gO(t)?Gs(t).keys():t?Object.keys(t):[]}function x_(t,e){return t instanceof _e?t.items[e]:t[e]}function $Me(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function z0(t){return t?t.declaredClass:null}function ZX(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=RV(t),s=RV(e);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||$Me(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter(p=>!r.includes(p)),o=r.filter(p=>!s.includes(p)),a=r.filter(p=>s.includes(p)&&x_(t,p)!==x_(e,p)).concat(n,o).sort(),l=z0(t);if(l&&IMe.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let u;const h=gO(t)&&gO(e);for(const p of a){const m=x_(t,p),y=x_(e,p);let v;if((h||typeof m!="function"&&typeof y!="function")&&m!==y&&(m!=null||y!=null)){if(i&&i[p]&&typeof i[p]=="function")v=i[p]?.(m,y);else if(m instanceof Date&&y instanceof Date){if(m.getTime()===y.getTime())continue;v={type:"complete",oldValue:m,newValue:y}}else v=typeof m=="object"&&typeof y=="object"&&z0(m)===z0(y)?ZX(m,y):{type:"complete",oldValue:m,newValue:y};v!=null&&(u!=null?u.diff[p]=v:u={type:"partial",diff:{[p]:v}})}}return u}function dYe(t,e){return AMe(t,e)}function AMe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function pYe(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function OMe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&z0(t)!==z0(e)?{type:"complete",oldValue:t,newValue:e}:ZX(t,e)}function S_(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!S_(i))return!1;for(const i of e.removed)if(!S_(i))return!1;for(const i of e.changed)if(!S_(i))return!1;return!0}case"partial":for(const e in t.diff)if(!S_(t.diff[e]))return!1;return!0}}var yO;const PMe=hr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Qv=yO=class extends Fe.ClonableMixin(X){static from(t){return Zw(yO,t)}constructor(t){super(t),this.title=null,this.order=null}};c([d({type:String,json:{write:!0}})],Qv.prototype,"title",void 0),c([Re(PMe)],Qv.prototype,"order",void 0),Qv=yO=c([R("esri.renderers.support.RendererLegendOptions")],Qv);const XL=Qv;let ga=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};c([d(mS)],ga.prototype,"value",void 0),c([d(mS)],ga.prototype,"value2",void 0),c([d(mS)],ga.prototype,"value3",void 0),ga=c([R("esri.renderers.support.UniqueValue")],ga);let Lu=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new ga({value:r})):i==="object"?e[0]instanceof ga?e:e.map(r=>new ga(r)):null}};c([d({type:String,json:{write:!0}})],Lu.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Lu.prototype,"label",void 0),c([d(WT)],Lu.prototype,"symbol",void 0),c([d({type:[ga],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new ga({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const s=[r.value,r.value2,r.value3].filter(Ah).map(n=>n.toString());i.push(s)}e.values=i}}}})],Lu.prototype,"values",void 0),c([It("values")],Lu.prototype,"castValues",null),Lu=c([R("esri.renderers.support.UniqueValueClass")],Lu);let Sp=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.heading=null,this.classes=null}};c([d({type:String,json:{write:!0}})],Sp.prototype,"heading",void 0),c([d({type:[Lu],json:{write:{isRequired:!0}}})],Sp.prototype,"classes",void 0),Sp=c([R("esri.renderers.support.UniqueValueGroup")],Sp);var bO;let ma=bO=class extends X{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new bO({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};c([d({type:String,json:{write:!0}})],ma.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],ma.prototype,"label",void 0),c([d(JL)],ma.prototype,"symbol",void 0),c([d(mS)],ma.prototype,"value",void 0),ma=bO=c([R("esri.renderers.support.UniqueValueInfo")],ma);const IV=new Map;async function DMe(t,e){try{return{data:(await jMe(t,e)).data,baseUrl:roe(t),styleUrl:t}}catch(i){return fl(i),null}}function LMe(t,e,i){const r=e.portal!=null?e.portal:fe.getDefault();let s;const n=`${r.url} - ${r.user?.username} - ${t}`,o=IV.get(n);if(o)return o;const a=NMe(t,r,i).then(l=>(s=l,l.fetchData())).then(l=>({data:l,baseUrl:s.itemUrl??"",styleName:t}));return IV.set(n,a),a}function NMe(t,e,i){return e.load(i).then(()=>{const r=new ji({disableExtraQuery:!0,query:`owner:${$V} AND type:${AV} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{let s=null;const n=t.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords?.some(l=>l.toLowerCase()===n)&&o.type===AV&&o.owner===$V){s=o;break}}if(!s)throw new W("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)})}function FMe(t,e,i){return t?.styleUrl!=null?DMe(t.styleUrl,i):t?.styleName!=null?LMe(t.styleName,e,i):Promise.reject(new W("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function yYe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function bYe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=Q2(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=Q2(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=Q2(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function Q2(t,e){if(!J("enable-feature:force-wosr"))return t.formatInfos?.find(i=>i.type===e)?.href}function jMe(t,e){const i={responseType:"json",query:{f:"json"},...e};return Tt(Sa(t),i)}const $V="esri_en",AV="Style",vYe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var e0;const OV="uvInfos-watcher",PV="uvGroups-watcher",zMe=",",VMe=Gi(ma);function UMe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=t,a=!(!e||!i);return[{classes:(n??[]).map(l=>{const{symbol:u,label:h,value:p,description:m}=l,[y,v,w]=a?p?.toString()?.split(s||"")||[]:[p],S=[];return(e||o)&&S.push(y),i&&S.push(v),r&&S.push(w),{symbol:u,label:h,values:[S],description:m}})}]}function Jf(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let ei=e0=class extends ab(Xn){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=e.find(a=>a.value===i[n].value);o?OMe(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<e.length;n++)i.find(o=>o.value===e[n].value)||(s.removed.push(e[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Jw(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r?.messages?r.messages.push(new W("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):he.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||fe.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=pf(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Zp(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?he.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?he.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void he.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?VMe(t):new ma({value:t,symbol:$Y(e)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[Jf(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void he.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[Jf(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await nf()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void he.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&i?.arcade==null){const s=await nf(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}return this._getUniqueValueInfo(t,i)?.symbol||this.defaultSymbol}get symbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,s)=>r+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new e0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:B(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:B(this.visualVariables),legendOptions:B(this.legendOptions),authoringInfo:B(this.authoringInfo),backgroundFillSymbol:B(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=B(this.uniqueValueInfos),i=B(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(B(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),ws(t,e,this.valueExpression)];Bs(t,e,this.field),Bs(t,e,this.field2),Bs(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return FMe(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{const r=new Pr({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new ma({value:i.name,symbol:r});e.push(s),this._valueInfoMap[Jf(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",zMe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[Jf(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(OV);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Ue(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,OV)}}_watchUniqueValueGroups(){this.removeHandles(PV);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Ue(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(Ue(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,PV)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of n)for(const u of l.classes??[]){const{symbol:h,label:p,values:m,description:y}=u;for(const v of m??[]){const{value:w,value2:S,value3:E}=v,I=[w];i&&I.push(S),r&&I.push(E);const D=a?I.join(s||""):I[0]??void 0;t.push(new ma({symbol:h,label:p,value:D,description:y}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=n.map(u=>{const{symbol:h,label:p,value:m,description:y}=u,[v,w,S]=o?m?.toString()?.split(s||"")||[]:[m];return new Lu({symbol:h,label:p,description:y,values:[new ga({value:v,value2:w,value3:S})]})}),l=[new Sp({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=n.arcadeUtils;if(!a){const h=l.createSyntaxTree(this.valueExpression);a=l.createFunction(h),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._valueInfoMap[Jf(u)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,o=[];e&&o.push(i[e]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[Jf(r)]}static fromPortalStyle(t,e){const i=new e0(e?.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e?.portal||fe.getDefault());const r=i.populateFromStyle();return r.catch(s=>{he.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(t,e){const i=new e0(e?.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(s=>{he.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};c([d({readOnly:!0})],ei.prototype,"_cache",null),c([Re({uniqueValue:"unique-value"})],ei.prototype,"type",void 0),c([d(ZL)],ei.prototype,"backgroundFillSymbol",void 0),c([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ei.prototype,"field",null),c([It("field")],ei.prototype,"castField",null),c([me("field")],ei.prototype,"writeField",null),c([d({type:String,value:null,json:{write:!0}})],ei.prototype,"field2",null),c([d({type:String,value:null,json:{write:!0}})],ei.prototype,"field3",null),c([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ei.prototype,"orderByClassesEnabled",void 0),c([d({type:String,value:null,json:{write:!0}})],ei.prototype,"valueExpression",null),c([d({type:String,json:{write:!0}})],ei.prototype,"valueExpressionTitle",void 0),c([d({type:XL,json:{write:!0}})],ei.prototype,"legendOptions",void 0),c([d({type:String,json:{write:!0}})],ei.prototype,"defaultLabel",void 0),c([d(HP({...WT},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ei.prototype,"defaultSymbol",null),c([d({type:String,value:null,json:{write:!0}})],ei.prototype,"fieldDelimiter",null),c([d({type:fe,readOnly:!0})],ei.prototype,"portal",void 0),c([de("portal",["styleName"])],ei.prototype,"readPortal",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ei.prototype,"styleOrigin",void 0),c([de("styleOrigin",["styleName","styleUrl"])],ei.prototype,"readStyleOrigin",null),c([me("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ei.prototype,"writeStyleOrigin",null),c([d({type:[Sp],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||UMe(e)).map(r=>Sp.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ei.prototype,"uniqueValueGroups",null),c([d({type:[ma],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],ei.prototype,"uniqueValueInfos",null),ei=e0=c([R("esri.renderers.UniqueValueRenderer")],ei);var vO,iy;let mr=(iy=class extends X{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new vO(B({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},vO=iy,iy);c([d({type:[String],json:{write:!0}})],mr.prototype,"attachmentTypes",void 0),c([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],mr.prototype,"attachmentsWhere",void 0),c([d({type:Boolean,json:{write:!0}})],mr.prototype,"cacheHint",void 0),c([d({type:[String],json:{write:!0}})],mr.prototype,"keywords",void 0),c([d({type:[String],json:{write:!0}})],mr.prototype,"globalIds",void 0),c([d({json:{write:!0}})],mr.prototype,"name",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],mr.prototype,"num",void 0),c([d({type:[Number],json:{write:!0}})],mr.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],mr.prototype,"orderByFields",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],mr.prototype,"returnMetadata",void 0),c([d({type:[Number],json:{write:!0}})],mr.prototype,"size",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],mr.prototype,"start",void 0),c([me("start"),me("num")],mr.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],mr.prototype,"where",void 0),mr=vO=c([R("esri.rest.support.AttachmentQuery")],mr),mr.from=Gi(mr);const XX=hr()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),DV="percent-of-total",LV="field",wYe=t=>{let e=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,s=this.normalizationTotal!=null;return r||s?(i=r&&LV||s&&DV||null,r&&s&&he.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==LV&&i!==DV||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return c([d({type:String,json:{name:"parameters.normalizationField",write:!0}})],e.prototype,"normalizationField",void 0),c([d({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],e.prototype,"normalizationMaxValue",void 0),c([d({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],e.prototype,"normalizationMinValue",void 0),c([d({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],e.prototype,"normalizationTotal",void 0),c([Re(XX,{name:"parameters.normalizationType"})],e.prototype,"normalizationType",null),e=c([R("esri.rest.support.NormalizationBinParametersMixin")],e),e};var wO,ry;let oi=(ry=class extends X{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new wO(B({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},wO=ry,ry);c([d({type:Boolean,json:{write:!0}})],oi.prototype,"cacheHint",void 0),c([d({type:ca,json:{write:!0}})],oi.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],oi.prototype,"gdbVersion",void 0),c([d({type:Number,json:{write:!0}})],oi.prototype,"geometryPrecision",void 0),c([d({type:Date})],oi.prototype,"historicMoment",void 0),c([me("historicMoment")],oi.prototype,"_writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],oi.prototype,"maxAllowableOffset",void 0),c([d({json:{write:!0}})],oi.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],oi.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],oi.prototype,"outFields",void 0),c([d({type:Te,json:{read:{source:"outSR"},write:{target:"outSR"}}})],oi.prototype,"outSpatialReference",void 0),c([d({json:{write:!0}})],oi.prototype,"relationshipId",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],oi.prototype,"start",void 0),c([me("start"),me("num")],oi.prototype,"writeStart",null),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],oi.prototype,"num",void 0),c([d({json:{write:!0}})],oi.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],oi.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],oi.prototype,"returnZ",void 0),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],oi.prototype,"where",void 0),oi=wO=c([R("esri.rest.support.RelationshipQuery")],oi),oi.from=Gi(oi);const _Ye=Object.freeze(Object.defineProperty({__proto__:null,get default(){return oi}},Symbol.toStringTag,{value:"Module"})),_O=new Xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function HMe(t,e,i,r){const s=await Xh(t);if(await KL(t,e,r),!s.addAttachment)throw new W(r,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function KL(t,e,i){const{attributes:r}=e,{objectIdField:s}=t;return t.capabilities?.data?.supportsAttachment?e?r?s&&r[s]?Promise.resolve():Promise.reject(new W(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new W(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new W(i,"A feature is required to add/delete/update attachments")):Promise.reject(new W(i,"this layer doesn't support attachments"))}async function BMe(t,e,i,r,s){const n=await Xh(t);if(await KL(t,e,s),!n.updateAttachment)throw new W(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,i,r)}async function GMe(t,e,i){const{applyEdits:r}=await le(()=>import("./editingSupport-Dlxp9X7n.js"),__vite__mapDeps([283,1,2])),s=await t.load();let n=i;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await p2e(s,e.deleteFeatures,s.globalIdField)}),r(s,s.source,e,i)}async function WMe(t,e,i){const{uploadAssets:r}=await le(()=>import("./editingSupport-Dlxp9X7n.js"),__vite__mapDeps([283,1,2])),s=await t.load();return r(s,s.source,e,i)}async function qMe(t,e,i,r){const s=await Xh(t);if(await KL(t,e,r),!s.deleteAttachments)throw new W(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function YMe(t,e,i){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new W(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function JMe(t,e,i,r){e=mr.from(e),await t.load();const s=t.source,n=t.capabilities;if(!n?.data?.supportsAttachment)throw new W(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:h,start:p,where:m}=e;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||h?.length>0||u||p||m))throw new W(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a?.length||l?.length||m))throw new W(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new W(r,"Layer source does not support queryAttachments capability",e);return!n?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),s.queryAttachments(e)}async function ZMe(t,e,i,r){const s=await Xh(t);if(!s.queryObjectIds)throw new W(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(De.from(e)??t.createQuery(),i)}async function XMe(t,e,i,r){const s=await Xh(t);if(!s.queryFeatureCount)throw new W(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(De.from(e)??t.createQuery(),i)}async function KMe(t,e,i,r){const s=await Xh(t);if(!s.queryExtent)throw new W(r,"Layer source does not support queryExtent capability");return s.queryExtent(De.from(e)??t.createQuery(),i)}async function QMe(t,e,i,r){const s=await Xh(t);if(!s.queryRelatedFeatures)throw new W(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(oi.from(e),i)}async function e2e(t,e,i,r){const s=await Xh(t);if(!s.queryRelatedFeaturesCount)throw new W(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(oi.from(e),i)}async function t2e(t){const e=t.source;if(e?.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await jq(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function i2e(t){const e=new De;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=t.capabilities?.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=t.capabilities?.data;r?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e}function KX(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function QX(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function r2e(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function s2e(t,e,i,r){const s=i?.feature,n=!!t.subtypes?.length;if(n&&!i?.excludeImpliedDomains){const l=o2e(t,e);if(l)return l}const o=n&&n2e(t,s);if(o){const l=o?.domains?.[e];return l?.type==="inherited"?r:l}const a=iK(t.types,t.typeIdField,s);if(a){const l=a.domains&&a.domains[e];if(l&&l?.type!=="inherited")return l}if(r)return r;if(!i?.excludeImpliedDomains){const l=a2e(t,e);if(l)return l}return null}function n2e(t,e){const{subtypes:i,subtypeField:r}=t;if(!e?.attributes||!i?.length||!r)return null;const s=e.attributes[r];return s==null?null:i.find(n=>n.code===s)}function o2e(t,e){const{fieldsIndex:i,subtypeField:r}=t,{name:s,type:n}=i.get(e)??{};if(!s)return null;if((r&&i.get(r)?.name)===s&&t.subtypes?.length){const o=t.subtypes.map(a=>new _p({code:eK(a.code,n),name:a.name}));if(o?.length)return new mh({codedValues:o})}return null}function a2e(t,e){const{fieldsIndex:i}=t,{name:r,type:s}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?i.get(t.typeIdField)?.name:null)===r&&"types"in t&&t.types?.length){const n=t.types.map(o=>new _p({code:eK(o.id,s),name:o.name}));return new mh({codedValues:n})}return null}function eK(t,e){return e?eY({type:e})&&typeof t=="number"?`${t}`:Xge({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Xh(t){return(await t.load()).source}async function xYe(t,e){if(!mt)return;const i=mt.findCredential(t);if(i)return i.userId;let r;try{const s=await iL(t,e);s&&(r=await mt.checkSignInStatus(`${s}/sharing`))}catch{}return r?r.userId:null}async function tK(t,e){if(!mt||mt.findCredential(t))return;let i;try{const r=await iL(t,e);r&&(i=await mt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await mt.getCredential(t,{signal:r})}catch{}}async function l2e(t,e,i){const r=t.parsedUrl?.path;r&&t.authenticationTriggerEvent===e&&await tK(r,i)}async function SYe(t){const e=t.parsedUrl?.path;e&&u2e(t)&&await tK(e)}function u2e(t){return c2e(t)&&("serviceDefinitionExpression"in t&&tC(t.serviceDefinitionExpression)||"definitionExpression"in t&&tC(t.definitionExpression))}function c2e(t){return!(!iq(t)||!t.capabilities?.query.supportsCurrentUser)}function tC(t){return!!t?.toLowerCase().includes("current_user")}function h2e(t){return!gS(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const ek=Uy({types:IY});function QL(t,e){if(t.defaultSymbol)return t.types?.length?new ei({defaultSymbol:ek(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:ek(i.symbol,i,e)}))}):new js({symbol:ek(t.defaultSymbol,t,e)})}function d2e(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const i=t.editingInfo?.lastEditDate?.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function p2e(t,e,i){if(e==null)return null;const r=[],{objectIdField:s}=t;if(e.forEach(u=>{let h=null;if("attributes"in u){const{attributes:p}=u;h={globalId:p[i],objectId:p[s]!=null&&p[s]!==-1?p[s]:null}}else h={globalId:u.globalId,objectId:u.objectId!=null&&u.objectId!==-1?u.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const n=t.createQuery();n.where=r.map(u=>`${i}='${u}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const o=await wpe(NX(t,n));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const u of l){const h=u.attributes[i],p=u.attributes[s];h!=null&&p!=null&&p!==-1&&a.set(bfe(h),p)}return a}function iK(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()})??null}function gS(t){return t.sourceJSON?.isMultiServicesView||f2e(t)}function f2e(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function m2e(t,e,i){const r=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!r)throw new W(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new W(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!NV(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new W(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new W(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new W(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new W(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new W(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new W(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!NV(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new W(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new W(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new W(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new W(i,"Layer source does not support firstDayOfWeek binning");const s=r?.supportedStatistics;if(t.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const a=n.get(o);if(a&&!s[a])throw new W(i,`Layer source does not support ${o} statistic type`)}}}function NV(t,e){return t!=null&&!!e?.[XX.toJSON(t)]}let Fm=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Fm.prototype,"shapeAreaField",void 0),c([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Fm.prototype,"shapeLengthField",void 0),c([d({type:String,json:{read:t=>mae.read(t)||gae.read(t)}})],Fm.prototype,"units",void 0),Fm=c([R("esri.layers.support.GeometryFieldsInfo")],Fm);var xO;let jm=xO=class extends X{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new _e}clone(){return new xO({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([d({type:String,json:{write:{isRequired:!0}}})],jm.prototype,"floorField",void 0),c([d({json:{read:!1,write:!1}})],jm.prototype,"viewAllMode",void 0),c([d({json:{read:!1,write:!1}})],jm.prototype,"viewAllLevelIds",void 0),jm=xO=c([R("esri.layers.support.LayerFloorInfo")],jm);const FV=new Xe({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),jV=new Xe({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let jn=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([d({json:{read:FV.read,write:FV.write}})],jn.prototype,"cardinality",void 0),c([d({json:{name:"catalogID"}})],jn.prototype,"catalogId",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"composite",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"id",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"keyField",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"keyFieldInRelationshipTable",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"name",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"relatedTableId",void 0),c([d({json:{read:!0,write:!0}})],jn.prototype,"relationshipTableId",void 0),c([d({json:{read:jV.read,write:jV.write}})],jn.prototype,"role",void 0),jn=c([R("esri.layers.support.Relationship")],jn);const g2e=[["binary","application/octet-stream","bin",""]];function TYe(t,e){return oK(e.name,t?.supportedFormats??[])!=null}function MYe(t,e){if(!t)return!1;const i=y2e(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function rK(t,e){return t3(_2e(t,e))}function sK(t,e){return t3(oK(t,e))}function kYe(t,e){return aK(w2e(t,e))}function y2e(t,e){return sK(t.name,e)??rK(t.type,e)}function qT(t,e,i){return rK(t,i)??sK(e,i)}function nK({supportedFormats:t}){return qT("model/gltf-binary","glb",t)}function RYe(t){const e=nK(t);return e!=null&&t.editFormats.includes(e)}function b2e({supportedFormats:t}){return qT("model/gltf+json","gltf",t)}function v2e(t){if(!t)return null;const e=nK(t),i=b2e(t);let r=null;for(const s of t.queryFormats){if(s===e)return s;s===i&&(r=s)}return r}function IYe({supportedFormats:t}){return qT("application/esri3do-SR_world","wld",t)}function $Ye({supportedFormats:t}){return qT("application/esri3do-SR_prj","prj",t)}function e3(t){return[...g2e,...t]}function w2e(t,e){return e3(e).find(i=>t3(i)===t)}function _2e(t,e){const i=t.toLowerCase();return e3(e).find(r=>aK(r)===i)}function oK(t,e){const i=t.toLowerCase();return e3(e).find(r=>x2e(r).some(s=>i.endsWith(s)))}function t3(t){return t?.[0]}function aK(t){return t?.[1].toLowerCase()}function x2e(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function AYe(t){return t.tables?.find(e=>e.role==="assetMaps")}function Ce(t,e,i){return!!lK(t,e,i)}function zm(t,e,i){return lK(t,e,i)}function lK(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const S2e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function E2e(t){const e=t?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function m1(t,e){return!!t?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(e.toLowerCase())}function C2e(t){const e=t?.supportedStatisticTypes?.map(i=>i.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function T2e(t){const e=t?.supportedNormalizationTypes?.map(i=>i.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function uK(t,e){return{analytics:M2e(t),attachment:k2e(t),data:R2e(t),metadata:I2e(t),operations:$2e(t.capabilities,t,e),query:A2e(t,e),queryAttributeBins:D2e(t),queryRelated:O2e(t),queryTopFeatures:P2e(t),editing:L2e(t)}}function M2e(t){return{supportsCacheHint:m1(t.advancedQueryCapabilities,"queryAnalytics")}}function k2e(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:m1(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:Ce(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:Ce(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const s=S2e[r.name];s&&(i[s]=!!r.isEnabled)}),i}function R2e(t){return{isVersioned:Ce(t,"isDataVersioned",!1),isBranchVersioned:Ce(t,"isDataBranchVersioned",!1),supportsAttachment:Ce(t,"hasAttachments",!1),supportsM:Ce(t,"hasM",!1),supportsZ:Ce(t,"hasZ",!1)}}function I2e(t){return{supportsAdvancedFieldProperties:Ce(t,"supportsFieldDescriptionProperty",!1)}}function $2e(t,e,i){const r=t?.toLowerCase().split(",").map(m=>m.trim())??[],s=i?Dl(i):null,n=r.includes(s?.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let a=o&&r.includes("create"),l=o&&r.includes("delete"),u=o&&r.includes("update");const h=r.includes("changetracking"),p=e.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:Ce(e,"supportsCalculate",!1),supportsTruncate:Ce(e,"supportsTruncate",!1),supportsValidateSql:Ce(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:Ce(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:Ce(p,"supportsQueryAttachments",!1),supportsQueryBins:Ce(p,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryTopFeatures:Ce(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Ce(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:Ce(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Ce(e,"supportsAsyncConvert3D",!1)}}function A2e(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,n=t.currentVersion,o=e?.includes("MapServer"),a=!o||n>=J("mapserver-pbf-version-support"),l=KS(e),u=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:zm(t,"maxRecordCount",void 0),maxRecordCountFactor:zm(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:zm(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:zm(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:E2e(i),supportsCacheHint:Ce(i,"supportsQueryWithCacheHint",!1)||m1(i,"query"),supportsCentroid:Ce(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:Ce(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:Ce(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Ce(i,"supportsDisjointSpatialRel",!1),supportsDistance:Ce(i,"supportsQueryWithDistance",!1),supportsDistinct:Ce(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Ce(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&u.has("pbf"),supportsFullTextSearch:Ce(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Ce(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ce(i,"supportsHavingClause",!1),supportsHistoricMoment:Ce(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Ce(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Ce(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Ce(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:Ce(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:Ce(i,"supportsPercentileStatistics",!1),supportsQuantization:Ce(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ce(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Ce(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:Ce(r,"allowOthersToQuery",!0),supportsQueryGeometry:Ce(t,"supportsReturningQueryGeometry",!1),supportsResultType:Ce(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!v2e(t.infoFor3D),supportsSpatialAggregationStatistics:Ce(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Ce(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ce(t,"useStandardizedQueries",!1),supportsStatistics:Ce(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:Ce(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:Ce(i,"supportsTrueCurve",!1),tileMaxRecordCount:zm(t,"tileMaxRecordCount",void 0)}}function O2e(t){const e=t.advancedQueryCapabilities,i=Ce(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ce(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:m1(e,"queryRelated")}}function P2e(t){return{supportsCacheHint:m1(t.advancedQueryCapabilities,"queryTopFilter")}}function D2e(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:Ce(e,"supportsDateBin",!1),supportsFixedInterval:Ce(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:Ce(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Ce(e,"supportsFixedBoundariesBin",!1),supportsStackBy:Ce(e,"supportsStackBy",!1),supportsSplitBy:Ce(e,"supportsSplitBy",!1),supportsSnapToData:Ce(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:Ce(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:Ce(e,"supportsFirstDayOfWeek",!1),supportsNormalization:Ce(e,"supportsNormalization",!1),supportedStatistics:C2e(e),supportedNormalizationTypes:T2e(e)}}function L2e(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Ce(t,"allowGeometryUpdates",!0),supportsGlobalId:Ce(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Ce(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Ce(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ce(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ce(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ce(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ce(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ce(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ce(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Ce(i,"supportsAsyncApplyEdits",!1),zDefault:zm(t,"zDefault",void 0)}}function OYe(t){return{operations:{supportsAppend:Ce(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:Ce(t,"supportsExportClip",!1),supportsExportFrameset:Ce(t,"supportsExportFrameset",!1),supportsMensuration:Ce(t,"supportsMensuration",!1),supportsPreviews:Ce(t,"supportsPreviews",!1),supportsUpdate:Ce(t,"supportsUpdate",!1)}}}let xu=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=TT(e[r]);return i}writeDomains(e,i){if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=e[s]?.toJSON());i.domains=r}};c([d({type:Number,json:{write:!0}})],xu.prototype,"code",void 0),c([d({type:Object,json:{write:!0}})],xu.prototype,"defaultValues",void 0),c([d({json:{write:!0}})],xu.prototype,"domains",void 0),c([de("domains")],xu.prototype,"readDomains",null),c([me("domains")],xu.prototype,"writeDomains",null),c([d({type:String,json:{write:!0}})],xu.prototype,"name",void 0),xu=c([R("esri.layers.support.Subtype")],xu);const N2e=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(_e.ofType(al)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Te.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:s,operations:n,editing:o}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(tC(this.serviceDefinitionExpression)||tC(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(d2e(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r?.creatorField||r?.editorField)&&i?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(i,r){return uK(r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=B(i),{operations:s,editing:n}=r;return gS(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return KX(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||gS(this))return!1;const{operations:r,editing:s}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:s}=i;return gS(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return QX(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}readUniqueIdFields(i,r){return r.uniqueIdInfo?.OIDFieldContainsHashValue?r.uniqueIdInfo.fields:null}set url(i){if(i==null)return void this._set("url",i);const r=yoe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:he.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,n){boe(this,i,null,r,n)}readVersion(i,r){return r2e(r)}get isUrlHostModified(){const{loaded:i,url:r,_isUrlHostModified:s}=this;if(s)return!0;if(!i||!r||this.originIdOf("url")<lt.USER)return!1;const n=this.sourceJSON?.preferredHost;if(!n||!Ml(r,`https://${n}`,!0))return!1;for(let o=lt.USER-1;o>=lt.PORTAL_ITEM;o--){const a=this.getAtOrigin("url",uw(o));if(a)return!Ml(r,a,!0)}return!1}applyPreferredHost(i){const{url:r,portalItem:s}=this;!r||aI(s)}applyHostFromPortalItem(){const{url:i,portalItem:r}=this;if(!i||this.originIdOf("url")===lt.USER||!r?.url||!aI(r)||!NL(r,FL.HOSTED_SERVICE)||Ml(i,r.url,!0)||!this._isUrlHostModificationEnabled)return;const s=loe(r.url);this._set("url",$9(i,s)),this._isUrlHostModified=!0}};return c([d({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),c([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),c([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),c([de("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),c([d(fE("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),c([d({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),c([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),c([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),c([d({readOnly:!0,type:_u})],e.prototype,"editFieldsInfo",void 0),c([d({readOnly:!0})],e.prototype,"editingInfo",void 0),c([de("editingInfo")],e.prototype,"readEditingInfo",null),c([d({readOnly:!0})],e.prototype,"effectiveCapabilities",null),c([d()],e.prototype,"effectiveEditingEnabled",null),c([d((()=>{const i=B(RTe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),c([d()],e.prototype,"fieldsIndex",void 0),c([d({type:jm,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Kt}}})],e.prototype,"floorInfo",void 0),c([d({type:it,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),c([d()],e.prototype,"gdbVersion",void 0),c([d({readOnly:!0,type:Fm,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),c([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:_O.read}}}})],e.prototype,"geometryType",void 0),c([d({type:String})],e.prototype,"globalIdField",void 0),c([de("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),c([d({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),c([d({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),c([d({readOnly:!0,type:Is})],e.prototype,"heightModelInfo",void 0),c([d({type:Date})],e.prototype,"historicMoment",void 0),c([d({type:_e.ofType(al),readOnly:!0})],e.prototype,"indexes",void 0),c([d({readOnly:!0})],e.prototype,"isTable",void 0),c([de("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),c([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),c([d(OTe)],e.prototype,"maxScale",void 0),c([de("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),c([d(ATe)],e.prototype,"minScale",void 0),c([de("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),c([d({type:String})],e.prototype,"objectIdField",void 0),c([de("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),c([d(fE("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),c([d({type:[jn],readOnly:!0})],e.prototype,"relationships",void 0),c([d({type:Boolean})],e.prototype,"returnM",void 0),c([d({type:Boolean})],e.prototype,"returnZ",void 0),c([d({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),c([d({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),c([de("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),c([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),c([d()],e.prototype,"sourceJSON",void 0),c([d({type:Te,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),c([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),c([d({type:[xu],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),c([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),c([d({type:[String],readOnly:!0})],e.prototype,"uniqueIdFields",void 0),c([de("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],e.prototype,"readUniqueIdFields",null),c([d(MTe)],e.prototype,"url",null),c([me("url")],e.prototype,"writeUrl",null),c([d({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),c([de("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),c([d({readOnly:!0})],e.prototype,"isUrlHostModified",null),e=c([R("esri.layers.mixins.FeatureLayerBase")],e),e};let oh=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};c([d({type:String,json:{write:!0}})],oh.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],oh.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],oh.prototype,"returnType",void 0),oh=c([R("esri.layers.support.ExpressionInfo")],oh);var SO,sy;let us=(sy=class extends X{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new SO({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:B(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},SO=sy,sy);c([d({type:Boolean,json:{write:!0}})],us.prototype,"isAutoGenerated",void 0),c([d({type:String,json:{write:!0}})],us.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],us.prototype,"alias",void 0),c([d({type:String,json:{write:!0}})],us.prototype,"onStatisticField",void 0),c([d({type:oh,json:{write:!0}})],us.prototype,"onStatisticExpression",void 0),c([d({type:String,json:{write:!0}})],us.prototype,"statisticType",void 0),us=SO=c([R("esri.layers.support.AggregateField")],us);let Ch=class extends X{constructor(){super(...arguments),this.type=null}};c([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Ch.prototype,"type",void 0),Ch=c([R("esri.layers.support.FeatureReduction")],Ch);const i3="__begin__",r3="__end__",F2e=new RegExp(i3,"ig"),j2e=new RegExp(r3,"ig"),zV=new RegExp("^"+i3,"i"),VV=new RegExp(r3+"$","i"),iC='"',z2e=iC+" + ",V2e=" + "+iC;function U2e(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function H2e(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function s3(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=U2e(t.labelExpression),e.type="conventional"),e}function B2e(t){const e=s3(t);if(!e)return null;switch(e.type){case"conventional":return EO(e.expression);case"arcade":return e.expression}return null}function G2e(t){const e=s3(t);if(!e)return null;switch(e.type){case"conventional":return q2e(e.expression);case"arcade":return cK(e.expression)}return null}function EO(t){let e;return t?(e=cf(t,i=>i3+'$feature["'+i+'"]'+r3),e=zV.test(e)?e.replace(zV,""):iC+e,e=VV.test(e)?e.replace(VV,""):e+iC,e=e.replaceAll(F2e,z2e).replaceAll(j2e,V2e)):e='""',e}const W2e=/^\s*\{([^}]+)\}\s*$/i;function q2e(t){return t?.match(W2e)?.[1].trim()||null}const Y2e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,J2e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Z2e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function cK(t){if(!t)return null;let e=Y2e.exec(t)||J2e.exec(t);return e?e[1]||e[3]:(e=Z2e.exec(t),e?e[2]:null)}var CO,ny;let Nu=(ny=class extends X{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?EO(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=EO(this.value)),e!=null&&(i[r]=e)}clone(){return new CO({expression:this.expression,title:this.title,value:this.value})}},CO=ny,ny);c([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Nu.prototype,"expression",void 0),c([de("expression",["expression","value"])],Nu.prototype,"readExpression",null),c([me("expression")],Nu.prototype,"writeExpression",null),c([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Nu.prototype,"title",void 0),c([d({json:{read:!1,write:!1}})],Nu.prototype,"value",void 0),Nu=CO=c([R("esri.layers.support.LabelExpressionInfo")],Nu);var TO;const E_=new Xe({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function C_(t,e,i){return{enabled:!oI(i?.layer)}}function hK(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function X2e(t){return t?.type==="map-image"}function dK(t){return!!X2e(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function K2e(t){return hK(t)||dK(t?.layer)}var oy;let ai=(oy=class extends X{static evaluateWhere(e,i){const r=(s,n,o)=>{switch(n){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return r(i[s[0]],s[1],s[2]);if(s.length===7){const n=r(i[s[0]],s[1],s[2]),o=s[3],a=r(i[s[4]],s[5],s[6]);switch(o){case"AND":return n&&a;case"OR":return n||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=_Me,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=H2e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=cK(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,s){if(e==null&&this.labelExpression!=null&&hK(s))e=new Nu({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(s);n.expression&&(i[r]=n)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return s3(this)}getLabelExpressionArcade(){return B2e(this)}getLabelExpressionSingleField(){return G2e(this)}hash(){return JSON.stringify(this)}clone(){return new TO({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:B(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:B(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},TO=oy,oy);c([d({type:String,json:{write:!0}})],ai.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:C_}}}}})],ai.prototype,"allowOverrun",void 0),c([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:C_}}}}})],ai.prototype,"deconflictionStrategy",void 0),c([d({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&i?.origin==="service"&&dK(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],ai.prototype,"labelExpression",void 0),c([de("labelExpression")],ai.prototype,"readLabelExpression",null),c([me("labelExpression")],ai.prototype,"writeLabelExpression",null),c([d({type:Nu,json:{write:{overridePolicy:(t,e,i)=>K2e(i)?{allowNull:!0}:{enabled:!1}}}})],ai.prototype,"labelExpressionInfo",void 0),c([me("labelExpressionInfo")],ai.prototype,"writeLabelExpressionInfo",null),c([d({type:E_.apiValues,json:{type:E_.jsonValues,read:E_.read,write:E_.write}})],ai.prototype,"labelPlacement",void 0),c([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ai.prototype,"labelPosition",void 0),c([d({type:Number})],ai.prototype,"maxScale",void 0),c([me("maxScale")],ai.prototype,"writeMaxScale",null),c([d({type:Number})],ai.prototype,"minScale",void 0),c([me("minScale")],ai.prototype,"writeMinScale",null),c([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:C_}}}}})],ai.prototype,"repeatLabel",void 0),c([d({type:Number,cast:xt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:C_}}}}})],ai.prototype,"repeatLabelDistance",void 0),c([d({types:hbe,json:{origins:{"web-scene":{types:dbe,write:MV,default:null}},write:MV,default:null}})],ai.prototype,"symbol",void 0),c([d({type:Boolean,json:{write:!0}})],ai.prototype,"useCodedValues",void 0),c([d({type:String,json:{write:!0}})],ai.prototype,"where",void 0),ai=TO=c([R("esri.layers.support.LabelClass")],ai);var MO;let pa=MO=class extends X{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new MO({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};c([d({type:String,json:{write:!0}})],pa.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],pa.prototype,"label",void 0),c([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],pa.prototype,"minValue",void 0),c([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],pa.prototype,"maxValue",void 0),c([d(JL)],pa.prototype,"symbol",void 0),pa=MO=c([R("esri.renderers.support.ClassBreakInfo")],pa);var kO;const pK="log",yS="percent-of-total",bS="field",T_=new Xe({esriNormalizeByLog:pK,esriNormalizeByPercentOfTotal:yS,esriNormalizeByField:bS}),Q2e=Gi(pa);let Ki=kO=class extends ab(Xn){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(s=>{const n=new pa;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(t,e,i,r){const s=t.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(he.getLogger(this).error(".field: field must be a string value"),null):Jw(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&bS||i&&yS||null,e&&i&&he.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==bS&&t!==yS||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new pa({minValue:t,maxValue:e,symbol:$Y(i)}):Q2e(B(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&he.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await nf()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void he.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&e?.arcade==null){const s=await nf(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new kO({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:B(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:B(this.visualVariables),legendOptions:B(this.legendOptions),authoringInfo:B(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),ws(t,e,this.valueExpression)];Bs(t,e,this.field),Bs(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=n.arcadeUtils;if(!l){const p=u.createSyntaxTree(a);l=u.createFunction(p),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=u.executeFunction(l,u.createExecContext(t,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let s=parseFloat(i[e]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===pK)s=Math.log(s)*Math.LOG10E;else if(r!==yS||n==null||isNaN(n)){if(r===bS&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};c([d(ZL)],Ki.prototype,"backgroundFillSymbol",void 0),c([d({type:[pa],json:{write:{isRequired:!0}}})],Ki.prototype,"classBreakInfos",void 0),c([de("classBreakInfos")],Ki.prototype,"readClassBreakInfos",null),c([me("classBreakInfos")],Ki.prototype,"writeClassBreakInfos",null),c([d({type:String,json:{write:!0}})],Ki.prototype,"defaultLabel",void 0),c([d(WT)],Ki.prototype,"defaultSymbol",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"field",void 0),c([It("field")],Ki.prototype,"castField",null),c([d({type:Boolean})],Ki.prototype,"isMaxInclusive",void 0),c([d({type:XL,json:{write:!0}})],Ki.prototype,"legendOptions",void 0),c([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ki.prototype,"minValue",null),c([d({type:String,json:{write:!0}})],Ki.prototype,"normalizationField",void 0),c([d({type:Number,json:{write:!0}})],Ki.prototype,"normalizationTotal",void 0),c([d({type:T_.apiValues,value:null,json:{type:T_.jsonValues,read:T_.read,write:T_.write}})],Ki.prototype,"normalizationType",null),c([Re({classBreaks:"class-breaks"})],Ki.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"valueExpressionTitle",void 0),Ki=kO=c([R("esri.renderers.ClassBreaksRenderer")],Ki);const RO=-3,eke=RO-1;var Fu;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Fu||(Fu={}));let tke=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){return this._db.get(e.id+i)?.size??0}put(e,i,r,s,n){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,Fu.ALL)),s>this._maxSize)return void this._notifyRemove(i,r,s,Fu.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,Fu.ALL);const a=1+Math.max(n,eke)-RO;this._db.set(i,new ike(r,s,a)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,i,r,s){i=e.id+i;const n=this._db.get(i);if(n&&n.entry===r){for(this._size-=n.size,e.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(i,r,s,Fu.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);s=o}n.size=s,this._size+=s,e.size+=s,this._checkSize()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forEach(u=>{const{id:h,name:p}=u;if(a.startsWith(h)){const m=i[p]||0;i[p]=m+o.size}})});const s={};this._users.forEach(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(i);n.sort((o,a)=>i[a]-i[o]),n.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+RO-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,Fu.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,Fu.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,s){const n=this._users.get(e.split(tk)[0])?.removeFunc,o=n?.(i,s,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const s=i?.id;let n=!0;for(;n;){n=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!s||o.startsWith(s))){const l=i??this._users.get(o.split(tk)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return;n||=this._db.has(o)}}for(const[o,a]of this._db)if(!s||o.startsWith(s)){const l=i??this._users.get(o.split(tk)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(e,i.entry,i.size,Fu.SOME);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},ike=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const tk=":";let rke=class{constructor(e,i){this.removeFunc=i,this._storage=new tke,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},UV=class fK{static parse(e,i,r){const s=[],n=[],o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a];if(l){if(l.includes("po:")){const u=l.slice(3).split("|");if(u.length===3){const[h,p,m]=u,y=nke(h,p,m);y&&n.push(y)}}else if(l.includes("|")){for(const u of l.split("|"))if(i.has(u)){s.push(u);break}}else if(i.has(l))s.push(l);else if(a===0){s.length=0,s.push(oke(r));break}}}return new fK(s,n)}constructor(e,i){this.partNames=e,this.overrides=i}};function ske(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new He(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function nke(t,e,i){return{primitiveName:t,propertyName:e,value:ske(e,i),defaultValue:null}}function oke(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var ay;let gl=(ay=class{},ay.instance=new xn("Etc/UTC"),ay);function ake(t){return t instanceof gf?t===gl.instance:t?.toString().toLowerCase()==="unknown"}function zYe(t){return ake(t)?gl.instance:t}function lke(t){return"timeZone"in t}function uke(t){return"timeZone"in t}function cke(t){return"dateFieldsTimeZone"in t}const hke=new Map;let rC=class vS{static fromJSON(e){return new vS(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new vS(e.fields??[],BV(e))}static fromLayerJSON(e){return new vS(e.fields??[],BV(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const n=s?.name,o=HV(n);if(n&&o){const a=hp(n);this._fieldsMap.set(n,s),this._fieldsMap.set(a,s),this._normalizedFieldsMap.set(o,s),r.push(`${a}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),Kge(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):Qq(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),cz(s)||hz(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)cz(e)||hz(e)||e.nullable||Vge(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(hp(e))??this._normalizedFieldsMap.get(HV(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(he.getLogger("esri.layers.support.FieldsIndex").errorOnce(new W("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Fh):mK.has(i.type)?Nh:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===Nh?gl.instance:i===Fh?cr.utcInstance:df(hke,i,()=>xn.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return Qge(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>cw(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function hp(t){return t.trim().toLowerCase()}function HV(t){return Mge(t)?.toLowerCase()??""}const mK=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function BV(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=t,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=cke(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?vx(t.dateFieldsTimeReference):null,l=s?lke(s)?s.timeZone??a:s.dateFieldsTimeReference?vx(s.dateFieldsTimeReference):a??Fh:null,u=r?uke(r)?r.timeZone??a:r.timeReference?vx(r.timeReference):a:null,h=new Map([[hp(s?.creationDateField??""),l],[hp(s?.editDateField??""),l],[hp(n),u],[hp(o),u]]);for(const{name:p,type:m}of t.fields)if(mK.has(m))e.set(p,Nh);else if(m!=="date"&&m!=="esriFieldTypeDate")e.set(p,null);else if(i)e.set(p,Nh);else{const y=h.get(hp(p??""))??a;e.set(p,y)}return e}var st;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.CannotCompareDateAndTime="CannotCompareDateAndTime",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",t.UnexpectedToken="UnexpectedToken",t.Unrecognized="Unrecognized",t.UnrecognizedType="UnrecognizedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FunctionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference",t.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",t.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(st||(st={}));const gK={[st.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[st.LogicError]:"Logic error - {reason}",[st.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[st.NeverReach]:"Encountered unreachable logic",[st.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[st.ModuleAccessorMustBeString]:"Module accessor must be a string",[st.ModuleExportNotFound]:"Module has no export with provided identifier",[st.ModulesNotSupported]:"Current profile does not support modules",[st.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[st.FunctionNotFound]:"Function not found",[st.FieldNotFound]:"Key not found - {key}",[st.CircularModules]:"Circular module dependencies are not allowed",[st.Cancelled]:"Execution cancelled",[st.UnsupportedHashType]:"Type not supported in hash function",[st.IllegalResult]:"Value is not a supported return type",[st.PortalRequired]:"Portal is required",[st.InvalidParameter]:"Invalid parameter",[st.WrongNumberOfParameters]:"Call with wrong number of parameters",[st.Unrecognized]:"Unrecognized code structure",[st.UnrecognizedType]:"Unrecognized type",[st.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[st.BooleanConditionRequired]:"Conditions must use booleans",[st.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[st.NoFunctionInArray]:"Arrays cannot contain functions.",[st.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[st.KeyAccessorMustBeString]:"Accessor must be a string",[st.KeyMustBeString]:"Object keys must be a string",[st.Immutable]:"Object is immutable",[st.UnexpectedToken]:"Unexpected token",[st.MemberOfNull]:"Cannot access property of null object",[st.MaximumCallDepth]:"Exceeded maximum function depth",[st.OutOfBounds]:"Out of bounds",[st.InvalidIdentifier]:"Identifier not recognized",[st.CallNonFunction]:"Expression is not a function",[st.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[st.AssignModuleFunction]:"Cannot assign function to module variable",[st.UnsupportedUnaryOperator]:"Unsupported unary operator",[st.UnsupportedOperator]:"Unsupported operator",[st.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[st.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[st.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[st.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[st.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let dke=class extends Error{constructor(...e){super(...e)}},GV=class yK extends dke{constructor(e,i){super(n3(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,yK),i?.loc&&(this.loc=i.loc)}},pke=class bK extends Error{constructor(e,i,r,s){super("Execution error - "+n3(r)+cf(gK[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,bK),r?.loc&&(this.loc=r.loc)}};function n3(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let UYe=class vK extends Error{constructor(e,i,r,s){super("Compilation error - "+n3(r)+cf(gK[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,vK),r?.loc&&(this.loc=r.loc)}},HYe=class wK extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,wK)}};function BYe(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e?.loc?new GV(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e?.loc?new GV(i,{cause:i}):i)}var sC;(function(t){t.UnrecognizedUri="UnrecognizedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(sC||(sC={}));const fke={[sC.UnrecognizedUri]:"Unrecognized uri - {uri}",[sC.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let GYe=class _K extends Error{constructor(e,i){super(cf(fke[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,_K)}};function wS(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let WYe=class{constructor(e,i){const r=new Map;for(const s of e){const n=wS(s);if(r.has(n))throw new Error(`${s} already added as ${r.get(n)}`);r.set(n,s)}if(i!=null)for(const[s,n]of i){const o=wS(s);if(r.has(o))throw new Error(`${s} already associated with ${r.get(o)}`);r.set(o,n)}this._enumMap=r}lookup(e){return this._enumMap.get(wS(e))}get(e){const i=this.lookup(e);if(i==null)throw new pke(null,st.InvalidParameter,null);return i}};var nC;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(nC||(nC={}));const mke={[nC.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let gke=class xK extends Error{constructor(e,i){super(cf(mke[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,xK)}};function Zf(t,e,i){return t<e?t-e:t>i?t-i:0}function Xf(t,e,i){return t<e?e:t>i?i:t}let Xu=class Zi{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,s=0,n=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))return null;const u=ke.local(e,i).daysInMonth;let h=ke.fromObject({day:Xf(r,1,u),year:e,month:Xf(i,1,12),hour:Xf(s,0,23),minute:Xf(n,0,59),second:Xf(o,0,59),millisecond:Xf(a,0,999)},{zone:hl(l)});return h=h.plus({months:Zf(i,1,12),days:Zf(r,1,u),hours:Zf(s,0,23),minutes:Zf(n,0,59),seconds:Zf(o,0,59),milliseconds:Zf(a,0,999)}),new Zi(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=hl(i);return e.isUnknownTimeZone||r===gl.instance?Zi.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Zi(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Zi(ke.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=hl(i);return new Zi(ke.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Zi(ke.fromMillis(e,{zone:gl.instance}))}static unknownDateJSToArcadeDate(e){return new Zi(ke.fromMillis(e.getTime(),{zone:gl.instance}))}static epochToArcadeDate(e,i="system"){const r=hl(i);return new Zi(ke.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Zi(e)}clone(){return new Zi(this._date)}changeTimeZone(e){const i=hl(e);return Zi.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=hl(i);return e.zone===gl.instance||r===gl.instance?Zi.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Zi(e.setZone(r))}static nowToArcadeDate(e){const i=hl(e);return new Zi(ke.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Zi(ke.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Zi.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===gl.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Zi(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Zi(this._date.toUTC())}toLocal(){return new Zi(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=ke.fromISO(e,{setZone:!0});return new Zi(i)}};function hl(t,e=!0){if(t instanceof gf)return t;switch(wS(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return gl.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const r=cr.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=xn.create(t);if(!i.isValid){if(e)throw new gke(nC.TimeZoneNotRecognized);return null}return i}function WV(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const qV="esri.core.sql.dateonly";let yke=class zn{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=qV}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===qV}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return zn.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new zn(this._year,this._month,this._day)}toDateTime(e){return ke.fromObject({day:this.day,month:this.month,year:this.year},{zone:hl(e)})}toDateTimeLuxon(e){return ke.fromObject({day:this.day,month:this.month,year:this.year},{zone:hl(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=WV(e)),!e)return"";const r=this.toDateTime("unknown");return Xu.dateTimeToArcadeDate(r).toFormat(e,{locale:wn(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Xu.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return zn.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return ke.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=ke.fromMillis(e,{zone:cr.utcInstance});return i.isValid?zn.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=ke.fromSeconds(e,{zone:cr.utcInstance});return i.isValid?zn.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new zn(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const s=new zn(e,i,r);return s.isValid===!1?null:s}static fromDateJS(e){return zn.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return zn.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=WV(i))&&r.push(i);else if(i===null||i===""){const s=ke.fromISO(e,{setZone:!0});return s.isValid?zn.fromParts(s.year,s.month,s.day):null}for(const s of r){const n=ke.fromFormat(e,i??s);if(n.isValid)return new zn(n.year,n.month,n.day)}return null}static fromNow(e="system"){const i=ke.fromJSDate(new Date).setZone(hl(e));return new zn(i.year,i.month,i.day)}};function YYe(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new it({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function JYe(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function M_(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function YV(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const JV="esri.core.sql.timeonly";let bke=class Qa{constructor(e,i,r,s){this._hour=e,this._minute=i,this._second=r,this._millisecond=s,this.declaredRootClass=JV}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===JV}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Qa.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Qa(this.hour,this.minute,this.second,this.millisecond)}isValid(){return M_(this.hour)&&M_(this.minute)&&M_(this.second)&&M_(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=YV(e))?ke.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:wn(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,s){const n=new Qa(e,i,r,s);return n.isValid()?n:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Qa(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),n=Math.floor(e%1e3);return new Qa(s,r,i,n)}static fromDateJS(e){return new Qa(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Qa(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=YV(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const s of r){const n=ke.fromFormat(e,s);if(n.isValid)return new Qa(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Qa.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return ke.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const vke=["geometry","scale","timeProperties"];function ZYe(t,e){if(e!=null)for(const i of vke)e.hasArcadeDependency(i)&&t.add(i);return t}function XYe(t,e){return SK.create(t,e,null,["$feature","$view"])}function wke(t,e,i){return SK.create(t,e,i,["$feature","$view","$config"])}let SK=class EK{static async create(e,i,r,s){const{arcade:n,Dictionary:o}=await nf();let a;try{a=n.parseScript(e)}catch(y){throw new W("arcade-bad-expression","Failed to parse arcade script",{script:e,error:y})}const l=n.scriptUsesGeometryEngine(a);l&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,a,null,!1,l);const u={vars:s.reduce((y,v)=>({...y,[v]:null}),{}),spatialReference:i,useAsync:!1},h=n.compileScript(a,u);let p=null;r!=null&&(p=new o(r),p.immutable=!0);const m=new o;return m.immutable=!1,m.setField("scale",0),new EK(e,n,a,h,i,m,p,o)}constructor(e,i,r,s,n,o,a,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=s,this._spatialReference=n,this._viewDict=o,this._configDict=a,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new CK,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){const r=i.$view?.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:n,currentEnd:o}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:n!=null?r!=null?Xu.epochToArcadeDate(n,r):Xu.unknownEpochToArcadeDate(n):void 0,currentEnd:o!=null?r!=null?Xu.epochToArcadeDate(o,r):Xu.unknownEpochToArcadeDate(o):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},CK=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const s=i??new rC(TK(e.attributes));this._boundTarget=e,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Nl(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===Nh}field(e,i=!0){const r=this._getField(e);if(r){const s=this._boundTarget.attributes[r.name];if(s==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return yke.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return bke.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Xu.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Xu.unknownEpochToArcadeDate(s):Xu.epochToArcadeDate(s,this.contextTimeZone??Oo);default:return s}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function TK(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let _ke=class MK{static async from(e,i,r){const s=e.dictionary_version?ZZ.parse(e.dictionary_version):null,n=new Set(e.itemsNames),o={};if(i)for(const p in i)o[p]=i[p];if(e.authoringInfo.configuration)for(const p of e.authoringInfo.configuration)o.hasOwnProperty(p.name)||(o[p.name]=p.value);const a=new Set(e.authoringInfo.symbol);for(const p of Object.keys(r))a.delete(p);a.size&&he.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const l=await wke(e.expression,null,o);if(!l)throw new W("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const u=!s||!s.greaterEqual(4,0);u&&he.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const h=new xke(r,u);return new MK(u,n,l,h)}constructor(e,i,r,s){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=s}get itemNames(){return this._itemNames}evaluate(e,i,r,s){try{return this._reader.bind(e,r,s),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(n){he.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new rC(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new rC(i)}},xke=class extends CK{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};var ZV,XV,KV,QV,e6,t6,i6,r6,s6,n6,IO,$O,o6,a6,l6,u6,c6,h6,d6,p6,f6,m6,g6,y6,b6,v6,w6,_6,x6,S6,E6,C6,T6,M6,k6,R6,I6,$6,A6,O6,P6,D6,L6,N6,F6,j6,z6,V6,U6,H6,B6,G6,W6,q6,Y6,oC,J6,Z6,X6,K6,Q6,eU,tU;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(ZV||(ZV={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(XV||(XV={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(KV||(KV={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(QV||(QV={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(e6||(e6={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(t6||(t6={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(i6||(i6={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(r6||(r6={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(s6||(s6={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(n6||(n6={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(IO||(IO={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}($O||($O={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(o6||(o6={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(a6||(a6={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(l6||(l6={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(u6||(u6={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(c6||(c6={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(h6||(h6={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(d6||(d6={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(p6||(p6={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(f6||(f6={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(m6||(m6={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(g6||(g6={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(y6||(y6={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(b6||(b6={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(v6||(v6={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(w6||(w6={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(_6||(_6={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(x6||(x6={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(S6||(S6={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(E6||(E6={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(C6||(C6={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(T6||(T6={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"}(M6||(M6={})),function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"}(k6||(k6={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(R6||(R6={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(I6||(I6={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}($6||($6={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(A6||(A6={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(O6||(O6={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(P6||(P6={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(D6||(D6={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(L6||(L6={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(N6||(N6={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(F6||(F6={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(j6||(j6={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(z6||(z6={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(V6||(V6={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(U6||(U6={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(H6||(H6={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(B6||(B6={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(G6||(G6={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(W6||(W6={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(q6||(q6={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(Y6||(Y6={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(oC||(oC={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(J6||(J6={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(Z6||(Z6={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(X6||(X6={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(K6||(K6={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(Q6||(Q6={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(eU||(eU={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(tU||(tU={}));const Ske={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},AO={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:oC.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:oC.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:IO.Loop,repeatdelay:0,easing:$O.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function Eke(t){return typeof t=="function"}function eJe(t,e,i,r){return Eke(t)?t(e,i,r):t}function tJe(t){return[t.r,t.g,t.b,t.a]}const Cke=` /-,
`;function iU(t){let e=t.length;for(;e--;)if(!Cke.includes(t.charAt(e)))return!1;return!0}function iJe(t,e){const i=[];let r=0,s=-1;do if(s=t.indexOf("[",r),s>=r){if(s>r){const n=t.slice(r,s);i.push([n,null,iU(n)])}if(r=s+1,s=t.indexOf("]",r),s>=r){if(s>r){const n=e[t.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<t.length){const n=t.slice(r);i.push([n,null,iU(n)])}return i}function rJe(t,e,i){let r="",s=null;for(const n of e){const[o,a,l]=n;if(o!=null&&o!=="")l?s=o:(s!=null&&(r+=s,s=null),r+=o);else{const u=t.readAttribute(a);u!=null&&u!==""&&(s!==null&&(r+=s,s=null),r+=u)}}return kK(r,i)}function sJe(t,e,i,r){let s="",n=null;for(const o of e){const[a,l,u]=o;if(a!=null&&a!=="")u?n=a:(n!=null&&(s+=n,n=null),s+=a);else{let h=l;i!=null&&(h=Ake(l,i));const p=t.attributes[h];p!=null&&p!==""&&(n!=null&&(s+=n,n=null),s+=p)}}return kK(s,r)}function kK(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function nJe(t,e,i,r,s,n,o=!0){const a=e/s,l=i/n,u=Math.ceil(a/2),h=Math.ceil(l/2);for(let p=0;p<n;p++)for(let m=0;m<s;m++){const y=4*(m+(o?n-p-1:p)*s);let v=0,w=0,S=0,E=0,I=0,D=0,O=0;const A=(p+.5)*l;for(let z=Math.floor(p*l);z<(p+1)*l;z++){const _=Math.abs(A-(z+.5))/h,Z=(m+.5)*a,Q=_*_;for(let ae=Math.floor(m*a);ae<(m+1)*a;ae++){let ge=Math.abs(Z-(ae+.5))/u;const ne=Math.sqrt(Q+ge*ge);ne>=-1&&ne<=1&&(v=2*ne*ne*ne-3*ne*ne+1,v>0&&(ge=4*(ae+z*e),O+=v*t[ge+3],S+=v,t[ge+3]<255&&(v=v*t[ge+3]/250),E+=v*t[ge],I+=v*t[ge+1],D+=v*t[ge+2],w+=v))}}r[y]=E/w,r[y+1]=I/w,r[y+2]=D/w,r[y+3]=O/S}}function Tke(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function oJe(t){return t.data?.symbol??null}function aJe(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function lJe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function uJe(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function Mke(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const cJe=(t,e=0)=>t==null||isNaN(t)?e:t,hJe=(t,e)=>t??e,dJe=(t,e)=>t??e,pJe=t=>t.tintColor?Tke(t.tintColor):[255,255,255,1],fJe=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function mJe(){return le(()=>import("./geometryEngineJSON-jmZ-ASIo.js").then(t=>t.g),__vite__mapDeps([13,14,15,16]))}function gJe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function yJe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function bJe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function vJe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function rU(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=rU(e);if(i!=null)return i}break;case"CIMTextSymbol":return rU(t.symbol);case"CIMSolidFill":return t.color}return null}function sU(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=sU(i);if(r!=null)return r}break}case"CIMTextSymbol":return sU(t.symbol);case"CIMSolidStroke":return t.color}}function wJe(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function nU(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=nU(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return nU(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function _Je(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function xJe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function SJe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const EJe=t=>t.includes("data:image/svg+xml");function CJe(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function YT(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function TJe(t,e,i,r,s,n,o=!0){const{infos:a}=n;let l=1,u=0,h=0,p=0,m=1;for(const{absoluteAnchorPoint:w,offsetX:S,offsetY:E,rotation:I,size:D,frameHeight:O,rotateClockWise:A,scaleSymbolsProportionally:z}of a)m=w?1:l,h=aU(S,E,u,m,h),p=oU(S,E,u,m,p),O&&(z||o)&&(l*=D/O),u=lU(I,A,u);const y=aU(r,s,u,m,h),v=oU(r,s,u,m,p);return{size:t*l,rotation:lU(e,i,u),offsetX:y,offsetY:v}}function kke(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>kke(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function Rke(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...Ske[e]];const i=AO[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function Ike(t){return t.split(" ").map(e=>Number(e))}function $ke(t){return typeof t=="string"?Ike(t):t}function MJe(t){return t?.dashTemplate&&(t.dashTemplate=$ke(t.dashTemplate)),t}function OO(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return OO(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return OO(i.symbol)}}return"Normal"}function kJe(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??AO.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&Mke(i.markerPlacement)){const r=i.size??AO.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function Ake(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function RJe(t){return t.map(e=>({...e,propertyName:YT(e.propertyName)}))}function IJe(t){const e={};for(const i in t){const r=t[i];e[YT(i)]=r}return e}function oU(t,e,i,r,s){const n=i*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*t+o*e)*r+s}return e*r+s}function aU(t,e,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*r+s:t*r+s}function lU(t,e,i){return e?i-t:i+t}function $Je(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=e[YT(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=Rke(e.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(n=a,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:a,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function AJe(t,e,i){if(e[YT(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function OJe(t,e){return Math.max(Math.min((t??e)/100,1),0)}const Oke={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let RK=class{constructor(e,i,r,s){this.url=e,this.fieldMap=r,this.dictionaryInfo=s,this._symbolPartCache=new rke(100);const n=async()=>_ke.from(await s,i,r);this._evaluator=n()}async getSymbolAsync(e,i,r=!0){const s=await this._evaluator,n=i?.fields??TK(e.attributes),o=s.createDictionaryFieldsIndex(n),a=s.evaluate(e,i?.scale??0,o,i?.spatialReference);if(a==null)return null;const l=qy(e.geometry),u=UV.parse(a,s.itemNames,l),h=l==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,u.partNames,u.overrides,h,i,r,o)}async getSymbolForControlString(e,i,r){const s=await this._evaluator,n=UV.parse(e,s.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=uU(await Promise.all(n.partNames.map(l=>this._getSymbolPart(l))),n.overrides,o);return new hs({data:a})}async _cimPartsToCIMSymbol(e,i,r,s,n,o,a){const l=i.map(p=>this._getSymbolPart(p,n));let u=await Promise.all(l);if(o&&this.fieldMap&&u.length>0){const{OverrideHelper:p}=await le(()=>import("./OverrideHelper-Cgh6yVa7.js").then(m=>m.O),__vite__mapDeps([206,113,8]));u=B(u);for(const m of u)p.applyDictionaryTextOverrides(m,e,this.fieldMap,a,OO(m))}const h=uU(u,r,s);return new hs({data:h})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,s=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:n}=await Tt(s,{responseType:"json",query:{f:"json"},...i});return n}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function uU(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const s of t){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=Oke),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var PO;let na=PO=class extends ab(Xn){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new RK(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r?.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new PO({config:B(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:B(this.fieldMap),url:B(this.url),visualVariables:B(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await ws(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Tt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};c([d({type:RK})],na.prototype,"_loader",null),c([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],na.prototype,"config",void 0),c([d({type:Object,json:{write:!0}})],na.prototype,"fieldMap",void 0),c([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],na.prototype,"scaleExpression",void 0),c([me("scaleExpression")],na.prototype,"writeData",null),c([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],na.prototype,"scaleExpressionTitle",void 0),c([d({type:String,json:{write:!0}})],na.prototype,"url",void 0),c([me("visualVariables")],na.prototype,"writeVisualVariables",null),na=PO=c([R("esri.renderers.DictionaryRenderer")],na);var DO;let Su=DO=class extends X{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(he.getLogger(this).error(".field: field must be a string value"),null):Jw(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new DO({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:He,json:{type:[Number],write:!0}})],Su.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"field",void 0),c([It("field")],Su.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Su.prototype,"label",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"valueExpressionTitle",void 0),Su=DO=c([R("esri.renderers.support.AttributeColorInfo")],Su);const IK=Su;var LO;let _S=LO=class extends X{constructor(){super(...arguments),this.unit=null}clone(){return new LO({unit:this.unit})}};c([d({type:String,json:{write:!0}})],_S.prototype,"unit",void 0),_S=LO=c([R("esri.renderers.support.DotDensityLegendOptions")],_S);const Pke=_S;var NO;let nn=NO=class extends ab(Xn){constructor(t){super(t),this.attributes=null,this.backgroundColor=new He([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ir,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Wn({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new NO({attributes:B(this.attributes),backgroundColor:B(this.backgroundColor),dotBlendingEnabled:B(this.dotBlendingEnabled),dotShape:B(this.dotShape),dotSize:B(this.dotSize),dotValue:B(this.dotValue),legendOptions:B(this.legendOptions),outline:B(this.outline),referenceScale:B(this.referenceScale),seed:B(this.seed),visualVariables:B(this.visualVariables),authoringInfo:B(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await ws(t,e,i.valueExpression),i.field&&t.add(i.field)}};c([d({type:[IK],json:{write:!0}})],nn.prototype,"attributes",void 0),c([d({type:He,json:{write:!0}})],nn.prototype,"backgroundColor",void 0),c([d({type:Boolean,json:{write:!0}})],nn.prototype,"dotBlendingEnabled",void 0),c([d({type:String,json:{write:!1}})],nn.prototype,"dotShape",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"dotSize",void 0),c([d({type:Pke,json:{write:!0}})],nn.prototype,"legendOptions",void 0),c([d({type:ir,json:{default:null,write:!0}})],nn.prototype,"outline",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"dotValue",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"referenceScale",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"seed",void 0),c([Re({dotDensity:"dot-density"})],nn.prototype,"type",void 0),nn=NO=c([R("esri.renderers.DotDensityRenderer")],nn);var FO;let gh=FO=class extends X{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new FO({color:this.color&&this.color.clone(),ratio:this.ratio})}};c([d({type:He,json:{type:[ht],default:null,write:{isRequired:!0}}})],gh.prototype,"color",void 0),c([d({type:Number,json:{write:{isRequired:!0}}})],gh.prototype,"ratio",void 0),gh=FO=c([R("esri.renderers.support.HeatmapColorStop")],gh);let Vm=class extends Fe.ClonableMixin(X){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};c([d({type:String,json:{write:!0}})],Vm.prototype,"minLabel",void 0),c([d({type:String,json:{write:!0}})],Vm.prototype,"maxLabel",void 0),c([d({type:String,json:{write:!0}})],Vm.prototype,"title",void 0),Vm=c([R("esri.renderers.support.HeatmapLegendOptions")],Vm);function Dke(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Lke(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Nke(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}function Fke(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function $K(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function AK(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function OK(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function jke(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function zke(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Vke(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Uke(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function Hke(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Bke(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function Gke(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function PK(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function DK(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return i*i+r*r+s*s+n*n}function LK(t){const e=t[0],i=t[1],r=t[2],s=t[3];return Math.sqrt(e*e+i*i+r*r+s*s)}function NK(t){const e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s}function Wke(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function qke(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Yke(t,e){const i=e[0],r=e[1],s=e[2],n=e[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=s*o,t[3]=n*o),t}function Jke(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function FK(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function Zke(t,e=1){const i=wT;let r,s,n,o,a,l;do r=2*i()-1,s=2*i()-1,a=r*r+s*s;while(a>=1);do n=2*i()-1,o=2*i()-1,l=n*n+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*s,t[2]=e*n*u,t[3]=e*o*u,t}function Xke(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,t}function Kke(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],u=i[3],h=u*r+a*n-l*s,p=u*s+l*r-o*n,m=u*n+o*s-a*r,y=-o*r-a*s-l*n;return t[0]=h*u+y*-o+p*-l-m*-a,t[1]=p*u+y*-a+m*-o-h*-l,t[2]=m*u+y*-l+h*-a-p*-o,t[3]=e[3],t}function Qke(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function eRe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function tRe(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=e[0],a=e[1],l=e[2],u=e[3],h=Hs();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=h*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))}const iRe=$K,rRe=AK,sRe=OK,nRe=PK,oRe=DK,aRe=LK,lRe=NK;Object.freeze(Object.defineProperty({__proto__:null,add:Fke,ceil:jke,copy:Dke,copyVec3:Lke,dist:nRe,distance:PK,div:sRe,divide:OK,dot:Jke,equals:tRe,exactEquals:eRe,floor:zke,inverse:qke,len:aRe,length:LK,lerp:FK,max:Uke,min:Vke,mul:rRe,multiply:AK,negate:Wke,normalize:Yke,random:Zke,round:Hke,scale:Bke,scaleAndAdd:Gke,set:Nke,sqrDist:oRe,sqrLen:lRe,squaredDistance:DK,squaredLength:NK,str:Qke,sub:iRe,subtract:$K,transformMat4:Xke,transformQuat:Kke},Symbol.toStringTag,{value:"Module"}));function JT(){return[0,0,0,0]}function uRe(t){return[t[0],t[1],t[2],t[3]]}function lb(t,e,i,r){return[t,e,i,r]}function cRe(t,e,i,r){return[t,e,i,r]}function hRe(t,e=JT()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function jK(){return JT()}function zK(){return lb(1,1,1,1)}function VK(){return lb(1,0,0,0)}function UK(){return lb(0,1,0,0)}function HK(){return lb(0,0,1,0)}function BK(){return lb(0,0,0,1)}const dRe=jK(),pRe=zK(),fRe=VK(),mRe=UK(),gRe=HK(),yRe=BK();Object.freeze(Object.defineProperty({__proto__:null,ONES:pRe,UNIT_W:yRe,UNIT_X:fRe,UNIT_Y:mRe,UNIT_Z:gRe,ZEROS:dRe,clone:uRe,create:JT,freeze:cRe,fromArray:hRe,fromValues:lb,ones:zK,unitW:BK,unitX:VK,unitY:UK,unitZ:HK,zeros:jK},Symbol.toStringTag,{value:"Module"}));const o3=2.4;function bRe(t){return Po(t*o3)}function vRe(t){return Ufe(t)/o3}function wRe(t,e,i,r){let{color:s,ratio:n}=e,{color:o,ratio:a}=i;a===n&&(a===1?n-=1e-6:a+=1e-6);const l=Ao((r-n)/(a-n),0,1);FK(t,s.toArray(),o.toArray(),l)}function LJe(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],s=t[0],n=1;const o=JT();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>s.ratio&&n<t.length;)r=s,s=t[n++];wRe(o,r,s,l),i.set(o,4*a)}return i}function NJe(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function FJe(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var jO;function cU(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=t;return a}}return t}let yr=jO=class extends Xn{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new gh({ratio:0,color:new He("rgba(255, 140, 0, 0)")}),new gh({ratio:.75,color:new He("rgba(255, 140, 0, 1)")}),new gh({ratio:.9,color:new He("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return cU(t)}get blurRadius(){return vRe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",bRe(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(o3**2*this.blurRadius**4)}read(t,e){t=cU(t),super.read(t,e)}getSymbol(){return new vr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Bs(t,e,i),r&&typeof r=="string"&&await ws(t,e,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new jO({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:B(this.colorStops),field:this.field,legendOptions:B(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:fi,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"authoringInfo",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],yr.prototype,"blurRadius",null),c([d({type:[gh],json:{write:{isRequired:!0}}})],yr.prototype,"colorStops",void 0),c([d({type:String,json:{write:!0}})],yr.prototype,"field",void 0),c([d({type:Vm,json:{write:!0}})],yr.prototype,"legendOptions",void 0),c([d({type:Number,json:{write:!0}})],yr.prototype,"maxDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],yr.prototype,"maxPixelIntensity",null),c([d({type:Number,json:{write:!0}})],yr.prototype,"minDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],yr.prototype,"minPixelIntensity",null),c([d({type:Number,cast:xt,json:{write:!0}})],yr.prototype,"radius",void 0),c([d({type:Number,range:{min:0},json:{default:0,write:!0}})],yr.prototype,"referenceScale",void 0),c([Re({heatmap:"heatmap"})],yr.prototype,"type",void 0),c([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],yr.prototype,"valueExpression",void 0),c([d({type:String})],yr.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],yr.prototype,"_pixelIntensityToDensity",null),yr=jO=c([R("esri.renderers.HeatmapRenderer")],yr);let dp=class extends Fe.ClonableMixin(X){constructor(){super(...arguments),this.color=new He([0,0,0,0]),this.label=null,this.threshold=0}};c([d({type:He,json:{write:!0}})],dp.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],dp.prototype,"label",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],dp.prototype,"threshold",void 0),dp=c([R("esri.renderers.support.OthersCategory")],dp);const _Re={base:os,key:"type",typeMap:{size:kt,opacity:Gu}};let on=class extends ab(Fe.ClonableMixin(Xn)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new He([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new dp,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new vr({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Ah)}getAttributeHash(){return this.visualVariables?.reduce((e,i)=>e+i.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await ws(e,i,r.valueExpression),r.field&&e.add(r.field)}};c([d({type:[IK],json:{write:!0}})],on.prototype,"attributes",void 0),c([d(ZL)],on.prototype,"backgroundFillSymbol",void 0),c([d({type:He,json:{write:!0}})],on.prototype,"defaultColor",void 0),c([d({type:String,json:{write:!0}})],on.prototype,"defaultLabel",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],on.prototype,"holePercentage",void 0),c([d({type:dp,json:{write:!0}})],on.prototype,"othersCategory",void 0),c([d({type:XL,json:{write:!0}})],on.prototype,"legendOptions",void 0),c([d({type:ir,json:{default:null,write:!0}})],on.prototype,"outline",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],on.prototype,"size",void 0),c([Re({pieChart:"pie-chart"})],on.prototype,"type",void 0),c([d({types:[_Re]})],on.prototype,"visualVariables",void 0),on=c([R("esri.renderers.PieChartRenderer")],on);const g1={key:"type",base:Xn,typeMap:{heatmap:yr,simple:js,"unique-value":ei,"class-breaks":Ki,"dot-density":nn,dictionary:na,"pie-chart":on},errorContext:"renderer"},xRe={key:"type",base:Xn,typeMap:{simple:js,"unique-value":ei,"class-breaks":Ki,heatmap:yr},errorContext:"renderer",validate:SRe};function SRe(t){switch(t.type){case"simple":return ERe(t);case"unique-value":return CRe(t);case"class-breaks":return TRe(t);case"heatmap":return t}}function ERe(t){if(t.symbol)return t;he.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function CRe(t){const e=t.uniqueValueInfos,i=e?.filter(({symbol:r,label:s},n)=>(r||he.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.uniqueValueInfos=i),t}function TRe(t){const e=t.classBreakInfos,i=e?.filter(({symbol:r,label:s},n)=>(r||he.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.classBreakInfos=i),t}function VJe(t,e){return Iw(t,null,e)}const MRe=Uy({types:g1});function Iw(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i?.messages&&i.messages.push(new to("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):MRe(t,e,i):null}var zO;let Wr=zO=class extends Ch{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=xt("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Bi(i,r,e)}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?Iw(r,e,i)??void 0:QL(e,i)}clone(){return new zO({fields:B(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:B(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:B(this.popupTemplate),renderer:B(this.renderer),binType:B(this.binType),size:this.size})}};c([Re({binning:"binning"})],Wr.prototype,"type",void 0),c([Re({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],Wr.prototype,"binType",void 0),c([d({type:Number,json:{write:!0}})],Wr.prototype,"fixedBinLevel",void 0),c([d({type:[ai],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Wr.prototype,"labelingInfo",void 0),c([d(UT)],Wr.prototype,"labelsVisible",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Wr.prototype,"maxScale",void 0),c([d(VT)],Wr.prototype,"popupEnabled",void 0),c([d({type:ib,json:{name:"popupInfo",write:!0}})],Wr.prototype,"popupTemplate",void 0),c([d({cast:t=>t==="auto"?t:Ns(xt(t))})],Wr.prototype,"size",void 0),c([d({type:[us],json:{write:!0}})],Wr.prototype,"fields",void 0),c([me("fields")],Wr.prototype,"writeFields",null),c([d({types:g1,json:{write:{target:"drawingInfo.renderer"}}})],Wr.prototype,"renderer",void 0),c([de("renderer",["drawingInfo.renderer"])],Wr.prototype,"readRenderer",null),Wr=zO=c([R("esri.layers.support.FeatureReductionBinning")],Wr);var VO;function hU(t){return t.type==="simple"&&!t.visualVariables?.length}let Qi=VO=class extends X{constructor(t){super(t),this.type="cluster",this.clusterRadius=xt("80px"),this.clusterMinSize=xt("12px"),this.clusterMaxSize=xt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?hU(r)?null:Iw(r,e,i)??void 0:QL(e,i)}readSymbol(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&hU(r)?Iw(r,e,i)?.symbol:null}writeSymbol(t,e,i,r){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new js({symbol:t});e.drawingInfo={renderer:n.write({},r)}}}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Bi(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>us.fromJSON(r))}clone(){return new VO({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:B(this.labelingInfo),labelsVisible:this.labelsVisible,fields:B(this.fields),maxScale:this.maxScale,renderer:B(this.renderer),symbol:B(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:B(this.popupTemplate)})}};c([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Qi.prototype,"type",void 0),c([d({cast:t=>t==="auto"?t:Ns(xt(t)),json:{write:!0}})],Qi.prototype,"clusterRadius",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Qi.prototype,"clusterMinSize",void 0),c([d({type:Number,cast:xt,json:{write:!0}})],Qi.prototype,"clusterMaxSize",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Qi.prototype,"maxScale",void 0),c([d(VT)],Qi.prototype,"popupEnabled",void 0),c([d({type:ib,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Qi.prototype,"popupTemplate",void 0),c([d({types:g1,json:{write:{target:"drawingInfo.renderer"}}})],Qi.prototype,"renderer",void 0),c([de("renderer",["drawingInfo.renderer"])],Qi.prototype,"readRenderer",null),c([d({types:ube})],Qi.prototype,"symbol",void 0),c([de("symbol",["drawingInfo.renderer"])],Qi.prototype,"readSymbol",null),c([me("symbol")],Qi.prototype,"writeSymbol",null),c([d({type:[ai],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Qi.prototype,"labelingInfo",void 0),c([d(UT)],Qi.prototype,"labelsVisible",void 0),c([d({type:[us],json:{write:!0}})],Qi.prototype,"fields",void 0),c([me("fields")],Qi.prototype,"writeFields",null),c([de("fields")],Qi.prototype,"readFields",null),Qi=VO=c([R("esri.layers.support.FeatureReductionCluster")],Qi);var UO;let V0=UO=class extends Ch{constructor(t){super(t),this.type="selection"}clone(){return new UO}};c([d({type:["selection"]})],V0.prototype,"type",void 0),V0=UO=c([R("esri.layers.support.FeatureReductionSelection")],V0);const dU={key:"type",base:Ch,typeMap:{cluster:Qi,binning:Wr}},kRe={types:{key:"type",base:Ch,typeMap:{selection:V0,cluster:Qi,binning:Wr}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:dU},"portal-item":{types:dU},"web-scene":{types:{key:"type",base:Ch,typeMap:{selection:V0}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Kt}}}}},RRe=()=>he.getLogger("esri.views.2d.layers.support.clusterUtils");J.add("esri-cluster-arcade-enabled",!0);const IRe=J("esri-cluster-arcade-enabled"),$Re=new Set(["simple-line","simple-fill","picture-fill"]);function pU(t,e){let i=e.clone();if(!ARe(i))return i;if(e.symbols.some(r=>$Re.has(r.type))&&(i=new js({symbol:new vr})),i.authoringInfo||(i.authoringInfo=new fi),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");r.forEach(s=>{s.type==="rotation"?s.field?s.field=_d(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=Yb(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=_d(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=_d(t,s.field,"avg","number"):s.valueExpression&&(s.field=Yb(t,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=_d(t,r.field,"sum","number"):r.valueExpression&&(r.field=Yb(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=_d(t,i.field,"mode","string"):i.valueExpression&&(i.field=Yb(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=_d(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=_d(t,i.field,"avg","number"):i.valueExpression&&(i.field=Yb(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const ARe=t=>{const e=i=>RRe().error(new W("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!IRe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function ORe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,s="field",n=e.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+sL(n)}}}function Yb(t,e,i,r){const s=sL(e),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(o=>o.name===n)||t.push(new us({name:n,isAutoGenerated:!0,onStatisticExpression:new oh({expression:e,returnType:r}),statisticType:i})),n}function _d(t,e,i,r,s){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const n=ORe(i,e,s);return t.some(o=>o.name===n)||(i==="avg_norm"?t.push(new us({name:n,isAutoGenerated:!0,onStatisticExpression:new oh({expression:`$feature.${e} / $feature.${s}`,returnType:r}),statisticType:"avg"})):t.push(new us({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),n}const PRe=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(Ue(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},Al))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,s){const n=i.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some(o=>o.type==="size")||n.visualVariables.push(new kt({field:"cluster_count",stops:[new da({value:1}),new da({useMinValue:!0,size:r}),new da({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(i){if(i?.type!=="cluster")return i;const r=i.clone(),s=[new us({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(r.fields??[]).filter(p=>!p.isAutoGenerated),o=i.renderer&&!i.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:a,clusterMaxSize:l}=r;if(o){r.fields=[...s,...n];const p=this._withClusterVariable(r.renderer,a,l);return r.effectiveFeatureRenderer=p,r.effectiveClusterRenderer=p,r}if(i.symbol){if(r.fields=[...s,...n],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const p=pU(s,this.renderer),m=this._withClusterVariable(p,a,l),y="visualVariables"in m&&m.visualVariables?m.visualVariables:[],v=new js({symbol:i.symbol,visualVariables:y});return r.fields=[...s,...n],r.effectiveFeatureRenderer=m,r.effectiveClusterRenderer=v,r}if(!this.renderer)return i;const u=pU(s,this.renderer);r.fields=[...s,...n],r.renderer=u;const h=this._withClusterVariable(u,a,l);return r.effectiveFeatureRenderer=h,r.effectiveClusterRenderer=h,r}};return c([d(kRe)],e.prototype,"featureReduction",null),e=c([R("esri.layers.mixins.FeatureReductionLayer")],e),e},fU={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},mU={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},gU={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},DRe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":fU,"web-map/basemap":mU,"web-map/tables":gU,"link-chart/operational-layers":{...fU,LinkChartLayer:!0},"link-chart/basemap":mU,"link-chart/tables":gU,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},LRe=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,s){return s?.portalItem?.type==="Group Layer"?void 0:i}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&One(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s){i&&(r[s]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?Vt.fromArray(i):null}writeVisibilityTimeExtent(i,r,s,n){i&&n.layerContainerType!=="tables"&&(i.isEmpty?n?.messages&&n.messages.push(new W("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[s]=i.toArray())}read(i,r){r&&(r.layer=this),m9(this,i,s=>super.read(i,s),r)}write(i,r){if(!this.persistenceEnabled&&!r?.ignorePersistenceEnabled)return null;if(r?.origin){const o=`${r.origin}/${r.layerContainerType||"operational-layers"}`;let l=!!DRe[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(l=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(l=!1),!l)return r.messages?.push(new W("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),n=!!r&&!!r.messages&&!!r.messages.filter(o=>o instanceof W&&o.name==="web-document-write:property-required").length;return Gy(s?.url)?(r?.messages?.push(new W("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return c([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),c([de("id",["id"])],e.prototype,"readId",null),c([d(LX)],e.prototype,"listMode",void 0),c([me("listMode")],e.prototype,"writeListMode",null),c([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Kt,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),c([me("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),c([d(QA)],e.prototype,"opacity",void 0),c([d({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),c([me("title"),me(["web-scene"],"title")],e.prototype,"writeTitle",null),c([d({type:Vt,json:{origins:{"web-scene":{write:{layerContainerTypes:Kt}}}}})],e.prototype,"visibilityTimeExtent",void 0),c([de("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),c([me(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ht,Vy]]}})],e.prototype,"writeVisibilityTimeExtent",null),c([d({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Kt}}})],e.prototype,"visible",void 0),e=c([R("esri.layers.mixins.OperationalLayer")],e),e};var HO;const k_=new Xe({asc:"ascending",desc:"descending"});var ly;let pp=(ly=class extends X{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new HO({field:this.field,valueExpression:this.valueExpression,order:this.order})}},HO=ly,ly);c([d({type:String,json:{write:!0}})],pp.prototype,"field",void 0),c([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],pp.prototype,"valueExpression",void 0),c([d({type:k_.apiValues,json:{type:k_.jsonValues,read:k_.read,write:k_.write}})],pp.prototype,"order",void 0),pp=HO=c([R("esri.layers.support.OrderByInfo")],pp);function NRe(t,e,i){if(!t)return null;const r=t.find(n=>!!n.field);if(!r)return null;const s=new pp;return s.read(r,i),[s]}function FRe(t,e,i,r){const s=t.find(n=>!!n.field);s&&Bi(i,[s.toJSON()],e)}const jRe={type:[pp],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:NRe},write:{writer:FRe}}},zRe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return c([d(jRe)],e.prototype,"orderBy",void 0),e=c([R("esri.layers.mixins.OrderedLayer")],e),e},VRe=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ci(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new We({id:r.itemId,portal:s?.portal})}writePortalItem(i,r){i?.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem?.id)try{const{load:s}=await le(()=>import("./layersLoader-BBKgiBEc.js"),__vite__mapDeps([284,179,178,180,1,2]));return hi(r),await s({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(s){throw Zr(s)||he.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(fl(r),!0)))}async setUserPrivileges(i,r){if(!Ct.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){fl(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const n=!mt?.findCredential(this.url),o=i===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,n);let a,l;if(o)a=s.portal.url;else try{a=await iL(this.url,r)}catch(m){fl(m)}if(!a||!Yne(a,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const m=r!=null?r.signal:null;l=await mt?.getCredential(`${a}/sharing`,{prompt:!1,signal:m})}catch(m){fl(m)}const u=!0,h=!1,p=!1;if(!l)return{features:{edit:u,fullEdit:h},content:{updateItem:p}};try{if(o?await s.reload():(s=new We({id:i,portal:{url:a}}),await s.load(r)),s.portal.user)return this._getUserPrivileges(s,n)}catch(m){fl(m)}return{features:{edit:u,fullEdit:h},content:{updateItem:p}}}_getUserPrivileges(i,r){const s=TEe(i);return r&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){fl(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?mt?.findCredential(this.url):null;if(!r)return!0;const s=R_.credential===r?R_.user:await this._fetchEditingUser(i);return R_.credential=r,R_.user=s,s?.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const r=this.portalItem?.portal?.user;if(r)return r;const s=mt?.findServerInfo(this.url??"");if(!s?.owningSystemUrl)return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=fe.getDefault();if(o&&o.loaded&&Sa(o.restUrl)===Sa(n))return o.user;const a=`${n}/community/self`,l=i!=null?i.signal:null,u=await pT(Tt(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?Bt.fromJSON(u.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r?.portal,n=this.portalItem?.id&&(this.portalItem.portal||fe.getDefault());return s&&n&&!M9(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new W("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return c([d({type:We})],e.prototype,"portalItem",null),c([de("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),c([me("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),c([d({clonable:!1})],e.prototype,"resourceReferences",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=c([R("esri.layers.mixins.PortalLayer")],e),e},R_={credential:null,user:null};let t0=class extends Oe{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};c([d()],t0.prototype,"updating",void 0),c([d()],t0.prototype,"status",void 0),t0=c([R("esri.layers.support.PublishingInfo")],t0);const URe=Symbol(),HRe=t=>{var r;var e;let i=(r=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const n=new t0;return this._checkPublishingStatus(n),n}_checkPublishingStatus(s){let a=0;const l=async h=>{let p;s.updating=!0;try{p=await this.fetchPublishingStatus()}catch{p="unavailable"}p!=="published"&&p!=="unavailable"||(s.status==="publishing"&&this.refresh(),u.remove()),s.status=p,s.updating=!1,u.removed||(a=setTimeout(l,h,h+125))},u={removed:!1,remove(){this.removed=!0,clearTimeout(a)}};this.when().catch(()=>u.remove()),l(250),this.addHandles(u)}},e=URe,r);return c([d({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=c([R("esri.layers.mixins.PublishableLayer")],i),i},yh=new _e,U0=new WeakMap;function BRe(t){WRe(t)&&yh.push(new WeakRef(t))}function GRe(t){const e=yh.find(i=>i.deref()===t);e&&yh.remove(e)}function WRe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function GK(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:GK(e,t%e):0}let ik=0,I_=0;function qRe(){const t=Date.now();let e=!1;for(const i of yh){const r=i.deref();r?r.refreshInterval&&t-(U0.get(r)??0)+5>=6e4*r.refreshInterval&&(U0.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=yh.length-1;i>=0;i--)yh.at(i).deref()||yh.removeAt(i)}L8(()=>{const t=Date.now();let e=0;for(const i of yh){const r=i.deref();r&&(e=GK(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?U0.get(r)||U0.set(r,t):U0.delete(r))}if(e!==I_){if(I_=e,clearInterval(ik),I_===0)return void(ik=0);ik=setInterval(qRe,I_)}},Al);const yU=.1,YRe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=qC(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||BRe(this)},()=>{})}destroy(){GRe(this)}castRefreshInterval(i){return i>=yU?i:i<=0?0:yU}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){ow(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{he.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Kt}}}}})],e.prototype,"refreshInterval",void 0),c([It("refreshInterval")],e.prototype,"castRefreshInterval",null),c([d({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),c([d({readOnly:!0})],e.prototype,"refreshParameters",null),e=c([R("esri.layers.mixins.RefreshableLayer")],e),e},WK=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&JRe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),c([d({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=c([R("esri.layers.mixins.ScaleRangeLayer")],e),e};function JRe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function bU(t,e){return wa.fromJSON({value:t,unit:e})}let Ir=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Vt.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){e?.start!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?bU(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?bU(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=e?.toJSON().value??null,i.timeIntervalUnits=e?.toJSON().unit??null}};c([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ir.prototype,"cumulative",void 0),c([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ir.prototype,"endField",void 0),c([d({type:Vt,json:{write:{enabled:!0,allowNull:!0}}})],Ir.prototype,"fullTimeExtent",void 0),c([de("fullTimeExtent",["timeExtent"])],Ir.prototype,"readFullTimeExtent",null),c([me("fullTimeExtent")],Ir.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,json:{write:!0}})],Ir.prototype,"hasLiveData",void 0),c([d({type:wa,json:{write:{enabled:!0,allowNull:!0}}})],Ir.prototype,"interval",void 0),c([de("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ir.prototype,"readInterval",null),c([me("interval")],Ir.prototype,"writeInterval",null),c([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ir.prototype,"startField",void 0),c([d(fE("timeReference",!0))],Ir.prototype,"timeZone",void 0),c([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ir.prototype,"trackIdField",void 0),c([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ir.prototype,"useTime",void 0),c([d({type:[Date],json:{read:!1}})],Ir.prototype,"stops",void 0),Ir=c([R("esri.layers.support.TimeInfo")],Ir);const ZRe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Kt}}},XRe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=zL.fromJSON(s.timeOffsetUnits);return n&&o?new wa({value:n,unit:o}):null}set timeInfo(i){Gq(i,this.fieldsIndex),this._set("timeInfo",i)}};return c([d({type:Vt,json:{write:!1}})],e.prototype,"timeExtent",void 0),c([d({type:wa})],e.prototype,"timeOffset",void 0),c([de("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),c([d({value:null,type:Ir,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),c([d(ZRe)],e.prototype,"useViewTime",void 0),e=c([R("esri.layers.mixins.TemporalLayer")],e),e};let To=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};c([d({type:[ai],json:{write:!0}})],To.prototype,"labelingInfo",void 0),c([d(UT)],To.prototype,"labelsVisible",void 0),c([d({types:g1,json:{write:!0}})],To.prototype,"renderer",void 0),c([d({type:Boolean,json:{write:!0}})],To.prototype,"visible",void 0),To=c([R("esri.layers.support.TrackPartInfo")],To);let an=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new To({renderer:new js({symbol:QE.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new To({renderer:new js({symbol:QE.clone()})}),this.trackLines=new To({renderer:new js({symbol:YL.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const s=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Bi(r,s,i)}};c([d({type:Boolean,json:{write:!0}})],an.prototype,"enabled",void 0),c([d({type:[us],json:{write:!0}})],an.prototype,"fields",void 0),c([me("fields")],an.prototype,"writeFields",null),c([d({type:To,json:{write:!0}})],an.prototype,"latestObservations",void 0),c([d({type:wa,json:{write:!0}})],an.prototype,"maxDisplayDuration",void 0),c([d({type:Number,json:{write:!0}})],an.prototype,"maxDisplayObservationsPerTrack",void 0),c([d(VT)],an.prototype,"popupEnabled",void 0),c([d({type:ib,json:{name:"popupInfo",write:!0}})],an.prototype,"popupTemplate",void 0),c([d({type:To,json:{write:!0}})],an.prototype,"previousObservations",void 0),c([d({type:To,json:{write:!0}})],an.prototype,"trackLines",void 0),c([d({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],an.prototype,"timeField",void 0),an=c([R("esri.layers.support.TrackInfo")],an);const KRe=t=>{let e=class extends t{constructor(){super(...arguments),this.trackInfo=null}};return c([d({type:an})],e.prototype,"trackInfo",void 0),e=c([R("esri.layers.mixins.TrackableLayer")],e),e},vU=new Xe({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let dl=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([d({json:{write:!0}})],dl.prototype,"name",void 0),c([d({json:{write:!0}})],dl.prototype,"description",void 0),c([d({json:{read:vU.read,write:vU.write}})],dl.prototype,"drawingTool",void 0),c([d({json:{write:!0}})],dl.prototype,"prototype",void 0),c([d({json:{write:!0}})],dl.prototype,"thumbnail",void 0),dl=c([R("esri.layers.support.FeatureTemplate")],dl);let ll=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=TT(e[r]);return i}writeDomains(e,i){const r={};for(const s of Object.keys(e))e[s]&&(r[s]=e[s]?.toJSON());i.domains=r}};c([d({json:{write:!0}})],ll.prototype,"id",void 0),c([d({json:{write:!0}})],ll.prototype,"name",void 0),c([d({json:{write:!0}})],ll.prototype,"domains",void 0),c([de("domains")],ll.prototype,"readDomains",null),c([me("domains")],ll.prototype,"writeDomains",null),c([d({type:[dl],json:{write:!0}})],ll.prototype,"templates",void 0),ll=c([R("esri.layers.support.FeatureType")],ll);function QRe(){return{fields:{type:[Ar],value:null,set:function(t){if(t&&J("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");he.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return rC.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||he.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return xT(this.fieldsIndex,t)}}}}const rk=()=>he.getLogger("esri.layers.support.labelingInfo"),eIe=/\[([^[\]]+)\]/gi;function wU(t,e,i){return t?t.map(r=>{const s=new ai;if(s.read(r,i),s.labelExpression){const n=e.fields||e.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(eIe,(o,a)=>`[${tIe(a,n)}]`)}return s}):null}function tIe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const s=e[r].name;if(s.toLowerCase()===i)return s}return t}const _U=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],iIe={esriGeometryPoint:_U,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:_U,esriGeometryEnvelope:null};function YJe(t,e){const i=[];for(const r of t){const s=r.labelPlacement,n=iIe[e];if(!r.symbol)return rk().warn("No ILabelClass symbol specified."),[];if(!n)return rk().error(new W("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(n.includes(s))i.push(r);else{const o=n[0];s&&rk().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const rIe="relationships/",sIe="expression/";let ks=class extends Oe{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||fT(()=>nf()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??le(()=>import("./featureUtils-Bc6wT02j.js"),__vite__mapDeps([163,9,1,2])).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new _e;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const i of this.expressionsUsedInTitle??[])e.push({name:i.name,invalid:!0});return e}for(const i of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:i.name,invalid:!0});break}e.push({name:i.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:i.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(i=>e.includes(`{expression/${i.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const s=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const n of s){const o=n.split("."),a=this.fieldsIndex.get(o.at(-1)??"");a&&e.add(a.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const r of i){const s=this.fieldsIndex.get(r);s&&e.add(s.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const s=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(s)??""}async getTitles(e,i,r){const s=new Map,n=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:a,workingTitle:l}=this,u=l&&a;i.forEach(h=>{const p=h.getObjectId()??h.attributes[e.objectIdField],m=u?o({attributes:h.attributes,expressionAttributes:null,fieldInfoMap:a,globalAttributes:this._createFormattedAttributes(e,h,n).global,layer:e,text:l}):"";s.set(p,m)})}catch{}return s}async _checkAndReQueryGraphics(e,i){const r=i.map(s=>s.getObjectId()??s.attributes[e.objectIdField]).filter(Ah);if(r.length!==i.length)return i;if(i.some(s=>!aye(s,this.requiredFields))){const s=e.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=r;const n=await e.queryFeatures(s);if(n?.features.length===i.length)return n.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const s=this.fieldsIndex.get(r.fieldName),n=s?.name??r.fieldName;r.fieldName=n,i.set(n.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){const s=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const a=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const l of this.calculatedExpressions)try{n[`expression/${l.name}`]=l.func({vars:{$feature:a}})}catch{}}const o={...i.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return uL(e).filter(i=>!(i.indexOf(rIe)===0||i.indexOf(sIe)===0))}};c([d({readOnly:!0})],ks.prototype,"_arcadeTask",null),c([d()],ks.prototype,"_featureUtils",void 0),c([d({readOnly:!0})],ks.prototype,"featureUtilsPromise",null),c([d({readOnly:!0})],ks.prototype,"calculatedExpressions",null),c([d()],ks.prototype,"displayField",void 0),c([d()],ks.prototype,"effectivePopupTemplate",void 0),c([d()],ks.prototype,"expressionsUsedInTitle",null),c([d()],ks.prototype,"fieldsIndex",void 0),c([d()],ks.prototype,"fieldInfoMap",null),c([d()],ks.prototype,"fields",void 0),c([d()],ks.prototype,"objectIdField",void 0),c([d()],ks.prototype,"requiredFields",null),ks=c([R("esri.layers.support.TitleCreator")],ks);const Um=[];function nIe(t,e){if(KS(t.url??""))return!0;const{wkid:i}=e;for(const r of Um){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Um.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Um.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Um.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Um.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Um.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function oIe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await pT(r.populateFromStyle());if(hi(i),s.ok===!1){const n=s.error;e?.messages&&e.messages.push(new to("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e?.origin)}}}function aIe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=hIe({editFieldsInfo:e,fields:i,objectIdField:r},n);if(!o.length)return null;const a=fIe({titleBase:s,fields:i,displayField:t}),l=pIe();return new ib({title:a,content:l,fieldInfos:o})}const lIe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):zge(t,e);function uIe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(cIe),t}function cIe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:xU(t)?-1:xU(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function hIe(t,e){const i=e?.visibleFieldNames;return uIe({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||mIe,sortDisabled:e?.sortDisabled}).map(r=>new cL({fieldName:r.name,isEditable:jge(r,t),label:r.alias,format:dIe(r),visible:lIe(r,{...t,visibleFieldNames:i})}))}function dIe(t){switch(t.type){case"small-integer":case"integer":case"single":return new Ox({digitSeparator:!0,places:0});case"double":return new Ox({digitSeparator:!0,places:2});case"string":return uye(t.name)?new Ox({digitSeparator:!0,places:0}):void 0;default:return}}function pIe(){return[new Cy,new Ey]}function fIe(t){const e=Ige(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function xU(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const mIe=["geometry","blob","raster","guid","xml"],Br="FeatureLayer";function $_(t,e){return new W("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function SU(t){return t&&t instanceof _e}const sk=QRe();function nk(t,e,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let Ae=class extends N2e(PRe(bTe(HRe(mTe(dTe(xX(zRe(XRe(KRe(WK(YRe(OCe(LRe(VRe(NT(sTe(ACe(Fe.ClonableMixin(mi))))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Te.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=qC(async(e,i,r)=>{const{save:s,saveAs:n}=await le(()=>import("./featureLayerUtils-B0HSRK-6.js"),__vite__mapDeps([285,277,286,280,179,1,2]));switch(e){case El.SAVE:return s(this,i);case El.SAVE_AS:return n(this,r,i)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(fl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstValidLayerId(e);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new W("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>l2e(this,"load",t));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const t=this._get("_titleCreator");return ci(t),new ks({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(t,e){return e=e.layerDefinition||e,uK(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,r){this._writeEditingEnabled(t,e,!0,r)}get effectiveEditingEnabled(){return h2e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(t,e){return(e=e?.layerDefinition??e).type==="Table"||!e.geometryType}writeIsTable(t,e,i,r){r?.writeLayerSchema&&Bi(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return KX(e.layerDefinition||e)}readObjectIdField(t,e){return QX(e.layerDefinition||e)}get parsedUrl(){const t=Sr(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=Yp(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=Yp(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){lz(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){e=e.layerDefinition||e;const r=e.drawingInfo?.renderer;if(r){const s=Iw(r,e,i)??void 0;return s||he.getLogger(this).error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),s}return QL(e,i)}set source(t){const e=this._get("source");e!==t&&(SU(e)&&this._resetMemorySource(e),SU(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof _e?new Pu({layer:this,items:t}):t:null}readSource(t,e){const i=gr.fromJSON(e.featureSet);return new Pu({layer:this,items:i?.features??[]})}readTemplates(t,e){const i=e.editFieldsInfo,r=i?.creatorField,s=i?.editorField;return t=t?.map(n=>dl.fromJSON(n)),this._fixTemplates(t,r),this._fixTemplates(t,s),t}readTitle(t,e){const i=e.layerDefinition?.name??e.name,r=e.title||e.layerDefinition?.title;if(i){const s=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?moe(this.url,i):i;let n=i;if(!n&&this.url){const o=Dl(this.url);o!=null&&(n=o.title)}return n?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==n&&(n=s+" - "+n),gD(n)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(t,e){return e.title||e.layerDefinition?.name}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,r=i?.creatorField,s=i?.editorField;return t?.map(n=>(n=ll.fromJSON(n),this._fixTemplates(n.templates,r),this._fixTemplates(n.templates,s),n))}readVisible(t,e){return e.layerDefinition?.defaultVisibility!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){const i=await HMe(this,t,e,Br);return this.lastEditsEventDate=new Date,i}async updateAttachment(t,e,i){const r=await BMe(this,t,e,i,Br);return this.lastEditsEventDate=new Date,r}async applyEdits(t,e){return GMe(this,t,e)}async uploadAssets(t,e){return WMe(this,t,e)}on(t,e){return super.on(t,e)}createPopupTemplate(t){return aIe(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await C8(le(()=>import("./FeatureLayerSource-CXP6uc7J.js"),__vite__mapDeps([287,52,59,288,289,290,55,101,54,102,291,283,1,2,38,30,292,293,66,64,65,21,20,26,166,25])),t);return new e({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=i2e(this);t.dynamicDataSource=this.dynamicDataSource;const e=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=$x(this.definitionExpression,e);return t.where=i||"1=1",t}async deleteAttachments(t,e){const i=await qMe(this,t,e,Br);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(t){return YMe(this,t,Br)}async getFeatureTitle(t,e){return this._titleCreator.getTitle(this,t,e)}async getFeatureTitles(t,e){return this._titleCreator.getTitles(this,t,e)}getFeatureType(t){return iK(this.types,this.typeIdField,t)}getFieldDomain(t,e){return s2e(this,t,e,this.getField(t)?.domain??null)}async queryAttachments(t,e){return JMe(this,t,e,Br)}async queryFeatures(t,e){const i=await this.load(),r=await i.source.queryFeatures(De.from(t)??i.createQuery(),e);if(r?.features)for(const s of r.features)s.layer=s.sourceLayer=i;return r}async queryObjectIds(t,e){return await ZMe(this,t,e,Br)}async queryFeatureCount(t,e){return XMe(this,t,e,Br)}async queryExtent(t,e){return KMe(this,t,e,Br)}async queryRelatedFeatures(t,e){return QMe(this,t,e,Br)}async queryRelatedFeaturesCount(t,e){return e2e(this,t,e,Br)}async queryTopFeatures(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!r?.query?.supportsTopFeaturesQuery)throw new W(Br,"Layer source does not support queryTopFeatures capability");const s=await le(()=>import("./TopFeaturesQuery-CEGG7Nbu.js"),__vite__mapDeps([294,1,2])),n=await i.queryTopFeatures(s.default.from(t),e);if(n?.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryAttributeBins(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryAttributeBins)throw new W(Br,"Layer source does not support queryAttributeBins capability");m2e(t,r,Br);const s=await le(()=>import("./AttributeBinsQuery-C3aqlYD_.js"),__vite__mapDeps([236,23,16,32,1,2])),n=await i.queryAttributeBins(s.default.from(t),e);if(n.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryTopObjectIds(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!r?.query.supportsTopFeaturesQuery)throw new W(Br,"Layer source does not support queryTopObjectIds capability");const s=await le(()=>import("./TopFeaturesQuery-CEGG7Nbu.js"),__vite__mapDeps([294,1,2]));return(await i.queryTopObjectIds(s.default.from(t),e)).filter(hge)}async queryTopFeaturesExtent(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!r?.query?.supportsTopFeaturesQuery)throw new W(Br,"Layer source does not support queryTopExtents capability");const s=await le(()=>import("./TopFeaturesQuery-CEGG7Nbu.js"),__vite__mapDeps([294,1,2]));return i.queryTopExtents(s.default.from(t),e)}async queryTopFeatureCount(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!r?.query?.supportsTopFeaturesQuery)throw new W(Br,"Layer source does not support queryFeatureCount capability");const s=await le(()=>import("./TopFeaturesQuery-CEGG7Nbu.js"),__vite__mapDeps([294,1,2]));return i.queryTopCount(s.default.from(t),e)}read(t,e){const i=t.featureCollection;if((i||t.type==="Feature Collection")&&(this.resourceInfo=t),i){const{layers:r,showLegend:s}=i;r?.length===1&&(super.read(r[0],e),s!=null&&super.read({showLegend:s},e))}super.read(t,e),e&&e.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:e?.origin??void 0,writeLayerSchema:e?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=e;if(this.dynamicDataSource)return s?.push($_(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&r!=="tables")return s?.push($_(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return s?.push($_(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&r==="tables")return s?.push($_(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new W(Br,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){return!!this.loaded&&(this.source?.type==="memory"||nIe(this,t))}async save(t){return this._debouncedSaveOperations(El.SAVE,t)}async saveAs(t,e){return this._debouncedSaveOperations(El.SAVE_AS,e,t)}_readEditingEnabled(t,e,i){let r=t.layerDefinition?.capabilities;return r?this._hasEditingCapability(r):(r=t.capabilities,e&&i?.origin==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,r){if(!t){const s=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Bi("layerDefinition.capabilities",s,e),i&&!r?.writeLayerSchema&&(e.capabilities=s)}}_fetchFirstValidLayerId(t){return Tt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return this.applyPreferredHost(i),this.findFirstValidLayerId(i)})}async initLayerProperties(t){return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),lz(this.renderer,this.fieldsIndex),Gq(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),oIe(this,{origin:"service"})}async hasDataChanged(){return t2e(this)}async fetchPublishingStatus(){const t=this.source;return t?.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){const t=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||this.fields?.some(e=>e.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{const r=i.prototype?.attributes;r&&e&&delete r[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new W("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new W("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};c([d({clonable:!1,readOnly:!0})],Ae.prototype,"_titleCreator",null),c([d(PTe)],Ae.prototype,"attributeTableTemplate",void 0),c([de("service","capabilities")],Ae.prototype,"readCapabilities",null),c([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ae.prototype,"charts",void 0),c([d({readOnly:!0})],Ae.prototype,"createQueryVersion",null),c([d({json:{read:{source:"layerDefinition.copyrightText"}}})],Ae.prototype,"copyright",void 0),c([d({json:{read:{source:"layerDefinition.displayField"}}})],Ae.prototype,"displayField",void 0),c([d({types:ph,readOnly:!0})],Ae.prototype,"defaultSymbol",void 0),c([d({type:ca})],Ae.prototype,"dynamicDataSource",void 0),c([d({type:Boolean})],Ae.prototype,"editingEnabled",null),c([de(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ae.prototype,"readEditingEnabled",null),c([de("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ae.prototype,"readEditingEnabledFromWebMap",null),c([me(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ae.prototype,"writeEditingEnabled",null),c([me("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ae.prototype,"writeEditingEnabledToWebMap",null),c([d({readOnly:!0})],Ae.prototype,"effectiveEditingEnabled",null),c([d({clonable:!1,readOnly:!0})],Ae.prototype,"featureTitleFields",null),c([d({...sk.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:nk}}}}})],Ae.prototype,"fields",void 0),c([d(sk.fieldsIndex)],Ae.prototype,"fieldsIndex",void 0),c([d({type:MCe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ae.prototype,"formTemplate",void 0),c([d({json:{read:{source:"layerDefinition.extent"}}})],Ae.prototype,"fullExtent",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:nk,writer(t,e,i){const r=t?_O.toJSON(t):null;r&&Bi(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:_O.read}}})],Ae.prototype,"geometryType",void 0),c([d({json:{read:{source:"layerDefinition.hasM"}}})],Ae.prototype,"hasM",void 0),c([d({json:{read:{source:"layerDefinition.hasZ"}}})],Ae.prototype,"hasZ",void 0),c([d($Te)],Ae.prototype,"id",void 0),c([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ae.prototype,"infoFor3D",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ae.prototype,"isTable",void 0),c([de("service","isTable",["type","geometryType"]),de("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ae.prototype,"readIsTable",null),c([me("web-map","isTable")],Ae.prototype,"writeIsTable",null),c([d(UT)],Ae.prototype,"labelsVisible",void 0),c([d({type:[ai],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:wU,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:wU,write:{layerContainerTypes:Kt}}})],Ae.prototype,"labelingInfo",void 0),c([d((()=>{const t=B(ITe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Bi(r,yT(e),i)}}},t})())],Ae.prototype,"opacity",void 0),c([d(kTe)],Ae.prototype,"legendEnabled",void 0),c([d({type:["show","hide"],json:(()=>{const t=B(LX.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Ae.prototype,"listMode",void 0),c([de("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ae.prototype,"readGlobalIdField",null),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:nk}}}}})],Ae.prototype,"objectIdField",void 0),c([de("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ae.prototype,"readObjectIdField",null),c([d({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Kt}}})],Ae.prototype,"operationalLayerType",void 0),c([d(sk.outFields)],Ae.prototype,"outFields",void 0),c([d({readOnly:!0})],Ae.prototype,"parsedUrl",null),c([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ae.prototype,"path",void 0),c([d(VT)],Ae.prototype,"popupEnabled",void 0),c([d({type:ib,json:{name:"popupInfo",write:!0}})],Ae.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],Ae.prototype,"defaultPopupTemplate",null),c([d({types:g1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:xRe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Kt,overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:Kt})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:Kt})}}})],Ae.prototype,"renderer",null),c([de("service","renderer",["drawingInfo.renderer","defaultSymbol"]),de("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ae.prototype,"readRenderer",null),c([d()],Ae.prototype,"resourceInfo",void 0),c([d((()=>{const t=B(TTe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Ae.prototype,"screenSizePerspectiveEnabled",void 0),c([d({clonable:!1})],Ae.prototype,"source",null),c([It("source")],Ae.prototype,"castSource",null),c([de("portal-item","source",["featureSet"]),de("web-map","source",["featureSet"])],Ae.prototype,"readSource",null),c([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ae.prototype,"spatialReference",void 0),c([d({type:Number})],Ae.prototype,"subtypeCode",void 0),c([d({type:[dl]})],Ae.prototype,"templates",void 0),c([de("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ae.prototype,"readTemplates",null),c([d({type:Ir})],Ae.prototype,"timeInfo",void 0),c([d()],Ae.prototype,"title",void 0),c([de("service","title",["name"]),de("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ae.prototype,"readTitle",null),c([de("web-map","title",["layerDefinition.name","title"])],Ae.prototype,"readTitleFromWebMap",null),c([d({type:String})],Ae.prototype,"sublayerTitleMode",void 0),c([d({json:{read:!1}})],Ae.prototype,"type",void 0),c([d({type:String})],Ae.prototype,"typeIdField",void 0),c([de("service","typeIdField"),de("typeIdField",["layerDefinition.typeIdField"])],Ae.prototype,"readTypeIdField",null),c([d({type:[ll]})],Ae.prototype,"types",void 0),c([de("service","types",["types"]),de("types",["layerDefinition.types"])],Ae.prototype,"readTypes",null),c([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Kt}}}}})],Ae.prototype,"visible",void 0),c([de("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ae.prototype,"readVisible",null),Ae=c([R("esri.layers.FeatureLayer")],Ae);const ZJe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ae}},Symbol.toStringTag,{value:"Module"}));let Eu=class extends X{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],Eu.prototype,"moment",void 0),c([d({type:Boolean,json:{write:!0}})],Eu.prototype,"fullUpdate",void 0),c([d({type:Boolean,json:{write:!0}})],Eu.prototype,"validateErrorsCreated",void 0),c([d({type:Boolean,json:{write:!0}})],Eu.prototype,"exceededTransferLimit",void 0),c([d({type:[Object],json:{write:!0}})],Eu.prototype,"serviceEdits",void 0),c([d({type:[Object],json:{write:!0}})],Eu.prototype,"discoveredSubnetworks",void 0),Eu=c([R("esri.rest.networks.support.ValidateNetworkTopologyResult")],Eu);const gIe=Eu,yIe=hr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let zc=class extends gIe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Tt(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((s,n)=>{this._clearTimer();const o=setInterval(()=>{this._timer||n(Qt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),n(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};c([d()],zc.prototype,"editsResolver",void 0),c([d({type:String,json:{write:!0}})],zc.prototype,"statusUrl",void 0),c([Re(yIe)],zc.prototype,"status",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],zc.prototype,"submissionTime",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],zc.prototype,"lastUpdatedTime",void 0),zc=c([R("esri.networks.support.TopologyValidationJobInfo")],zc);const bIe=zc;var Vi;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Vi||(Vi={}));const A_=new Xe({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),QJe=new Xe({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),vIe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},eZe=new Xe({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});function wIe(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:s,toRuleElement:n}=qK(t),o=[];switch(t.ruleType){case Vi.RTContainment:case Vi.RTAttachment:i==="from"&&fa(e,r,!1)?o.push(n):i==="to"&&fa(e,n,!1)&&o.push(r);break;case Vi.RTJunctionEdgeConnectivity:case Vi.RTJunctionJunctionConnectivity:fa(e,r,!0)?o.push(n):fa(e,n,!0)&&o.push(r);break;case Vi.RTEdgeJunctionEdgeConnectivity:s&&(fa(e,s,!0)?(o.push(r),o.push(n)):(fa(e,r,!0)||fa(e,n,!0))&&o.push(s));break;default:return[]}return o}function i0(t,e,i){const{fromRuleElement:r,viaRuleElement:s,toRuleElement:n}=qK(t);switch(t.ruleType){case Vi.RTContainment:case Vi.RTAttachment:return O_(e,i,r,n,!1,!1);case Vi.RTJunctionEdgeConnectivity:case Vi.RTJunctionJunctionConnectivity:return O_(e,i,r,n,!0,!0);case Vi.RTEdgeJunctionEdgeConnectivity:return O_(e,i,r,s,!0,!0)||O_(e,i,n,s,!0,!0);default:return!1}}function O_(t,e,i,r,s,n){if(!i||!r)return!1;const o=fa(t,i,n),a=fa(e,r,n);if(s){const l=fa(t,r,n),u=fa(e,i,n);return o&&a||l&&u}return o&&a}function _Ie(t,e){const i=t.terminal?.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function fa(t,e,i){const{assetGroupCode:r,assetTypeCode:s}=t;return("layerId"in t?t.layerId===e.networkSource?.layerId:t.networkSourceId===e.networkSource?.sourceId)&&(r==null||r===e.assetGroup?.assetGroupCode)&&(s==null||s===e.assetType?.assetTypeCode)&&(!i||!("terminalId"in t)||_Ie(e,t))}function qK(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function Kf(t){let e=null,i=null,r=null;if(zq(t))e=BO(t),[i,r]=xIe(t);else if(sh(t)){e=t.parent?.layerId??null;const[s]=aC(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function BO(t){const{sourceLayer:e}=t;let i;return Jpe(e)?i=e.layerId:sh(e)&&(i=e.parent?.layerId),i??null}function xIe(t){const[e,i]=aC(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function aC(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function EU(t,e){if(t==="Utility Network Layer"){const{default:i}=await le(()=>Promise.resolve().then(()=>DIe),void 0);return new i({layerUrl:e})}return null}async function SIe(t){let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof We||(e={...e,portalItem:new We(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new W("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,s=await Tt(r,{responseType:"json",query:{f:"json"}}),n="Network Layer";if(s.data.type?.includes(n))return EU(s.data.type,r);if(s.data.layers){const o=s.data.layers.find(a=>a.type.includes(n));if(o){const a=`${r}/${o.id}`;return EU(o.type,a)}}return null}let Xi=class extends NT(gs){static fromPortalItem(t){return SIe(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=e=>{const{serviceUrl:i,gdbVersion:r,result:s}=e,n=i===this.featureServiceUrl,o=j0(i,r,this.gdbVersion);n&&o&&s.then(a=>{hS(i,r)&&(this.historicMoment=a.historicMoment)})},this._updateMomentHandler=e=>{const{serviceUrl:i,gdbVersion:r,moment:s}=e,n=i===this.featureServiceUrl,o=j0(i,r,this.gdbVersion);n&&o&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([kX(this._applyEditsHandler),RX(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{Zr(t)||he.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??null}get parsedUrl(){return Sr(this.layerUrl)}get featureServiceUrl(){return Dl(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Dl(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(!this.dataElement)return null;const e=this._layerIdBySourceId.get(t);if(e!=null)return e;const i=this.dataElement.domainNetworks,r=this._traverseNetworkSources(i,this._layerIdBySourceId,"sourceId","layerId",t);return r>=0?r:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const e=this._sourceIdByLayerId.get(t);if(e!=null)return e;const i=this.dataElement.domainNetworks,r=this._traverseNetworkSources(i,this._sourceIdByLayerId,"layerId","sourceId",t);return r>=0?r:null}getObjectIdsFromElements(t){const e=[],i=new Map;for(const s of t){const n=this.getLayerIdBySourceId(s.networkSourceId);if(n==null)continue;let o=i.get(n);o===void 0&&(o=[]),o.push(s.objectId),i.set(n,o)}const r=this.featureServiceUrl;return i.forEach((s,n)=>e.push({layerUrl:`${r}/${n}`,objectIds:s})),e}async queryNamedTraceConfigurations(t,e){const[{queryNamedTraceConfigurations:i},{default:r}]=await Promise.all([le(()=>import("./queryNamedTraceConfigurations-BL8GOG8g.js"),__vite__mapDeps([295,1,2])),le(()=>import("./QueryNamedTraceConfigurationsParameters-DbJ-omrr.js"),__vite__mapDeps([296,1,2]))]),s=this.networkServiceUrl,n=r.from(t);return(await i(s,n,{...e}))?.namedTraceConfigurations}async validateTopology(t,e){if(!t.validateArea)throw new W("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:i},{default:r}]=await Promise.all([le(()=>import("./validateNetworkTopology-DyUxVKcS.js"),__vite__mapDeps([297,1,2])),le(()=>import("./ValidateNetworkTopologyParameters-Cd50xkLN.js"),__vite__mapDeps([298,1,2]))]),s=r.from(t);hS(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=qA,await uV(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const n=this.networkServiceUrl,o=this.featureServiceUrl,a=cV(o,null,this.gdbVersion,!0),l=await i(n,s,{...e});if(l?.serviceEdits){const u=[];for(const h of l.serviceEdits){const{editedFeatures:p}=h,m=p?.spatialReference?new Te(p.spatialReference):null;u.push({layerId:h.layerId,editedFeatures:{adds:p?.adds?.map(y=>P_(y,m))||[],updates:p?.updates?.map(y=>({original:P_(y[0],m),current:P_(y[1],m)}))||[],deletes:p?.deletes?.map(y=>P_(y,m))||[],spatialReference:m}})}a.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:u,exceededTransferLimit:!1,historicMoment:l.moment})}return l}async submitTopologyValidationJob(t,e){let i=null;if(!t.validateArea)throw new W("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const u=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await Tt(u,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:r},{default:s}]=await Promise.all([le(()=>import("./validateNetworkTopology-DyUxVKcS.js"),__vite__mapDeps([297,1,2])),le(()=>import("./ValidateNetworkTopologyParameters-Cd50xkLN.js"),__vite__mapDeps([298,1,2]))]),n=s.from(t);hS(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=qA,await uV(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion||i;const o=this.networkServiceUrl,a=this.featureServiceUrl?cV(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,l=await r(o,n,{...e});return new bIe({statusUrl:l,editsResolver:a})}getSourceTypeById(t){if(!this.dataElement)return null;for(const e of this.dataElement.domainNetworks)for(const i of[e.edgeSources??[],e.junctionSources??[]])for(const r of i)if(r.sourceId===t)return i===e.edgeSources?"edge":"junction";return null}_traverseNetworkSources(t,e,i,r,s){for(const n of t)for(const o of[n.edgeSources??[],n.junctionSources??[]])for(const a of o)if(a[i]===s)return e.set(s,a[r]),a[r];return-1}async _fetchLayerMetaData(t,e){const i=await Tt(t,{responseType:"json",query:{f:"json"},...e});this.sourceJSON=i.data,this.read(i.data,{origin:"service"})}async _fetchDataElement(t,e,i){if(this.dataElement)return;const r=await Tt(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...i}).then(s=>s.data.layerDataElements?.[0]);r&&this.read(r,{origin:"service"})}};function P_(t,e){return new Si({attributes:t.attributes,geometry:Nl({...t.geometry,spatialReference:e})})}c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Xi.prototype,"id",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Xi.prototype,"title",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Xi.prototype,"layerUrl",void 0),c([d({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Xi.prototype,"dataElement",void 0),c([d({type:it,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Xi.prototype,"fullExtent",void 0),c([d({type:Te,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Xi.prototype,"spatialReference",void 0),c([d({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Xi.prototype,"type",void 0),c([d({readOnly:!0})],Xi.prototype,"datasetName",null),c([d({readOnly:!0})],Xi.prototype,"owner",null),c([d({readOnly:!0})],Xi.prototype,"schemaGeneration",null),c([d({readOnly:!0})],Xi.prototype,"parsedUrl",null),c([d({readOnly:!0})],Xi.prototype,"featureServiceUrl",null),c([d({readOnly:!0})],Xi.prototype,"networkServiceUrl",null),c([d({readOnly:!0})],Xi.prototype,"layerId",null),c([d()],Xi.prototype,"sourceJSON",void 0),c([d({readOnly:!0})],Xi.prototype,"networkSystemLayers",null),c([d()],Xi.prototype,"gdbVersion",void 0),c([d({type:Date})],Xi.prototype,"historicMoment",void 0),Xi=c([R("esri.networks.Network")],Xi);const EIe=Xi;let Vc=class extends X.JSONSupportMixin(gs){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Tt}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const s=new Map,[n,o]=aC(e.sourceLayer);if(!n||!o)return"";const a=Kf(e),l=Kf(i);r.forEach(h=>{const{type:p,direction:m}=h;this._getRulesForAssociationType(p).forEach(y=>{wIe(y,a,m).filter(v=>v.networkSource?.layerId===l.layerId).forEach(v=>{const w=v.assetGroup?.assetGroupCode,S=v.assetType?.assetTypeCode;if(w!=null&&S!=null){const E=s.get(w)??new Set;E.add(S),s.set(w,E)}})})});let u=[];return this._mergeAssetCodes(s).forEach((h,p)=>{const m=`${n} IN (${p})`,y=lge(o,[...h]);m&&y&&u.push($x(m,y))}),u.length>1&&(u=u.map(h=>`(${h})`)),u.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return BO(e)==null?[]:i.filter(s=>this.canAssociateFeatures(e,s,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const s=Kf(e),n=Kf(i);return r.some(o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some(u=>l==="to"?i0(u,n,s):i0(u,s,n))})}getLayersCanAssociateWith(e,i,r){return BO(e)==null?[]:i.filter(s=>this.canAssociateFeatureToLayer(e,s,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const s=Kf(e),n=Kf(i);return r.some(o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some(u=>l==="to"?i0(u,n,s):i0(u,s,n))})}getFeatureSQL(e,i){const r=e.layerId.toString(),s=e.fieldsIndex?.normalizeFieldName("assetGroup"),n=e.fieldsIndex?.normalizeFieldName("assetType"),o=s?i.attributes[s]:null,a=n?i.attributes[n]:null,l=this.rulesHash[r];if(l){const u=l.assetGroupHash[o];if(u)return u.assetTypeHash[a]||null}return null}async _initializeRulesTable(){const e={};let i;(function(s){s[s.from=0]="from",s[s.to=1]="to",s[s.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const s of this.rules){if(s.ruleType===Vi.RTAttachment){this.rulesCategorized.attachment.push(s);continue}if(s.ruleType===Vi.RTContainment){this.rulesCategorized.containment.push(s);continue}if(s.ruleType===Vi.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(s);continue}this.rulesCategorized.connectivity.push(s);let n=[[i.from,i.to],[i.to,i.from]];s.ruleType===Vi.RTEdgeJunctionEdgeConnectivity&&(n=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const o of n){const a=o.shift(),l=o.shift();let u=!1;switch(s.ruleType){case Vi.RTEdgeJunctionEdgeConnectivity:u=a===i.from||a===i.to;break;case Vi.RTJunctionEdgeConnectivity:u=a===i.to}const h=r[a],p=s[h.networkSourceId]?.layerId.toString()??"",m=s[h.assetGroupId]?.assetGroupCode?.toString(),y=s[h.assetTypeId],v=y?.assetTypeCode?.toString(),w=r[l],S=s[w.networkSourceId]?.layerId.toString()??"",E=s[w.assetGroupId]?.assetGroupCode?.toString(),I=s[w.assetTypeId],D=I?.assetTypeCode?.toString(),O=e[p]??{assetGroupHash:{}};if(!(m&&v&&E&&D))continue;const A=O.assetGroupHash[m]??{assetTypeHash:{}},z=A.assetTypeHash[v]??{};if(z[S]=z[S]??{},u){z[p]=z[p]??{};const Z=$x(`assetgroup = ${m}`,`assettype = ${v}`);I?.connectivityPolicy==="esriNECPEndVertex"?z[p].endVertex=z[p]?.endVertex?`${z[p].endVertex}`:`(${Z})`:z[p].anyVertex=z[p].anyVertex?`${z[p].anyVertex}`:`(${Z})`}const _=$x(`assetgroup = ${E}`,`assettype = ${D}`);I?.connectivityPolicy==="esriNECPEndVertex"?z[S].endVertex=z[S]?.endVertex?vI(z[S].endVertex,_):`(${_})`:z[S].anyVertex=z[S]?.anyVertex?vI(z[S].anyVertex,_):`(${_})`,A.assetTypeHash[v]=z,O.assetGroupHash[m]=A,e[p]=O}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===Vi.RTJunctionJunctionConnectivity);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===Vi.RTJunctionEdgeConnectivity||r.ruleType===Vi.RTEdgeJunctionEdgeConnectivity);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[s,n]of e){const o=new Set([s]);for(const[l,u]of e)s!==l&&!r.has(l)&&this._areSetsEqual(n,u)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(",");i.set(a,n)}return i}_canSupportAssociations(e){return e.every(i=>{const r=zq(i)?i.sourceLayer:i,[s,n]=aC(r);return s!=null&&n!=null})}};c([d({constructOnly:!0})],Vc.prototype,"rulesLayer",void 0),c([d({constructOnly:!0})],Vc.prototype,"rules",void 0),c([d({readOnly:!0})],Vc.prototype,"rulesHash",void 0),c([d()],Vc.prototype,"rulesCategorized",void 0),c([d({constructOnly:!0})],Vc.prototype,"request",void 0),Vc=c([R("esri.networks.RulesTable")],Vc);let go=class extends X{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};c([d({type:[Object],json:{write:!0}})],go.prototype,"conditionBarriers",void 0),c([d({type:[Object],json:{write:!0}})],go.prototype,"outputConditions",void 0),c([d({type:[Object],json:{write:!0}})],go.prototype,"functions",void 0),c([d({type:[Object],json:{write:!0}})],go.prototype,"functionBarriers",void 0),c([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],go.prototype,"traversabilityScope",void 0),c([d({type:String,json:{write:!0}})],go.prototype,"shortestPathNetworkAttributeName",void 0),c([d({type:Boolean,json:{write:!0}})],go.prototype,"includeBarriers",void 0),c([d({type:Boolean,json:{write:!0}})],go.prototype,"validateConsistency",void 0),c([d({type:Boolean,json:{write:!0}})],go.prototype,"ignoreBarriersAtStartingPoints",void 0),go=c([R("esri.networks.support.TraceConfiguration")],go);const a3=go;let Xt=class extends a3{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};c([d({type:[Object],json:{write:!0}})],Xt.prototype,"filterBarriers",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"arcadeExpressionBarrier",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"circuitName",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"domainNetworkName",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"filterBitsetNetworkAttributeName",void 0),c([d({type:[Object],json:{write:!0}})],Xt.prototype,"filterFunctionBarriers",void 0),c([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Xt.prototype,"filterScope",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"includeContainers",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"includeContent",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"includeIsolated",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"includeStructures",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"allowIndeterminateFlow",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"includeUpToFirstSpatialContainer",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"inferConnectivity",void 0),c([d({type:Number,json:{write:!0}})],Xt.prototype,"maxHops",void 0),c([d({type:Object,json:{write:!0}})],Xt.prototype,"nearestNeighbor",void 0),c([d({type:Number,json:{write:!0}})],Xt.prototype,"numPaths",void 0),c([d({type:[Object],json:{write:!0}})],Xt.prototype,"outputFilterCategories",void 0),c([d({type:[Object],json:{write:!0}})],Xt.prototype,"outputFilters",void 0),c([d({type:[Object],json:{write:!0}})],Xt.prototype,"propagators",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"subnetworkName",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"targetTierName",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"diagramTemplateName",void 0),c([d({type:String,json:{write:!0}})],Xt.prototype,"tierName",void 0),c([d({type:Boolean,json:{write:!0}})],Xt.prototype,"validateLocatability",void 0),Xt=c([R("esri.networks.support.UNTraceConfiguration")],Xt);const CIe=Xt;let ln=class extends pA{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?CIe.fromJSON(e):a3.fromJSON(e)}};c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],ln.prototype,"globalId",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],ln.prototype,"title",void 0),c([d({type:a3,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ln.prototype,"traceConfiguration",void 0),c([de("service","traceConfiguration")],ln.prototype,"readTraceConfiguration",null),c([d({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ln.prototype,"creationDate",void 0),c([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ln.prototype,"creator",void 0),c([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ln.prototype,"description",void 0),c([d({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],ln.prototype,"minStartingPoints",void 0),c([d({json:{origins:{service:{read:!0,write:!0}},read:!1}})],ln.prototype,"resultTypes",void 0),c([d({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],ln.prototype,"tags",void 0),c([d({type:A_.apiValues,json:{type:A_.jsonValues,origins:{service:{read:A_.read,write:A_.write}},read:!1}})],ln.prototype,"traceType",void 0),ln=c([R("esri.networks.support.NamedTraceConfiguration")],ln);const TIe=ln;function MIe(t){const e=t?.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",s="fromterminalid",n="tonetworksourceid",o="toglobalid",a="toterminalid",l="status",u="associationtype",h="iscontentvisible",p="percentalong",m="globalid";return{fromNetworkSourceId:e?.get(i)?.name??i,fromGlobalId:e?.get(r)?.name??r,fromTerminalId:e?.get(s)?.name??s,toNetworkSourceId:e?.get(n)?.name??n,toGlobalId:e?.get(o)?.name??o,toTerminalId:e?.get(a)?.name??a,status:e?.get(l)?.name??l,associationType:e?.get(u)?.name??u,isContentVisible:e?.get(h)?.name??h,percentAlong:e?.get(p)?.name??p,globalId:e?.get(t?.globalIdField??m)?.name??m}}function nZe(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const s=e.fieldsIndex.get("assetgroup"),n=e.fieldsIndex.get("assettype");return[s?.name,n?.name].filter(o=>o!=null)}return[]}let yo=class extends Oe{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){this.associationsTable?.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:e}=this;if(!e)throw new W("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new Ae({url:e})}return await this.associationsTable.load(),this.associationsTable}};c([d({constructOnly:!0})],yo.prototype,"rulesTableId",void 0),c([d({constructOnly:!0})],yo.prototype,"rulesTableUrl",void 0),c([d({constructOnly:!0})],yo.prototype,"subnetworksTableId",void 0),c([d({constructOnly:!0})],yo.prototype,"subnetworksTableUrl",void 0),c([d({constructOnly:!0})],yo.prototype,"dirtyAreasLayerId",void 0),c([d({constructOnly:!0})],yo.prototype,"dirtyAreasLayerUrl",void 0),c([d()],yo.prototype,"associationsTable",void 0),c([d({constructOnly:!0})],yo.prototype,"associationsTableId",void 0),c([d({constructOnly:!0})],yo.prototype,"associationsTableUrl",void 0),yo=c([R("esri.networks.support.NetworkSystemLayers")],yo);let Hm=class extends X{constructor(e){super(e),this.id=null,this.name=null}};c([d({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Hm.prototype,"id",void 0),c([d({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Hm.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],Hm.prototype,"isUpstreamTerminal",void 0),Hm=c([R("esri.networks.support.Terminal")],Hm);const kIe=Hm,D_=new Xe({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let ju=class extends X{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};c([d({type:String,json:{write:!0}})],ju.prototype,"defaultConfiguration",void 0),c([d({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],ju.prototype,"id",void 0),c([d({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],ju.prototype,"name",void 0),c([d({type:[kIe],json:{write:!0}})],ju.prototype,"terminals",void 0),c([d({type:D_.apiValues,json:{type:D_.jsonValues,read:D_.read,write:D_.write}})],ju.prototype,"traversabilityModel",void 0),ju=c([R("esri.networks.support.TerminalConfiguration")],ju);let Bm=class extends X{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};c([d({type:Mi,json:{write:!0},readOnly:!0})],Bm.prototype,"line",void 0),c([d({type:Eo,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Bm.prototype,"multipoint",void 0),c([d({type:ui,json:{write:!0},readOnly:!0})],Bm.prototype,"polygon",void 0),Bm=c([R("esri.rest.networks.support.AggregatedGeometry")],Bm);const RIe=Bm;let cn=class extends X{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};c([d({json:{write:!1}})],cn.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"assetGroupCode",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"assetTypeCode",void 0),c([d({type:String,json:{write:!0}})],cn.prototype,"globalId",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"networkSourceId",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"objectId",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"positionFrom",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"positionTo",void 0),c([d({type:Number,json:{write:!0}})],cn.prototype,"terminalId",void 0),cn=c([R("esri.rest.networks.support.NetworkElement")],cn);let bl=class extends cn{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};c([d({json:{write:!1}})],bl.prototype,"type",void 0),c([d({json:{write:!0}})],bl.prototype,"firstUnit",void 0),c([d({json:{write:!0}})],bl.prototype,"numUnits",void 0),bl=c([R("esri.rest.networks.support.TelecomNetworkElement")],bl);let Cu=class extends X{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new bl({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new bl({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};c([d({type:bl,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],Cu.prototype,"edgeElement",void 0),c([de("edgeElement")],Cu.prototype,"readEdgeElement",null),c([me("edgeElement")],Cu.prototype,"writeEdgeElement",null),c([d({type:bl,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],Cu.prototype,"junctionElement",void 0),c([de("junctionElement")],Cu.prototype,"readJunctionElement",null),c([me("junctionElement")],Cu.prototype,"writeJunctionElement",null),Cu=c([R("esri.rest.networks.support.CircuitPathConnectivityElement")],Cu);const IIe=Cu,L_=new Xe({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"});let el=class extends X{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null}};c([d({type:String,json:{write:!0}})],el.prototype,"globalId",void 0),c([d({type:Boolean,json:{write:!0}})],el.prototype,"isFilterBarrier",void 0),c([d({type:Number,json:{write:!0}})],el.prototype,"percentAlong",void 0),c([d({type:Number,json:{write:!0}})],el.prototype,"terminalId",void 0),c([d({type:L_.apiValues,json:{type:L_.jsonValues,read:{reader:L_.read,source:"traceLocationType"},write:{writer:L_.write,target:"traceLocationType"}}})],el.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],el.prototype,"firstUnit",void 0),c([d({type:Number,json:{write:!0}})],el.prototype,"numUnits",void 0),el=c([R("esri.rest.networks.support.TraceLocation")],el);const CU=el;let Tu=class extends X{constructor(e){super(e),this.pathId=null,this.orderId=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};c([d({type:Number,json:{write:!0}})],Tu.prototype,"pathId",void 0),c([d({type:Number,json:{write:!0}})],Tu.prototype,"orderId",void 0),c([d({type:CU,json:{write:!0}})],Tu.prototype,"startingPoint",void 0),c([d({type:CU,json:{write:!0}})],Tu.prototype,"stoppingPoint",void 0),c([d({type:[IIe],json:{write:!0}})],Tu.prototype,"pathConnectivity",void 0),c([d({type:Mi,json:{write:!0}})],Tu.prototype,"geometry",void 0),Tu=c([R("esri.rest.networks.support.CircuitPath")],Tu);const l3=Tu;let Qd=class extends X{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){const r=i.sections?.map(s=>({...s,path:l3.fromJSON(s.path)}));return{name:i.name,globalId:i.globalId,isSectioned:i.isSectioned,sectionOrder:i.sectionOrder,startLocation:i.startLocation,stopLocation:i.stopLocation,sections:r,subcircuits:i.subcircuits,lastVerifiedTime:i.lastVerifiedTime?new Date(i.lastVerifiedTime):null,lastExportedTime:i.lastExportedTime?new Date(i.lastExportedTime):null,circuitType:i.circuitType,status:i.status}}};c([d({type:Object,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],Qd.prototype,"circuit",void 0),c([de("circuit")],Qd.prototype,"readCircuit",null),c([d({type:Mi,json:{write:!0}})],Qd.prototype,"geometry",void 0),c([d({type:l3,json:{write:!0}})],Qd.prototype,"path",void 0),Qd=c([R("esri.rest.networks.support.CircuitTraceResult")],Qd);const $Ie=Qd;let Gm=class extends X{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};c([d({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],Gm.prototype,"functionType",void 0),c([d({type:String,json:{write:!0},readOnly:!0})],Gm.prototype,"networkAttributeName",void 0),c([d({type:Number,json:{write:!0},readOnly:!0})],Gm.prototype,"result",void 0),Gm=c([R("esri.rest.networks.support.FunctionResult")],Gm);const AIe=Gm;let Vn=class extends X{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new bl({...r}):new cn({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};c([d({type:RIe,json:{write:!0},readOnly:!0})],Vn.prototype,"aggregatedGeometry",void 0),c([d({type:[$Ie],json:{write:!0},readOnly:!0})],Vn.prototype,"circuits",void 0),c([d({type:[cn],json:{write:!0},readOnly:!0})],Vn.prototype,"elements",void 0),c([de("elements")],Vn.prototype,"readNetworkElements",null),c([me("elements")],Vn.prototype,"writeNetworkElements",null),c([d({type:[AIe],json:{write:!0},readOnly:!0})],Vn.prototype,"globalFunctionResults",void 0),c([d({type:Boolean,json:{write:!0},readOnly:!0})],Vn.prototype,"kFeaturesForKNNFound",void 0),c([d({type:[l3],json:{write:!0},readOnly:!0})],Vn.prototype,"paths",void 0),c([d({type:Boolean,json:{write:!0},readOnly:!0})],Vn.prototype,"startingPointsIgnored",void 0),c([d({type:[String],json:{write:!0},readOnly:!0})],Vn.prototype,"warnings",void 0),Vn=c([R("esri.rest.networks.support.TraceResult")],Vn);const OIe=hr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let ep=class extends Vn{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Tt(this.statusUrl,i),s=r.traceResults?{...r.traceResults,...r}:r;return this.read(s),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((s,n)=>{this._clearTimer();const o=setInterval(()=>{this._timer||n(Qt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),n(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};c([d({type:String,json:{write:!0}})],ep.prototype,"statusUrl",void 0),c([Re(OIe)],ep.prototype,"status",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],ep.prototype,"submissionTime",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],ep.prototype,"lastUpdatedTime",void 0),ep=c([R("esri.networks.support.TraceJobInfo")],ep);let tl=class extends EIe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map,this._circuitManagerMap=new Map,this._unitIdentifierManager=null}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new yo({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(e=>ju.fromJSON(e))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(e=>e.domainNetworkName)||[]}get _utilityLayerList(){const e=new Set;return this.dataElement?.domainNetworks?.map(i=>{i?.edgeSources?.map(({layerId:r,sourceId:s})=>{this._layerIdBySourceId.set(s,r),this._sourceIdByLayerId.set(r,s),e.add(r)}),i?.junctionSources?.map(({layerId:r,sourceId:s})=>{this._layerIdBySourceId.set(s,r),this._sourceIdByLayerId.set(r,s),e.add(r)})}),e}get hasTelecomNetwork(){return this.dataElement?.domainNetworks.some(e=>e.isTelecomNetwork)??!1}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let i=null,r=null;const s=e.sourceLayer;let n=null;if(s?.type==="feature"){if(n=s.layerId,n===null)return null}else if(s?.type!=="subtype-sublayer"||(n=s?.parent?.layerId??null,n===null))return null;const o=e.attributes;if(o==null)return null;for(const u of Object.keys(o))u.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(u)),u.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(u));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const u of l){const h=u.junctionSources?.find(p=>p.layerId===n);if(h){const p=h.assetGroups?.find(m=>m.assetGroupCode===i);if(p){const m=p.assetTypes?.find(y=>y.assetTypeCode===r);if(m?.isTerminalConfigurationSupported){a=m.terminalConfigurationId;break}}}}if(a!=null){const u=this.dataElement.terminalConfigurations,h=u?.find(p=>p.terminalConfigurationId===a);return h?ju.fromJSON(h):null}return null}getTierNames(e){return this.dataElement?.domainNetworks.find(r=>r.domainNetworkName===e)?.tiers?.map(r=>r.name)||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}async getCircuitManager(e){if(!this.hasTelecomNetwork)return null;const i=this.dataElement?.domainNetworks.find(s=>s.domainNetworkName===e&&s.isTelecomNetwork);if(!i)return null;const{default:r}=await le(()=>import("./CircuitManager-C27Z4qFI.js"),__vite__mapDeps([299,1,2]));return df(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await le(()=>import("./UnitIdentifierManager-KJTgsdYV.js"),__vite__mapDeps([300,1,2]));return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(s=>{this._terminalById.set(s.id,s)})}),this._terminalById.get(e))}isUtilityLayer(e){return"layerId"in e?this._utilityLayerList.has(e?.layerId)&&(e.url?.startsWith(this.featureServiceUrl)??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(e.parent.url?.startsWith(this.featureServiceUrl)??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:s}]=await Promise.all([le(()=>import("./queryAssociations-BFp30p8b.js"),__vite__mapDeps([301,302,1,2])),le(()=>import("./QueryAssociationsParameters-B7TxpzJY.js"),__vite__mapDeps([303,1,2]))]),n=s.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await r(this.networkServiceUrl,n,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([le(()=>import("./synthesizeAssociationGeometries-CFc-BxIV.js"),__vite__mapDeps([304,302,1,2])),le(()=>import("./SynthesizeAssociationGeometriesParameters-WGcX4gAq.js"),__vite__mapDeps([305,1,2]))]),s=r.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([le(()=>import("./trace-C7rZouKT.js"),__vite__mapDeps([306,1,2])),le(()=>import("./TraceParameters-DEwzXCSt.js"),__vite__mapDeps([307,1,2]))]),s=r.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([le(()=>import("./trace-C7rZouKT.js"),__vite__mapDeps([306,1,2])),le(()=>import("./TraceParameters-DEwzXCSt.js"),__vite__mapDeps([307,1,2]))]),s=r.from(e);s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const n=await i(this.networkServiceUrl,s);return new ep({statusUrl:n})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:s}=e;if(!r||!s)return!1;await i.load();let n=null;switch(e.associationType){case"containment":n=i.rulesCategorized.containment;break;case"attachment":n=i.rulesCategorized.attachment;break;default:n=i.rulesCategorized.connectivity}return n.some(o=>i0(o,r,s))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:s,fromTerminalId:n,toNetworkSourceId:o,toGlobalId:a,toTerminalId:l,associationType:u,isContentVisible:h,percentAlong:p,globalId:m}=MIe(i);return{addFeatures:e.map(y=>new Si({attributes:{[r]:y.fromNetworkElement?.networkSourceId,[s]:y.fromNetworkElement?.globalId,[n]:y.fromNetworkElement?.terminalId,[o]:y.toNetworkElement?.networkSourceId,[a]:y.toNetworkElement?.globalId,[l]:y.toNetworkElement?.terminalId,[u]:vIe[y.associationType],[h]:y.isContentVisible==null?void 0:y.isContentVisible?1:0,[p]:y.percentAlong,[m]:y.globalId}})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map(s=>({globalId:s.globalId})),id:r,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){if(this.sharedNamedTraceConfigurations?.length===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const n=r?.find(o=>o.globalId===s.globalId);if(n){const o=n.write({},{origin:"service"});s.read(o,{origin:"service"})}}}async _createRulesTable(){const e=this.networkSystemLayers.rulesTableUrl,i=new Ae({url:e});await i.load();const r=this.dataElement?.domainNetworks;if(!r)return null;const s=r.flatMap(o=>[...o.edgeSources||[],...o.junctionSources||[]]),n=(await PIe(i)).map(o=>this._hydrateRuleInfo(i,s,o));return new Vc({rulesLayer:i,rules:n})}_hydrateRuleInfo(e,i,r){const s=e.fieldsIndex,n=s.get("RULETYPE"),o=s.get("CREATIONDATE"),a=s.get("FROMNETWORKSOURCEID"),l=s.get("FROMASSETGROUP"),u=s.get("FROMASSETTYPE"),h=s.get("FROMTERMINALID"),p=s.get("TONETWORKSOURCEID"),m=s.get("TOASSETGROUP"),y=s.get("TOASSETTYPE"),v=s.get("TOTERMINALID"),w=s.get("VIANETWORKSOURCEID"),S=s.get("VIAASSETGROUP"),E=s.get("VIAASSETTYPE"),I=s.get("VIATERMINALID"),D=r.attributes[n.name],O=new Date(r.attributes[o.name]),A=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[u.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[p.name],assetGroupId:r.attributes[m.name],assetTypeId:r.attributes[y.name],terminalId:r.attributes[v.name]},{networkSourceId:r.attributes[w.name],assetGroupId:r.attributes[S.name],assetTypeId:r.attributes[E.name],terminalId:r.attributes[I.name]}];let z;(function(Z){Z[Z.from=0]="from",Z[Z.to=1]="to",Z[Z.via=2]="via"})(z||(z={}));const _={ruleType:D,creationDate:O};for(const Z of[z.from,z.to,z.via]){if(D!==Vi.RTEdgeJunctionEdgeConnectivity&&Z===z.via)continue;const Q=A[Z],ae=i.find(Be=>Be.sourceId===Q.networkSourceId),ge=ae?.assetGroups.find(Be=>Be.assetGroupCode===Q.assetGroupId),ne=ge?.assetTypes.find(Be=>Be.assetTypeCode===Q.assetTypeId),ve=this._getTerminal(ne,Q);let xe="";switch(Z){case z.from:xe="from";break;case z.to:xe="to";break;case z.via:xe="via"}_[`${xe}NetworkSource`]=ae,_[`${xe}AssetGroup`]=ge,_[`${xe}AssetType`]=ne,_[`${xe}Terminal`]=ve?.toJSON()}return _}_getTerminal(e,i){const r=e?.terminalConfigurationId;return this.terminalConfigurations?.find(n=>n.id===r)?.terminals?.find(n=>n.id===i.terminalId)??null}};async function PIe(t){const e=new De({where:"1=1",outFields:["*"]});return(await NX(t,e)).features}c([d({type:[TIe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],tl.prototype,"sharedNamedTraceConfigurations",void 0),c([d({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],tl.prototype,"type",void 0),c([d({readOnly:!0})],tl.prototype,"serviceTerritoryFeatureLayerId",null),c([d({readOnly:!0})],tl.prototype,"networkSystemLayers",null),c([d({readOnly:!0})],tl.prototype,"terminalConfigurations",null),c([d({readOnly:!0})],tl.prototype,"domainNetworkNames",null),c([d({readOnly:!0})],tl.prototype,"hasTelecomNetwork",null),tl=c([R("esri.networks.UtilityNetwork")],tl);const YK=tl,DIe=Object.freeze(Object.defineProperty({__proto__:null,default:YK},Symbol.toStringTag,{value:"Module"}));let Wm=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};c([d({type:String,json:{write:{isRequired:!0}}})],Wm.prototype,"expression",void 0),c([d({type:["number","string"],json:{write:!0}})],Wm.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],Wm.prototype,"title",void 0),Wm=c([R("esri.webdoc.geotriggersInfo.ExpressionInfo")],Wm);const JK=Wm,N_=new Xe({deviceLocation:"device-location"});let r0=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};c([d({type:JK,json:{write:!0}})],r0.prototype,"filterExpression",void 0),c([d({type:N_.apiValues,readOnly:!0,json:{type:N_.jsonValues,read:N_.read,write:N_.write}})],r0.prototype,"type",void 0),r0=c([R("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],r0);const LIe=r0;let s0=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.geometry=null,this.where=null}};c([d({types:Yy,json:{read:Nl,write:!0}})],s0.prototype,"geometry",void 0),c([d({type:String,json:{write:!0}})],s0.prototype,"where",void 0),s0=c([R("esri.webdoc.geotriggersInfo.FeatureFilter")],s0);const NIe=s0;let qm=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};c([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],qm.prototype,"layerId",void 0),c([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],qm.prototype,"layerUrl",void 0),c([Re({featureLayer:"feature-layer"},{readOnly:!0})],qm.prototype,"type",void 0),qm=c([R("esri.webdoc.geotriggersInfo.FeatureLayerSource")],qm);const FIe=qm;let tp=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};c([d({type:FIe,json:{write:{isRequired:!0}}})],tp.prototype,"fenceSource",void 0),c([d({type:NIe,json:{write:!0}})],tp.prototype,"filter",void 0),c([d({type:Number,json:{write:!0}})],tp.prototype,"bufferDistance",void 0),c([Re({features:"features"},{readOnly:!0})],tp.prototype,"type",void 0),tp=c([R("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],tp);const jIe=tp;let xS=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.type="fence"}};c([Re({fence:"fence"},{readOnly:!0})],xS.prototype,"type",void 0),xS=c([R("esri.webdoc.geotriggersInfo.Geotrigger")],xS);const ZK=xS;let n0=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};c([d({type:JK,json:{write:!0}})],n0.prototype,"expressionInfo",void 0),c([d({type:[String],json:{write:!0}})],n0.prototype,"requestedActions",void 0),n0=c([R("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],n0);const zIe=n0,VIe=new Xe({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),UIe=new Xe({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),F_=new Xe({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let oa=class extends ZK{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};c([Re(VIe)],oa.prototype,"enterExitRule",void 0),c([d({type:LIe,json:{write:{isRequired:!0}}})],oa.prototype,"feed",void 0),c([Re(UIe)],oa.prototype,"feedAccuracyMode",void 0),c([d({type:F_.apiValues,json:{type:F_.jsonValues,read:F_.read,write:{writer:F_.write,isRequired:!0}}})],oa.prototype,"fenceNotificationRule",void 0),c([d({type:jIe,json:{write:{isRequired:!0}}})],oa.prototype,"fenceParameters",void 0),c([d({type:String,json:{write:!0}})],oa.prototype,"name",void 0),c([d({type:zIe,json:{write:!0}})],oa.prototype,"notificationOptions",void 0),c([Re({fence:"fence"},{readOnly:!0})],oa.prototype,"type",void 0),oa=c([R("esri.webdoc.geotriggersInfo.FenceGeotrigger")],oa);const HIe=oa,BIe={base:ZK,key:"type",typeMap:{fence:HIe}};let SS=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.geotriggers=null}};c([d({types:[BIe],json:{write:{isRequired:!0}}})],SS.prototype,"geotriggers",void 0),SS=c([R("esri.webdoc.GeotriggersInfo")],SS);const GIe=SS;let ES=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.enabled=!0}};c([d({type:Boolean,nonNullable:!0,json:{write:!0}})],ES.prototype,"enabled",void 0),ES=c([R("esri.webdoc.ips.AppleIPSProperties")],ES);const WIe=ES;let CS=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.enabled=!0}};c([d({type:Boolean,nonNullable:!0,json:{write:!0}})],CS.prototype,"enabled",void 0),CS=c([R("esri.webdoc.ips.GNSSProperties")],CS);const qIe=CS;let Ym=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};c([d({type:Boolean,nonNullable:!0,json:{write:!0}})],Ym.prototype,"enabled",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],Ym.prototype,"distance",void 0),c([d({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],Ym.prototype,"units",void 0),Ym=c([R("esri.webdoc.ips.PathSnappingProperties")],Ym);const YIe=Ym;let TS=class extends Fe.ClonableMixin(X){constructor(t){super(t),this.enabled=!0}};c([d({type:Boolean,nonNullable:!0,json:{write:!0}})],TS.prototype,"enabled",void 0),TS=c([R("esri.webdoc.ips.SmoothingProperties")],TS);const JIe=TS;let ip=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};c([d({type:WIe,json:{name:"AppleIPS",write:!0}})],ip.prototype,"appleIPS",void 0),c([d({type:qIe,json:{name:"GNSS",write:!0}})],ip.prototype,"gnss",void 0),c([d({type:JIe,json:{write:!0}})],ip.prototype,"smoothing",void 0),c([d({type:YIe,json:{write:!0}})],ip.prototype,"pathSnapping",void 0),ip=c([R("esri.webdoc.ips.Configuration")],ip);const ZIe=ip;let Jm=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:s}=i;if(s)return new We({id:s,portal:r?.portal})}writePortalItem(e,i){e?.id&&(i.itemId=e.id)}};c([d({type:We,json:{write:{isRequired:!0}}})],Jm.prototype,"portalItem",void 0),c([de("portalItem",["itemId"])],Jm.prototype,"readPortalItem",null),c([me("portalItem",{itemId:{type:String}})],Jm.prototype,"writePortalItem",null),Jm=c([R("esri.webdoc.ips.PositioningService")],Jm);const XIe=Jm;let o0=class extends Fe.ClonableMixin(X){constructor(e){super(e),this.positioningService=null,this.configuration=null}};c([d({type:XIe,json:{write:{isRequired:!0}}})],o0.prototype,"positioningService",void 0),c([d({type:ZIe,json:{write:!0}})],o0.prototype,"configuration",void 0),o0=c([R("esri.webdoc.IPSInfo")],o0);const KIe=o0,QIe={currentVersion:XZ,createInitialViewProperties:()=>new XE,parseVersion:Ig.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},e$e=_e.ofType(YK);var uy;let rp=(uy=class extends sCe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return QIe}loadAll(){return mT(this,e=>{e(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new W("webmap:empty-resource","Expected a JSON resource but got nothing")}},uy.VERSION=XZ,uy);c([d({type:GIe,json:{write:!0}})],rp.prototype,"geotriggersInfo",void 0),c([d({type:KIe,json:{write:!0,name:"mapIPSInfo"}})],rp.prototype,"ipsInfo",void 0),c([d({json:{write:!0}})],rp.prototype,"presentation",void 0),c([d({type:e$e,json:{read:!0,write:!0}})],rp.prototype,"utilityNetworks",void 0),rp=c([R("esri.WebMap")],rp);const XK=rp;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.9 */function j_(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=t$e(t);if(!e){const i=l$e(t);if(!i){QK(t);return}return MU(i,t,!0),i}return i$e(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?r$e(e,t):e.localName==="arcgis-placement"?s$e(e,t):MU(e,t,!1)),e}function t$e({el:t}){for(let e=t.parentElement;e;e=e?.parentElement??null){if(TU.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&TU.has(e.ownedBy.localName))return e.ownedBy}}const TU=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function i$e(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function ZT(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let s=function(n){n.target===t&&(ZT(t,e,i),t.removeEventListener(i,s))};t.addEventListener(i,s)}}const r$e=(t,e)=>ZT(t,i=>{e.el.childElem&&t.content!=null&&t.content.append(e.el.childElem),t.expandIcon=e.icon||e.widget?.icon||t.expandIcon,e.position=t.position,e.el.view=i}),s$e=(t,e)=>ZT(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),MU=(t,e,i)=>ZT(t,r=>{i?QK(e):e.el.childElem&&n$e(t,e),e.el.view=r},"arcgisViewReadyChange");function n$e(t,e){const i=e.el.childElem??e.el,r=t?.childElem,s=[...t.children],n={};for(const l of s){if(l===r)continue;const u=l.position??"manual";n[u]??=[],n[u].push({child:l,position:u,index:s.indexOf(l)})}const o=n[e.position??"manual"]?.findIndex(({child:l})=>l===e.el),a=t.view.ui;a.remove(i),a.add(i,{position:e.position,index:o})}function o$e(t,e){return e===void 0||t?.targetGeometry!==e?.targetGeometry||t?.rotation!==e?.rotation||t?.scale!==e?.scale}function a$e(t,e){return KK(e?.center,t)}function KK(t,e){if(typeof e=="string")return KK(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],s=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||s!==t.z)return e}else if(e&&!t?.equals(e))return e}function QK(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function l$e(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),s=t.el.getRootNode();return(r?void 0:s.querySelector(`#${i}`))??s.querySelector(i)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.9 */const u$e=Hw`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,c$e=s9(XK),h$e=s9(nX),tw=class tw extends Gp{constructor(){super(),this._map=c$e(this),this.view=h$e(this),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewChange=Fk(),this.arcgisViewClick=Hr(()=>this.view,"click"),this.arcgisViewDoubleClick=Hr(()=>this.view,"double-click"),this.arcgisViewDrag=Hr(()=>this.view,"drag"),this.arcgisViewHold=Hr(()=>this.view,"hold"),this.arcgisViewImmediateClick=Hr(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Hr(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Hr(()=>this.view,"key-down"),this.arcgisViewKeyUp=Hr(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Hr(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Hr(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Hr(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Hr(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Hr(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Hr(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Hr(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Hr(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Hr(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=Fk(),this.view.ui={components:["attribution"]}}get center(){return this.view.center}set center(e){const i=a$e(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){e&&!this.extent?.equals(e)&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){return this._map.portalItem?.id}set itemId(e){gne(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){o$e(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){this.map?.add(e,i)}async addLayers(e,i){this.map?.addMany(e,i)}async addTable(e){this.map?.tables.add(e)}async addTables(e,i){this.map?.tables.addMany(e,i)}async closePopup(){this.view.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){await this.view.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async whenLayerView(e){return await this.view.whenLayerView(e)}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e?.()).catch(i)}load(){const e=this;e.el.childElem=document.createElement("div"),e.el.append(e.el.childElem),this.view.container=e.el.childElem}loaded(){this.map||=this._map,this.manager.onLifecycle(()=>[Ue(()=>this.map,e=>{e&&(this._map=e)},{initial:!0,sync:!0}),Ue(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),Ue(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}};tw.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9},tw.shadowRootOptions=AS,tw.styles=u$e;let GO=tw;v8("arcgis-map",GO);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function d$e(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const p$e=()=>d$e([2,1,1,1,3]),f$e=t=>eQ(void 0,t),DZe=t=>e=>eQ(e,t);class m$e extends OP{constructor(e,i){super(e);const r=this.exports;try{Xm(this.component);const s=i(this.component,this),n=this.exports!==r;if(vie(s)){n||this.setProvisionalExports(s);const o=s.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this.P.reject(s),console.error(s)}}catchUpLifecycle(){}}const eQ=XP(m$e),g$e=(t,e)=>new y$e(t,e);class y$e extends OP{#e;#t;#i;constructor(e,i){super(),this.#t=e,this.#i=i,this.#e=new MutationObserver(r=>{r.forEach(s=>{e.includes(s.attributeName)&&i.call(this.component,this.component.el.getAttribute(s.attributeName),s.oldValue,s.attributeName)})})}hostConnected(){this.#t.forEach(e=>{this.component.el.hasAttribute(e)&&this.#i.call(this.component,null,this.component.el.getAttribute(e),e)}),this.#e.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this.#t})}hostDisconnected(){this.#e.disconnect()}}const tQ=t=>(e={})=>f$e((i,r)=>{const s=kB(i.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>Gte(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:u,lang:h})=>{const p={...u,_lang:h,_t9nLocale:l,_loading:!1};r.exports=p;const m=u.componentLabel;typeof m=="string"&&"label"in i&&i.label==null&&(i.label??=m),a(o.messageOverrides)},e.name));const a=l=>{const u=r.exports,h=u._original??u,p=iQ(h,l);l&&(p._original=h),r.exports=p};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(n,!1),r.ready):n}),iQ=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,s])=>{typeof s=="object"?i[r]=iQ(t[r],s):i[r]=s??t[r]}),i},b$e=t=>w$e,v$e="arcgisPropertyChange",w$e=(...t)=>{const e=Ly(),i=AP(v$e,void 0,e);let r=!0;return e.manager.onUpdated(s=>{if(r||!e.el.isConnected){r=!1;return}for(const n of t)s.has(n)&&i.emit({name:n})}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const rQ=tQ(DZ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Qf={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},_$e=Hw`:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,LC=class LC extends Gp{constructor(){super(...arguments),this.messages=rQ({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){this.type!=="determinate-value"||this.formatter?.resolvedOptions().locale===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:s,type:n,value:o}=this,a=e.id||p$e(),l=n!=="indeterminate",u=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?u.toString():void 0,Bie(this.el,"id",a),this.el.role="progressbar",Yn`<div class=${Ds(Qf.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&Yn`<div class=${Ds(Qf.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&s&&Yn`<div class=${Ds(Qf.text)}>${s}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:s}=this,n=i?this.getInlineSize(r):this.getSize(r),a=n*.45;let l;if(e==="progress"){const u=2*a*Math.PI,h=(this.type.startsWith("determinate")?s:24)/100*u,p=u-h;l={"stroke-dasharray":`${h} ${p}`}}return Yn`<svg aria-hidden=true class=${Ds({[Qf.ring]:!0,[Qf.trackRing]:e==="track",[Qf.progressRing]:e==="progress"})} style=${Hie(l)} viewBox=${`0 0 ${n} ${n}`}>${Dk`<circle cx=${n/2} cy=${n/2} r=${a??Et} />`}</svg>`}};LC.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},LC.styles=_$e;let lC=LC;DL("calcite-loader",lC);const LZe=Object.freeze(Object.defineProperty({__proto__:null,Loader:lC},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var x$e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],WO=x$e.join(","),sQ=typeof Element>"u",$w=sQ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,uC=!sQ&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},cC=function t(e,i){var r;i===void 0&&(i=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),n=s===""||s==="true",o=n||i&&e&&t(e.parentNode);return o},S$e=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},E$e=function(e,i,r){if(cC(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(WO));return i&&$w.call(e,WO)&&s.unshift(e),s=s.filter(r),s},C$e=function t(e,i,r){for(var s=[],n=Array.from(e);n.length;){var o=n.shift();if(!cC(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:o,candidates:u})}else{var h=$w.call(o,WO);h&&r.filter(o)&&(i||!e.includes(o))&&s.push(o);var p=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!cC(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(p&&m){var y=t(p===!0?o.children:p.children,!0,r);r.flatten?s.push.apply(s,y):s.push({scopeParent:o,candidates:y})}else n.unshift.apply(n,o.children)}}return s},nQ=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},oQ=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||S$e(e))&&!nQ(e)?0:e.tabIndex},T$e=function(e,i){var r=oQ(e);return r<0&&i&&!nQ(e)?0:r},M$e=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},aQ=function(e){return e.tagName==="INPUT"},k$e=function(e){return aQ(e)&&e.type==="hidden"},R$e=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},I$e=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},$$e=function(e){if(!e.name)return!0;var i=e.form||uC(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=I$e(s,e.form);return!n||n===e},A$e=function(e){return aQ(e)&&e.type==="radio"},O$e=function(e){return A$e(e)&&!$$e(e)},P$e=function(e){var i,r=e&&uC(e),s=(i=r)===null||i===void 0?void 0:i.host,n=!1;if(r&&r!==e){var o,a,l;for(n=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!n&&s;){var u,h,p;r=uC(s),s=(u=r)===null||u===void 0?void 0:u.host,n=!!((h=s)!==null&&h!==void 0&&(p=h.ownerDocument)!==null&&p!==void 0&&p.contains(s))}}return n},kU=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},D$e=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var n=$w.call(e,"details>summary:first-of-type"),o=n?e.parentElement:e;if($w.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,u=uC(e);if(l&&!l.shadowRoot&&s(l)===!0)return kU(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(P$e(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return kU(e);return!1},L$e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return $w.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},N$e=function(e,i){return!(i.disabled||cC(i)||k$e(i)||D$e(i,e)||R$e(i)||L$e(i))},RU=function(e,i){return!(O$e(i)||oQ(i)<0||!N$e(e,i))},F$e=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},j$e=function t(e){var i=[],r=[];return e.forEach(function(s,n){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=T$e(a,o),u=o?t(s.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:u})}),r.sort(M$e).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},z$e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=C$e([e],i.includeContainer,{filter:RU.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:F$e}):r=E$e(e,i.includeContainer,RU.bind(null,i)),j$e(r)};const V$e={getShadowRoot:!0};function U$e(t){const e="dir",i=`[${e}]`,r=ub(t,i);return r?r.getAttribute(e):"ltr"}function u3(t){return t.getRootNode()}function NZe(t){const e=u3(t);return"host"in e?e:null}function lQ(t){return t.host||null}function c3(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=u3(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||c3(lQ(r),{selector:e,id:i})}function ub(t,e){return t?t.closest(e)||ub(lQ(u3(t)),e):null}function H$e(t){return typeof t?.setFocus=="function"}async function B$e(t){if(t)return H$e(t)?t.setFocus():t.focus()}function G$e(t){if(t)return z$e(t,V$e)[0]??t}function FZe(t){G$e(t)?.focus()}function W$e(t,e){return t.filter(i=>i.matches(e))}function jZe(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function q$e(t){return(!!t).toString()}function zZe(t){return K$e(t)||Z$e(t)}function Y$e(t){return X$e(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function J$e(t){for(const e of t.childNodes)if(e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()!==""||e.nodeType===Node.ELEMENT_NODE)return!0;return!1}function Z$e(t){return!!Y$e(t)}function X$e(t){return t.currentTarget.assignedNodes({flatten:!0})}function K$e(t){return!!Q$e(t).length}function Q$e(t,e){return eAe(t.target,e)}function eAe(t,e){const i=t.assignedElements({flatten:!0});return e?W$e(i,e):i}function VZe(t){return!!(t.isPrimary&&t.button===0)}function UZe(t){return t.detail===0}const HZe=(t,e,i,r=!0)=>{const s=t.indexOf(e),n=s===0,o=s===t.length-1;r&&(i=i==="previous"&&n?"last":i==="next"&&o?"first":i);let a;return i==="previous"?a=t[s-1]||t[r?t.length-1:s]:i==="next"?a=t[s+1]||t[r?0:s]:i==="last"?a=t[t.length-1]:a=t[0],B$e(a),a};function tAe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function BZe(t,e,i,r){return uQ(t,e,"animation",i,r)}async function GZe(t,e,i,r){return uQ(t,e,"transition",i,r)}async function iAe(t,e){await qO(),t?.(),await qO(),e?.()}function IU(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(s=>s[r]===i)}async function uQ(t,e,i,r,s){let n=IU(t,i,e);if(n||(await qO(),n=IU(t,i,e)),!n)return iAe(r,s);r?.();try{await n.finished}catch{}finally{s?.()}}function qO(){return new Promise(t=>requestAnimationFrame(()=>t()))}function WZe(t){switch(!0){case t.endsWith("px"):return parseFloat(t);case t.endsWith("vw"):return window.innerWidth/100*parseFloat(t);case t.endsWith("vh"):return window.innerHeight/100*parseFloat(t);default:return 0}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function YO(t,e,i){const r=rAe(t);return new r(e,i)}function rAe(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,s){return this.observedEntry.push({target:r,options:s}),super.observe(r,s)}unobserve(r){const s=this.observedEntry.filter(n=>n.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(n=>this.observe(n.target,n.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const $U=new Set,AU={trace:0,debug:1,info:2,warn:4,error:8,off:10};function sAe(t){return AU[t]>=AU[LSe]}function Zm(t,...e){if(!sAe(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let ok;const nAe={debug:t=>Zm("debug",t),info:t=>Zm("info",t),warn:t=>Zm("warn",t),error:t=>Zm("error",t),trace:t=>Zm("trace",t),deprecated:oAe};function oAe(t,{component:e,name:i,suggested:r,removalVersion:s}){const n=`${t}:${t==="component"?"":e}${i}`;if($U.has(n))return;$U.add(n);const o=Array.isArray(r);o&&!ok&&(ok=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${s==="future"?"a future version":`v${s}`}.${r?` Use ${o?ok.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;Zm("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const aAe={flipRtl:"flip-rtl"},cQ={},ak={},hQ={s:16,m:24,l:32};function dQ({icon:t,scale:e}){const i=hQ[e],r=cAe(t),s=r.charAt(r.length-1)==="F";return`${s?r.substring(0,r.length-1):r}${i}${s?"F":""}`}async function lAe(t){const e=dQ(t),i=pQ(e);if(i)return i;ak[e]||(ak[e]=fetch(DZ(`./assets/icon/${e}.json`)).then(s=>s.json()).catch(()=>(nAe.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await ak[e];return cQ[e]=r,r}function uAe(t){return pQ(dQ(t))}function pQ(t){return cQ[t]}function cAe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const s=/[a-z]/i;t=i.map((n,o)=>n.replace(s,function(l,u){return o===0&&u===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const hAe=Hw`:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,NC=class NC extends Gp{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver?.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const s={icon:e,scale:i},n=uAe(s)||await lAe(s);e===this.icon&&(this.pathData=n)}waitUntilVisible(e){if(this.intersectionObserver=YO("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:s,textLabel:n}=this,o=U$e(e),a=hQ[s],l=!!n,u=[].concat(r||"");return this.el.ariaHidden=q$e(!l),this.el.ariaLabel=l?n:null,this.el.role=l?"img":null,Yn`<svg aria-hidden=true class=${Ds({[aAe.flipRtl]:o==="rtl"&&i,svg:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${u.map(h=>typeof h=="string"?Dk`<path d=${h??Et} />`:Dk`<path d=${h.d??Et} opacity=${("opacity"in h?h.opacity:1)??Et} />`)}</svg>`}};NC.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},NC.styles=hAe;let hC=NC;DL("calcite-icon",hC);const dAe=Object.freeze(Object.defineProperty({__proto__:null,Icon:hC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const H0=(t,e)=>{const i=t._$AN;if(i===void 0)return!1;for(const r of i)r._$AO?.(e,!1),H0(r,e);return!0},dC=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while(i?.size===0)},fQ=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),mAe(e)}};function pAe(t){this._$AN!==void 0?(dC(this),this._$AM=t,fQ(this)):this._$AM=t}function fAe(t,e=!1,i=0){const r=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(r))for(let n=i;n<r.length;n++)H0(r[n],!1),dC(r[n]);else r!=null&&(H0(r,!1),dC(r));else H0(this,t)}const mAe=t=>{t.type==DP.CHILD&&(t._$AP??=fAe,t._$AQ??=pAe)};class gAe extends NP{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),fQ(this),this.isConnected=e._$AU}_$AO(e,i=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),i&&(H0(this,e),dC(this))}setValue(e){if(jie(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yAe=()=>new bAe;class bAe{}const lk=new WeakMap,OU=LP(class extends gAe{render(t){return Et}update(t,[e]){const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),Et}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=lk.get(e);i===void 0&&(i=new WeakMap,lk.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?lk.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h3=Symbol.for(""),vAe=t=>{if(t?.r===h3)return t?._$litStatic$},qZe=t=>({_$litStatic$:t,r:h3}),PU=(t,...e)=>({_$litStatic$:e.reduce((i,r,s)=>i+(n=>{if(n._$litStatic$!==void 0)return n._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${n}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[s+1],t[0]),r:h3}),DU=new Map,wAe=t=>(e,...i)=>{const r=i.length;let s,n;const o=[],a=[];let l,u=0,h=!1;for(;u<r;){for(l=e[u];u<r&&(n=i[u],(s=vAe(n))!==void 0);)l+=s+e[++u],h=!0;u!==r&&a.push(n),o.push(l),u++}if(u===r&&o.push(e[r]),h){const p=o.join("$$lit$$");(e=DU.get(p))===void 0&&(o.raw=o,DU.set(p,e=o)),i=a}return t(e,...i)},_Ae=wAe(Yn);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const xAe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function SAe(t){return`${t.split("-").map((r,s)=>s===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${xAe.includes(t)?"Input":"Change"}`}const JO="hidden-form-input";function d3(t){return"checked"in t}const ZO=new WeakMap,p3=new WeakSet;function EAe(t,e){if(ub(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let s=!1;return t.addEventListener(r,n=>{s=n.composedPath().some(o=>p3.has(o)),n.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),s}function CAe(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function mQ(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?ub(t,"calcite-radio-button-group"):t}const TAe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function LU(t){const e=t?.target,i=e?.validationMessage,r=mQ(e?.parentElement);if(!r)return;const s=r?.nodeName?.toLowerCase(),n=s?.split("-");if(n.length<2||n[0]!=="calcite")return;t?.preventDefault(),"validity"in r&&(r.validity=e?.validity),r.dispatchEvent(TAe),CAe(r,{message:i,icon:!0,status:"invalid"});const o=SAe(s);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e?.validity)},{once:!0})}function MAe(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",LU,!0),e.requestSubmit(),e.removeEventListener("invalid",LU,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r?.validationMessage){r?.setFocus();break}}),!0):!1}function kAe(t){t.formEl?.reset()}function YZe(t){const{el:e,value:i}=t,r=gQ(t);if(!r||EAe(r,e))return;t.formEl=r,t.defaultValue=i,d3(t)&&(t.defaultChecked=t.checked);const s=RAe.bind(t);r.addEventListener("reset",s),ZO.set(t.el,s),p3.add(e)}function gQ(t){const{el:e,form:i}=t;return i?c3(e,{id:i}):ub(e,"form")}function RAe(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),d3(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,this.onFormReset?.()}function JZe(t){const{el:e,formEl:i}=t;if(!i)return;const r=ZO.get(e);i.removeEventListener("reset",r),ZO.delete(e),t.formEl=null,p3.delete(e)}const IAe="calciteInternalHiddenInputInput",yQ=t=>{t.target.dispatchEvent(new CustomEvent(IAe,{bubbles:!0}))},NU=t=>t.removeEventListener("input",yQ);function $Ae(t){const{el:e,formEl:i,name:r,value:s}=t,{ownerDocument:n}=e,o=e.querySelectorAll(`input[slot="${JO}"]`);if(!i||!r){o.forEach(p=>{NU(p),p.remove()});return}const a=Array.isArray(s)?s:[s],l=[],u=new Set;o.forEach(p=>{const m=a.find(y=>y==p.value);m!=null?(u.add(m),FU(t,p,m)):l.push(p)});let h;a.forEach(p=>{if(u.has(p))return;let m=l.pop();m||(m=n.createElement("input"),m.ariaHidden="true",m.slot=JO),h||(h=n.createDocumentFragment()),h.append(m),m.addEventListener("input",yQ),FU(t,m,p)}),h&&e.append(h),l.forEach(p=>{NU(p),p.remove()})}function FU(t,e,i){const{defaultValue:r,disabled:s,form:n,name:o,required:a}=t;e.defaultValue=r,e.disabled=s,e.name=o,e.required=a,e.tabIndex=-1,n?e.setAttribute("form",n):e.removeAttribute("form"),d3(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",t.syncHiddenFormInput?.(e);const l=mQ(t.el);if(l&&"validity"in l)for(const u in{...e?.validity})l.validity[u]=e.validity[u]}const ZZe=({component:t})=>($Ae(t),Yn`<slot name=${JO}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function AAe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function bQ(t){t.target.disabled&&t.preventDefault()}const vQ=["mousedown","mouseup","click"];function wQ(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const pC={capture:!0};function OAe(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),PAe(t);return}LAe(t),t.el.removeAttribute("aria-disabled")}function PAe(t){t.el.click=AAe,DAe(t.el)}function DAe(t){t.addEventListener("pointerdown",bQ,pC),vQ.forEach(e=>t.addEventListener(e,wQ,pC))}function LAe(t){delete t.el.click,NAe(t.el)}function NAe(t){t.removeEventListener("pointerdown",bQ,pC),vQ.forEach(e=>t.removeEventListener(e,wQ,pC))}const FAe={container:"interaction-container"},jAe=({children:t,disabled:e})=>Yn`<div class=${Ds(FAe.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const _Q="calciteInternalLabelClick",f3="calciteInternalLabelConnected",XO="calciteInternalLabelDisconnected",jU="calcite-label",Ry=new WeakMap,B0=new WeakMap,Aw=new WeakMap,fC=new WeakMap,Dp=new Set,zAe=t=>{const{id:e}=t,i=e&&c3(t,{selector:`${jU}[for="${e}"]`});if(i)return i;const r=ub(t,jU);return!r||VAe(r,t)?null:r};function VAe(t,e){let i;const r="custom-element-ancestor-check",s=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,s,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,s),i.filter(o=>o!==e&&o!==t).filter(o=>o.tagName?.includes("-")).length>0}function m3(t){if(!t)return;const e=zAe(t.el);if(B0.has(e)&&e===t.labelEl||!e&&Dp.has(t))return;const i=GAe.bind(t);if(e){t.labelEl=e;const r=Ry.get(e)||[];r.push(t),Ry.set(e,r.sort(xQ)),B0.has(t.labelEl)||(B0.set(t.labelEl,zU),t.labelEl.addEventListener(_Q,zU)),Dp.delete(t),document.removeEventListener(f3,Aw.get(t)),fC.set(t,i),document.addEventListener(XO,i)}else Dp.has(t)||(i(),document.removeEventListener(XO,fC.get(t)))}function UAe(t){if(!t||(Dp.delete(t),document.removeEventListener(f3,Aw.get(t)),document.removeEventListener(XO,fC.get(t)),Aw.delete(t),fC.delete(t),!t.labelEl))return;const e=Ry.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(_Q,B0.get(t.labelEl)),B0.delete(t.labelEl)),Ry.set(t.labelEl,e.filter(i=>i!==t).sort(xQ)),t.labelEl=null}function xQ(t,e){return tAe(t.el,e.el)?-1:1}function HAe(t){return t.label||t.labelEl?.textContent?.trim()||""}function zU(t){const e=t.detail.sourceEvent.target,i=Ry.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const n=i[0];n.disabled||n.onLabelClick(t)}function BAe(){Dp.has(this)&&m3(this)}function GAe(){Dp.add(this);const t=Aw.get(this)||BAe.bind(this);Aw.set(this,t),document.addEventListener(f3,t)}async function XZe(t){if(await t.componentOnReady(),Ry.has(t))return;const i=t.ownerDocument?.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const r of Dp)if(r.el===i){m3(r);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function VU(t){return t==="l"?"m":"s"}async function WAe(t){await t.componentOnReady(),await t.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Rn={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},qAe=Hw`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);box-shadow:inset 0 0 0 0 var(--calcite-button-shadow-color, var(--calcite-internal-button-shadow-color, var(--calcite-color-transparent)));border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover);--calcite-internal-button-shadow-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-shadow-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press);--calcite-internal-button-shadow-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-shadow-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover);--calcite-internal-button-shadow-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-shadow-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press);--calcite-internal-button-shadow-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-shadow-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,FC=class FC extends Gp{constructor(){super(...arguments),this.attributeWatch=g$e(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentEl=yAe(),this.mutationObserver=YO("mutation",()=>this.updateHasContent()),this.resizeObserver=YO("resize",()=>this.setTooltipText()),this.messages=rQ(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(){await WAe(this),this.childEl?.focus()}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),m3(this),this.formEl=gQ(this)}async load(){this.updateHasContent()}updated(){OAe(this)}loaded(){this.setTooltipText()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),UAe(this),this.resizeObserver?.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=J$e(this.el)}setupTextContentObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?MAe(this):e==="reset"&&kAe(this))}setTooltipText(){const{contentEl:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){this.childEl=e,e&&this.resizeObserver?.observe(e)}render(){const e=this.href?"a":"button",i=this.href?PU`a`:PU`button`,r=this.loading?Yn`<div class=${Ds(Rn.buttonLoader)}><calcite-loader class=${Ds(this.loading?Rn.loadingIn:Rn.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,s=!this.iconStart&&!this.iconEnd,n=Yn`<calcite-icon class=${Ds({[Rn.icon]:!0,[Rn.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${VU(this.scale)}></calcite-icon>`,o=Yn`<calcite-icon class=${Ds({[Rn.icon]:!0,[Rn.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${VU(this.scale)}></calcite-icon>`,a=Yn`<span class=${Ds(Rn.content)} ${OU(this.contentEl)}><slot></slot></span>`;return jAe({disabled:this.disabled,children:_Ae`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:HAe(this)} aria-live=polite class=${Ds({[Rn.buttonPadding]:s,[Rn.buttonPaddingShrunk]:!s,[Rn.contentSlotted]:this.hasContent,[Rn.iconStartEmpty]:!this.iconStart,[Rn.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Et} href=${(e==="a"&&this.href)??Et} name=${(e==="button"&&this.name)??Et} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Et} tabindex=${(this.disabled?-1:null)??Et} target=${(e==="a"&&this.target)??Et} title=${this.tooltipText??Et} type=${(e==="button"?this.type:null)??Et} ${OU(this.setChildEl)}>${r}${this.iconStart?n:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};FC.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Gie},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},FC.styles=qAe;let mC=FC;DL("calcite-button",mC);const g3=Object.freeze(Object.defineProperty({__proto__:null,Button:mC},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.9 */const YAe=tQ(_re);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.9 */const JAe=t=>XAe(t);let ZAe=class extends PP{#e=bre(void 0);#t=void 0;#i=!1;constructor(e){super(e);const{el:i}=e,r=i.view;this.setProvisionalExports(void 0),Object.defineProperty(i,"view",{get:()=>this.#e.value,set:s=>{if(this.exports===s)return;const n=i.view;this.#e.value=s,this.exports=s,this.component.requestUpdate("view",n),this.#n()},configurable:!0,enumerable:!0}),e!==i&&Object.defineProperty(e,"view",{get:()=>i.view,set:s=>{i.view=s}}),queueMicrotask(()=>r?i.view=r:0)}hostConnected(){this.component.manager.hasDestroy&&(this.#t??=Ws(()=>this.#e.value?.destroyed,()=>void this.component.destroy?.().catch(console.error),{sync:!0}),this.onDestroy(()=>this.#t?.remove())),this.component.manager.loadedCalled&&j_(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){const{el:e}=this.component,i=e.shadowRoot?.firstElementChild??e.firstElementChild??void 0;e.childElem??=i,this.#i=!0,this.#n(),e.isConnected&&j_(this.component)}hostDisconnected(){typeof this.component.el.childElem=="object"&&this.#e.value?.ui?.remove(this.component.el.childElem)}hostUpdate(e){e.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&j_(this.component),e.has("referenceElement")&&j_(this.component)}#n(){!this.#i||this.#e.value==null||(this.#i=!1,this.component.arcgisReady.emit())}};const XAe=XP(ZAe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.9 */const em={base:"arcgis-zoom",horizontalLayout:"arcgis-zoom--horizontal",button:"esri-widget--button",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function KAe(t){if(t.type==="3d")return!!t.ready;if(!t?.ready)return!1;const e=SQ(t),i=t.constraints?.effectiveMaxScale;return i===0||e>i}function QAe(t){if(t.type==="3d")return!!t.ready;if(!t?.ready)return!1;const e=SQ(t),i=t.constraints?.effectiveMinScale;return i===0||e<i}function SQ(t){const e=t?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??t?.scale??0}const eOe=Hw`@layer{arcgis-zoom,.arcgis-zoom{display:flex;flex-flow:column nowrap;box-shadow:0 1px 2px #0000004d}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}}`,iw=class iw extends Gp{constructor(){super(...arguments),this.messages=YAe({}),this.view=JAe(this),this.canZoomIn=!1,this.canZoomOut=!1,this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.position="top-left",this.state="disabled",this.arcgisPropertyChange=b$e()("state"),this.arcgisReady=Fk()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:e}=this;!this.canZoomIn||!e||(e.type==="2d"?e.mapViewNavigation.zoomIn():ow(e.goTo({zoomFactor:2})))}async zoomOut(){const{view:e}=this;!this.canZoomOut||!e||(e.type==="2d"?e.mapViewNavigation.zoomOut():ow(e.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[Ws(()=>this.view?.stationary,()=>{this.canZoomIn=KAe(this.view),this.canZoomOut=QAe(this.view)},{initial:!0}),Ws(()=>this.view?.ready?"ready":"disabled",e=>{this.state=e},{sync:!0,initial:!0})])}render(){const e={[em.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this,{zoomIn:s,zoomOut:n}=this.messages;return Yn`<div class=${Ds(TM(em.base,e))}><calcite-button class=${Ds(TM(em.button,em.zoomIn))} .disabled=${!i} icon-start=plus kind=neutral .label=${s} @click=${this.zoomIn} title=${s??EN}></calcite-button><calcite-button class=${Ds(TM(em.button,em.zoomOut))} .disabled=${!r} icon-start=minus kind=neutral .label=${n} @click=${this.zoomOut} title=${n??EN}></calcite-button></div>`}};iw.properties={canZoomIn:16,canZoomOut:16,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},iw.shadowRootOptions=AS,iw.styles=eOe;let KO=iw;v8("arcgis-zoom",KO);var uk=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ag={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ow={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},gn=function(t,e){return e===void 0&&(e=2),("000"+t).slice(e*-1)},bo=function(t){return t===!0?1:0};function UU(t,e){var i;return function(){var r=this,s=arguments;clearTimeout(i),i=setTimeout(function(){return t.apply(r,s)},e)}}var ck=function(t){return t instanceof Array?t:[t]};function Ts(t,e,i){if(i===!0)return t.classList.add(e);t.classList.remove(e)}function zt(t,e,i){var r=window.document.createElement(t);return e=e||"",i=i||"",r.className=e,i!==void 0&&(r.textContent=i),r}function z_(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function EQ(t,e){if(e(t))return t;if(t.parentNode)return EQ(t.parentNode,e)}function V_(t,e){var i=zt("div","numInputWrapper"),r=zt("input","numInput "+t),s=zt("span","arrowUp"),n=zt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var o in e)r.setAttribute(o,e[o]);return i.appendChild(r),i.appendChild(s),i.appendChild(n),i}function In(t){try{if(typeof t.composedPath=="function"){var e=t.composedPath();return e[0]}return t.target}catch{return t.target}}var hk=function(){},gC=function(t,e,i){return i.months[e?"shorthand":"longhand"][t]},tOe={D:hk,F:function(t,e,i){t.setMonth(i.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,i){t.setHours(t.getHours()%12+12*bo(new RegExp(i.amPM[1],"i").test(e)))},M:function(t,e,i){t.setMonth(i.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,i){var r=parseInt(e),s=new Date(t.getFullYear(),0,2+(r-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+i.firstDayOfWeek),s},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:hk,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:hk,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},fp={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},G0={Z:function(t){return t.toISOString()},D:function(t,e,i){return e.weekdays.shorthand[G0.w(t,e,i)]},F:function(t,e,i){return gC(G0.n(t,e,i)-1,!1,e)},G:function(t,e,i){return gn(G0.h(t,e,i))},H:function(t){return gn(t.getHours())},J:function(t,e){return e.ordinal!==void 0?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[bo(t.getHours()>11)]},M:function(t,e){return gC(t.getMonth(),!0,e)},S:function(t){return gn(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,i){return i.getWeek(t)},Y:function(t){return gn(t.getFullYear(),4)},d:function(t){return gn(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return gn(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return gn(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},CQ=function(t){var e=t.config,i=e===void 0?Ag:e,r=t.l10n,s=r===void 0?Ow:r,n=t.isMobile,o=n===void 0?!1:n;return function(a,l,u){var h=u||s;return i.formatDate!==void 0&&!o?i.formatDate(a,l,h):l.split("").map(function(p,m,y){return G0[p]&&y[m-1]!=="\\"?G0[p](a,h,i):p!=="\\"?p:""}).join("")}},QO=function(t){var e=t.config,i=e===void 0?Ag:e,r=t.l10n,s=r===void 0?Ow:r;return function(n,o,a,l){if(!(n!==0&&!n)){var u=l||s,h,p=n;if(n instanceof Date)h=new Date(n.getTime());else if(typeof n!="string"&&n.toFixed!==void 0)h=new Date(n);else if(typeof n=="string"){var m=o||(i||Ag).dateFormat,y=String(n).trim();if(y==="today")h=new Date,a=!0;else if(i&&i.parseDate)h=i.parseDate(n,m);else if(/Z$/.test(y)||/GMT$/.test(y))h=new Date(n);else{for(var v=void 0,w=[],S=0,E=0,I="";S<m.length;S++){var D=m[S],O=D==="\\",A=m[S-1]==="\\"||O;if(fp[D]&&!A){I+=fp[D];var z=new RegExp(I).exec(n);z&&(v=!0)&&w[D!=="Y"?"push":"unshift"]({fn:tOe[D],val:z[++E]})}else O||(I+=".")}h=!i||!i.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),w.forEach(function(_){var Z=_.fn,Q=_.val;return h=Z(h,Q,u)||h}),h=v?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){i.errorHandler(new Error("Invalid date provided: "+p));return}return a===!0&&h.setHours(0,0,0,0),h}}};function Un(t,e,i){return i===void 0&&(i=!0),i!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var iOe=function(t,e,i){return t>Math.min(e,i)&&t<Math.max(e,i)},dk=function(t,e,i){return t*3600+e*60+i},rOe=function(t){var e=Math.floor(t/3600),i=(t-e*3600)/60;return[e,i,t-e*3600-i*60]},sOe={DAY:864e5};function pk(t){var e=t.defaultHour,i=t.defaultMinute,r=t.defaultSeconds;if(t.minDate!==void 0){var s=t.minDate.getHours(),n=t.minDate.getMinutes(),o=t.minDate.getSeconds();e<s&&(e=s),e===s&&i<n&&(i=n),e===s&&i===n&&r<o&&(r=t.minDate.getSeconds())}if(t.maxDate!==void 0){var a=t.maxDate.getHours(),l=t.maxDate.getMinutes();e=Math.min(e,a),e===a&&(i=Math.min(l,i)),e===a&&i===l&&(r=t.maxDate.getSeconds())}return{hours:e,minutes:i,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var r=function(a){a&&Object.keys(a).forEach(function(l){return t[l]=a[l]})},s=0,n=e;s<n.length;s++){var o=n[s];r(o)}return t});var cs=function(){return cs=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},cs.apply(this,arguments)},HU=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<i;e++)for(var n=arguments[e],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r},nOe=300;function oOe(t,e){var i={config:cs(cs({},Ag),ur.defaultConfig),l10n:Ow};i.parseDate=QO({config:i.config,l10n:i.l10n}),i._handlers=[],i.pluginElements=[],i.loadedPlugins=[],i._bind=w,i._setHoursFromDate=m,i._positionCalendar=Gl,i.changeMonth=qs,i.changeYear=uc,i.clear=En,i.close=Cn,i.onMouseOver=Tn,i._createElement=zt,i.createDay=z,i.destroy=Ys,i.isEnabled=Fo,i.jumpToDate=I,i.updateValue=Mr,i.open=xf,i.redraw=Es,i.set=Tr,i.setDate=cb,i.toggle=zo;function r(){i.utils={getDaysInMonth:function(P,L){return P===void 0&&(P=i.currentMonth),L===void 0&&(L=i.currentYear),P===1&&(L%4===0&&L%100!==0||L%400===0)?29:i.l10n.daysInMonth[P]}}}function s(){i.element=i.input=t,i.isOpen=!1,Qh(),Zs(),Mf(),Tf(),r(),i.isMobile||A(),E(),(i.selectedDates.length||i.config.noCalendar)&&(i.config.enableTime&&m(i.config.noCalendar?i.latestSelectedDateObj:void 0),Mr(!1)),a();var P=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!i.isMobile&&P&&Gl(),Ot("onReady")}function n(){var P;return((P=i.calendarContainer)===null||P===void 0?void 0:P.getRootNode()).activeElement||document.activeElement}function o(P){return P.bind(i)}function a(){var P=i.config;P.weekNumbers===!1&&P.showMonths===1||P.noCalendar!==!0&&window.requestAnimationFrame(function(){if(i.calendarContainer!==void 0&&(i.calendarContainer.style.visibility="hidden",i.calendarContainer.style.display="block"),i.daysContainer!==void 0){var L=(i.days.offsetWidth+1)*P.showMonths;i.daysContainer.style.width=L+"px",i.calendarContainer.style.width=L+(i.weekWrapper!==void 0?i.weekWrapper.offsetWidth:0)+"px",i.calendarContainer.style.removeProperty("visibility"),i.calendarContainer.style.removeProperty("display")}})}function l(P){if(i.selectedDates.length===0){var L=i.config.minDate===void 0||Un(new Date,i.config.minDate)>=0?new Date:new Date(i.config.minDate.getTime()),q=pk(i.config);L.setHours(q.hours,q.minutes,q.seconds,L.getMilliseconds()),i.selectedDates=[L],i.latestSelectedDateObj=L}P!==void 0&&P.type!=="blur"&&Rf(P);var N=i._input.value;p(),Mr(),i._input.value!==N&&i._debouncedChange()}function u(P,L){return P%12+12*bo(L===i.l10n.amPM[1])}function h(P){switch(P%24){case 0:case 12:return 12;default:return P%12}}function p(){if(!(i.hourElement===void 0||i.minuteElement===void 0)){var P=(parseInt(i.hourElement.value.slice(-2),10)||0)%24,L=(parseInt(i.minuteElement.value,10)||0)%60,q=i.secondElement!==void 0?(parseInt(i.secondElement.value,10)||0)%60:0;i.amPM!==void 0&&(P=u(P,i.amPM.textContent));var N=i.config.minTime!==void 0||i.config.minDate&&i.minDateHasTime&&i.latestSelectedDateObj&&Un(i.latestSelectedDateObj,i.config.minDate,!0)===0,pe=i.config.maxTime!==void 0||i.config.maxDate&&i.maxDateHasTime&&i.latestSelectedDateObj&&Un(i.latestSelectedDateObj,i.config.maxDate,!0)===0;if(i.config.maxTime!==void 0&&i.config.minTime!==void 0&&i.config.minTime>i.config.maxTime){var Se=dk(i.config.minTime.getHours(),i.config.minTime.getMinutes(),i.config.minTime.getSeconds()),Je=dk(i.config.maxTime.getHours(),i.config.maxTime.getMinutes(),i.config.maxTime.getSeconds()),Ee=dk(P,L,q);if(Ee>Je&&Ee<Se){var Ze=rOe(Se);P=Ze[0],L=Ze[1],q=Ze[2]}}else{if(pe){var oe=i.config.maxTime!==void 0?i.config.maxTime:i.config.maxDate;P=Math.min(P,oe.getHours()),P===oe.getHours()&&(L=Math.min(L,oe.getMinutes())),L===oe.getMinutes()&&(q=Math.min(q,oe.getSeconds()))}if(N){var Ge=i.config.minTime!==void 0?i.config.minTime:i.config.minDate;P=Math.max(P,Ge.getHours()),P===Ge.getHours()&&L<Ge.getMinutes()&&(L=Ge.getMinutes()),L===Ge.getMinutes()&&(q=Math.max(q,Ge.getSeconds()))}}y(P,L,q)}}function m(P){var L=P||i.latestSelectedDateObj;L&&L instanceof Date&&y(L.getHours(),L.getMinutes(),L.getSeconds())}function y(P,L,q){i.latestSelectedDateObj!==void 0&&i.latestSelectedDateObj.setHours(P%24,L,q||0,0),!(!i.hourElement||!i.minuteElement||i.isMobile)&&(i.hourElement.value=gn(i.config.time_24hr?P:(12+P)%12+12*bo(P%12===0)),i.minuteElement.value=gn(L),i.amPM!==void 0&&(i.amPM.textContent=i.l10n.amPM[bo(P>=12)]),i.secondElement!==void 0&&(i.secondElement.value=gn(q)))}function v(P){var L=In(P),q=parseInt(L.value)+(P.delta||0);(q/1e3>1||P.key==="Enter"&&!/[^\d]/.test(q.toString()))&&uc(q)}function w(P,L,q,N){if(L instanceof Array)return L.forEach(function(pe){return w(P,pe,q,N)});if(P instanceof Array)return P.forEach(function(pe){return w(pe,L,q,N)});P.addEventListener(L,q,N),i._handlers.push({remove:function(){return P.removeEventListener(L,q,N)}})}function S(){Ot("onChange")}function E(){if(i.config.wrap&&["open","close","toggle","clear"].forEach(function(q){Array.prototype.forEach.call(i.element.querySelectorAll("[data-"+q+"]"),function(N){return w(N,"click",i[q])})}),i.isMobile){Mn();return}var P=UU(cc,50);if(i._debouncedChange=UU(S,nOe),i.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&w(i.daysContainer,"mouseover",function(q){i.config.mode==="range"&&Tn(In(q))}),w(i._input,"keydown",_f),i.calendarContainer!==void 0&&w(i.calendarContainer,"keydown",_f),!i.config.inline&&!i.config.static&&w(window,"resize",P),window.ontouchstart!==void 0?w(window.document,"touchstart",Ss):w(window.document,"mousedown",Ss),w(window.document,"focus",Ss,{capture:!0}),i.config.clickOpens===!0&&(w(i._input,"focus",i.open),w(i._input,"click",i.open)),i.daysContainer!==void 0&&(w(i.monthNav,"click",ql),w(i.monthNav,["keyup","increment"],v),w(i.daysContainer,"click",Ra)),i.timeContainer!==void 0&&i.minuteElement!==void 0&&i.hourElement!==void 0){var L=function(q){return In(q).select()};w(i.timeContainer,["increment"],l),w(i.timeContainer,"blur",l,{capture:!0}),w(i.timeContainer,"click",D),w([i.hourElement,i.minuteElement],["focus","click"],L),i.secondElement!==void 0&&w(i.secondElement,"focus",function(){return i.secondElement&&i.secondElement.select()}),i.amPM!==void 0&&w(i.amPM,"click",function(q){l(q)})}i.config.allowInput&&w(i._input,"blur",Js)}function I(P,L){var q=P!==void 0?i.parseDate(P):i.latestSelectedDateObj||(i.config.minDate&&i.config.minDate>i.now?i.config.minDate:i.config.maxDate&&i.config.maxDate<i.now?i.config.maxDate:i.now),N=i.currentYear,pe=i.currentMonth;try{q!==void 0&&(i.currentYear=q.getFullYear(),i.currentMonth=q.getMonth())}catch(Se){Se.message="Invalid date supplied: "+q,i.config.errorHandler(Se)}L&&i.currentYear!==N&&(Ot("onYearChange"),ve()),L&&(i.currentYear!==N||i.currentMonth!==pe)&&Ot("onMonthChange"),i.redraw()}function D(P){var L=In(P);~L.className.indexOf("arrow")&&O(P,L.classList.contains("arrowUp")?1:-1)}function O(P,L,q){var N=P&&In(P),pe=q||N&&N.parentNode&&N.parentNode.firstChild,Se=ed("increment");Se.delta=L,pe&&pe.dispatchEvent(Se)}function A(){var P=window.document.createDocumentFragment();if(i.calendarContainer=zt("div","flatpickr-calendar"),i.calendarContainer.tabIndex=-1,!i.config.noCalendar){if(P.appendChild(dt()),i.innerContainer=zt("div","flatpickr-innerContainer"),i.config.weekNumbers){var L=Sn(),q=L.weekWrapper,N=L.weekNumbers;i.innerContainer.appendChild(q),i.weekNumbers=N,i.weekWrapper=q}i.rContainer=zt("div","flatpickr-rContainer"),i.rContainer.appendChild(Qe()),i.daysContainer||(i.daysContainer=zt("div","flatpickr-days"),i.daysContainer.tabIndex=-1),ne(),i.rContainer.appendChild(i.daysContainer),i.innerContainer.appendChild(i.rContainer),P.appendChild(i.innerContainer)}i.config.enableTime&&P.appendChild(Ke()),Ts(i.calendarContainer,"rangeMode",i.config.mode==="range"),Ts(i.calendarContainer,"animate",i.config.animate===!0),Ts(i.calendarContainer,"multiMonth",i.config.showMonths>1),i.calendarContainer.appendChild(P);var pe=i.config.appendTo!==void 0&&i.config.appendTo.nodeType!==void 0;if((i.config.inline||i.config.static)&&(i.calendarContainer.classList.add(i.config.inline?"inline":"static"),i.config.inline&&(!pe&&i.element.parentNode?i.element.parentNode.insertBefore(i.calendarContainer,i._input.nextSibling):i.config.appendTo!==void 0&&i.config.appendTo.appendChild(i.calendarContainer)),i.config.static)){var Se=zt("div","flatpickr-wrapper");i.element.parentNode&&i.element.parentNode.insertBefore(Se,i.element),Se.appendChild(i.element),i.altInput&&Se.appendChild(i.altInput),Se.appendChild(i.calendarContainer)}!i.config.static&&!i.config.inline&&(i.config.appendTo!==void 0?i.config.appendTo:window.document.body).appendChild(i.calendarContainer)}function z(P,L,q,N){var pe=Fo(L,!0),Se=zt("span",P,L.getDate().toString());return Se.dateObj=L,Se.$i=N,Se.setAttribute("aria-label",i.formatDate(L,i.config.ariaDateFormat)),P.indexOf("hidden")===-1&&Un(L,i.now)===0&&(i.todayDateElem=Se,Se.classList.add("today"),Se.setAttribute("aria-current","date")),pe?(Se.tabIndex=-1,$a(L)&&(Se.classList.add("selected"),i.selectedDateElem=Se,i.config.mode==="range"&&(Ts(Se,"startRange",i.selectedDates[0]&&Un(L,i.selectedDates[0],!0)===0),Ts(Se,"endRange",i.selectedDates[1]&&Un(L,i.selectedDates[1],!0)===0),P==="nextMonthDay"&&Se.classList.add("inRange")))):Se.classList.add("flatpickr-disabled"),i.config.mode==="range"&&kf(L)&&!$a(L)&&Se.classList.add("inRange"),i.weekNumbers&&i.config.showMonths===1&&P!=="prevMonthDay"&&N%7===6&&i.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+i.config.getWeek(L)+"</span>"),Ot("onDayCreate",Se),Se}function _(P){P.focus(),i.config.mode==="range"&&Tn(P)}function Z(P){for(var L=P>0?0:i.config.showMonths-1,q=P>0?i.config.showMonths:-1,N=L;N!=q;N+=P)for(var pe=i.daysContainer.children[N],Se=P>0?0:pe.children.length-1,Je=P>0?pe.children.length:-1,Ee=Se;Ee!=Je;Ee+=P){var Ze=pe.children[Ee];if(Ze.className.indexOf("hidden")===-1&&Fo(Ze.dateObj))return Ze}}function Q(P,L){for(var q=P.className.indexOf("Month")===-1?P.dateObj.getMonth():i.currentMonth,N=L>0?i.config.showMonths:-1,pe=L>0?1:-1,Se=q-i.currentMonth;Se!=N;Se+=pe)for(var Je=i.daysContainer.children[Se],Ee=q-i.currentMonth===Se?P.$i+L:L<0?Je.children.length-1:0,Ze=Je.children.length,oe=Ee;oe>=0&&oe<Ze&&oe!=(L>0?Ze:-1);oe+=pe){var Ge=Je.children[oe];if(Ge.className.indexOf("hidden")===-1&&Fo(Ge.dateObj)&&Math.abs(P.$i-oe)>=Math.abs(L))return _(Ge)}i.changeMonth(pe),ae(Z(pe),0)}function ae(P,L){var q=n(),N=Hl(q||document.body),pe=P!==void 0?P:N?q:i.selectedDateElem!==void 0&&Hl(i.selectedDateElem)?i.selectedDateElem:i.todayDateElem!==void 0&&Hl(i.todayDateElem)?i.todayDateElem:Z(L>0?1:-1);pe===void 0?i._input.focus():N?Q(pe,L):_(pe)}function ge(P,L){for(var q=(new Date(P,L,1).getDay()-i.l10n.firstDayOfWeek+7)%7,N=i.utils.getDaysInMonth((L-1+12)%12,P),pe=i.utils.getDaysInMonth(L,P),Se=window.document.createDocumentFragment(),Je=i.config.showMonths>1,Ee=Je?"prevMonthDay hidden":"prevMonthDay",Ze=Je?"nextMonthDay hidden":"nextMonthDay",oe=N+1-q,Ge=0;oe<=N;oe++,Ge++)Se.appendChild(z("flatpickr-day "+Ee,new Date(P,L-1,oe),oe,Ge));for(oe=1;oe<=pe;oe++,Ge++)Se.appendChild(z("flatpickr-day",new Date(P,L,oe),oe,Ge));for(var Nt=pe+1;Nt<=42-q&&(i.config.showMonths===1||Ge%7!==0);Nt++,Ge++)Se.appendChild(z("flatpickr-day "+Ze,new Date(P,L+1,Nt%pe),Nt,Ge));var Ft=zt("div","dayContainer");return Ft.appendChild(Se),Ft}function ne(){if(i.daysContainer!==void 0){z_(i.daysContainer),i.weekNumbers&&z_(i.weekNumbers);for(var P=document.createDocumentFragment(),L=0;L<i.config.showMonths;L++){var q=new Date(i.currentYear,i.currentMonth,1);q.setMonth(i.currentMonth+L),P.appendChild(ge(q.getFullYear(),q.getMonth()))}i.daysContainer.appendChild(P),i.days=i.daysContainer.firstChild,i.config.mode==="range"&&i.selectedDates.length===1&&Tn()}}function ve(){if(!(i.config.showMonths>1||i.config.monthSelectorType!=="dropdown")){var P=function(N){return i.config.minDate!==void 0&&i.currentYear===i.config.minDate.getFullYear()&&N<i.config.minDate.getMonth()?!1:!(i.config.maxDate!==void 0&&i.currentYear===i.config.maxDate.getFullYear()&&N>i.config.maxDate.getMonth())};i.monthsDropdownContainer.tabIndex=-1,i.monthsDropdownContainer.innerHTML="";for(var L=0;L<12;L++)if(P(L)){var q=zt("option","flatpickr-monthDropdown-month");q.value=new Date(i.currentYear,L).getMonth().toString(),q.textContent=gC(L,i.config.shorthandCurrentMonth,i.l10n),q.tabIndex=-1,i.currentMonth===L&&(q.selected=!0),i.monthsDropdownContainer.appendChild(q)}}}function xe(){var P=zt("div","flatpickr-month"),L=window.document.createDocumentFragment(),q;i.config.showMonths>1||i.config.monthSelectorType==="static"?q=zt("span","cur-month"):(i.monthsDropdownContainer=zt("select","flatpickr-monthDropdown-months"),i.monthsDropdownContainer.setAttribute("aria-label",i.l10n.monthAriaLabel),w(i.monthsDropdownContainer,"change",function(Je){var Ee=In(Je),Ze=parseInt(Ee.value,10);i.changeMonth(Ze-i.currentMonth),Ot("onMonthChange")}),ve(),q=i.monthsDropdownContainer);var N=V_("cur-year",{tabindex:"-1"}),pe=N.getElementsByTagName("input")[0];pe.setAttribute("aria-label",i.l10n.yearAriaLabel),i.config.minDate&&pe.setAttribute("min",i.config.minDate.getFullYear().toString()),i.config.maxDate&&(pe.setAttribute("max",i.config.maxDate.getFullYear().toString()),pe.disabled=!!i.config.minDate&&i.config.minDate.getFullYear()===i.config.maxDate.getFullYear());var Se=zt("div","flatpickr-current-month");return Se.appendChild(q),Se.appendChild(N),L.appendChild(Se),P.appendChild(L),{container:P,yearElement:pe,monthElement:q}}function Be(){z_(i.monthNav),i.monthNav.appendChild(i.prevMonthNav),i.config.showMonths&&(i.yearElements=[],i.monthElements=[]);for(var P=i.config.showMonths;P--;){var L=xe();i.yearElements.push(L.yearElement),i.monthElements.push(L.monthElement),i.monthNav.appendChild(L.container)}i.monthNav.appendChild(i.nextMonthNav)}function dt(){return i.monthNav=zt("div","flatpickr-months"),i.yearElements=[],i.monthElements=[],i.prevMonthNav=zt("span","flatpickr-prev-month"),i.prevMonthNav.innerHTML=i.config.prevArrow,i.nextMonthNav=zt("span","flatpickr-next-month"),i.nextMonthNav.innerHTML=i.config.nextArrow,Be(),Object.defineProperty(i,"_hidePrevMonthArrow",{get:function(){return i.__hidePrevMonthArrow},set:function(P){i.__hidePrevMonthArrow!==P&&(Ts(i.prevMonthNav,"flatpickr-disabled",P),i.__hidePrevMonthArrow=P)}}),Object.defineProperty(i,"_hideNextMonthArrow",{get:function(){return i.__hideNextMonthArrow},set:function(P){i.__hideNextMonthArrow!==P&&(Ts(i.nextMonthNav,"flatpickr-disabled",P),i.__hideNextMonthArrow=P)}}),i.currentYearElement=i.yearElements[0],Wl(),i.monthNav}function Ke(){i.calendarContainer.classList.add("hasTime"),i.config.noCalendar&&i.calendarContainer.classList.add("noCalendar");var P=pk(i.config);i.timeContainer=zt("div","flatpickr-time"),i.timeContainer.tabIndex=-1;var L=zt("span","flatpickr-time-separator",":"),q=V_("flatpickr-hour",{"aria-label":i.l10n.hourAriaLabel});i.hourElement=q.getElementsByTagName("input")[0];var N=V_("flatpickr-minute",{"aria-label":i.l10n.minuteAriaLabel});if(i.minuteElement=N.getElementsByTagName("input")[0],i.hourElement.tabIndex=i.minuteElement.tabIndex=-1,i.hourElement.value=gn(i.latestSelectedDateObj?i.latestSelectedDateObj.getHours():i.config.time_24hr?P.hours:h(P.hours)),i.minuteElement.value=gn(i.latestSelectedDateObj?i.latestSelectedDateObj.getMinutes():P.minutes),i.hourElement.setAttribute("step",i.config.hourIncrement.toString()),i.minuteElement.setAttribute("step",i.config.minuteIncrement.toString()),i.hourElement.setAttribute("min",i.config.time_24hr?"0":"1"),i.hourElement.setAttribute("max",i.config.time_24hr?"23":"12"),i.hourElement.setAttribute("maxlength","2"),i.minuteElement.setAttribute("min","0"),i.minuteElement.setAttribute("max","59"),i.minuteElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(q),i.timeContainer.appendChild(L),i.timeContainer.appendChild(N),i.config.time_24hr&&i.timeContainer.classList.add("time24hr"),i.config.enableSeconds){i.timeContainer.classList.add("hasSeconds");var pe=V_("flatpickr-second");i.secondElement=pe.getElementsByTagName("input")[0],i.secondElement.value=gn(i.latestSelectedDateObj?i.latestSelectedDateObj.getSeconds():P.seconds),i.secondElement.setAttribute("step",i.minuteElement.getAttribute("step")),i.secondElement.setAttribute("min","0"),i.secondElement.setAttribute("max","59"),i.secondElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(zt("span","flatpickr-time-separator",":")),i.timeContainer.appendChild(pe)}return i.config.time_24hr||(i.amPM=zt("span","flatpickr-am-pm",i.l10n.amPM[bo((i.latestSelectedDateObj?i.hourElement.value:i.config.defaultHour)>11)]),i.amPM.title=i.l10n.toggleTitle,i.amPM.tabIndex=-1,i.timeContainer.appendChild(i.amPM)),i.timeContainer}function Qe(){i.weekdayContainer?z_(i.weekdayContainer):i.weekdayContainer=zt("div","flatpickr-weekdays");for(var P=i.config.showMonths;P--;){var L=zt("div","flatpickr-weekdaycontainer");i.weekdayContainer.appendChild(L)}return gt(),i.weekdayContainer}function gt(){if(i.weekdayContainer){var P=i.l10n.firstDayOfWeek,L=HU(i.l10n.weekdays.shorthand);P>0&&P<L.length&&(L=HU(L.splice(P,L.length),L.splice(0,P)));for(var q=i.config.showMonths;q--;)i.weekdayContainer.children[q].innerHTML=`
      <span class='flatpickr-weekday'>
        `+L.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Sn(){i.calendarContainer.classList.add("hasWeeks");var P=zt("div","flatpickr-weekwrapper");P.appendChild(zt("span","flatpickr-weekday",i.l10n.weekAbbreviation));var L=zt("div","flatpickr-weeks");return P.appendChild(L),{weekWrapper:P,weekNumbers:L}}function qs(P,L){L===void 0&&(L=!0);var q=L?P:P-i.currentMonth;q<0&&i._hidePrevMonthArrow===!0||q>0&&i._hideNextMonthArrow===!0||(i.currentMonth+=q,(i.currentMonth<0||i.currentMonth>11)&&(i.currentYear+=i.currentMonth>11?1:-1,i.currentMonth=(i.currentMonth+12)%12,Ot("onYearChange"),ve()),ne(),Ot("onMonthChange"),Wl())}function En(P,L){if(P===void 0&&(P=!0),L===void 0&&(L=!0),i.input.value="",i.altInput!==void 0&&(i.altInput.value=""),i.mobileInput!==void 0&&(i.mobileInput.value=""),i.selectedDates=[],i.latestSelectedDateObj=void 0,L===!0&&(i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth()),i.config.enableTime===!0){var q=pk(i.config),N=q.hours,pe=q.minutes,Se=q.seconds;y(N,pe,Se)}i.redraw(),P&&Ot("onChange")}function Cn(){i.isOpen=!1,i.isMobile||(i.calendarContainer!==void 0&&i.calendarContainer.classList.remove("open"),i._input!==void 0&&i._input.classList.remove("active")),Ot("onClose")}function Ys(){i.config!==void 0&&Ot("onDestroy");for(var P=i._handlers.length;P--;)i._handlers[P].remove();if(i._handlers=[],i.mobileInput)i.mobileInput.parentNode&&i.mobileInput.parentNode.removeChild(i.mobileInput),i.mobileInput=void 0;else if(i.calendarContainer&&i.calendarContainer.parentNode)if(i.config.static&&i.calendarContainer.parentNode){var L=i.calendarContainer.parentNode;if(L.lastChild&&L.removeChild(L.lastChild),L.parentNode){for(;L.firstChild;)L.parentNode.insertBefore(L.firstChild,L);L.parentNode.removeChild(L)}}else i.calendarContainer.parentNode.removeChild(i.calendarContainer);i.altInput&&(i.input.type="text",i.altInput.parentNode&&i.altInput.parentNode.removeChild(i.altInput),delete i.altInput),i.input&&(i.input.type=i.input._type,i.input.classList.remove("flatpickr-input"),i.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(q){try{delete i[q]}catch{}})}function xs(P){return i.calendarContainer.contains(P)}function Ss(P){if(i.isOpen&&!i.config.inline){var L=In(P),q=xs(L),N=L===i.input||L===i.altInput||i.element.contains(L)||P.path&&P.path.indexOf&&(~P.path.indexOf(i.input)||~P.path.indexOf(i.altInput)),pe=!N&&!q&&!xs(P.relatedTarget),Se=!i.config.ignoredFocusElements.some(function(Je){return Je.contains(L)});pe&&Se&&(i.config.allowInput&&i.setDate(i._input.value,!1,i.config.altInput?i.config.altFormat:i.config.dateFormat),i.timeContainer!==void 0&&i.minuteElement!==void 0&&i.hourElement!==void 0&&i.input.value!==""&&i.input.value!==void 0&&l(),i.close(),i.config&&i.config.mode==="range"&&i.selectedDates.length===1&&i.clear(!1))}}function uc(P){if(!(!P||i.config.minDate&&P<i.config.minDate.getFullYear()||i.config.maxDate&&P>i.config.maxDate.getFullYear())){var L=P,q=i.currentYear!==L;i.currentYear=L||i.currentYear,i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth=Math.min(i.config.maxDate.getMonth(),i.currentMonth):i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&(i.currentMonth=Math.max(i.config.minDate.getMonth(),i.currentMonth)),q&&(i.redraw(),Ot("onYearChange"),ve())}}function Fo(P,L){var q;L===void 0&&(L=!0);var N=i.parseDate(P,void 0,L);if(i.config.minDate&&N&&Un(N,i.config.minDate,L!==void 0?L:!i.minDateHasTime)<0||i.config.maxDate&&N&&Un(N,i.config.maxDate,L!==void 0?L:!i.maxDateHasTime)>0)return!1;if(!i.config.enable&&i.config.disable.length===0)return!0;if(N===void 0)return!1;for(var pe=!!i.config.enable,Se=(q=i.config.enable)!==null&&q!==void 0?q:i.config.disable,Je=0,Ee=void 0;Je<Se.length;Je++){if(Ee=Se[Je],typeof Ee=="function"&&Ee(N))return pe;if(Ee instanceof Date&&N!==void 0&&Ee.getTime()===N.getTime())return pe;if(typeof Ee=="string"){var Ze=i.parseDate(Ee,void 0,!0);return Ze&&Ze.getTime()===N.getTime()?pe:!pe}else if(typeof Ee=="object"&&N!==void 0&&Ee.from&&Ee.to&&N.getTime()>=Ee.from.getTime()&&N.getTime()<=Ee.to.getTime())return pe}return!pe}function Hl(P){return i.daysContainer!==void 0?P.className.indexOf("hidden")===-1&&P.className.indexOf("flatpickr-disabled")===-1&&i.daysContainer.contains(P):!1}function Js(P){var L=P.target===i._input,q=i._input.value.trimEnd()!==td();L&&q&&!(P.relatedTarget&&xs(P.relatedTarget))&&i.setDate(i._input.value,!0,P.target===i.altInput?i.config.altFormat:i.config.dateFormat)}function _f(P){var L=In(P),q=i.config.wrap?t.contains(L):L===i._input,N=i.config.allowInput,pe=i.isOpen&&(!N||!q),Se=i.config.inline&&q&&!N;if(P.keyCode===13&&q){if(N)return i.setDate(i._input.value,!0,L===i.altInput?i.config.altFormat:i.config.dateFormat),i.close(),L.blur();i.open()}else if(xs(L)||pe||Se){var Je=!!i.timeContainer&&i.timeContainer.contains(L);switch(P.keyCode){case 13:Je?(P.preventDefault(),l(),jo()):Ra(P);break;case 27:P.preventDefault(),jo();break;case 8:case 46:q&&!i.config.allowInput&&(P.preventDefault(),i.clear());break;case 37:case 39:if(!Je&&!q){P.preventDefault();var Ee=n();if(i.daysContainer!==void 0&&(N===!1||Ee&&Hl(Ee))){var Ze=P.keyCode===39?1:-1;P.ctrlKey?(P.stopPropagation(),qs(Ze),ae(Z(1),0)):ae(void 0,Ze)}}else i.hourElement&&i.hourElement.focus();break;case 38:case 40:P.preventDefault();var oe=P.keyCode===40?1:-1;i.daysContainer&&L.$i!==void 0||L===i.input||L===i.altInput?P.ctrlKey?(P.stopPropagation(),uc(i.currentYear-oe),ae(Z(1),0)):Je||ae(void 0,oe*7):L===i.currentYearElement?uc(i.currentYear-oe):i.config.enableTime&&(!Je&&i.hourElement&&i.hourElement.focus(),l(P),i._debouncedChange());break;case 9:if(Je){var Ge=[i.hourElement,i.minuteElement,i.secondElement,i.amPM].concat(i.pluginElements).filter(function(Yi){return Yi}),Nt=Ge.indexOf(L);if(Nt!==-1){var Ft=Ge[Nt+(P.shiftKey?-1:1)];P.preventDefault(),(Ft||i._input).focus()}}else!i.config.noCalendar&&i.daysContainer&&i.daysContainer.contains(L)&&P.shiftKey&&(P.preventDefault(),i._input.focus());break}}if(i.amPM!==void 0&&L===i.amPM)switch(P.key){case i.l10n.amPM[0].charAt(0):case i.l10n.amPM[0].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[0],p(),Mr();break;case i.l10n.amPM[1].charAt(0):case i.l10n.amPM[1].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[1],p(),Mr();break}(q||xs(L))&&Ot("onKeyDown",P)}function Tn(P,L){if(L===void 0&&(L="flatpickr-day"),!(i.selectedDates.length!==1||P&&(!P.classList.contains(L)||P.classList.contains("flatpickr-disabled")))){for(var q=P?P.dateObj.getTime():i.days.firstElementChild.dateObj.getTime(),N=i.parseDate(i.selectedDates[0],void 0,!0).getTime(),pe=Math.min(q,i.selectedDates[0].getTime()),Se=Math.max(q,i.selectedDates[0].getTime()),Je=!1,Ee=0,Ze=0,oe=pe;oe<Se;oe+=sOe.DAY)Fo(new Date(oe),!0)||(Je=Je||oe>pe&&oe<Se,oe<N&&(!Ee||oe>Ee)?Ee=oe:oe>N&&(!Ze||oe<Ze)&&(Ze=oe));var Ge=Array.from(i.rContainer.querySelectorAll("*:nth-child(-n+"+i.config.showMonths+") > ."+L));Ge.forEach(function(Nt){var Ft=Nt.dateObj,Yi=Ft.getTime(),Aa=Ee>0&&Yi<Ee||Ze>0&&Yi>Ze;if(Aa){Nt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Vr){Nt.classList.remove(Vr)});return}else if(Je&&!Aa)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Vr){Nt.classList.remove(Vr)}),P!==void 0&&(P.classList.add(q<=i.selectedDates[0].getTime()?"startRange":"endRange"),N<q&&Yi===N?Nt.classList.add("startRange"):N>q&&Yi===N&&Nt.classList.add("endRange"),Yi>=Ee&&(Ze===0||Yi<=Ze)&&iOe(Yi,N,q)&&Nt.classList.add("inRange"))})}}function cc(){i.isOpen&&!i.config.static&&!i.config.inline&&Gl()}function xf(P,L){if(L===void 0&&(L=i._positionElement),i.isMobile===!0){if(P){P.preventDefault();var q=In(P);q&&q.blur()}i.mobileInput!==void 0&&(i.mobileInput.focus(),i.mobileInput.click()),Ot("onOpen");return}else if(i._input.disabled||i.config.inline)return;var N=i.isOpen;i.isOpen=!0,N||(i.calendarContainer.classList.add("open"),i._input.classList.add("active"),Ot("onOpen"),Gl(L)),i.config.enableTime===!0&&i.config.noCalendar===!0&&i.config.allowInput===!1&&(P===void 0||!i.timeContainer.contains(P.relatedTarget))&&setTimeout(function(){return i.hourElement.select()},50)}function Sf(P){return function(L){var q=i.config["_"+P+"Date"]=i.parseDate(L,i.config.dateFormat),N=i.config["_"+(P==="min"?"max":"min")+"Date"];q!==void 0&&(i[P==="min"?"minDateHasTime":"maxDateHasTime"]=q.getHours()>0||q.getMinutes()>0||q.getSeconds()>0),i.selectedDates&&(i.selectedDates=i.selectedDates.filter(function(pe){return Fo(pe)}),!i.selectedDates.length&&P==="min"&&m(q),Mr()),i.daysContainer&&(Es(),q!==void 0?i.currentYearElement[P]=q.getFullYear().toString():i.currentYearElement.removeAttribute(P),i.currentYearElement.disabled=!!N&&q!==void 0&&N.getFullYear()===q.getFullYear())}}function Qh(){var P=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],L=cs(cs({},JSON.parse(JSON.stringify(t.dataset||{}))),e),q={};i.config.parseDate=L.parseDate,i.config.formatDate=L.formatDate,Object.defineProperty(i.config,"enable",{get:function(){return i.config._enable},set:function(Ge){i.config._enable=hb(Ge)}}),Object.defineProperty(i.config,"disable",{get:function(){return i.config._disable},set:function(Ge){i.config._disable=hb(Ge)}});var N=L.mode==="time";if(!L.dateFormat&&(L.enableTime||N)){var pe=ur.defaultConfig.dateFormat||Ag.dateFormat;q.dateFormat=L.noCalendar||N?"H:i"+(L.enableSeconds?":S":""):pe+" H:i"+(L.enableSeconds?":S":"")}if(L.altInput&&(L.enableTime||N)&&!L.altFormat){var Se=ur.defaultConfig.altFormat||Ag.altFormat;q.altFormat=L.noCalendar||N?"h:i"+(L.enableSeconds?":S K":" K"):Se+(" h:i"+(L.enableSeconds?":S":"")+" K")}Object.defineProperty(i.config,"minDate",{get:function(){return i.config._minDate},set:Sf("min")}),Object.defineProperty(i.config,"maxDate",{get:function(){return i.config._maxDate},set:Sf("max")});var Je=function(Ge){return function(Nt){i.config[Ge==="min"?"_minTime":"_maxTime"]=i.parseDate(Nt,"H:i:S")}};Object.defineProperty(i.config,"minTime",{get:function(){return i.config._minTime},set:Je("min")}),Object.defineProperty(i.config,"maxTime",{get:function(){return i.config._maxTime},set:Je("max")}),L.mode==="time"&&(i.config.noCalendar=!0,i.config.enableTime=!0),Object.assign(i.config,q,L);for(var Ee=0;Ee<P.length;Ee++)i.config[P[Ee]]=i.config[P[Ee]]===!0||i.config[P[Ee]]==="true";uk.filter(function(Ge){return i.config[Ge]!==void 0}).forEach(function(Ge){i.config[Ge]=ck(i.config[Ge]||[]).map(o)}),i.isMobile=!i.config.disableMobile&&!i.config.inline&&i.config.mode==="single"&&!i.config.disable.length&&!i.config.enable&&!i.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Ee=0;Ee<i.config.plugins.length;Ee++){var Ze=i.config.plugins[Ee](i)||{};for(var oe in Ze)uk.indexOf(oe)>-1?i.config[oe]=ck(Ze[oe]).map(o).concat(i.config[oe]):typeof L[oe]>"u"&&(i.config[oe]=Ze[oe])}L.altInputClass||(i.config.altInputClass=Bl().className+" "+i.config.altInputClass),Ot("onParseConfig")}function Bl(){return i.config.wrap?t.querySelector("[data-input]"):t}function Zs(){typeof i.config.locale!="object"&&typeof ur.l10ns[i.config.locale]>"u"&&i.config.errorHandler(new Error("flatpickr: invalid locale "+i.config.locale)),i.l10n=cs(cs({},ur.l10ns.default),typeof i.config.locale=="object"?i.config.locale:i.config.locale!=="default"?ur.l10ns[i.config.locale]:void 0),fp.D="("+i.l10n.weekdays.shorthand.join("|")+")",fp.l="("+i.l10n.weekdays.longhand.join("|")+")",fp.M="("+i.l10n.months.shorthand.join("|")+")",fp.F="("+i.l10n.months.longhand.join("|")+")",fp.K="("+i.l10n.amPM[0]+"|"+i.l10n.amPM[1]+"|"+i.l10n.amPM[0].toLowerCase()+"|"+i.l10n.amPM[1].toLowerCase()+")";var P=cs(cs({},e),JSON.parse(JSON.stringify(t.dataset||{})));P.time_24hr===void 0&&ur.defaultConfig.time_24hr===void 0&&(i.config.time_24hr=i.l10n.time_24hr),i.formatDate=CQ(i),i.parseDate=QO({config:i.config,l10n:i.l10n})}function Gl(P){if(typeof i.config.position=="function")return void i.config.position(i,P);if(i.calendarContainer!==void 0){Ot("onPreCalendarPosition");var L=P||i._positionElement,q=Array.prototype.reduce.call(i.calendarContainer.children,function($f,nd){return $f+nd.offsetHeight},0),N=i.calendarContainer.offsetWidth,pe=i.config.position.split(" "),Se=pe[0],Je=pe.length>1?pe[1]:null,Ee=L.getBoundingClientRect(),Ze=window.innerHeight-Ee.bottom,oe=Se==="above"||Se!=="below"&&Ze<q&&Ee.top>q,Ge=window.pageYOffset+Ee.top+(oe?-q-2:L.offsetHeight+2);if(Ts(i.calendarContainer,"arrowTop",!oe),Ts(i.calendarContainer,"arrowBottom",oe),!i.config.inline){var Nt=window.pageXOffset+Ee.left,Ft=!1,Yi=!1;Je==="center"?(Nt-=(N-Ee.width)/2,Ft=!0):Je==="right"&&(Nt-=N-Ee.width,Yi=!0),Ts(i.calendarContainer,"arrowLeft",!Ft&&!Yi),Ts(i.calendarContainer,"arrowCenter",Ft),Ts(i.calendarContainer,"arrowRight",Yi);var Aa=window.document.body.offsetWidth-(window.pageXOffset+Ee.right),Vr=Nt+N>window.document.body.offsetWidth,If=Aa+N>window.document.body.offsetWidth;if(Ts(i.calendarContainer,"rightMost",Vr),!i.config.static)if(i.calendarContainer.style.top=Ge+"px",!Vr)i.calendarContainer.style.left=Nt+"px",i.calendarContainer.style.right="auto";else if(!If)i.calendarContainer.style.left="auto",i.calendarContainer.style.right=Aa+"px";else{var Yl=Ef();if(Yl===void 0)return;var et=window.document.body.offsetWidth,Oa=Math.max(0,et/2-N/2),id=".flatpickr-calendar.centerMost:before",rd=".flatpickr-calendar.centerMost:after",sd=Yl.cssRules.length,Pa="{left:"+Ee.left+"px;right:auto;}";Ts(i.calendarContainer,"rightMost",!1),Ts(i.calendarContainer,"centerMost",!0),Yl.insertRule(id+","+rd+Pa,sd),i.calendarContainer.style.left=Oa+"px",i.calendarContainer.style.right="auto"}}}}function Ef(){for(var P=null,L=0;L<document.styleSheets.length;L++){var q=document.styleSheets[L];if(q.cssRules){try{q.cssRules}catch{continue}P=q;break}}return P??ro()}function ro(){var P=document.createElement("style");return document.head.appendChild(P),P.sheet}function Es(){i.config.noCalendar||i.isMobile||(ve(),Wl(),ne())}function jo(){i._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(i.close,0):i.close()}function Ra(P){P.preventDefault(),P.stopPropagation();var L=function(Ge){return Ge.classList&&Ge.classList.contains("flatpickr-day")&&!Ge.classList.contains("flatpickr-disabled")&&!Ge.classList.contains("notAllowed")},q=EQ(In(P),L);if(q!==void 0){var N=q,pe=i.latestSelectedDateObj=new Date(N.dateObj.getTime()),Se=(pe.getMonth()<i.currentMonth||pe.getMonth()>i.currentMonth+i.config.showMonths-1)&&i.config.mode!=="range";if(i.selectedDateElem=N,i.config.mode==="single")i.selectedDates=[pe];else if(i.config.mode==="multiple"){var Je=$a(pe);Je?i.selectedDates.splice(parseInt(Je),1):i.selectedDates.push(pe)}else i.config.mode==="range"&&(i.selectedDates.length===2&&i.clear(!1,!1),i.latestSelectedDateObj=pe,i.selectedDates.push(pe),Un(pe,i.selectedDates[0],!0)!==0&&i.selectedDates.sort(function(Ge,Nt){return Ge.getTime()-Nt.getTime()}));if(p(),Se){var Ee=i.currentYear!==pe.getFullYear();i.currentYear=pe.getFullYear(),i.currentMonth=pe.getMonth(),Ee&&(Ot("onYearChange"),ve()),Ot("onMonthChange")}if(Wl(),ne(),Mr(),!Se&&i.config.mode!=="range"&&i.config.showMonths===1?_(N):i.selectedDateElem!==void 0&&i.hourElement===void 0&&i.selectedDateElem&&i.selectedDateElem.focus(),i.hourElement!==void 0&&i.hourElement!==void 0&&i.hourElement.focus(),i.config.closeOnSelect){var Ze=i.config.mode==="single"&&!i.config.enableTime,oe=i.config.mode==="range"&&i.selectedDates.length===2&&!i.config.enableTime;(Ze||oe)&&jo()}S()}}var Ne={locale:[Zs,gt],showMonths:[Be,a,Qe],minDate:[I],maxDate:[I],positionElement:[Ia],clickOpens:[function(){i.config.clickOpens===!0?(w(i._input,"focus",i.open),w(i._input,"click",i.open)):(i._input.removeEventListener("focus",i.open),i._input.removeEventListener("click",i.open))}]};function Tr(P,L){if(P!==null&&typeof P=="object"){Object.assign(i.config,P);for(var q in P)Ne[q]!==void 0&&Ne[q].forEach(function(N){return N()})}else i.config[P]=L,Ne[P]!==void 0?Ne[P].forEach(function(N){return N()}):uk.indexOf(P)>-1&&(i.config[P]=ck(L));i.redraw(),Mr(!0)}function Cf(P,L){var q=[];if(P instanceof Array)q=P.map(function(N){return i.parseDate(N,L)});else if(P instanceof Date||typeof P=="number")q=[i.parseDate(P,L)];else if(typeof P=="string")switch(i.config.mode){case"single":case"time":q=[i.parseDate(P,L)];break;case"multiple":q=P.split(i.config.conjunction).map(function(N){return i.parseDate(N,L)});break;case"range":q=P.split(i.l10n.rangeSeparator).map(function(N){return i.parseDate(N,L)});break}else i.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(P)));i.selectedDates=i.config.allowInvalidPreload?q:q.filter(function(N){return N instanceof Date&&Fo(N,!1)}),i.config.mode==="range"&&i.selectedDates.sort(function(N,pe){return N.getTime()-pe.getTime()})}function cb(P,L,q){if(L===void 0&&(L=!1),q===void 0&&(q=i.config.dateFormat),P!==0&&!P||P instanceof Array&&P.length===0)return i.clear(L);Cf(P,q),i.latestSelectedDateObj=i.selectedDates[i.selectedDates.length-1],i.redraw(),I(void 0,L),m(),i.selectedDates.length===0&&i.clear(!1),Mr(L),L&&Ot("onChange")}function hb(P){return P.slice().map(function(L){return typeof L=="string"||typeof L=="number"||L instanceof Date?i.parseDate(L,void 0,!0):L&&typeof L=="object"&&L.from&&L.to?{from:i.parseDate(L.from,void 0),to:i.parseDate(L.to,void 0)}:L}).filter(function(L){return L})}function Tf(){i.selectedDates=[],i.now=i.parseDate(i.config.now)||new Date;var P=i.config.defaultDate||((i.input.nodeName==="INPUT"||i.input.nodeName==="TEXTAREA")&&i.input.placeholder&&i.input.value===i.input.placeholder?null:i.input.value);P&&Cf(P,i.config.dateFormat),i._initialDate=i.selectedDates.length>0?i.selectedDates[0]:i.config.minDate&&i.config.minDate.getTime()>i.now.getTime()?i.config.minDate:i.config.maxDate&&i.config.maxDate.getTime()<i.now.getTime()?i.config.maxDate:i.now,i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth(),i.selectedDates.length>0&&(i.latestSelectedDateObj=i.selectedDates[0]),i.config.minTime!==void 0&&(i.config.minTime=i.parseDate(i.config.minTime,"H:i")),i.config.maxTime!==void 0&&(i.config.maxTime=i.parseDate(i.config.maxTime,"H:i")),i.minDateHasTime=!!i.config.minDate&&(i.config.minDate.getHours()>0||i.config.minDate.getMinutes()>0||i.config.minDate.getSeconds()>0),i.maxDateHasTime=!!i.config.maxDate&&(i.config.maxDate.getHours()>0||i.config.maxDate.getMinutes()>0||i.config.maxDate.getSeconds()>0)}function Mf(){if(i.input=Bl(),!i.input){i.config.errorHandler(new Error("Invalid input element specified"));return}i.input._type=i.input.type,i.input.type="text",i.input.classList.add("flatpickr-input"),i._input=i.input,i.config.altInput&&(i.altInput=zt(i.input.nodeName,i.config.altInputClass),i._input=i.altInput,i.altInput.placeholder=i.input.placeholder,i.altInput.disabled=i.input.disabled,i.altInput.required=i.input.required,i.altInput.tabIndex=i.input.tabIndex,i.altInput.type="text",i.input.setAttribute("type","hidden"),!i.config.static&&i.input.parentNode&&i.input.parentNode.insertBefore(i.altInput,i.input.nextSibling)),i.config.allowInput||i._input.setAttribute("readonly","readonly"),Ia()}function Ia(){i._positionElement=i.config.positionElement||i._input}function Mn(){var P=i.config.enableTime?i.config.noCalendar?"time":"datetime-local":"date";i.mobileInput=zt("input",i.input.className+" flatpickr-mobile"),i.mobileInput.tabIndex=1,i.mobileInput.type=P,i.mobileInput.disabled=i.input.disabled,i.mobileInput.required=i.input.required,i.mobileInput.placeholder=i.input.placeholder,i.mobileFormatStr=P==="datetime-local"?"Y-m-d\\TH:i:S":P==="date"?"Y-m-d":"H:i:S",i.selectedDates.length>0&&(i.mobileInput.defaultValue=i.mobileInput.value=i.formatDate(i.selectedDates[0],i.mobileFormatStr)),i.config.minDate&&(i.mobileInput.min=i.formatDate(i.config.minDate,"Y-m-d")),i.config.maxDate&&(i.mobileInput.max=i.formatDate(i.config.maxDate,"Y-m-d")),i.input.getAttribute("step")&&(i.mobileInput.step=String(i.input.getAttribute("step"))),i.input.type="hidden",i.altInput!==void 0&&(i.altInput.type="hidden");try{i.input.parentNode&&i.input.parentNode.insertBefore(i.mobileInput,i.input.nextSibling)}catch{}w(i.mobileInput,"change",function(L){i.setDate(In(L).value,!1,i.mobileFormatStr),Ot("onChange"),Ot("onClose")})}function zo(P){if(i.isOpen===!0)return i.close();i.open(P)}function Ot(P,L){if(i.config!==void 0){var q=i.config[P];if(q!==void 0&&q.length>0)for(var N=0;q[N]&&N<q.length;N++)q[N](i.selectedDates,i.input.value,i,L);P==="onChange"&&(i.input.dispatchEvent(ed("change")),i.input.dispatchEvent(ed("input")))}}function ed(P){var L=document.createEvent("Event");return L.initEvent(P,!0,!0),L}function $a(P){for(var L=0;L<i.selectedDates.length;L++){var q=i.selectedDates[L];if(q instanceof Date&&Un(q,P)===0)return""+L}return!1}function kf(P){return i.config.mode!=="range"||i.selectedDates.length<2?!1:Un(P,i.selectedDates[0])>=0&&Un(P,i.selectedDates[1])<=0}function Wl(){i.config.noCalendar||i.isMobile||!i.monthNav||(i.yearElements.forEach(function(P,L){var q=new Date(i.currentYear,i.currentMonth,1);q.setMonth(i.currentMonth+L),i.config.showMonths>1||i.config.monthSelectorType==="static"?i.monthElements[L].textContent=gC(q.getMonth(),i.config.shorthandCurrentMonth,i.l10n)+" ":i.monthsDropdownContainer.value=q.getMonth().toString(),P.value=q.getFullYear().toString()}),i._hidePrevMonthArrow=i.config.minDate!==void 0&&(i.currentYear===i.config.minDate.getFullYear()?i.currentMonth<=i.config.minDate.getMonth():i.currentYear<i.config.minDate.getFullYear()),i._hideNextMonthArrow=i.config.maxDate!==void 0&&(i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth+1>i.config.maxDate.getMonth():i.currentYear>i.config.maxDate.getFullYear()))}function td(P){var L=P||(i.config.altInput?i.config.altFormat:i.config.dateFormat);return i.selectedDates.map(function(q){return i.formatDate(q,L)}).filter(function(q,N,pe){return i.config.mode!=="range"||i.config.enableTime||pe.indexOf(q)===N}).join(i.config.mode!=="range"?i.config.conjunction:i.l10n.rangeSeparator)}function Mr(P){P===void 0&&(P=!0),i.mobileInput!==void 0&&i.mobileFormatStr&&(i.mobileInput.value=i.latestSelectedDateObj!==void 0?i.formatDate(i.latestSelectedDateObj,i.mobileFormatStr):""),i.input.value=td(i.config.dateFormat),i.altInput!==void 0&&(i.altInput.value=td(i.config.altFormat)),P!==!1&&Ot("onValueUpdate")}function ql(P){var L=In(P),q=i.prevMonthNav.contains(L),N=i.nextMonthNav.contains(L);q||N?qs(q?-1:1):i.yearElements.indexOf(L)>=0?L.select():L.classList.contains("arrowUp")?i.changeYear(i.currentYear+1):L.classList.contains("arrowDown")&&i.changeYear(i.currentYear-1)}function Rf(P){P.preventDefault();var L=P.type==="keydown",q=In(P),N=q;i.amPM!==void 0&&q===i.amPM&&(i.amPM.textContent=i.l10n.amPM[bo(i.amPM.textContent===i.l10n.amPM[0])]);var pe=parseFloat(N.getAttribute("min")),Se=parseFloat(N.getAttribute("max")),Je=parseFloat(N.getAttribute("step")),Ee=parseInt(N.value,10),Ze=P.delta||(L?P.which===38?1:-1:0),oe=Ee+Je*Ze;if(typeof N.value<"u"&&N.value.length===2){var Ge=N===i.hourElement,Nt=N===i.minuteElement;oe<pe?(oe=Se+oe+bo(!Ge)+(bo(Ge)&&bo(!i.amPM)),Nt&&O(void 0,-1,i.hourElement)):oe>Se&&(oe=N===i.hourElement?oe-Se-bo(!i.amPM):pe,Nt&&O(void 0,1,i.hourElement)),i.amPM&&Ge&&(Je===1?oe+Ee===23:Math.abs(oe-Ee)>Je)&&(i.amPM.textContent=i.l10n.amPM[bo(i.amPM.textContent===i.l10n.amPM[0])]),N.value=gn(oe)}}return s(),i}function Og(t,e){for(var i=Array.prototype.slice.call(t).filter(function(o){return o instanceof HTMLElement}),r=[],s=0;s<i.length;s++){var n=i[s];try{if(n.getAttribute("data-fp-omit")!==null)continue;n._flatpickr!==void 0&&(n._flatpickr.destroy(),n._flatpickr=void 0),n._flatpickr=oOe(n,e||{}),r.push(n._flatpickr)}catch(o){console.error(o)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return Og(this,t)},HTMLElement.prototype.flatpickr=function(t){return Og([this],t)});var ur=function(t,e){return typeof t=="string"?Og(window.document.querySelectorAll(t),e):t instanceof Node?Og([t],e):Og(t,e)};ur.defaultConfig={};ur.l10ns={en:cs({},Ow),default:cs({},Ow)};ur.localize=function(t){ur.l10ns.default=cs(cs({},ur.l10ns.default),t)};ur.setDefaults=function(t){ur.defaultConfig=cs(cs({},ur.defaultConfig),t)};ur.parseDate=QO({});ur.formatDate=CQ({});ur.compareDates=Un;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return Og(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=ur);var a0={exports:{}},aOe=a0.exports,BU;function lOe(){return BU||(BU=1,function(t,e){(function(i,r){r(e)})(aOe,function(i){var r=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},s={weekdays:{shorthand:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],longhand:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"]},months:{shorthand:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],longhand:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"]},firstDayOfWeek:1,ordinal:function(){return""},rangeSeparator:" al ",weekAbbreviation:"Se",scrollTitle:"Scrolla per aumentare",toggleTitle:"Clicca per cambiare",time_24hr:!0};r.l10ns.it=s;var n=r.l10ns;i.Italian=s,i.default=n,Object.defineProperty(i,"__esModule",{value:!0})})}(a0,a0.exports)),a0.exports}var uOe=lOe();class Xr{constructor(e){this.table=e}reloadData(e,i,r){return this.table.dataLoader.load(e,void 0,void 0,void 0,i,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(e){return this.table.modules.layout.layout(e)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(e){return this.table.eventBus.subscribed(e)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(e){return this.table.externalEvents.subscribed(e)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(e){return this.table.options[e]}setOption(e,i){return typeof i<"u"&&(this.table.options[e]=i),this.table.options[e]}deprecationCheck(e,i,r){return this.table.deprecationAdvisor.check(e,i,r)}deprecationCheckMsg(e,i){return this.table.deprecationAdvisor.checkMsg(e,i)}deprecationMsg(e){return this.table.deprecationAdvisor.msg(e)}module(e){return this.table.module(e)}}class ti{static elVisible(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)}static elOffset(e){var i=e.getBoundingClientRect();return{top:i.top+window.pageYOffset-document.documentElement.clientTop,left:i.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(e,i,r){var s=e?i.split(e):[i],n=s.length,o;for(let a=0;a<n&&(r=r[s[a]],o=r,!!r);a++);return o}static deepClone(e,i,r=[]){var s={}.__proto__,n=[].__proto__;i||(i=Object.assign(Array.isArray(e)?[]:{},e));for(var o in e){let a=e[o],l,u;a!=null&&typeof a=="object"&&(a.__proto__===s||a.__proto__===n)&&(l=r.findIndex(h=>h.subject===a),l>-1?i[o]=r[l].copy:(u=Object.assign(Array.isArray(a)?[]:{},a),r.unshift({subject:a,copy:u}),i[o]=this.deepClone(a,u,r)))}return i}}let cOe=class TQ extends Xr{constructor(e,i,r){super(e),this.element=i,this.container=this._lookupContainer(),this.parent=r,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var e=this.table.options.popupContainer;return typeof e=="string"?(e=document.querySelector(e),e||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):e===!0&&(e=this.table.element),e&&!this._checkContainerIsParent(e)&&(e=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),e||(e=document.body),e}_checkContainerIsParent(e,i=this.table.element){return e===i?!0:i.parentNode?this._checkContainerIsParent(e,i.parentNode):!1}renderCallback(e){this.renderedCallback=e}containerEventCoords(e){var i=!(e instanceof MouseEvent),r=i?e.touches[0].pageX:e.pageX,s=i?e.touches[0].pageY:e.pageY;if(this.container!==document.body){let n=ti.elOffset(this.container);r-=n.left,s-=n.top}return{x:r,y:s}}elementPositionCoords(e,i="right"){var r=ti.elOffset(e),s,n,o;switch(this.container!==document.body&&(s=ti.elOffset(this.container),r.left-=s.left,r.top-=s.top),i){case"right":n=r.left+e.offsetWidth,o=r.top-1;break;case"bottom":n=r.left,o=r.top+e.offsetHeight;break;case"left":n=r.left,o=r.top-1;break;case"top":n=r.left,o=r.top;break;case"center":n=r.left+e.offsetWidth/2,o=r.top+e.offsetHeight/2;break}return{x:n,y:o,offset:r}}show(e,i){var r,s,n,o,a;return this.destroyed||this.table.destroyed?this:(e instanceof HTMLElement?(n=e,a=this.elementPositionCoords(e,i),o=a.offset,r=a.x,s=a.y):typeof e=="number"?(o={top:0,left:0},r=e,s=i):(a=this.containerEventCoords(e),r=a.x,s=a.y,this.reversedX=!1),this.element.style.top=s+"px",this.element.style.left=r+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(r,s,n,o,i),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",l=>{l.stopPropagation()}),this)}_fitToScreen(e,i,r,s,n){var o=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(e+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",r?this.element.style.right=this.container.offsetWidth-s.left+"px":this.element.style.right=this.container.offsetWidth-e+"px",this.reversedX=!0);let a=Math.max(this.container.offsetHeight,o?this.container.scrollHeight:0);if(i+this.element.offsetHeight>a)if(r)switch(n){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-r.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+r.offsetHeight+1+"px"}else this.element.style.height=a+"px"}isVisible(){return this.visible}hideOnBlur(e){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=e),this}_escapeCheck(e){e.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(e=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!e&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(e){return this.childPopup&&this.childPopup.hide(),this.childPopup=new TQ(this.table,e,this),this.childPopup}};class ft extends Xr{constructor(e,i){super(e),this._handler=null}initialize(){}registerTableOption(e,i){this.table.optionsList.register(e,i)}registerColumnOption(e,i){this.table.columnManager.optionsList.register(e,i)}registerTableFunction(e,i){typeof this.table[e]>"u"?this.table[e]=(...r)=>(this.table.initGuard(e),i(...r)):console.warn("Unable to bind table function, name already in use",e)}registerComponentFunction(e,i,r){return this.table.componentFunctionBinder.bind(e,i,r)}registerDataHandler(e,i){this.table.rowManager.registerDataPipelineHandler(e,i),this._handler=e}registerDisplayHandler(e,i){this.table.rowManager.registerDisplayPipelineHandler(e,i),this._handler=e}displayRows(e){var i=this.table.rowManager.displayRows.length-1,r;if(this._handler&&(r=this.table.rowManager.displayPipeline.findIndex(s=>s.handler===this._handler),r>-1&&(i=r)),e&&(i=i+e),this._handler)return i>-1?this.table.rowManager.getDisplayRows(i):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(e,i){i||(i=this._handler),i&&this.table.rowManager.refreshActiveData(i,!1,e)}footerAppend(e){return this.table.footerManager.append(e)}footerPrepend(e){return this.table.footerManager.prepend(e)}footerRemove(e){return this.table.footerManager.remove(e)}popup(e,i){return new cOe(this.table,e,i)}alert(e,i){return this.table.alertManager.alert(e,i)}clearAlert(){return this.table.alertManager.clear()}}var hOe={rownum:function(t,e,i,r,s,n){return n.getPosition()}};class yC extends ft{static moduleName="accessor";static accessors=hOe;constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var i=!1,r={};this.allowedTypes.forEach(s=>{var n="accessor"+(s.charAt(0).toUpperCase()+s.slice(1)),o;e.definition[n]&&(o=this.lookupAccessor(e.definition[n]),o&&(i=!0,r[n]={accessor:o,params:e.definition[n+"Params"]||{}}))}),i&&(e.modules.accessor=r)}lookupAccessor(e){var i=!1;switch(typeof e){case"string":yC.accessors[e]?i=yC.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":i=e;break}return i}transformRow(e,i){var r="accessor"+(i.charAt(0).toUpperCase()+i.slice(1)),s=e.getComponent(),n=ti.deepClone(e.data||{});return this.table.columnManager.traverse(function(o){var a,l,u,h;o.modules.accessor&&(l=o.modules.accessor[r]||o.modules.accessor.accessor||!1,l&&(a=o.getFieldValue(n),a!="undefined"&&(h=o.getComponent(),u=typeof l.params=="function"?l.params(a,n,i,h,s):l.params,o.setFieldValue(n,l.accessor(a,n,i,u,h,s)))))}),n}}var dOe={method:"GET"};function eP(t,e){var i=[];if(e=e||"",Array.isArray(t))t.forEach((s,n)=>{i=i.concat(eP(s,e?e+"["+n+"]":n))});else if(typeof t=="object")for(var r in t)i=i.concat(eP(t[r],e?e+"["+r+"]":r));else i.push({key:e,value:t});return i}function pOe(t){var e=eP(t),i=[];return e.forEach(function(r){i.push(encodeURIComponent(r.key)+"="+encodeURIComponent(r.value))}),i.join("&")}function MQ(t,e,i){return t&&i&&Object.keys(i).length&&(!e.method||e.method.toLowerCase()=="get")&&(e.method="get",t+=(t.includes("?")?"&":"?")+pOe(i)),t}function fOe(t,e,i){var r;return new Promise((s,n)=>{if(t=this.urlGenerator.call(this.table,t,e,i),e.method.toUpperCase()!="GET")if(r=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],r){for(var o in r.headers)e.headers||(e.headers={}),typeof e.headers[o]>"u"&&(e.headers[o]=r.headers[o]);e.body=r.body.call(this,t,e,i)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);t?(typeof e.headers>"u"&&(e.headers={}),typeof e.headers.Accept>"u"&&(e.headers.Accept="application/json"),typeof e.headers["X-Requested-With"]>"u"&&(e.headers["X-Requested-With"]="XMLHttpRequest"),typeof e.mode>"u"&&(e.mode="cors"),e.mode=="cors"?(typeof e.headers.Origin>"u"&&(e.headers.Origin=window.location.origin),typeof e.credentials>"u"&&(e.credentials="same-origin")):typeof e.credentials>"u"&&(e.credentials="include"),fetch(t,e).then(a=>{a.ok?a.json().then(l=>{s(l)}).catch(l=>{n(l),console.warn("Ajax Load Error - Invalid JSON returned",l)}):(console.error("Ajax Load Error - Connection Error: "+a.status,a.statusText),n(a))}).catch(a=>{console.error("Ajax Load Error - Connection Error: ",a),n(a)})):(console.warn("Ajax Load Error - No URL Set"),s([]))})}function tP(t,e){var i=[];if(e=e||"",Array.isArray(t))t.forEach((s,n)=>{i=i.concat(tP(s,e?e+"["+n+"]":n))});else if(typeof t=="object")for(var r in t)i=i.concat(tP(t[r],e?e+"["+r+"]":r));else i.push({key:e,value:t});return i}var mOe={json:{headers:{"Content-Type":"application/json"},body:function(t,e,i){return JSON.stringify(i)}},form:{headers:{},body:function(t,e,i){var r=tP(i),s=new FormData;return r.forEach(function(n){s.append(n.key,n.value)}),s}}};class dg extends ft{static moduleName="ajax";static defaultConfig=dOe;static defaultURLGenerator=MQ;static defaultLoaderPromise=fOe;static contentTypeFormatters=mOe;constructor(e){super(e),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=dg.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||dg.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||dg.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(e,i,r,s){var n=this.table.options.ajaxParams;return n&&(typeof n=="function"&&(n=n.call(this.table)),s=Object.assign(Object.assign({},n),s)),s}requestDataCheck(e,i,r,s){return!!(!e&&this.url||typeof e=="string")}requestData(e,i,r,s,n){var o;return!n&&this.requestDataCheck(e)?(e&&this.setUrl(e),o=this.generateConfig(r),this.sendRequest(this.url,i,o)):n}setDefaultConfig(e={}){this.config=Object.assign({},dg.defaultConfig),typeof e=="string"?this.config.method=e:Object.assign(this.config,e)}generateConfig(e={}){var i=Object.assign({},this.config);return typeof e=="string"?i.method=e:Object.assign(i,e),i}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e,i,r){return this.table.options.ajaxRequesting.call(this.table,e,i)!==!1?this.loaderPromise(e,r,i).then(s=>(this.table.options.ajaxResponse&&(s=this.table.options.ajaxResponse.call(this.table,e,i,s)),s)):Promise.reject()}}var gOe={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},yOe={table:function(t){var e=[],i=!0,r=this.table.columnManager.columns,s=[],n=[];return t=t.split(`
`),t.forEach(function(o){e.push(o.split("	"))}),e.length&&!(e.length===1&&e[0].length<2)?(e[0].forEach(function(o){var a=r.find(function(l){return o&&l.definition.title&&o.trim()&&l.definition.title.trim()===o.trim()});a?s.push(a):i=!1}),i||(i=!0,s=[],e[0].forEach(function(o){var a=r.find(function(l){return o&&l.field&&o.trim()&&l.field.trim()===o.trim()});a?s.push(a):i=!1}),i||(s=this.table.columnManager.columnsByIndex)),i&&e.shift(),e.forEach(function(o){var a={};o.forEach(function(l,u){s[u]&&(a[s[u].field]=l)}),n.push(a)}),n):!1}},bOe={copyToClipboard:["ctrl + 67","meta + 67"]},vOe={copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},wOe={keybindings:{bindings:bOe,actions:vOe}};class bC extends ft{static moduleName="clipboard";static moduleExtensions=wOe;static pasteActions=gOe;static pasteParsers=yOe;constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",e=>{var i,r,s;this.blocked||(e.preventDefault(),this.customSelection?(i=this.customSelection,this.table.options.clipboardCopyFormatter&&(i=this.table.options.clipboardCopyFormatter("plain",i))):(s=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),r=this.table.modules.export.generateHTMLTable(s),i=r?this.generatePlainContent(s):"",this.table.options.clipboardCopyFormatter&&(i=this.table.options.clipboardCopyFormatter("plain",i),r=this.table.options.clipboardCopyFormatter("html",r))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",i):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",i),r&&e.clipboardData.setData("text/html",r)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",i),r&&e.originalEvent.clipboardData.setData("text/html",r)),this.dispatchExternal("clipboardCopied",i,r),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var i=[];return e.forEach(r=>{var s=[];r.columns.forEach(n=>{var o="";if(n)if(r.type==="group"&&(n.value=n.component.getKey()),n.value===null)o="";else switch(typeof n.value){case"object":o=JSON.stringify(n.value);break;case"undefined":o="";break;default:o=n.value}s.push(o)}),i.push(s.join("	"))}),i.join(`
`)}copy(e,i){var r,s;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(e=document.createRange(),e.selectNodeContents(this.table.element),r=window.getSelection(),r.toString()&&i&&(this.customSelection=r.toString()),r.removeAllRanges(),r.addRange(e)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(s=document.body.createTextRange(),s.moveToElementText(this.table.element),s.select()),document.execCommand("copy"),r&&r.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=bC.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;break}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=bC.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;break}}paste(e){var i,r,s;this.checkPasteOrigin(e)&&(i=this.getPasteData(e),r=this.pasteParser.call(this,i),r?(e.preventDefault(),this.table.modExists("mutator")&&(r=this.mutateData(r)),s=this.pasteAction.call(this,r),this.dispatchExternal("clipboardPasted",i,r,s)):this.dispatchExternal("clipboardPasteError",i))}mutateData(e){var i=[];return Array.isArray(e)?e.forEach(r=>{i.push(this.table.modules.mutator.transformRow(r,"clipboard"))}):i=e,i}checkPasteOrigin(e){var i=!0,r=this.confirm("clipboard-paste",[e]);return(r||!["DIV","SPAN"].includes(e.target.tagName))&&(i=!1),i}getPasteData(e){var i;return window.clipboardData&&window.clipboardData.getData?i=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?i=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(i=e.originalEvent.clipboardData.getData("text/plain")),i}}class _Oe{constructor(e){return this._row=e,new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._row.table.componentFunctionBinder.handle("row",i._row,r)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var e=[];return this._row.getCells().forEach(function(i){e.push(i.getComponent())}),e}getCell(e){var i=this._row.getCell(e);return i?i.getComponent():!1}_getSelf(){return this._row}}class kQ{constructor(e){return this._cell=e,new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._cell.table.componentFunctionBinder.handle("cell",i._cell,r)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(e){return this._cell.row.getData(e)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(e,i){typeof i>"u"&&(i=!0),this._cell.setValue(e,i)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class y1 extends Xr{constructor(e,i){super(e.table),this.table=e.table,this.column=e,this.row=i,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var e=this.element,i=this.column.getField(),r={top:"flex-start",bottom:"flex-end",middle:"center"},s={left:"flex-start",right:"flex-end",center:"center"};if(e.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(e.style.display="inline-flex",e.style.alignItems=r[this.column.vertAlign]||"",this.column.hozAlign&&(e.style.justifyContent=s[this.column.hozAlign]||"")),i&&e.setAttribute("tabulator-field",i),this.column.definition.cssClass){var n=this.column.definition.cssClass.split(" ");n.forEach(o=>{e.classList.add(o)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var e;switch(e=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof e){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",e!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=e}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(e,i,r){var s=this.setValueProcessData(e,i,r);s&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(e,i,r){var s=!1;return(this.value!==e||r)&&(s=!0,i&&(e=this.chain("cell-value-changing",[this,e],null,e))),this.setValueActual(e),s&&this.dispatch("cell-value-changed",this),s}setValueActual(e){this.oldValue=this.value,this.value=e,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,e),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new kQ(this)),this.component}}class RQ{constructor(e){return this._column=e,this.type="ColumnComponent",new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._column.table.componentFunctionBinder.handle("column",i._column,r)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var e=[];return this._column.cells.forEach(function(i){e.push(i.getComponent())}),e}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(e){e.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(e){e.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(i){e.push(i.getComponent())}),e}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(e,i){return this._column.table.columnManager.scrollToColumn(this._column,e,i)}getTable(){return this._column.table}move(e,i){var r=this._column.table.columnManager.findColumn(e);r?this._column.table.columnManager.moveColumn(this._column,r,i):console.warn("Move Error - No matching column found:",r)}getNextColumn(){var e=this._column.nextColumn();return e?e.getComponent():!1}getPrevColumn(){var e=this._column.prevColumn();return e?e.getComponent():!1}updateDefinition(e){return this._column.updateDefinition(e)}getWidth(){return this._column.getWidth()}setWidth(e){var i;return e===!0?i=this._column.reinitializeWidth(!0):i=this._column.setWidth(e),this._column.table.columnManager.rerenderColumns(!0),i}}var IQ={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0};class Cl extends Xr{static defaultOptionList=IQ;constructor(e,i,r){super(i.table),this.definition=e,this.parent=i,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=r,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((s,n)=>{var o=new Cl(s,this);this.attachColumn(o)}),this.checkColumnVisibility()):i.registerColumnField(this),this._initialize()}createElement(){var e=document.createElement("div");switch(e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),this.isRowHeader&&e.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":e.style.justifyContent="center";break;case"bottom":e.style.justifyContent="flex-end";break}return e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let i in e)typeof this.definition[i]>"u"&&(this.definition[i]=e[i]);this.definition=this.table.columnManager.optionsList.generate(Cl.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{Cl.defaultOptionList.indexOf(e)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),e.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var e=this.definition;if(this.dispatch("column-layout",this),typeof e.visible<"u"&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass){var i=e.cssClass.split(" ");i.forEach(r=>{this.element.classList.add(r)})}e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxInitialWidth&&(this.maxInitialWidth=parseInt(e.maxInitialWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,i=document.createElement("div");if(i.classList.add("tabulator-col-title"),e.headerWordWrap&&i.classList.add("tabulator-col-title-wrap"),e.editableTitle){var r=document.createElement("input");r.classList.add("tabulator-title-editor"),r.addEventListener("click",s=>{s.stopPropagation(),r.focus()}),r.addEventListener("mousedown",s=>{s.stopPropagation()}),r.addEventListener("change",()=>{e.title=r.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),i.appendChild(r),e.field?this.langBind("columns|"+e.field,s=>{r.value=s||e.title||"&nbsp;"}):r.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,s=>{this._formatColumnHeaderTitle(i,s||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(i,e.title||"&nbsp;");return i}_formatColumnHeaderTitle(e,i){var r=this.chain("column-format",[this,i,e],null,()=>i);switch(typeof r){case"object":r instanceof Node?e.appendChild(r):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",r));break;case"undefined":e.innerHTML="";break;default:e.innerHTML=r}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var e=this.definition.cssClass.split(" ");e.forEach(i=>{this.element.classList.add(i)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var i=e,r=this.fieldStructure,s=r.length,n;for(let o=0;o<s&&(i=i[r[o]],n=i,!!i);o++);return n}_setFlatData(e,i){this.field&&(e[this.field]=i)}_setNestedData(e,i){var r=e,s=this.fieldStructure,n=s.length;for(let o=0;o<n;o++)if(o==n-1)r[s[o]]=i;else{if(!r[s[o]])if(typeof i<"u")r[s[o]]={};else break;r=r[s[o]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement()),e.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,i){var r=this.parent.isGroup?this.parent.getGroupElement().clientHeight:i||this.parent.getHeadersElement().clientHeight;this.element.style.height=r+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=r-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(s){s.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(e){var i=[];return e?this.columns.forEach(r=>{i.push(r),i=i.concat(r.getColumns(!0))}):i=this.columns,i}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var i=[];return this.isGroup&&e&&(this.columns.forEach(function(r){i.push(r.getDefinition(!0))}),this.definition.columns=i),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(i){i.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,i){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,i),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(e,i){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.hide()}),this.dispatch("column-hide",this,i),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(i){i.visible&&(e+=i.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.table.initialized&&(this.element.style.width=e+"px"),this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var i=this.columns.indexOf(e);i>-1&&this.columns.splice(i,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(i){i.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var e=[];this.cells.forEach(function(i){i.row.heightInitialized&&(i.row.getElement().offsetParent!==null?(e.push(i.row),i.row.clearCellHeight()):i.row.heightInitialized=!1)}),e.forEach(function(i){i.calcHeight()}),e.forEach(function(i){i.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(i){i.visible&&(e+=i.getWidth())}):e=this.width,e}getLeftOffset(){var e=this.element.offsetLeft;return this.parent.isGroup&&(e+=this.parent.getLeftOffset()),e}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(e){this.maxWidth&&e>this.maxWidth&&(e=this.maxWidth,console.warn("the minWidth ("+e+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(i){i.setMinWidth()})}setMaxWidth(e){this.minWidth&&e<this.minWidth&&(e=this.minWidth,console.warn("the maxWidth ("+e+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(i){i.setMaxWidth()})}delete(){return new Promise((e,i)=>{this.isGroup&&this.columns.forEach(function(s){s.delete()}),this.dispatch("column-delete",this);var r=this.cells.length;for(let s=0;s<r;s++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(e){var i=new y1(this,e);return this.cells.push(i),i}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._nextVisibleColumn(e+1):!1}_nextVisibleColumn(e){var i=this.table.columnManager.getColumnByIndex(e);return!i||i.visible?i:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._prevVisibleColumn(e-1):!1}_prevVisibleColumn(e){var i=this.table.columnManager.getColumnByIndex(e);return!i||i.visible?i:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,typeof this.definition.width<"u"&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(e),this.dispatch("column-width-fit-after",this)}fitToData(e){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(s=>{s.clearWidth()}));var i=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(s=>{var n=s.getWidth();n>i&&(i=n)}),i)){var r=i+1;e?this.setWidth(r):(this.maxInitialWidth&&!e&&(r=Math.min(r,this.maxInitialWidth)),this.setWidthActual(r))}}}updateDefinition(e){var i;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(i=Object.assign({},this.getDefinition()),i=Object.assign(i,e),this.table.columnManager.addColumn(i,!1,this).then(r=>(i.field==this.field&&(this.field=!1),this.delete().then(()=>r.getComponent()))))}deleteCell(e){var i=this.cells.indexOf(e);i>-1&&this.cells.splice(i,1)}getComponent(){return this.component||(this.component=new RQ(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof Cl?this.parent.getComponent():!1}}class XT{constructor(e){return this._row=e,new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._row.table.componentFunctionBinder.handle("row",i._row,r)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getCells(){var e=[];return this._row.getCells().forEach(function(i){e.push(i.getComponent())}),e}getCell(e){var i=this._row.getCell(e);return i?i.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(e){return this._row.watchPosition(e)}delete(){return this._row.delete()}scrollTo(e,i){return this._row.table.rowManager.scrollToRow(this._row,e,i)}move(e,i){this._row.moveToRow(e,i)}update(e){return this._row.updateData(e)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var e=this._row.nextRow();return e&&e.getComponent()}getPrevRow(){var e=this._row.prevRow();return e&&e.getComponent()}}class ds extends Xr{constructor(e,i,r="row"){super(i.table),this.parent=i,this.data={},this.type=r,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(e)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(e,i){if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,i),e&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,i)}rendered(){this.cells.forEach(e=>{e.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(e){var i=0,r=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(r=this.calcMinHeight(),i=this.calcMaxHeight(),e?this.height=Math.max(i,r):this.height=this.manualHeight?this.height:Math.max(i,r)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var e=0;return this.cells.forEach(function(i){var r=i.getHeight();r>e&&(e=r)}),e}setCellHeight(){this.cells.forEach(function(e){e.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(e){e.clearHeight()})}normalizeHeight(e){e&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()}setHeight(e,i){(this.height!=e||i)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(e){var i=this.cells.indexOf(e);i>-1&&this.cells.splice(i,1)}setData(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e),this.dispatch("row-data-init-after",this)}updateData(e){var i=this.element&&ti.elVisible(this.element),r={},s;return new Promise((n,o)=>{typeof e=="string"&&(e=JSON.parse(e)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(r=Object.assign(r,this.data),r=Object.assign(r,e)),s=this.chain("row-data-changing",[this,r,e],null,e);for(let a in s)this.data[a]=s[a];this.dispatch("row-data-save-after",this);for(let a in e)this.table.columnManager.getColumnsByFieldRoot(a).forEach(u=>{let h=this.getCell(u.getField());if(h){let p=u.getFieldValue(s);h.getValue()!==p&&(h.setValueProcessData(p),i&&h.cellRendered())}});i?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,i,e),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),n()})}getData(e){return e?this.chain("row-data-retrieve",[this,e],null,this.data):this.data}getCell(e){var i=!1;return e=this.table.columnManager.findColumn(e),!this.initialized&&this.cells.length===0&&this.generateCells(),i=this.cells.find(function(r){return r.column===e}),i}getCellIndex(e){return this.cells.findIndex(function(i){return i===e})}findCell(e){return this.cells.find(i=>i.element===e)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var e=this.table.rowManager.nextDisplayRow(this,!0);return e||!1}prevRow(){var e=this.table.rowManager.prevDisplayRow(this,!0);return e||!1}moveToRow(e,i){var r=this.table.rowManager.findRow(e);r?(this.table.rowManager.moveRowActual(this,r,!i),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(e){this.detachModules(),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var e=this.cells.length;for(let i=0;i<e;i++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(e){e!=this.position&&(this.position=e,this.positionWatchers.forEach(i=>{i(this.position)}))}watchPosition(e){this.positionWatchers.push(e),e(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new XT(this)),this.component}}var xOe={avg:function(t,e,i){var r=0,s=typeof i.precision<"u"?i.precision:2;return t.length&&(r=t.reduce(function(n,o){return Number(n)+Number(o)}),r=r/t.length,r=s!==!1?r.toFixed(s):r),parseFloat(r).toString()},max:function(t,e,i){var r=null,s=typeof i.precision<"u"?i.precision:!1;return t.forEach(function(n){n=Number(n),(n>r||r===null)&&(r=n)}),r!==null?s!==!1?r.toFixed(s):r:""},min:function(t,e,i){var r=null,s=typeof i.precision<"u"?i.precision:!1;return t.forEach(function(n){n=Number(n),(n<r||r===null)&&(r=n)}),r!==null?s!==!1?r.toFixed(s):r:""},sum:function(t,e,i){var r=0,s=typeof i.precision<"u"?i.precision:!1;return t.length&&t.forEach(function(n){n=Number(n),r+=isNaN(n)?0:Number(n)}),s!==!1?r.toFixed(s):r},concat:function(t,e,i){var r=0;return t.length&&(r=t.reduce(function(s,n){return String(s)+String(n)})),r},count:function(t,e,i){var r=0;return t.length&&t.forEach(function(s){s&&r++}),r},unique:function(t,e,i){var r=t.filter((s,n)=>(t||s===0)&&t.indexOf(s)===n);return r.length}};class pg extends ft{static moduleName="columnCalcs";static calculations=xOe;constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new Cl({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(e,i){return this.topRow&&i.unshift(this.topRow),this.botRow&&i.push(this.botRow),i}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(e):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var i=e.definition,r={topCalcParams:i.topCalcParams||{},botCalcParams:i.bottomCalcParams||{}};if(i.topCalc){switch(typeof i.topCalc){case"string":pg.calculations[i.topCalc]?r.topCalc=pg.calculations[i.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",i.topCalc);break;case"function":r.topCalc=i.topCalc;break}r.topCalc&&(e.modules.columnCalcs=r,this.topCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(i.bottomCalc){switch(typeof i.bottomCalc){case"string":pg.calculations[i.bottomCalc]?r.botCalc=pg.calculations[i.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",i.bottomCalc);break;case"function":r.botCalc=i.bottomCalc;break}r.botCalc&&(e.modules.columnCalcs=r,this.botCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var e=document.createDocumentFragment();this.topInitialized||(e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=e)}recalc(e){var i,r;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(i=this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),r=this.generateRow("top",i),this.topRow=r;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(r.getElement()),r.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),r=this.generateRow("bottom",i),this.botRow=r;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(r.getElement()),r.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var e=this.table.modules.groupRows.getChildGroups();e.forEach(i=>{this.recalcGroup(i)})}}recalcGroup(e){var i,r;this.blockCheck()||e&&e.calcs&&(e.calcs.bottom&&(i=this.rowsToData(e.rows),r=this.generateRowData("bottom",i),e.calcs.bottom.updateData(r),e.calcs.bottom.reinitialize()),e.calcs.top&&(i=this.rowsToData(e.rows),r=this.generateRowData("top",i),e.calcs.top.updateData(r),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var i=[],r=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,s=this.table.modules.dataTree;return e.forEach(n=>{i.push(n.getData()),r&&n.modules.dataTree?.open&&this.rowsToData(s.getFilteredTreeChildren(n)).forEach(o=>{i.push(n)})}),i}generateRow(e,i){var r=this.generateRowData(e,i),s;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),s=new ds(r,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),s.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),s.component=!1,s.getComponent=()=>(s.component||(s.component=new _Oe(s)),s.component),s.generateCells=()=>{var n=[];this.table.columnManager.columnsByIndex.forEach(o=>{this.genColumn.setField(o.getField()),this.genColumn.hozAlign=o.hozAlign,o.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter(o.definition[e+"CalcFormatter"]),params:o.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=o.definition.cssClass;var a=new y1(this.genColumn,s);a.getElement(),a.column=o,a.setWidth(),o.cells.push(a),n.push(a),o.visible||a.hide()}),s.cells=n},s}generateRowData(e,i){var r={},s=e=="top"?this.topCalcs:this.botCalcs,n=e=="top"?"topCalc":"botCalc",o,a;return s.forEach(function(l){var u=[];l.modules.columnCalcs&&l.modules.columnCalcs[n]&&(i.forEach(function(h){u.push(l.getFieldValue(h))}),a=n+"Params",o=typeof l.modules.columnCalcs[a]=="function"?l.modules.columnCalcs[a](u,i):l.modules.columnCalcs[a],l.setFieldValue(r,l.modules.columnCalcs[n](u,i,o)))}),r}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={},i;return this.table.options.groupBy&&this.table.modExists("groupRows")?(i=this.table.modules.groupRows.getGroups(!0),i.forEach(r=>{e[r.getKey()]=this.getGroupResults(r)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var i=e._getSelf(),r=e.getSubGroups(),s={},n={};return r.forEach(o=>{s[o.getKey()]=this.getGroupResults(o)}),n={top:i.calcs.top?i.calcs.top.getData():{},bottom:i.calcs.bottom?i.calcs.bottom.getData():{},groups:s},n}adjustForScrollbar(e){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=e+"px":this.botElement.style.paddingRight=e+"px")}}class SOe extends ft{static moduleName="dataTree";constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,i=this.table.options;switch(this.field=i.dataTreeChildField,this.indent=i.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),i.dataTreeBranchElement?i.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof i.dataTreeBranchElement=="string"?(e=document.createElement("div"),e.innerHTML=i.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=i.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),i.dataTreeCollapseElement?typeof i.dataTreeCollapseElement=="string"?(e=document.createElement("div"),e.innerHTML=i.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=i.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),i.dataTreeExpandElement?typeof i.dataTreeExpandElement=="string"?(e=document.createElement("div"),e.innerHTML=i.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=i.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof i.dataTreeStartExpanded){case"boolean":this.startOpen=function(r,s){return i.dataTreeStartExpanded};break;case"function":this.startOpen=i.dataTreeStartExpanded;break;default:this.startOpen=function(r,s){return i.dataTreeStartExpanded[s]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(e){var i;e&&(i=this.table.rowManager.getRows(),i.forEach(r=>{this.reinitializeRowChildren(r)}))}initializeElementField(){var e=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(e?e.field:!1)}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(i=>{e=e.concat(this.getTreeChildren(i,!1,!0))}),e}rowDataChanged(e,i,r){this.redrawNeeded(r)&&(this.initializeRow(e),i&&(this.layoutRow(e),this.refreshData(!0)))}cellValueChanged(e){var i=e.column.getField();i===this.elementField&&this.layoutRow(e.row)}initializeRow(e){var i=e.getData()[this.field],r=Array.isArray(i),s=r||!r&&typeof i=="object"&&i!==null;!s&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!s&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:s?e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0):!1,controlEl:e.modules.dataTree&&s?e.modules.dataTree.controlEl:!1,branchEl:e.modules.dataTree&&s?e.modules.dataTree.branchEl:!1,parent:e.modules.dataTree?e.modules.dataTree.parent:!1,children:s}}reinitializeRowChildren(e){var i=this.getTreeChildren(e,!1,!0);i.forEach(function(r){r.reinitialize(!0)})}layoutRow(e){var i=this.elementField?e.getCell(this.elementField):e.getCells()[0],r=i.getElement(),s=e.modules.dataTree;s.branchEl&&(s.branchEl.parentNode&&s.branchEl.parentNode.removeChild(s.branchEl),s.branchEl=!1),s.controlEl&&(s.controlEl.parentNode&&s.controlEl.parentNode.removeChild(s.controlEl),s.controlEl=!1),this.generateControlElement(e,r),e.getElement().classList.add("tabulator-tree-level-"+s.index),s.index&&(this.branchEl?(s.branchEl=this.branchEl.cloneNode(!0),r.insertBefore(s.branchEl,r.firstChild),this.table.rtl?s.branchEl.style.marginRight=(s.branchEl.offsetWidth+s.branchEl.style.marginLeft)*(s.index-1)+s.index*this.indent+"px":s.branchEl.style.marginLeft=(s.branchEl.offsetWidth+s.branchEl.style.marginRight)*(s.index-1)+s.index*this.indent+"px"):this.table.rtl?r.style.paddingRight=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-right"))+s.index*this.indent+"px":r.style.paddingLeft=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-left"))+s.index*this.indent+"px")}generateControlElement(e,i){var r=e.modules.dataTree,s=r.controlEl;i=i||e.getCells()[0].getElement(),r.children!==!1&&(r.open?(r.controlEl=this.collapseEl.cloneNode(!0),r.controlEl.addEventListener("click",n=>{n.stopPropagation(),this.collapseRow(e)})):(r.controlEl=this.expandEl.cloneNode(!0),r.controlEl.addEventListener("click",n=>{n.stopPropagation(),this.expandRow(e)})),r.controlEl.addEventListener("mousedown",n=>{n.stopPropagation()}),s&&s.parentNode===i?s.parentNode.replaceChild(r.controlEl,s):i.insertBefore(r.controlEl,i.firstChild))}getRows(e){var i=[];return e.forEach((r,s)=>{var n,o;i.push(r),r instanceof ds&&(r.create(),n=r.modules.dataTree,!n.index&&n.children!==!1&&(o=this.getChildren(r,!1,!0),o.forEach(a=>{a.create(),i.push(a)})))}),i}getChildren(e,i,r){var s=e.modules.dataTree,n=[],o=[];return s.children!==!1&&(s.open||i)&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?n=this.table.modules.filter.filter(s.children):n=s.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(n,r),n.forEach(a=>{o.push(a);var l=this.getChildren(a,!1,!0);l.forEach(u=>{o.push(u)})})),o}generateChildren(e){var i=[],r=e.getData()[this.field];return Array.isArray(r)||(r=[r]),r.forEach(s=>{var n=new ds(s||{},this.table.rowManager);n.create(),n.modules.dataTree.index=e.modules.dataTree.index+1,n.modules.dataTree.parent=e,n.modules.dataTree.children&&(n.modules.dataTree.open=this.startOpen(n.getComponent(),n.modules.dataTree.index)),i.push(n)}),i}expandRow(e,i){var r=e.modules.dataTree;r.children!==!1&&(r.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var i=e.modules.dataTree;i.children!==!1&&(i.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var i=e.modules.dataTree;i.children!==!1&&(i.open?this.collapseRow(e):this.expandRow(e))}isRowExpanded(e){return e.modules.dataTree.open}getTreeParent(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(e){return e.modules.dataTree&&e.modules.dataTree.parent?this.getTreeParentRoot(e.modules.dataTree.parent):e}getFilteredTreeChildren(e){var i=e.modules.dataTree,r=[],s;return i.children&&(Array.isArray(i.children)||(i.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?s=this.table.modules.filter.filter(i.children):s=i.children,s.forEach(n=>{n instanceof ds&&r.push(n)})),r}rowDeleting(e){var i=e.modules.dataTree;i&&i.children&&Array.isArray(i.children)&&i.children.forEach(r=>{r instanceof ds&&r.wipe()})}rowDelete(e){var i=e.modules.dataTree.parent,r;i&&(r=this.findChildIndex(e,i),r!==!1&&i.data[this.field].splice(r,1),i.data[this.field].length||delete i.data[this.field],this.initializeRow(i),this.layoutRow(i)),this.refreshData(!0)}addTreeChildRow(e,i,r,s){var n=!1;typeof i=="string"&&(i=JSON.parse(i)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),typeof s<"u"&&(n=this.findChildIndex(s,e),n!==!1&&e.data[this.field].splice(r?n:n+1,0,i)),n===!1&&(r?e.data[this.field].unshift(i):e.data[this.field].push(i)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,i){var r=!1;return typeof e=="object"?e instanceof ds?r=e.data:e instanceof XT?r=e._getSelf().data:typeof HTMLElement<"u"&&e instanceof HTMLElement?i.modules.dataTree&&(r=i.modules.dataTree.children.find(s=>s instanceof ds?s.element===e:!1),r&&(r=r.data)):e===null&&(r=!1):typeof e>"u"?r=!1:r=i.data[this.field].find(s=>s.data[this.table.options.index]==e),r&&(Array.isArray(i.data[this.field])&&(r=i.data[this.field].indexOf(r)),r==-1&&(r=!1)),r}getTreeChildren(e,i,r){var s=e.modules.dataTree,n=[];return s&&s.children&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),s.children.forEach(o=>{o instanceof ds&&(n.push(i?o.getComponent():o),r&&this.getTreeChildren(o,i,r).forEach(a=>{n.push(a)}))})),n}getChildField(){return this.field}redrawNeeded(e){return(this.field?typeof e[this.field]<"u":!1)||(this.elementField?typeof e[this.elementField]<"u":!1)}}function EOe(t,e={},i){var r=e.delimiter?e.delimiter:",",s=[],n=[];t.forEach(o=>{var a=[];switch(o.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":o.columns.forEach((l,u)=>{l&&l.depth===1&&(n[u]=typeof l.value>"u"||l.value===null?"":'"'+String(l.value).split('"').join('""')+'"')});break;case"row":o.columns.forEach(l=>{if(l){switch(typeof l.value){case"object":l.value=l.value!==null?JSON.stringify(l.value):"";break;case"undefined":l.value="";break}a.push('"'+String(l.value).split('"').join('""')+'"')}}),s.push(a.join(r));break}}),n.length&&s.unshift(n.join(r)),s=s.join(`
`),e.bom&&(s="\uFEFF"+s),i(s,"text/csv")}function COe(t,e,i){var r=[];t.forEach(s=>{var n={};switch(s.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":s.columns.forEach(o=>{o&&(n[o.component.getTitleDownload()||o.component.getField()]=o.value)}),r.push(n);break}}),r=JSON.stringify(r,null,"	"),i(r,"application/json")}function TOe(t,e={},i){var r=[],s=[],n={},o=e.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},a=e.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=e.jsPDF||{},u=e.title?e.title:"",h,p;l.orientation||(l.orientation=e.orientation||"landscape"),l.unit||(l.unit="pt"),t.forEach(y=>{switch(y.type){case"header":r.push(m(y));break;case"group":s.push(m(y,o));break;case"calc":s.push(m(y,a));break;case"row":s.push(m(y));break}});function m(y,v){var w=[];return y.columns.forEach(S=>{var E;if(S){switch(typeof S.value){case"object":S.value=S.value!==null?JSON.stringify(S.value):"";break;case"undefined":S.value="";break}E={content:S.value,colSpan:S.width,rowSpan:S.height},v&&(E.styles=v),w.push(E)}}),w}h=this.dependencyRegistry.lookup("jspdf","jsPDF"),p=new h(l),e.autoTable&&(typeof e.autoTable=="function"?n=e.autoTable(p)||{}:n=e.autoTable),u&&(n.didDrawPage=function(y){p.text(u,40,30)}),n.head=r,n.body=s,p.autoTable(n),e.documentProcessing&&e.documentProcessing(p),i(p.output("arraybuffer"),"application/pdf")}function MOe(t,e,i){var r=this,s=e.sheetName||"Sheet1",n=this.dependencyRegistry.lookup("XLSX"),o=n.utils.book_new(),a=new Xr(this),l="compress"in e?e.compress:!0,u=e.writeOptions||{bookType:"xlsx",bookSST:!0,compression:l},h;u.type="binary",o.SheetNames=[],o.Sheets={};function p(){var v=[],w=[],S={},E={s:{c:0,r:0},e:{c:t[0]?t[0].columns.reduce((I,D)=>I+(D&&D.width?D.width:1),0):0,r:t.length}};return t.forEach((I,D)=>{var O=[];I.columns.forEach(function(A,z){A?(O.push(!(A.value instanceof Date)&&typeof A.value=="object"?JSON.stringify(A.value):A.value),(A.width>1||A.height>-1)&&(A.height>1||A.width>1)&&w.push({s:{r:D,c:z},e:{r:D+A.height-1,c:z+A.width-1}})):O.push("")}),v.push(O)}),n.utils.sheet_add_aoa(S,v),S["!ref"]=n.utils.encode_range(E),w.length&&(S["!merges"]=w),S}if(e.sheetOnly){i(p());return}if(e.sheets)for(var m in e.sheets)e.sheets[m]===!0?(o.SheetNames.push(m),o.Sheets[m]=p()):(o.SheetNames.push(m),a.commsSend(e.sheets[m],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:r.active,intercept:function(v){o.Sheets[m]=v}}));else o.SheetNames.push(s),o.Sheets[s]=p();e.documentProcessing&&(o=e.documentProcessing(o));function y(v){for(var w=new ArrayBuffer(v.length),S=new Uint8Array(w),E=0;E!=v.length;++E)S[E]=v.charCodeAt(E)&255;return w}h=n.write(o,u),i(y(h),"application/octet-stream")}function kOe(t,e,i){this.modExists("export",!0)&&i(this.modules.export.generateHTMLTable(t),"text/html")}function ROe(t,e,i){const r=[];t.forEach(s=>{const n={};switch(s.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":s.columns.forEach(o=>{o&&(n[o.component.getTitleDownload()||o.component.getField()]=o.value)}),r.push(JSON.stringify(n));break}}),i(r.join(`
`),"application/x-ndjson")}var IOe={csv:EOe,json:COe,jsonLines:ROe,pdf:TOe,xlsx:MOe,html:kOe};class vC extends ft{static moduleName="download";static downloaders=IOe;constructor(e){super(e),this.registerTableOption("downloadEncoder",function(i,r){return new Blob([i],{type:r})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(e,i,r,s){this.download(e,i,r,s,!0)}download(e,i,r,s,n){var o=!1;function a(u,h){n?n===!0?this.triggerDownload(u,h,e,i,!0):n(u):this.triggerDownload(u,h,e,i)}if(typeof e=="function"?o=e:vC.downloaders[e]?o=vC.downloaders[e]:console.warn("Download Error - No such download type found: ",e),o){var l=this.generateExportList(s);o.call(this.table,l,r||{},a.bind(this))}}generateExportList(e){var i=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),r=this.table.options.groupHeaderDownload;return r&&!Array.isArray(r)&&(r=[r]),i.forEach(s=>{var n;s.type==="group"&&(n=s.columns[0],r&&r[s.indent]&&(n.value=r[s.indent](n.value,s.component._group.getRowCount(),s.component._group.getData(),s.component)))}),i}triggerDownload(e,i,r,s,n){var o=document.createElement("a"),a=this.table.options.downloadEncoder(e,i);a&&(n?window.open(window.URL.createObjectURL(a)):(s=s||"Tabulator."+(typeof r=="function"?"txt":r),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,s):(o.setAttribute("href",window.URL.createObjectURL(a)),o.setAttribute("download",s),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o))),this.dispatchExternal("downloadComplete"))}commsReceived(e,i,r){switch(i){case"intercept":this.download(r.type,"",r.options,r.active,r.intercept);break}}}function KT(t,e){var i=e.mask,r=typeof e.maskLetterChar<"u"?e.maskLetterChar:"A",s=typeof e.maskNumberChar<"u"?e.maskNumberChar:"9",n=typeof e.maskWildcardChar<"u"?e.maskWildcardChar:"*";function o(a){var l=i[a];typeof l<"u"&&l!==n&&l!==r&&l!==s&&(t.value=t.value+""+l,o(a+1))}t.addEventListener("keydown",a=>{var l=t.value.length,u=a.key;if(a.keyCode>46&&!a.ctrlKey&&!a.metaKey){if(l>=i.length)return a.preventDefault(),a.stopPropagation(),!1;switch(i[l]){case r:if(u.toUpperCase()==u.toLowerCase())return a.preventDefault(),a.stopPropagation(),!1;break;case s:if(isNaN(u))return a.preventDefault(),a.stopPropagation(),!1;break;case n:break;default:if(u!==i[l])return a.preventDefault(),a.stopPropagation(),!1}}}),t.addEventListener("keyup",a=>{a.keyCode>46&&e.maskAutoFill&&o(t.value.length)}),t.placeholder||(t.placeholder=i),e.maskAutoFill&&o(t.value.length)}function $Oe(t,e,i,r,s){var n=t.getValue(),o=document.createElement("input");if(o.setAttribute("type",s.search?"search":"text"),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let l in s.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+s.elementAttributes["+"+l])):o.setAttribute(l,s.elementAttributes[l]);o.value=typeof n<"u"?n:"",e(function(){t.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%",s.selectContents&&o.select())});function a(l){(n===null||typeof n>"u")&&o.value!==""||o.value!==n?i(o.value)&&(n=o.value):r()}return o.addEventListener("change",a),o.addEventListener("blur",a),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:r();break;case 35:case 36:l.stopPropagation();break}}),s.mask&&KT(o,s),o}function AOe(t,e,i,r,s){var n=t.getValue(),o=s.verticalNavigation||"hybrid",a=String(n!==null&&typeof n<"u"?n:""),l=document.createElement("textarea"),u=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",s.elementAttributes&&typeof s.elementAttributes=="object")for(let p in s.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),l.setAttribute(p,l.getAttribute(p)+s.elementAttributes["+"+p])):l.setAttribute(p,s.elementAttributes[p]);l.value=a,e(function(){t.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",t.getRow().normalizeHeight(),s.selectContents&&l.select())});function h(p){(n===null||typeof n>"u")&&l.value!==""||l.value!==n?(i(l.value)&&(n=l.value),setTimeout(function(){t.getRow().normalizeHeight()},300)):r()}return l.addEventListener("change",h),l.addEventListener("blur",h),l.addEventListener("keyup",function(){l.style.height="";var p=l.scrollHeight;l.style.height=p+"px",p!=u&&(u=p,t.getRow().normalizeHeight())}),l.addEventListener("keydown",function(p){switch(p.keyCode){case 13:p.shiftKey&&s.shiftEnterSubmit&&h();break;case 27:r();break;case 38:(o=="editor"||o=="hybrid"&&l.selectionStart)&&(p.stopImmediatePropagation(),p.stopPropagation());break;case 40:(o=="editor"||o=="hybrid"&&l.selectionStart!==l.value.length)&&(p.stopImmediatePropagation(),p.stopPropagation());break;case 35:case 36:p.stopPropagation();break}}),s.mask&&KT(l,s),l}function OOe(t,e,i,r,s){var n=t.getValue(),o=s.verticalNavigation||"editor",a=document.createElement("input");if(a.setAttribute("type","number"),typeof s.max<"u"&&a.setAttribute("max",s.max),typeof s.min<"u"&&a.setAttribute("min",s.min),typeof s.step<"u"&&a.setAttribute("step",s.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let h in s.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),a.setAttribute(h,a.getAttribute(h)+s.elementAttributes["+"+h])):a.setAttribute(h,s.elementAttributes[h]);a.value=n;var l=function(h){u()};e(function(){t.getType()==="cell"&&(a.removeEventListener("blur",l),a.focus({preventScroll:!0}),a.style.height="100%",a.addEventListener("blur",l),s.selectContents&&a.select())});function u(){var h=a.value;!isNaN(h)&&h!==""&&(h=Number(h)),h!==n?i(h)&&(n=h):r()}return a.addEventListener("keydown",function(h){switch(h.keyCode){case 13:u();break;case 27:r();break;case 38:case 40:o=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break;case 35:case 36:h.stopPropagation();break}}),s.mask&&KT(a,s),a}function POe(t,e,i,r,s){var n=t.getValue(),o=document.createElement("input");if(o.setAttribute("type","range"),typeof s.max<"u"&&o.setAttribute("max",s.max),typeof s.min<"u"&&o.setAttribute("min",s.min),typeof s.step<"u"&&o.setAttribute("step",s.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let l in s.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+s.elementAttributes["+"+l])):o.setAttribute(l,s.elementAttributes[l]);o.value=n,e(function(){t.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%")});function a(){var l=o.value;!isNaN(l)&&l!==""&&(l=Number(l)),l!=n?i(l)&&(n=l):r()}return o.addEventListener("blur",function(l){a()}),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:r();break}}),o}function DOe(t,e,i,r,s){var n=s.format,o=s.verticalNavigation||"editor",a=n?window.DateTime||luxon.DateTime:null,l=t.getValue(),u=document.createElement("input");function h(m){var y;return a.isDateTime(m)?y=m:n==="iso"?y=a.fromISO(String(m)):y=a.fromFormat(String(m),n),y.toFormat("yyyy-MM-dd")}if(u.type="date",u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",s.max&&u.setAttribute("max",n?h(s.max):s.max),s.min&&u.setAttribute("min",n?h(s.min):s.min),s.elementAttributes&&typeof s.elementAttributes=="object")for(let m in s.elementAttributes)m.charAt(0)=="+"?(m=m.slice(1),u.setAttribute(m,u.getAttribute(m)+s.elementAttributes["+"+m])):u.setAttribute(m,s.elementAttributes[m]);l=typeof l<"u"?l:"",n&&(a?l=h(l):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),u.value=l,e(function(){t.getType()==="cell"&&(u.focus({preventScroll:!0}),u.style.height="100%",s.selectContents&&u.select())});function p(){var m=u.value,y;if((l===null||typeof l>"u")&&m!==""||m!==l){if(m&&n)switch(y=a.fromFormat(String(m),"yyyy-MM-dd"),n){case!0:m=y;break;case"iso":m=y.toISO();break;default:m=y.toFormat(n)}i(m)&&(l=u.value)}else r()}return u.addEventListener("blur",function(m){(m.relatedTarget||m.rangeParent||m.explicitOriginalTarget!==u)&&p()}),u.addEventListener("keydown",function(m){switch(m.keyCode){case 13:p();break;case 27:r();break;case 35:case 36:m.stopPropagation();break;case 38:case 40:o=="editor"&&(m.stopImmediatePropagation(),m.stopPropagation());break}}),u}function LOe(t,e,i,r,s){var n=s.format,o=s.verticalNavigation||"editor",a=n?window.DateTime||luxon.DateTime:null,l,u=t.getValue(),h=document.createElement("input");if(h.type="time",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let m in s.elementAttributes)m.charAt(0)=="+"?(m=m.slice(1),h.setAttribute(m,h.getAttribute(m)+s.elementAttributes["+"+m])):h.setAttribute(m,s.elementAttributes[m]);u=typeof u<"u"?u:"",n&&(a?(a.isDateTime(u)?l=u:n==="iso"?l=a.fromISO(String(u)):l=a.fromFormat(String(u),n),u=l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=u,e(function(){t.getType()=="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",s.selectContents&&h.select())});function p(){var m=h.value,y;if((u===null||typeof u>"u")&&m!==""||m!==u){if(m&&n)switch(y=a.fromFormat(String(m),"hh:mm"),n){case!0:m=y;break;case"iso":m=y.toISO();break;default:m=y.toFormat(n)}i(m)&&(u=h.value)}else r()}return h.addEventListener("blur",function(m){(m.relatedTarget||m.rangeParent||m.explicitOriginalTarget!==h)&&p()}),h.addEventListener("keydown",function(m){switch(m.keyCode){case 13:p();break;case 27:r();break;case 35:case 36:m.stopPropagation();break;case 38:case 40:o=="editor"&&(m.stopImmediatePropagation(),m.stopPropagation());break}}),h}function NOe(t,e,i,r,s){var n=s.format,o=s.verticalNavigation||"editor",a=n?this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"):null,l,u=t.getValue(),h=document.createElement("input");if(h.type="datetime-local",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let m in s.elementAttributes)m.charAt(0)=="+"?(m=m.slice(1),h.setAttribute(m,h.getAttribute(m)+s.elementAttributes["+"+m])):h.setAttribute(m,s.elementAttributes[m]);u=typeof u<"u"?u:"",n&&(a?(a.isDateTime(u)?l=u:n==="iso"?l=a.fromISO(String(u)):l=a.fromFormat(String(u),n),u=l.toFormat("yyyy-MM-dd")+"T"+l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=u,e(function(){t.getType()==="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",s.selectContents&&h.select())});function p(){var m=h.value,y;if((u===null||typeof u>"u")&&m!==""||m!==u){if(m&&n)switch(y=a.fromISO(String(m)),n){case!0:m=y;break;case"iso":m=y.toISO();break;default:m=y.toFormat(n)}i(m)&&(u=h.value)}else r()}return h.addEventListener("blur",function(m){(m.relatedTarget||m.rangeParent||m.explicitOriginalTarget!==h)&&p()}),h.addEventListener("keydown",function(m){switch(m.keyCode){case 13:p();break;case 27:r();break;case 35:case 36:m.stopPropagation();break;case 38:case 40:o=="editor"&&(m.stopImmediatePropagation(),m.stopPropagation());break}}),h}let FOe=class{constructor(e,i,r,s,n,o){this.edit=e,this.table=e.table,this.cell=i,this.params=this._initializeParams(o),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=i.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:s,cancel:n},this._deprecatedOptionsCheck(),this._initializeValue(),r(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var e=this.cell.getValue();typeof e>"u"&&typeof this.params.defaultValue<"u"&&(e=this.params.defaultValue),this.initialValues=this.params.multiselect?e:[e],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var e=this.cell.getElement();function i(r){r.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),e.addEventListener("click",i),setTimeout(()=>{e.removeEventListener("click",i)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var e=document.createElement("div");return e.classList.add("tabulator-edit-list"),e.addEventListener("mousedown",this._preventBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e}_setListWidth(){var e=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=e.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=e.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var e=this.params.elementAttributes,i=document.createElement("input");if(i.setAttribute("type",this.params.clearable?"search":"text"),i.style.padding="4px",i.style.width="100%",i.style.boxSizing="border-box",this.params.autocomplete||(i.style.cursor="default",i.style.caretColor="transparent"),e&&typeof e=="object")for(let r in e)r.charAt(0)=="+"?(r=r.slice(1),i.setAttribute(r,i.getAttribute(r)+e["+"+r])):i.setAttribute(r,e[r]);return this.params.mask&&KT(i,this.params),this._bindInputEvents(i),i}_initializeParams(e){var i=["values","valuesURL","valuesLookup"],r;return e=Object.assign({},e),e.verticalNavigation=e.verticalNavigation||"editor",e.placeholderLoading=typeof e.placeholderLoading>"u"?"Searching ...":e.placeholderLoading,e.placeholderEmpty=typeof e.placeholderEmpty>"u"?"No Results Found":e.placeholderEmpty,e.filterDelay=typeof e.filterDelay>"u"?300:e.filterDelay,e.emptyValue=Object.keys(e).includes("emptyValue")?e.emptyValue:"",r=Object.keys(e).filter(s=>i.includes(s)).length,r?r>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),e.autocomplete?e.multiselect&&(e.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(e.freetext&&(e.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),e.filterFunc&&(e.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),e.filterRemote&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),e.mask&&(e.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),e.allowEmpty&&(e.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),e.listOnEmpty&&(e.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),e.filterRemote&&!(typeof e.valuesLookup=="function"||e.valuesURL)&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),e}_bindInputEvents(e){e.addEventListener("focus",this._inputFocus.bind(this)),e.addEventListener("click",this._inputClick.bind(this)),e.addEventListener("blur",this._inputBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&e.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(e){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(e){e.stopPropagation()}_inputBlur(e){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(e){switch(e.keyCode){case 38:this._keyUp(e);break;case 40:this._keyDown(e);break;case 37:case 39:this._keySide(e);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(e);break;case 9:this._keyTab(e);break;default:this._keySelectLetter(e)}}_inputKeyUp(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(e)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(e){var i=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&i)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),i>0&&this._focusItem(this.displayItems[i-1]))}_keyDown(e){var i=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&i<this.displayItems.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),i<this.displayItems.length-1&&(i==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[i+1])))}_keySide(e){this.params.autocomplete||(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}_keyEnter(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(e){this._cancel()}_keyHomeEnd(e){this.params.autocomplete&&e.stopImmediatePropagation()}_keySelectLetter(e){this.params.autocomplete||(e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&this._scrollToValue(e.keyCode))}_keyAutoCompLetter(e){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(e){clearTimeout(this.filterTimeout);var i=String.fromCharCode(e).toLowerCase();this.filterTerm+=i.toLowerCase();var r=this.displayItems.find(s=>typeof s.label<"u"&&s.label.toLowerCase().startsWith(this.filterTerm));r&&this._focusItem(r),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(e){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=e,e&&e.element&&(e.element.classList.add("focused"),e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e=>{Number.isInteger(e)||console.error("List generation error",e)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(e){var i=[],r=++this.listIteration;return this.filtered=!1,this.params.values?i=this.params.values:this.params.valuesURL?i=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?i=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(i=this._uniqueColumnValues(this.params.valuesLookupField)),i instanceof Promise?(e||this._addPlaceholder(this.params.placeholderLoading),i.then().then(s=>this.listIteration===r?this._parseList(s):Promise.reject(r))):Promise.resolve(this._parseList(i))}_addPlaceholder(e){var i=document.createElement("div");typeof e=="function"&&(e=e(this.cell.getComponent(),this.listEl)),e&&(this._clearList(),e instanceof HTMLElement?i=e:(i.classList.add("tabulator-edit-list-placeholder"),i.innerHTML=e),this.listEl.appendChild(i),this._showList())}_ajaxRequest(e,i){var r=this.params.filterRemote?{term:i}:{};return e=MQ(e,{},r),fetch(e).then(s=>s.ok?s.json().catch(n=>(console.warn("List Ajax Load Error - Invalid JSON returned",n),Promise.reject(n))):(console.error("List Ajax Load Error - Connection Error: "+s.status,s.statusText),Promise.reject(s))).catch(s=>(console.error("List Ajax Load Error - Connection Error: ",s),Promise.reject(s)))}_uniqueColumnValues(e){var i={},r=this.table.getData(this.params.valuesLookup),s;return e?s=this.table.columnManager.getColumnByField(e):s=this.cell.getColumn()._getSelf(),s?r.forEach(n=>{var o=s.getFieldValue(n);this._emptyValueCheck(o)||(this.params.multiselect&&Array.isArray(o)?o.forEach(a=>{this._emptyValueCheck(a)||(i[a]=!0)}):i[o]=!0)}):(console.warn("unable to find matching column to create select lookup list:",e),i=[]),Object.keys(i)}_emptyValueCheck(e){return e===null||typeof e>"u"||e===""}_parseList(e){var i=[];return Array.isArray(e)||(e=Object.entries(e).map(([r,s])=>({label:s,value:r}))),e.forEach(r=>{typeof r!="object"&&(r={label:r,value:r}),this._parseListItem(r,i,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=i,i}_parseListItem(e,i,r){var s={};e.options?s=this._parseListGroup(e,r+1):(s={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,selected:!1,visible:!0,level:r,original:e},this.initialValues&&this.initialValues.indexOf(e.value)>-1&&this._chooseItem(s,!0)),i.push(s)}_parseListGroup(e,i){var r={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,visible:!0,level:i,options:[],original:e};return e.options.forEach(s=>{this._parseListItem(s,r.options,i)}),r}_sortOptions(e){var i;return this.params.sort&&(i=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(i,e)),e}_sortGroup(e,i){i.sort((r,s)=>e(r.label,s.label,r.value,s.value,r.original,s.original)),i.forEach(r=>{r.group&&this._sortGroup(e,r.options)})}_defaultSortFunction(e,i){var r,s,n,o,a=0,l,u=/(\d+)|(\D+)/g,h=/\d/,p=0;if(this.params.sort==="desc"&&([e,i]=[i,e]),!e&&e!==0)p=!i&&i!==0?0:-1;else if(!i&&i!==0)p=1;else{if(isFinite(e)&&isFinite(i))return e-i;if(r=String(e).toLowerCase(),s=String(i).toLowerCase(),r===s)return 0;if(!(h.test(r)&&h.test(s)))return r>s?1:-1;for(r=r.match(u),s=s.match(u),l=r.length>s.length?s.length:r.length;a<l;)if(n=r[a],o=s[a++],n!==o)return isFinite(n)&&isFinite(o)?(n.charAt(0)==="0"&&(n="."+n),o.charAt(0)==="0"&&(o="."+o),n-o):n>o?1:-1;return r.length>s.length}return p}_filterOptions(){var e=this.params.filterFunc||this._defaultFilterFunc,i=this.input.value;return i?(this.filtered=!0,this.data.forEach(r=>{this._filterItem(e,i,r)})):this.filtered=!1,this.data}_filterItem(e,i,r){var s=!1;return r.group?(r.options.forEach(n=>{this._filterItem(e,i,n)&&(s=!0)}),r.visible=s):r.visible=e(i,r.label,r.value,r.original),r.visible}_defaultFilterFunc(e,i,r,s){return e=String(e).toLowerCase(),i!==null&&typeof i<"u"&&(String(i).toLowerCase().indexOf(e)>-1||String(r).toLowerCase().indexOf(e)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(e){this._clearList(),e.forEach(i=>{this._buildItem(i)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(e){var i=e.element,r;if(!this.filtered||e.visible){if(!i){if(i=document.createElement("div"),i.tabIndex=0,r=this.params.itemFormatter?this.params.itemFormatter(e.label,e.value,e.original,i):e.label,r instanceof HTMLElement?i.appendChild(r):i.innerHTML=r,e.group?i.classList.add("tabulator-edit-list-group"):i.classList.add("tabulator-edit-list-item"),i.classList.add("tabulator-edit-list-group-level-"+e.level),e.elementAttributes&&typeof e.elementAttributes=="object")for(let s in e.elementAttributes)s.charAt(0)=="+"?(s=s.slice(1),i.setAttribute(s,this.input.getAttribute(s)+e.elementAttributes["+"+s])):i.setAttribute(s,e.elementAttributes[s]);e.group?i.addEventListener("click",this._groupClick.bind(this,e)):i.addEventListener("click",this._itemClick.bind(this,e)),i.addEventListener("mousedown",this._preventBlur.bind(this)),e.element=i}this._styleItem(e),this.listEl.appendChild(i),e.group?e.options.forEach(s=>{this._buildItem(s)}):this.displayItems.push(e)}}_showList(){var e=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),e||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(e){e&&e.element&&(e.selected?e.element.classList.add("active"):e.element.classList.remove("active"))}_itemClick(e,i){i.stopPropagation(),this._chooseItem(e)}_groupClick(e,i){i.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(e=>{e.selected=!1,this._styleItem(e)}),this.currentItems=[],this.focusedItem=null}_chooseItem(e,i){var r;this.typing=!1,this.params.multiselect?(r=this.currentItems.indexOf(e),r>-1?(this.currentItems.splice(r,1),e.selected=!1):(this.currentItems.push(e),e.selected=!0),this.input.value=this.currentItems.map(s=>s.label).join(","),this._styleItem(e)):(this.currentItems=[e],e.selected=!0,this.input.value=e.label,this._styleItem(e),i||this._resolveValue()),this._focusItem(e)}_resolveValue(e){var i,r;if(this.popup&&this.popup.hide(!0),this.params.multiselect)i=this.currentItems.map(s=>s.value);else if(e&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")i=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?i=this.currentItems[0].value:(r=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,r===null||typeof r>"u"||r===""?i=r:i=this.params.emptyValue);i===""&&(i=this.params.emptyValue),this.actions.success(i),this.isFilter&&(this.initialValues=i&&!Array.isArray(i)?[i]:i,this.currentItems=[])}};function jOe(t,e,i,r,s){var n=new FOe(this,t,e,i,r,s);return n.input}function zOe(t,e,i,r,s){var n=this,o=t.getElement(),a=t.getValue(),l=o.getElementsByTagName("svg").length||5,u=o.getElementsByTagName("svg")[0]?o.getElementsByTagName("svg")[0].getAttribute("width"):14,h=[],p=document.createElement("div"),m=document.createElementNS("http://www.w3.org/2000/svg","svg");function y(E){h.forEach(function(I,D){D<E?(n.table.browser=="ie"?I.setAttribute("class","tabulator-star-active"):I.classList.replace("tabulator-star-inactive","tabulator-star-active"),I.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(n.table.browser=="ie"?I.setAttribute("class","tabulator-star-inactive"):I.classList.replace("tabulator-star-active","tabulator-star-inactive"),I.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function v(E){var I=document.createElement("span"),D=m.cloneNode(!0);h.push(D),I.addEventListener("mouseenter",function(O){O.stopPropagation(),O.stopImmediatePropagation(),y(E)}),I.addEventListener("mousemove",function(O){O.stopPropagation(),O.stopImmediatePropagation()}),I.addEventListener("click",function(O){O.stopPropagation(),O.stopImmediatePropagation(),i(E),o.blur()}),I.appendChild(D),p.appendChild(I)}function w(E){a=E,y(E)}if(o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",p.style.verticalAlign="middle",p.style.display="inline-block",p.style.padding="4px",m.setAttribute("width",u),m.setAttribute("height",u),m.setAttribute("viewBox","0 0 512 512"),m.setAttribute("xml:space","preserve"),m.style.padding="0 1px",s.elementAttributes&&typeof s.elementAttributes=="object")for(let E in s.elementAttributes)E.charAt(0)=="+"?(E=E.slice(1),p.setAttribute(E,p.getAttribute(E)+s.elementAttributes["+"+E])):p.setAttribute(E,s.elementAttributes[E]);for(var S=1;S<=l;S++)v(S);return a=Math.min(parseInt(a),l),y(a),p.addEventListener("mousemove",function(E){y(0)}),p.addEventListener("click",function(E){i(0)}),o.addEventListener("blur",function(E){r()}),o.addEventListener("keydown",function(E){switch(E.keyCode){case 39:w(a+1);break;case 37:w(a-1);break;case 13:i(a);break;case 27:r();break}}),p}function VOe(t,e,i,r,s){var n=t.getElement(),o=typeof s.max>"u"?n.getElementsByTagName("div")[0]&&n.getElementsByTagName("div")[0].getAttribute("max")||100:s.max,a=typeof s.min>"u"?n.getElementsByTagName("div")[0]&&n.getElementsByTagName("div")[0].getAttribute("min")||0:s.min,l=(o-a)/100,u=t.getValue()||0,h=document.createElement("div"),p=document.createElement("div"),m,y;function v(){var w=window.getComputedStyle(n,null),S=l*Math.round(p.offsetWidth/((n.clientWidth-parseInt(w.getPropertyValue("padding-left"))-parseInt(w.getPropertyValue("padding-right")))/100))+a;i(S),n.setAttribute("aria-valuenow",S),n.setAttribute("aria-label",u)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),p.style.display="inline-block",p.style.position="relative",p.style.height="100%",p.style.backgroundColor="#488CE9",p.style.maxWidth="100%",p.style.minWidth="0%",s.elementAttributes&&typeof s.elementAttributes=="object")for(let w in s.elementAttributes)w.charAt(0)=="+"?(w=w.slice(1),p.setAttribute(w,p.getAttribute(w)+s.elementAttributes["+"+w])):p.setAttribute(w,s.elementAttributes[w]);return n.style.padding="4px 4px",u=Math.min(parseFloat(u),o),u=Math.max(parseFloat(u),a),u=Math.round((u-a)/l),p.style.width=u+"%",n.setAttribute("aria-valuemin",a),n.setAttribute("aria-valuemax",o),p.appendChild(h),h.addEventListener("mousedown",function(w){m=w.screenX,y=p.offsetWidth}),h.addEventListener("mouseover",function(){h.style.cursor="ew-resize"}),n.addEventListener("mousemove",function(w){m&&(p.style.width=y+w.screenX-m+"px")}),n.addEventListener("mouseup",function(w){m&&(w.stopPropagation(),w.stopImmediatePropagation(),m=!1,y=!1,v())}),n.addEventListener("keydown",function(w){switch(w.keyCode){case 39:w.preventDefault(),p.style.width=p.clientWidth+n.clientWidth/100+"px";break;case 37:w.preventDefault(),p.style.width=p.clientWidth-n.clientWidth/100+"px";break;case 9:case 13:v();break;case 27:r();break}}),n.addEventListener("blur",function(){r()}),p}function UOe(t,e,i,r,s){var n=t.getValue(),o=document.createElement("input"),a=s.tristate,l=typeof s.indeterminateValue>"u"?null:s.indeterminateValue,u=!1,h=Object.keys(s).includes("trueValue"),p=Object.keys(s).includes("falseValue");if(o.setAttribute("type","checkbox"),o.style.marginTop="5px",o.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let y in s.elementAttributes)y.charAt(0)=="+"?(y=y.slice(1),o.setAttribute(y,o.getAttribute(y)+s.elementAttributes["+"+y])):o.setAttribute(y,s.elementAttributes[y]);o.value=n,a&&(typeof n>"u"||n===l||n==="")&&(u=!0,o.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&e(function(){t.getType()==="cell"&&o.focus({preventScroll:!0})}),o.checked=h?n===s.trueValue:n===!0||n==="true"||n==="True"||n===1;function m(y){var v=o.checked;return h&&v?v=s.trueValue:p&&!v&&(v=s.falseValue),a?y?u?l:v:o.checked&&!u?(o.checked=!1,o.indeterminate=!0,u=!0,l):(u=!1,v):v}return o.addEventListener("change",function(y){i(m())}),o.addEventListener("blur",function(y){i(m(!0))}),o.addEventListener("keydown",function(y){y.keyCode==13&&i(m()),y.keyCode==27&&r()}),o}function HOe(t,e,i,r,s){var n=t._getSelf().column,o,a,l;function u(h){var p=h.getValue(),m="input";switch(typeof p){case"number":m="number";break;case"boolean":m="tickCross";break;case"string":p.includes(`
`)&&(m="textarea");break}return m}return o=s.editorLookup?s.editorLookup(t):u(t),s.paramsLookup&&(l=typeof s.paramsLookup=="function"?s.paramsLookup(o,t):s.paramsLookup[o]),a=this.table.modules.edit.lookupEditor(o,n),a.call(this,t,e,i,r,l||{})}var BOe={input:$Oe,textarea:AOe,number:OOe,range:POe,date:DOe,time:LOe,datetime:NOe,list:jOe,star:zOe,progress:VOe,tickCross:UOe,adaptable:HOe};class y3 extends ft{static moduleName="edit";static editors=BOe;constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=y3.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(e){if(this.currentCell)return!0}keybindingNavigateNext(e){var i=this.currentCell,r=this.options("tabEndNewRow");i&&(this.navigateNext(i,e)||r&&(i.getElement().firstChild.blur(),this.invalidEdit||(r===!0?r=this.table.addRow({}):typeof r=="function"?r=this.table.addRow(r(i.row.getComponent())):r=this.table.addRow(Object.assign({},r)),r.then(()=>{setTimeout(()=>{i.getComponent().navigateNext()})}))))}cellIsEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(e){this.allowEdit(e)?e.getElement().classList.add("tabulator-editable"):e.getElement().classList.remove("tabulator-editable")}clearCellEdited(e){e||(e=this.table.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(i=>{this.table.modules.edit.clearEdited(i._getSelf())})}navigatePrev(e=this.currentCell,i){var r,s;if(e){if(i&&i.preventDefault(),r=this.navigateLeft(),r)return!0;if(s=this.table.rowManager.prevDisplayRow(e.row,!0),s&&(r=this.findPrevEditableCell(s,s.cells.length),r))return r.getComponent().edit(),!0}return!1}navigateNext(e=this.currentCell,i){var r,s;if(e){if(i&&i.preventDefault(),r=this.navigateRight(),r)return!0;if(s=this.table.rowManager.nextDisplayRow(e.row,!0),s&&(r=this.findNextEditableCell(s,-1),r))return r.getComponent().edit(),!0}return!1}navigateLeft(e=this.currentCell,i){var r,s;return e&&(i&&i.preventDefault(),r=e.getIndex(),s=this.findPrevEditableCell(e.row,r),s)?(s.getComponent().edit(),!0):!1}navigateRight(e=this.currentCell,i){var r,s;return e&&(i&&i.preventDefault(),r=e.getIndex(),s=this.findNextEditableCell(e.row,r),s)?(s.getComponent().edit(),!0):!1}navigateUp(e=this.currentCell,i){var r,s;return e&&(i&&i.preventDefault(),r=e.getIndex(),s=this.table.rowManager.prevDisplayRow(e.row,!0),s)?(s.cells[r].getComponent().edit(),!0):!1}navigateDown(e=this.currentCell,i){var r,s;return e&&(i&&i.preventDefault(),r=e.getIndex(),s=this.table.rowManager.nextDisplayRow(e.row,!0),s)?(s.cells[r].getComponent().edit(),!0):!1}findNextEditableCell(e,i){var r=!1;if(i<e.cells.length-1)for(var s=i+1;s<e.cells.length;s++){let n=e.cells[s];if(n.column.modules.edit&&ti.elVisible(n.getElement())&&this.allowEdit(n)){r=n;break}}return r}findPrevEditableCell(e,i){var r=!1;if(i>0)for(var s=i-1;s>=0;s--){let n=e.cells[s];if(n.column.modules.edit&&ti.elVisible(n.getElement())&&this.allowEdit(n)){r=n;break}}return r}initializeColumnCheck(e){typeof e.definition.editor<"u"&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}rowEditableCheck(e){e.getCells().forEach(i=>{i.column.modules.edit&&typeof i.column.modules.edit.check=="function"&&this.updateCellClass(i)})}initializeColumn(e){var i=Object.keys(e.definition).includes("editorEmptyValue"),r={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{},convertEmptyValues:i,editorEmptyValue:e.definition.editorEmptyValue,editorEmptyValueFunc:e.definition.editorEmptyValueFunc};r.editor=this.lookupEditor(e.definition.editor,e),r.editor&&(e.modules.edit=r)}lookupEditor(e,i){var r;switch(typeof e){case"string":this.editors[e]?r=this.editors[e]:console.warn("Editor Error - No such editor found: ",e);break;case"function":r=e;break;case"boolean":e===!0&&(typeof i.definition.formatter!="function"?this.editors[i.definition.formatter]?r=this.editors[i.definition.formatter]:r=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",i.definition.formatter));break}return r}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(e){var i=this.currentCell,r;if(this.invalidEdit=!1,i){for(this.currentCell=!1,r=i.getElement(),this.dispatch("edit-editor-clear",i,e),r.classList.remove("tabulator-editing");r.firstChild;)r.removeChild(r.firstChild);i.row.getElement().classList.remove("tabulator-editing"),i.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,i=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),(e.column.definition.editor=="textarea"||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,i),this.dispatch("edit-cancelled",e),this.dispatchExternal("cellEditCancelled",i)}}bindEditor(e){if(e.column.modules.edit){var i=this,r=e.getElement(!0);this.updateCellClass(e),r.setAttribute("tabindex",0),r.addEventListener("mousedown",function(s){s.button===2?s.preventDefault():i.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&r.addEventListener("dblclick",function(s){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),i.edit(e,s,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&r.addEventListener("click",function(s){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),i.edit(e,s,!1))}),this.options("editTriggerEvent")==="focus"&&r.addEventListener("focus",function(s){i.recursionBlock||i.edit(e,s,!1)})}}focusCellNoEvent(e,i){this.recursionBlock=!0,i&&this.table.browser==="ie"||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,i){this.focusCellNoEvent(e),this.edit(e,!1,i)}focusScrollAdjust(e){if(this.table.rowManager.getRenderMode()=="virtual"){var i=this.table.rowManager.element.scrollTop,r=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,s=e.row.getElement();s.offsetTop<i?this.table.rowManager.element.scrollTop-=i-s.offsetTop:s.offsetTop+s.offsetHeight>r&&(this.table.rowManager.element.scrollTop+=s.offsetTop+s.offsetHeight-r);var n=this.table.rowManager.element.scrollLeft,o=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=e.getElement();this.table.modExists("frozenColumns")&&(n+=parseInt(this.table.modules.frozenColumns.leftMargin||0),o-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(n-=parseInt(this.table.columnManager.renderer.vDomPadLeft),o-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),a.offsetLeft<n?this.table.rowManager.element.scrollLeft-=n-a.offsetLeft:a.offsetLeft+a.offsetWidth>o&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-o)}}allowEdit(e){var i=!!e.column.modules.edit;if(e.column.modules.edit)switch(typeof e.column.modules.edit.check){case"function":e.row.initialized&&(i=e.column.modules.edit.check(e.getComponent()));break;case"string":i=!!e.row.data[e.column.modules.edit.check];break;case"boolean":i=e.column.modules.edit.check;break}return i}edit(e,i,r){var s=this,n=!0,o=function(){},a=e.getElement(),l=!1,u,h,p;if(this.currentCell){!this.invalidEdit&&this.currentCell!==e&&this.cancelEdit();return}function m(E){if(s.currentCell===e&&!l){var I=s.chain("edit-success",[e,E],!0,!0);return I===!0||s.table.options.validationMode==="highlight"?(l=!0,s.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,s.editedCells.indexOf(e)==-1&&s.editedCells.push(e),E=s.transformEmptyValues(E,e),e.setValue(E,!0),I===!0):(l=!0,s.invalidEdit=!0,s.focusCellNoEvent(e,!0),o(),setTimeout(()=>{l=!1},10),!1)}}function y(){s.currentCell===e&&!l&&s.cancelEdit()}function v(E){o=E}if(e.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(a),!1;if(i&&i.stopPropagation(),n=this.allowEdit(e),n||r){if(s.cancelEdit(),s.currentCell=e,this.focusScrollAdjust(e),h=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,i,h)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,h),this.dispatch("cell-editing",e),this.dispatchExternal("cellEditing",h),p=typeof e.column.modules.edit.params=="function"?e.column.modules.edit.params(h):e.column.modules.edit.params,u=e.column.modules.edit.editor.call(s,h,v,m,y,p),this.currentCell&&u!==!1)if(u instanceof Node){for(a.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-editing"),e.table.element.classList.add("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);a.appendChild(u),o();for(var w=a.children,S=0;S<w.length;S++)w[S].addEventListener("click",function(E){E.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",u),this.blur(a),!1;else return this.blur(a),!1;return!0}else return this.mouseClick=!1,this.blur(a),!1}emptyValueCheck(e){return e===""||e===null||typeof e>"u"}transformEmptyValues(e,i){var r=i.column.modules.edit,s=r.convertEmptyValues||this.convertEmptyValues,n;return s&&(n=r.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),n&&n(e)&&(e=r.convertEmptyValues?r.editorEmptyValue:this.options("editorEmptyValue"))),e}blur(e){this.confirm("edit-blur",[e])||e.blur()}getEditedCells(){var e=[];return this.editedCells.forEach(i=>{e.push(i.getComponent())}),e}clearEdited(e){var i;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,this.dispatch("edit-edited-clear",e)),i=this.editedCells.indexOf(e),i>-1&&this.editedCells.splice(i,1)}}class GU{constructor(e,i,r,s){this.type=e,this.columns=i,this.component=r||!1,this.indent=s||0}}class fk{constructor(e,i,r,s,n){this.value=e,this.component=i||!1,this.width=r,this.height=s,this.depth=n}}var GOe={},WOe={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}};class W0 extends ft{static moduleName="export";static columnLookups=GOe;static rowLookups=WOe;constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,i,r,s){var n,o,a,l;return this.cloneTableStyle=i,this.config=e||{},this.colVisProp=s,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),l=W0.columnLookups[r],l&&(a=l.call(this.table),a=a.filter(u=>this.columnVisCheck(u))),n=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(a)):[],a&&(a=a.map(u=>u.getComponent())),o=this.bodyToExportRows(this.rowLookup(r),a),n.concat(o)}generateTable(e,i,r,s){var n=this.generateExportList(e,i,r,s);return this.generateTableElement(n)}rowLookup(e){var i=[],r;return typeof e=="function"?e.call(this.table).forEach(s=>{s=this.table.rowManager.findRow(s),s&&i.push(s)}):(r=W0.rowLookups[e]||W0.rowLookups.active,i=r.call(this.table)),Object.assign([],i)}generateColumnGroupHeaders(e){var i=[];return e||(e=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),e.forEach(r=>{var s=this.processColumnGroup(r);s&&i.push(s)}),i}processColumnGroup(e){var i=e.columns,r=0,s=e.definition["title"+this.colVisPropAttach]||e.definition.title,n={title:s,column:e,depth:1};if(i.length){if(n.subGroups=[],n.width=0,i.forEach(o=>{var a=this.processColumnGroup(o);a&&(n.width+=a.width,n.subGroups.push(a),a.depth>r&&(r=a.depth))}),n.depth+=r,!n.width)return!1}else if(this.columnVisCheck(e))n.width=1;else return!1;return n}columnVisCheck(e){var i=e.definition[this.colVisProp];return this.config.rowHeaders===!1&&e.isRowHeader?!1:(typeof i=="function"&&(i=i.call(this.table,e.getComponent())),i===!1||i===!0?i:e.visible&&e.field)}headersToExportRows(e){var i=[],r=0,s=[];function n(o,a){var l=r-a;if(typeof i[a]>"u"&&(i[a]=[]),o.height=o.subGroups?1:l-o.depth+1,i[a].push(o),o.height>1)for(let u=1;u<o.height;u++)typeof i[a+u]>"u"&&(i[a+u]=[]),i[a+u].push(!1);if(o.width>1)for(let u=1;u<o.width;u++)i[a].push(!1);o.subGroups&&o.subGroups.forEach(function(u){n(u,a+1)})}return e.forEach(function(o){o.depth>r&&(r=o.depth)}),e.forEach(function(o){n(o,0)}),i.forEach(o=>{var a=[];o.forEach(l=>{if(l){let u=typeof l.title>"u"?"":l.title;a.push(new fk(u,l.column.getComponent(),l.width,l.height,l.depth))}else a.push(null)}),s.push(new GU("header",a))}),s}bodyToExportRows(e,i=[]){var r=[];return i.length===0&&this.table.columnManager.columnsByIndex.forEach(s=>{this.columnVisCheck(s)&&i.push(s.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),e=e.filter(s=>{switch(s.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&s.modules.dataTree.parent)}return!0}),e.forEach((s,n)=>{var o=s.getData(this.colVisProp),a=[],l=0;switch(s.type){case"group":l=s.level,a.push(new fk(s.key,s.getComponent(),i.length,1));break;case"calc":case"row":i.forEach(u=>{a.push(new fk(u._column.getFieldValue(o),u,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(l=s.modules.dataTree.index);break}r.push(new GU(s.type,a,s.getComponent(),l))}),r}generateTableElement(e){var i=document.createElement("table"),r=document.createElement("thead"),s=document.createElement("tbody"),n=this.lookupTableStyles(),o=this.table.options["rowFormatter"+this.colVisPropAttach],a={};return a.rowFormatter=o!==null?o:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),i.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),r,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((l,u)=>{let h;switch(l.type){case"header":r.appendChild(this.generateHeaderElement(l,a,n));break;case"group":s.appendChild(this.generateGroupElement(l,a,n));break;case"calc":s.appendChild(this.generateCalcElement(l,a,n));break;case"row":h=this.generateRowElement(l,a,n),this.mapElementStyles(u%2&&n.evenRow?n.evenRow:n.oddRow,h,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),s.appendChild(h);break}}),r.innerHTML&&i.appendChild(r),i.appendChild(s),this.mapElementStyles(this.table.element,i,["border-top","border-left","border-right","border-bottom"]),i}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.styleRowHeader=e.firstRow.getElementsByClassName("tabulator-row-header")[0],e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}generateHeaderElement(e,i,r){var s=document.createElement("tr");return e.columns.forEach(n=>{if(n){var o=document.createElement("th"),a=n.component._column.definition.cssClass?n.component._column.definition.cssClass.split(" "):[];o.colSpan=n.width,o.rowSpan=n.height,o.innerHTML=n.value,this.cloneTableStyle&&(o.style.boxSizing="border-box"),a.forEach(function(l){o.classList.add(l)}),this.mapElementStyles(n.component.getElement(),o,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(n.component._column.contentElement,o,["padding-top","padding-left","padding-right","padding-bottom"]),n.component._column.visible?this.mapElementStyles(n.component.getElement(),o,["width"]):n.component._column.definition.width&&(o.style.width=n.component._column.definition.width+"px"),n.component._column.parent&&n.component._column.parent.isGroup?this.mapElementStyles(n.component._column.parent.groupElement,o,["border-top"]):this.mapElementStyles(n.component.getElement(),o,["border-top"]),n.component._column.isGroup?this.mapElementStyles(n.component.getElement(),o,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),o,["border-bottom"]),s.appendChild(o)}}),s}generateGroupElement(e,i,r){var s=document.createElement("tr"),n=document.createElement("td"),o=e.columns[0];return s.classList.add("tabulator-print-table-row"),i.groupHeader&&i.groupHeader[e.indent]?o.value=i.groupHeader[e.indent](o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):i.groupHeader!==!1&&(o.value=e.component._group.generator(o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)),n.colSpan=o.width,n.innerHTML=o.value,s.classList.add("tabulator-print-table-group"),s.classList.add("tabulator-group-level-"+e.indent),o.component.isVisible()&&s.classList.add("tabulator-group-visible"),this.mapElementStyles(r.firstGroup,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(r.firstGroup,n,["padding-top","padding-left","padding-right","padding-bottom"]),s.appendChild(n),s}generateCalcElement(e,i,r){var s=this.generateRowElement(e,i,r);return s.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(r.calcRow,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),s}generateRowElement(e,i,r){var s=document.createElement("tr");if(s.classList.add("tabulator-print-table-row"),e.columns.forEach((n,o)=>{if(n){var a=document.createElement("td"),l=n.component._column,u=this.table,h=u.columnManager.findColumnIndex(l),p=n.value,m,y,v={modules:{},getValue:function(){return p},getField:function(){return l.definition.field},getElement:function(){return a},getType:function(){return"cell"},getColumn:function(){return l.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getTable:function(){return u},getComponent:function(){return v},column:l},w=l.definition.cssClass?l.definition.cssClass.split(" "):[];if(w.forEach(function(S){a.classList.add(S)}),this.table.modExists("format")&&this.config.formatCells!==!1)p=this.table.modules.format.formatExportValue(v,this.colVisProp);else switch(typeof p){case"object":p=p!==null?JSON.stringify(p):"";break;case"undefined":p="";break}p instanceof Node?a.appendChild(p):a.innerHTML=p,y=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],l.isRowHeader?(m=r.styleRowHeader,y.push("background-color")):m=r.styleCells&&r.styleCells[h]?r.styleCells[h]:r.firstCell,m&&(this.mapElementStyles(m,a,y),l.definition.align&&(a.style.textAlign=l.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(i.treeElementField&&i.treeElementField==l.field||!i.treeElementField&&o==0)&&(e.component._row.modules.dataTree.controlEl&&a.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),a.firstChild),e.component._row.modules.dataTree.branchEl&&a.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),a.firstChild)),s.appendChild(a),v.modules.format&&v.modules.format.renderedCallback&&v.modules.format.renderedCallback()}}),i.rowFormatter&&e.type==="row"&&this.config.formatCells!==!1){let n=Object.assign(e.component);n.getElement=function(){return s},i.rowFormatter(e.component)}return s}generateHTMLTable(e){var i=document.createElement("div");return i.appendChild(this.generateTableElement(e)),i.innerHTML}getHtml(e,i,r,s){var n=this.generateExportList(r||this.table.options.htmlOutputConfig,i,e,s||"htmlOutput");return this.generateHTMLTable(n)}mapElementStyles(e,i,r){if(this.cloneTableStyle&&e&&i){var s={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var n=window.getComputedStyle(e);r.forEach(function(o){i.style[s[o]]||(i.style[s[o]]=n.getPropertyValue(o))})}}}}var qOe={"=":function(t,e,i,r){return e==t},"<":function(t,e,i,r){return e<t},"<=":function(t,e,i,r){return e<=t},">":function(t,e,i,r){return e>t},">=":function(t,e,i,r){return e>=t},"!=":function(t,e,i,r){return e!=t},regex:function(t,e,i,r){return typeof t=="string"&&(t=new RegExp(t)),t.test(e)},like:function(t,e,i,r){return t===null||typeof t>"u"?e===t:typeof e<"u"&&e!==null?String(e).toLowerCase().indexOf(t.toLowerCase())>-1:!1},keywords:function(t,e,i,r){var s=t.toLowerCase().split(typeof r.separator>"u"?" ":r.separator),n=String(e===null||typeof e>"u"?"":e).toLowerCase(),o=[];return s.forEach(a=>{n.includes(a)&&o.push(!0)}),r.matchAll?o.length===s.length:!!o.length},starts:function(t,e,i,r){return t===null||typeof t>"u"?e===t:typeof e<"u"&&e!==null?String(e).toLowerCase().startsWith(t.toLowerCase()):!1},ends:function(t,e,i,r){return t===null||typeof t>"u"?e===t:typeof e<"u"&&e!==null?String(e).toLowerCase().endsWith(t.toLowerCase()):!1},in:function(t,e,i,r){return Array.isArray(t)?t.length?t.indexOf(e)>-1:!0:(console.warn("Filter Error - filter value is not an array:",t),!1)}};class mp extends ft{static moduleName="filter";static filters=qOe;constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var i=this.table.columnManager.findColumn(e.field);if(i)this.setHeaderFilterValue(i,e.value);else return console.warn("Column Filter Error - No matching column found:",e.field),!1}),this.tableInitialized=!0}remoteFilterParams(e,i,r,s){return s.filter=this.getFilters(!0,!0),s}generatePlaceholder(e){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(e,i,r,s){this.setFilter(e,i,r,s),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,i,r,s){this.addFilter(e,i,r,s),this.refreshFilter()}userSetHeaderFilterFocus(e){var i=this.table.columnManager.findColumn(e);if(i)this.setHeaderFilterFocus(i);else return console.warn("Column Filter Focus Error - No matching column found:",e),!1}userGetHeaderFilterValue(e){var i=this.table.columnManager.findColumn(e);if(i)return this.getHeaderFilterValue(i);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,i){var r=this.table.columnManager.findColumn(e);if(r)this.setHeaderFilterValue(r,i);else return console.warn("Column Filter Error - No matching column found:",e),!1}userRemoveFilter(e,i,r){this.removeFilter(e,i,r),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,i,r){return this.search("rows",e,i,r)}searchData(e,i,r){return this.search("data",e,i,r)}initializeColumnHeaderFilter(e){var i=e.definition;i.headerFilter&&this.initializeColumn(e)}initializeColumn(e,i){var r=this,s=e.getField();function n(o){var a=e.modules.filter.tagType=="input"&&e.modules.filter.attrType=="text"||e.modules.filter.tagType=="textarea"?"partial":"match",l="",u="",h;if(typeof e.modules.filter.prevSuccess>"u"||e.modules.filter.prevSuccess!==o){if(e.modules.filter.prevSuccess=o,e.modules.filter.emptyFunc(o))delete r.headerFilters[s];else{switch(e.modules.filter.value=o,typeof e.definition.headerFilterFunc){case"string":mp.filters[e.definition.headerFilterFunc]?(l=e.definition.headerFilterFunc,h=function(p){var m=e.definition.headerFilterFuncParams||{},y=e.getFieldValue(p);return m=typeof m=="function"?m(o,y,p):m,mp.filters[e.definition.headerFilterFunc](o,y,p,m)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":h=function(p){var m=e.definition.headerFilterFuncParams||{},y=e.getFieldValue(p);return m=typeof m=="function"?m(o,y,p):m,e.definition.headerFilterFunc(o,y,p,m)},l=h;break}if(!h)switch(a){case"partial":h=function(p){var m=e.getFieldValue(p);return typeof m<"u"&&m!==null?String(m).toLowerCase().indexOf(String(o).toLowerCase())>-1:!1},l="like";break;default:h=function(p){return e.getFieldValue(p)==o},l="="}r.headerFilters[s]={value:o,func:h,type:l}}e.modules.filter.value=o,u=JSON.stringify(r.headerFilters),r.prevHeaderFilterChangeCheck!==u&&(r.prevHeaderFilterChangeCheck=u,r.trackChanges(),r.refreshFilter())}return!0}e.modules.filter={success:n,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,i,r){var s=this,n=e.modules.filter.success,o=e.getField(),a,l,u,h,p,m,y,v;e.modules.filter.value=i;function w(){}function S(E){v=E}if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),o){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(E){return!E&&E!==0},a=document.createElement("div"),a.classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":s.table.modules.edit.editors[e.definition.headerFilter]?(l=s.table.modules.edit.editors[e.definition.headerFilter],(e.definition.headerFilter==="tick"||e.definition.headerFilter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(E){return E!==!0&&E!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":l=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?l=e.modules.edit.editor:e.definition.formatter&&s.table.modules.edit.editors[e.definition.formatter]?(l=s.table.modules.edit.editors[e.definition.formatter],(e.definition.formatter==="tick"||e.definition.formatter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(E){return E!==!0&&E!==!1})):l=s.table.modules.edit.editors.input;break}if(l){if(h={getValue:function(){return typeof i<"u"?i:""},getField:function(){return e.definition.field},getElement:function(){return a},getColumn:function(){return e.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},y=e.definition.headerFilterParams||{},y=typeof y=="function"?y.call(s.table,h):y,u=l.call(this.table.modules.edit,h,S,n,w,y),!u){console.warn("Filter Error - Cannot add filter to "+o+" column, editor returned a value of false");return}if(!(u instanceof Node)){console.warn("Filter Error - Cannot add filter to "+o+" column, editor should return an instance of Node, the editor returned:",u);return}s.langBind("headerFilters|columns|"+e.definition.field,function(E){u.setAttribute("placeholder",typeof E<"u"&&E?E:e.definition.headerFilterPlaceholder||s.langText("headerFilters|default"))}),u.addEventListener("click",function(E){E.stopPropagation(),u.focus()}),u.addEventListener("focus",E=>{var I=this.table.columnManager.contentsElement.scrollLeft,D=this.table.rowManager.element.scrollLeft;I!==D&&(this.table.rowManager.scrollHorizontal(I),this.table.columnManager.scrollHorizontal(I))}),p=!1,m=function(E){p&&clearTimeout(p),p=setTimeout(function(){n(u.value)},s.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=u,e.modules.filter.attrType=u.hasAttribute("type")?u.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=u.tagName.toLowerCase(),e.definition.headerFilterLiveFilter!==!1&&(e.definition.headerFilter==="autocomplete"||e.definition.headerFilter==="tickCross"||(e.definition.editor==="autocomplete"||e.definition.editor==="tickCross")&&e.definition.headerFilter===!0||(u.addEventListener("keyup",m),u.addEventListener("search",m),e.modules.filter.attrType=="number"&&u.addEventListener("change",function(E){n(u.value)}),e.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&u.setAttribute("type","search")),(e.modules.filter.tagType=="input"||e.modules.filter.tagType=="select"||e.modules.filter.tagType=="textarea")&&u.addEventListener("mousedown",function(E){E.stopPropagation()})),a.appendChild(u),e.contentElement.appendChild(a),r||s.headerFilterColumns.push(e),v&&v()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,i){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,i,!0),e.modules.filter.success(i)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,i,r,s){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:i,value:r,params:s}]),this.addFilter(e)}addFilter(e,i,r,s){var n=!1;Array.isArray(e)||(e=[{field:e,type:i,value:r,params:s}]),e.forEach(o=>{o=this.findFilter(o),o&&(this.filterList.push(o),n=!0)}),n&&this.trackChanges()}findFilter(e){var i;if(Array.isArray(e))return this.findSubFilters(e);var r=!1;return typeof e.field=="function"?r=function(s){return e.field(s,e.type||{})}:mp.filters[e.type]?(i=this.table.columnManager.getColumnByField(e.field),i?r=function(s){return mp.filters[e.type](e.value,i.getFieldValue(s),s,e.params||{})}:r=function(s){return mp.filters[e.type](e.value,s[e.field],s,e.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=r,e.func?e:!1}findSubFilters(e){var i=[];return e.forEach(r=>{r=this.findFilter(r),r&&i.push(r)}),i.length?i:!1}getFilters(e,i){var r=[];return e&&(r=this.getHeaderFilters()),i&&r.forEach(function(s){typeof s.type=="function"&&(s.type="function")}),r=r.concat(this.filtersToArray(this.filterList,i)),r}filtersToArray(e,i){var r=[];return e.forEach(s=>{var n;Array.isArray(s)?r.push(this.filtersToArray(s,i)):(n={field:s.field,type:s.type,value:s.value},i&&typeof n.type=="function"&&(n.type="function"),r.push(n))}),r}getHeaderFilters(){var e=[];for(var i in this.headerFilters)e.push({field:i,type:this.headerFilters[i].type,value:this.headerFilters[i].value});return e}removeFilter(e,i,r){Array.isArray(e)||(e=[{field:e,type:i,value:r}]),e.forEach(s=>{var n=-1;typeof s.field=="object"?n=this.filterList.findIndex(o=>s===o):n=this.filterList.findIndex(o=>s.field===o.field&&s.type===o.type&&s.value===o.value),n>-1?this.filterList.splice(n,1):console.warn("Filter Error - No matching filter type found, ignoring: ",s.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{typeof e.modules.filter.value<"u"&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,i,r,s){var n=[],o=[];return Array.isArray(i)||(i=[{field:i,type:r,value:s}]),i.forEach(a=>{a=this.findFilter(a),a&&o.push(a)}),this.table.rowManager.rows.forEach(a=>{var l=!0;o.forEach(u=>{this.filterRecurse(u,a.getData())||(l=!1)}),l&&n.push(e==="data"?a.getData("data"):a.getComponent())}),n}filter(e,i){var r=[],s=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(n=>{this.filterRow(n)&&r.push(n)}):r=e.slice(0),this.subscribedExternal("dataFiltered")&&(r.forEach(n=>{s.push(n.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),s)),r}filterRow(e,i){var r=!0,s=e.getData();this.filterList.forEach(o=>{this.filterRecurse(o,s)||(r=!1)});for(var n in this.headerFilters)this.headerFilters[n].func(s)||(r=!1);return r}filterRecurse(e,i){var r=!1;return Array.isArray(e)?e.forEach(s=>{this.filterRecurse(s,i)&&(r=!0)}):r=e.func(i),r}}function YOe(t,e,i){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))}function JOe(t,e,i){return t.getValue()}function ZOe(t,e,i){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))}function XOe(t,e,i){var r=parseFloat(t.getValue()),s="",n,o,a,l,u,h=e.decimal||".",p=e.thousand||",",m=e.negativeSign||"-",y=e.symbol||"",v=!!e.symbolAfter,w=typeof e.precision<"u"?e.precision:2;if(isNaN(r))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));if(r<0&&(r=Math.abs(r),s=m),n=w!==!1?r.toFixed(w):r,n=String(n).split("."),o=n[0],a=n.length>1?h+n[1]:"",e.thousand!==!1)for(l=/(\d+)(\d{3})/;l.test(o);)o=o.replace(l,"$1"+p+"$2");return u=o+a,s===!0?(u="("+u+")",v?u+y:y+u):v?s+u+y:s+y+u}function KOe(t,e,i){var r=t.getValue(),s=e.urlPrefix||"",n=e.download,o=r,a=document.createElement("a"),l;function u(h,p){var m=h.shift(),y=p[m];return h.length&&typeof y=="object"?u(h,y):y}if(e.labelField&&(l=t.getData(),o=u(e.labelField.split(this.table.options.nestedFieldSeparator),l)),e.label)switch(typeof e.label){case"string":o=e.label;break;case"function":o=e.label(t);break}if(o){if(e.urlField&&(l=t.getData(),r=ti.retrieveNestedData(this.table.options.nestedFieldSeparator,e.urlField,l)),e.url)switch(typeof e.url){case"string":r=e.url;break;case"function":r=e.url(t);break}return a.setAttribute("href",s+r),e.target&&a.setAttribute("target",e.target),e.download&&(typeof n=="function"?n=n(t):n=n===!0?"":n,a.setAttribute("download",n)),a.innerHTML=this.emptyToSpace(this.sanitizeHTML(o)),a}else return"&nbsp;"}function QOe(t,e,i){var r=document.createElement("img"),s=t.getValue();switch(e.urlPrefix&&(s=e.urlPrefix+t.getValue()),e.urlSuffix&&(s=s+e.urlSuffix),r.setAttribute("src",s),typeof e.height){case"number":r.style.height=e.height+"px";break;case"string":r.style.height=e.height;break}switch(typeof e.width){case"number":r.style.width=e.width+"px";break;case"string":r.style.width=e.width;break}return r.addEventListener("load",function(){t.getRow().normalizeHeight()}),r}function ePe(t,e,i){var r=t.getValue(),s=t.getElement(),n=e.allowEmpty,o=e.allowTruthy,a=Object.keys(e).includes("trueValue"),l=typeof e.tickElement<"u"?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',u=typeof e.crossElement<"u"?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&r===e.trueValue||!a&&(o&&r||r===!0||r==="true"||r==="True"||r===1||r==="1")?(s.setAttribute("aria-checked",!0),l||""):n&&(r==="null"||r===""||r===null||typeof r>"u")?(s.setAttribute("aria-checked","mixed"),""):(s.setAttribute("aria-checked",!1),u||"")}function tPe(t,e,i){var r=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),s=e.inputFormat||"yyyy-MM-dd HH:mm:ss",n=e.outputFormat||"dd/MM/yyyy HH:mm:ss",o=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",a=t.getValue();if(typeof r<"u"){var l;return r.isDateTime(a)?l=a:s==="iso"?l=r.fromISO(String(a)):l=r.fromFormat(String(a),s),l.isValid?(e.timezone&&(l=l.setZone(e.timezone)),l.toFormat(n)):o===!0||!a?a:typeof o=="function"?o(a):o}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function iPe(t,e,i){var r=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),s=e.inputFormat||"yyyy-MM-dd HH:mm:ss",n=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",o=typeof e.suffix<"u"?e.suffix:!1,a=typeof e.unit<"u"?e.unit:"days",l=typeof e.humanize<"u"?e.humanize:!1,u=typeof e.date<"u"?e.date:r.now(),h=t.getValue();if(typeof r<"u"){var p;return r.isDateTime(h)?p=h:s==="iso"?p=r.fromISO(String(h)):p=r.fromFormat(String(h),s),p.isValid?l?p.diff(u,a).toHuman()+(o?" "+o:""):parseInt(p.diff(u,a)[a])+(o?" "+o:""):n===!0?h:typeof n=="function"?n(h):n}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function rPe(t,e,i){var r=t.getValue();return typeof e[r]>"u"?(console.warn("Missing display value for "+r),r):e[r]}function sPe(t,e,i){var r=t.getValue(),s=t.getElement(),n=e&&e.stars?e.stars:5,o=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),l='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',u='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';o.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",r=r&&!isNaN(r)?parseInt(r):0,r=Math.max(0,Math.min(r,n));for(var h=1;h<=n;h++){var p=a.cloneNode(!0);p.innerHTML=h<=r?l:u,o.appendChild(p)}return s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.setAttribute("aria-label",r),o}function nPe(t,e,i){var r=this.sanitizeHTML(t.getValue())||0,s=document.createElement("span"),n=e&&e.max?e.max:100,o=e&&e.min?e.min:0,a=e&&typeof e.color<"u"?e.color:["red","orange","green"],l="#666666",u,h;if(!(isNaN(r)||typeof t.getValue()>"u")){switch(s.classList.add("tabulator-traffic-light"),h=parseFloat(r)<=n?parseFloat(r):n,h=parseFloat(h)>=o?parseFloat(h):o,u=(n-o)/100,h=Math.round((h-o)/u),typeof a){case"string":l=a;break;case"function":l=a(r);break;case"object":if(Array.isArray(a)){var p=100/a.length,m=Math.floor(h/p);m=Math.min(m,a.length-1),m=Math.max(m,0),l=a[m];break}}return s.style.backgroundColor=l,s}}function oPe(t,e={},i){var r=this.sanitizeHTML(t.getValue())||0,s=t.getElement(),n=e.max?e.max:100,o=e.min?e.min:0,a=e.legendAlign?e.legendAlign:"center",l,u,h,p,m;switch(u=parseFloat(r)<=n?parseFloat(r):n,u=parseFloat(u)>=o?parseFloat(u):o,l=(n-o)/100,u=Math.round((u-o)/l),typeof e.color){case"string":h=e.color;break;case"function":h=e.color(r);break;case"object":if(Array.isArray(e.color)){let S=100/e.color.length,E=Math.floor(u/S);E=Math.min(E,e.color.length-1),E=Math.max(E,0),h=e.color[E];break}default:h="#2DC214"}switch(typeof e.legend){case"string":p=e.legend;break;case"function":p=e.legend(r);break;case"boolean":p=r;break;default:p=!1}switch(typeof e.legendColor){case"string":m=e.legendColor;break;case"function":m=e.legendColor(r);break;case"object":if(Array.isArray(e.legendColor)){let S=100/e.legendColor.length,E=Math.floor(u/S);E=Math.min(E,e.legendColor.length-1),E=Math.max(E,0),m=e.legendColor[E]}break;default:m="#000"}s.style.minWidth="30px",s.style.position="relative",s.setAttribute("aria-label",u);var y=document.createElement("div");y.style.display="inline-block",y.style.width=u+"%",y.style.backgroundColor=h,y.style.height="100%",y.setAttribute("data-max",n),y.setAttribute("data-min",o);var v=document.createElement("div");if(v.style.position="relative",v.style.width="100%",v.style.height="100%",p){var w=document.createElement("div");w.style.position="absolute",w.style.top=0,w.style.left=0,w.style.textAlign=a,w.style.width="100%",w.style.color=m,w.innerHTML=p}return i(function(){if(!(t instanceof kQ)){var S=document.createElement("div");S.style.position="absolute",S.style.top="4px",S.style.bottom="4px",S.style.left="4px",S.style.right="4px",s.appendChild(S),s=S}s.appendChild(v),v.appendChild(y),p&&v.appendChild(w)}),""}function aPe(t,e,i){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""}function lPe(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function uPe(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function cPe(t,e,i){var r=t.getValue(),s=e.size||15,n=s+"px",o,a,l=e.hasOwnProperty("onValue")?e.onValue:!0,u=e.hasOwnProperty("offValue")?e.offValue:!1,h=e.onTruthy?r:r===l;return o=document.createElement("div"),o.classList.add("tabulator-toggle"),h?(o.classList.add("tabulator-toggle-on"),o.style.flexDirection="row-reverse",e.onColor&&(o.style.background=e.onColor)):e.offColor&&(o.style.background=e.offColor),o.style.width=2.5*s+"px",o.style.borderRadius=n,e.clickable&&o.addEventListener("click",p=>{t.setValue(h?u:l)}),a=document.createElement("div"),a.classList.add("tabulator-toggle-switch"),a.style.height=n,a.style.width=n,a.style.borderRadius=n,o.appendChild(a),o}function hPe(t,e,i){var r=document.createElement("span"),s=t.getRow(),n=t.getTable();return s.watchPosition(o=>{e.relativeToPage&&(o+=n.modules.page.getPageSize()*(n.modules.page.getPage()-1)),r.innerText=o}),r}function dPe(t,e,i){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function pPe(t,e,i){var r,s,n;function o(a){var l=a.getValue(),u="plaintext";switch(typeof l){case"boolean":u="tickCross";break;case"string":l.includes(`
`)&&(u="textarea");break}return u}return r=e.formatterLookup?e.formatterLookup(t):o(t),e.paramsLookup&&(n=typeof e.paramsLookup=="function"?e.paramsLookup(r,t):e.paramsLookup[r]),s=this.table.modules.format.lookupFormatter(r),s.call(this,t,n||{},i)}function fPe(t,e,i){var r=e.delimiter||",",s=t.getValue(),n=this.table,o;return e.valueMap&&(typeof e.valueMap=="string"?o=function(a){return a.map(l=>ti.retrieveNestedData(n.options.nestedFieldSeparator,e.valueMap,l))}:o=e.valueMap),Array.isArray(s)?(o&&(s=o(s)),s.join(r)):s}function mPe(t,e,i){var r=e.indent||"	",s=typeof e.multiline>"u"?!0:e.multiline,n=e.replacer||null,o=t.getValue();return s&&(t.getElement().style.whiteSpace="pre-wrap"),JSON.stringify(o,n,r)}var gPe={plaintext:YOe,html:JOe,textarea:ZOe,money:XOe,link:KOe,image:QOe,tickCross:ePe,datetime:tPe,datetimediff:iPe,lookup:rPe,star:sPe,traffic:nPe,progress:oPe,color:aPe,buttonTick:lPe,buttonCross:uPe,toggle:cPe,rownum:hPe,handle:dPe,adaptable:pPe,array:fPe,json:mPe};class fg extends ft{static moduleName="format";static formatters=gPe;constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupTypeFormatter(e,""),typeof e.definition.formatterPrint<"u"&&(e.modules.format.print=this.lookupTypeFormatter(e,"Print")),typeof e.definition.formatterClipboard<"u"&&(e.modules.format.clipboard=this.lookupTypeFormatter(e,"Clipboard")),typeof e.definition.formatterHtmlOutput<"u"&&(e.modules.format.htmlOutput=this.lookupTypeFormatter(e,"HtmlOutput"))}lookupTypeFormatter(e,i){var r={params:e.definition["formatter"+i+"Params"]||{}},s=e.definition["formatter"+i];return r.formatter=this.lookupFormatter(s),r}lookupFormatter(e){var i;switch(typeof e){case"string":fg.formatters[e]?i=fg.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),i=fg.formatters.plaintext);break;case"function":i=e;break;default:i=fg.formatters.plaintext;break}return i}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,i,r){var s,n,o,a;return e.definition.titleFormatter?(s=this.lookupFormatter(e.definition.titleFormatter),o=l=>{e.titleFormatterRendered=l},a={getValue:function(){return i},getElement:function(){return r},getType:function(){return"header"},getColumn:function(){return e.getComponent()},getTable:()=>this.table},n=e.definition.titleFormatterParams||{},n=typeof n=="function"?n():n,s.call(this,a,n,o)):i}formatValue(e){var i=e.getComponent(),r=typeof e.column.modules.format.params=="function"?e.column.modules.format.params(i):e.column.modules.format.params;function s(n){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=n,e.modules.format.rendered=!1}return e.column.modules.format.formatter.call(this,i,r,s)}formatExportValue(e,i){var r=e.column.modules.format[i],s;if(r){let n=function(o){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=o,e.modules.format.rendered=!1};return s=typeof r.params=="function"?r.params(e.getComponent()):r.params,r.formatter.call(this,e.getComponent(),s,n)}else return this.formatValue(e)}sanitizeHTML(e){if(e){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,function(r){return i[r]})}else return e}emptyToSpace(e){return e===null||typeof e>"u"||e===""?"&nbsp;":e}}class yPe extends ft{static moduleName="frozenColumns";constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(e){this.layoutElement(e.element,e.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(e=>{this.initializeColumn(e)}),this.layout()}initializeColumn(e){var i={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(i.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=i):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(i=>{i.calcs.top&&this.layoutRow(i.calcs.top),i.calcs.bottom&&this.layoutRow(i.calcs.bottom),i.groupList&&i.groupList.length&&this.layoutGroupCalcs(i.groupList)})}layoutColumnPosition(e){var i=[],r=0,s=0;this.leftColumns.forEach((n,o)=>{if(n.modules.frozen.marginValue=r,n.modules.frozen.margin=n.modules.frozen.marginValue+"px",n.visible&&(r+=n.getWidth()),o==this.leftColumns.length-1?n.modules.frozen.edge=!0:n.modules.frozen.edge=!1,n.parent.isGroup){var a=this.getColGroupParentElement(n);i.includes(a)||(this.layoutElement(a,n),i.push(a)),a.classList.toggle("tabulator-frozen-left",n.modules.frozen.edge&&n.modules.frozen.position==="left"),a.classList.toggle("tabulator-frozen-right",n.modules.frozen.edge&&n.modules.frozen.position==="right")}else this.layoutElement(n.getElement(),n);e&&n.cells.forEach(l=>{this.layoutElement(l.getElement(!0),n)})}),this.rightColumns.forEach((n,o)=>{n.modules.frozen.marginValue=s,n.modules.frozen.margin=n.modules.frozen.marginValue+"px",n.visible&&(s+=n.getWidth()),o==this.rightColumns.length-1?n.modules.frozen.edge=!0:n.modules.frozen.edge=!1,n.parent.isGroup?this.layoutElement(this.getColGroupParentElement(n),n):this.layoutElement(n.getElement(),n),e&&n.cells.forEach(a=>{this.layoutElement(a.getElement(!0),n)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var e=this.table.rowManager.getVisibleRows(!0),i=this.table.rowManager.getRows().filter(r=>!e.includes(r));i.forEach(r=>{r.deinitialize()}),e.forEach(r=>{r.type==="row"&&this.layoutRow(r)})}layoutRow(e){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(i=>{var r=e.getCell(i);r&&this.layoutElement(r.getElement(!0),i)}),this.rightColumns.forEach(i=>{var r=e.getCell(i);r&&this.layoutElement(r.getElement(!0),i)})}layoutElement(e,i){var r;i.modules.frozen&&e&&(e.style.position="sticky",this.table.rtl?r=i.modules.frozen.position==="left"?"right":"left":r=i.modules.frozen.position,e.style[r]=i.modules.frozen.margin,e.classList.add("tabulator-frozen"),e.classList.toggle("tabulator-frozen-left",i.modules.frozen.edge&&i.modules.frozen.position==="left"),e.classList.toggle("tabulator-frozen-right",i.modules.frozen.edge&&i.modules.frozen.position==="right"))}adjustForScrollbar(e){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+e+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(e,i){var r=0;for(let s=0;s<i;s++)e[s].visible&&(r+=e[s].getWidth());return r}}class bPe extends ft{static moduleName="frozenRows";constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var e=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(e=>{this.initializeRow(e)})}initializeRow(e){var i=this.table.options.frozenRows,r=typeof i;r==="number"?e.getPosition()&&e.getPosition()+this.rows.length<=i&&this.freezeRow(e):r==="function"?i.call(this.table,e.getComponent())&&this.freezeRow(e):Array.isArray(i)&&i.includes(e.data[this.options("frozenRowsField")])&&this.freezeRow(e)}isRowFrozen(e){var i=this.rows.indexOf(e);return i>-1}isFrozen(){return!!this.rows.length}visibleRows(e,i){return this.rows.forEach(r=>{i.push(r)}),i}getRows(e){var i=e.slice(0);return this.rows.forEach(function(r){var s=i.indexOf(r);s>-1&&i.splice(s,1)}),i}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.rows.push(e),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(e){e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var i=this.rows.indexOf(e);if(i>-1){var r=e.getElement();r.parentNode&&r.parentNode.removeChild(r),this.rows.splice(i,1)}}styleRows(e){this.rows.forEach((i,r)=>{this.table.rowManager.styleRow(i,r)})}}class vPe{constructor(e){return this._group=e,this.type="GroupComponent",new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._group.groupManager.table.componentFunctionBinder.handle("group",i._group,r)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(e,i){return this._group.groupManager.table.rowManager.scrollToRow(this._group,e,i)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class mg{constructor(e,i,r,s,n,o,a){this.groupManager=e,this.parent=i,this.key=s,this.level=r,this.field=n,this.hasSubGroups=r<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:typeof e.startOpen[r]<"u"?e.startOpen[r]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(e){e||(this.groupList.length?this.groupList.forEach(function(i){i.wipe()}):this.rows.forEach(i=>{i.modules&&delete i.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach(i=>{this._createGroup(i,e)})}addBindings(){var e;this.groupManager.table.options.groupToggleElement&&(e=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,e.addEventListener("click",i=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(i.stopPropagation(),i.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(e,i){var r=i+"_"+e,s=new mg(this.groupManager,this,i,e,this.groupManager.groupIDLookups[i].field,this.groupManager.headerGenerator[i]||this.groupManager.headerGenerator[0],this.old?this.old.groups[r]:!1);this.groups[r]=s,this.groupList.push(s)}_addRowToGroup(e){var i=this.level+1;if(this.hasSubGroups){var r=this.groupManager.groupIDLookups[i].func(e.getData()),s=i+"_"+r;this.groupManager.allowedValues&&this.groupManager.allowedValues[i]?this.groups[s]&&this.groups[s].addRow(e):(this.groups[s]||this._createGroup(r,i),this.groups[s].addRow(e))}}_addRow(e){this.rows.push(e),e.modules.group=this}insertRow(e,i,r){var s=this.conformRowData({});e.updateData(s);var n=this.rows.indexOf(i);n>-1?r?this.rows.splice(n+1,0,e):this.rows.splice(n,0,e):r?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(e){this.arrowElement&&(this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(i){i.scrollHeader(e)}))}getRowIndex(e){}conformRowData(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e}removeRow(e){var i=this.rows.indexOf(e),r=e.getElement();i>-1&&this.rows.splice(i,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(r.parentNode&&r.parentNode.removeChild(r),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(e){var i=e.level+"_"+e.key,r;this.groups[i]&&(delete this.groups[i],r=this.groupList.indexOf(e),r>-1&&this.groupList.splice(r,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var e=[];return e.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(i){e=e.concat(i.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))),e}getData(e,i){var r=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach(s=>{r.push(s.getData(i||"data"))}),r}getRowCount(){var e=0;return this.groupList.length?this.groupList.forEach(i=>{e+=i.getRowCount()}):e=this.rows.length,e}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(e=>{var i=e.getHeadersAndRows();i.forEach(r=>{r.detachElement()})}):this.rows.forEach(e=>{var i=e.getElement();i.parentNode.removeChild(i)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var e=this.generateElement();this.groupList.length?this.groupList.forEach(i=>{var r=i.getHeadersAndRows();r.forEach(s=>{var n=s.getElement();e.parentNode.insertBefore(n,e.nextSibling),s.initialize(),e=n})}):this.rows.forEach(i=>{var r=i.getElement();e.parentNode.insertBefore(r,e.nextSibling),i.initialize(),e=r}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var e=[];typeof this.visible=="function"&&(this.rows.forEach(function(i){e.push(i.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))}getRowGroup(e){var i=!1;return this.groupList.length?this.groupList.forEach(function(r){var s=r.getRowGroup(e);s&&(i=s)}):this.rows.find(function(r){return r===e})&&(i=this),i}getSubGroups(e){var i=[];return this.groupList.forEach(function(r){i.push(e?r.getComponent():r)}),i}getRows(e,i){var r=[];return i&&this.groupList.length?this.groupList.forEach(s=>{r=r.concat(s.getRows(e,i))}):this.rows.forEach(function(s){r.push(e?s.getComponent():s)}),r}generateGroupHeaderContents(){var e=[],i=this.getRows(!1,!0);for(i.forEach(function(r){e.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(e=[]){return e.unshift(this.key),this.parent&&this.parent.getPath(e),e}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(e){(!this.initialized||e)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,ti.elVisible(this.element)&&this.initialize(!0)}setHeight(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new vPe(this)),this.component}}class wPe extends ft{static moduleName="groupRows";constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,i=this.table.options.groupStartOpen,r=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(r)&&e.length>r.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(n,o)=>{this.headerGenerator[0]=(a,l,u)=>(typeof a>"u"?"":a)+"<span>("+l+" "+(l===1?n:o.groups.items)+")</span>"}),this.groupIDLookups=[],e)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var s=this.table.columnManager.getRealColumns();s.forEach(n=>{n.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),n.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(e)||(e=[e]),e.forEach((n,o)=>{var a,l;typeof n=="function"?a=n:(l=this.table.columnManager.getColumnByField(n),l?a=function(u){return l.getFieldValue(u)}:a=function(u){return u[n]}),this.groupIDLookups.push({field:typeof n=="function"?!1:n,func:a,values:this.allowedValues?this.allowedValues[o]:!1})}),i&&(Array.isArray(i)||(i=[i]),i.forEach(n=>{}),this.startOpen=i),r&&(this.headerGenerator=Array.isArray(r)?r:[r])}else this.groupList=[],this.groups={}}rowSample(e,i){if(this.table.options.groupBy){var r=this.getGroups(!1)[0];i.push(r.getRows(!1)[0])}return i}virtualRenderFill(){var e=this.table.rowManager.tableElement,i=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)i=i.filter(r=>r.type!=="group"),e.style.minWidth=i.length?"":this.table.columnManager.getWidth()+"px";else return i}rowAddingIndex(e,i,r){if(this.table.options.groupBy){this.assignRowToGroup(e);var s=e.modules.group.rows;return s.length>1&&(!i||i&&s.indexOf(i)==-1?r?s[0]!==e&&(i=s[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,i,!r)):s[s.length-1]!==e&&(i=s[s.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,i,!r)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,i,!r)),i}}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.initialized||this.initialize(),this.configureGroupSetup(),!e&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return e.modules.group?e.modules.group.getComponent():!1}rowMoving(e,i,r){if(this.table.options.groupBy){!r&&i instanceof mg&&(i=this.table.rowManager.prevDisplayRow(e)||i);var s=i instanceof mg?i:i.modules.group,n=e instanceof mg?e:e.modules.group;s===n?this.table.rowManager.moveRowInArray(s.rows,e,i,r):(n&&n.removeRow(e),s.insertRow(e,i,r))}}rowDeleting(e){this.table.options.groupBy&&e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(e){this.table.options.groupBy&&this.reassignRowToGroup(e.row)}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var i=[];return this.groupList.forEach(function(r){i.push(e?r.getComponent():r)}),i}getChildGroups(e){var i=[];return e||(e=this),e.groupList.forEach(r=>{r.groupList.length?i=i.concat(this.getChildGroups(r)):i.push(r)}),i}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(e){e.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(e){var i=[];return e.forEach(r=>{var s={};s.level=0,s.rowCount=0,s.headerContent="";var n=[];r.hasSubGroups?(n=this.pullGroupListData(r.groupList),s.level=r.level,s.rowCount=n.length-r.groupList.length,s.headerContent=r.generator(r.key,s.rowCount,r.rows,r),i.push(s),i=i.concat(n)):(s.level=r.level,s.headerContent=r.generator(r.key,r.rows.length,r.rows,r),s.rowCount=r.getRows().length,i.push(s),r.getRows().forEach(o=>{i.push(o.getData("data"))}))}),i}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var i=!1;return this.options("dataTree")&&(e=this.table.modules.dataTree.getTreeParentRoot(e)),this.groupList.forEach(r=>{var s=r.getRowGroup(e);s&&(i=s)}),i}countGroups(){return this.groupList.length}generateGroups(e){var i=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(r=>{this.createGroup(r,0,i)}),e.forEach(r=>{this.assignRowToExistingGroup(r,i)})):e.forEach(r=>{this.assignRowToGroup(r,i)}),Object.values(i).forEach(r=>{r.wipe(!0)})}createGroup(e,i,r){var s=i+"_"+e,n;r=r||[],n=new mg(this,!1,i,e,this.groupIDLookups[0].field,this.headerGenerator[0],r[s]),this.groups[s]=n,this.groupList.push(n)}assignRowToExistingGroup(e,i){var r=this.groupIDLookups[0].func(e.getData()),s="0_"+r;this.groups[s]&&this.groups[s].addRow(e)}assignRowToGroup(e,i){var r=this.groupIDLookups[0].func(e.getData()),s=!this.groups["0_"+r];return s&&this.createGroup(r,0,i),this.groups["0_"+r].addRow(e),!s}reassignRowToGroup(e){if(e.type==="row"){var i=e.modules.group,r=i.getPath(),s=this.getExpectedPath(e),n;n=r.length==s.length&&r.every((o,a)=>o===s[a]),n||(i.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var i=[],r=e.getData();return this.groupIDLookups.forEach(s=>{i.push(s.func(r))}),i}updateGroupRows(e){var i=[];return this.blockRedraw||(this.groupList.forEach(r=>{i=i.concat(r.getHeadersAndRows())}),e&&this.refreshData(!0)),i}scrollHeaders(e){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(e-=this.table.columnManager.renderer.vDomPadLeft),e=e+"px",this.groupList.forEach(i=>{i.scrollHeader(e)}))}removeGroup(e){var i=e.level+"_"+e.key,r;this.groups[i]&&(delete this.groups[i],r=this.groupList.indexOf(e),r>-1&&this.groupList.splice(r,1))}checkBasicModeGroupHeaderWidth(){var e=this.table.rowManager.tableElement,i=!0;this.table.rowManager.getDisplayRows().forEach((r,s)=>{this.table.rowManager.styleRow(r,s),e.appendChild(r.getElement()),r.initialize(!0),r.type!=="group"&&(i=!1)}),i?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}}var _Pe={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue),t.component.cellRendered()},rowAdd:function(t){t.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e),this.table.rowManager.checkPlaceholder()},rowMove:function(t){var e=t.data.posFrom-t.data.posTo>0;this.table.rowManager.moveRowActual(t.component,this.table.rowManager.getRowFromPosition(t.data.posFrom),e),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},xPe={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue),t.component.cellRendered()},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e),this.table.rowManager.checkPlaceholder()},rowDelete:function(t){t.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.getRowFromPosition(t.data.posTo),t.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},SPe={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},EPe={undo:function(t){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(t.preventDefault(),this.table.modules.history.redo()))}},CPe={keybindings:{bindings:SPe,actions:EPe}};class wC extends ft{static moduleName="history";static moduleExtensions=CPe;static undoers=_Pe;static redoers=xPe;constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,i,r){this.action("rowMove",e,{posFrom:e.getPosition(),posTo:i.getPosition(),to:i,after:r})}rowAdded(e,i,r,s){this.action("rowAdd",e,{data:i,pos:r,index:s})}rowDeleted(e){var i,r;this.table.options.groupBy?(r=e.getComponent().getGroup()._getSelf().rows,i=r.indexOf(e),i&&(i=r[i-1])):(i=e.table.rowManager.getRowIndex(e),i&&(i=e.table.rowManager.rows[i-1])),this.action("rowDelete",e,{data:e.getData(),pos:!i,index:i})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,i,r){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:i,data:r}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var i=this.history.findIndex(function(r){return r.component===e});i>-1&&(this.history.splice(i,1),i<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return wC.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return wC.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(e,i){this.history.forEach(function(r){if(r.component instanceof ds)r.component===e&&(r.component=i);else if(r.component instanceof y1&&r.component.row===e){var s=r.component.column.getField();s&&(r.component=i.getCell(s))}})}}class TPe extends ft{static moduleName="htmlTableImport";constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var e=this.table.originalElement,i=this.table.options,r=e.getElementsByTagName("th"),s=e.getElementsByTagName("tbody")[0],n=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),s=s?s.getElementsByTagName("tr"):[],this._extractOptions(e,i),r.length?this._extractHeaders(r,s):this._generateBlankHeaders(r,s);for(var o=0;o<s.length;o++){var a=s[o],l=a.getElementsByTagName("td"),u={};this.hasIndex||(u[i.index]=o);for(var h=0;h<l.length;h++){var p=l[h];typeof this.fieldIndex[h]<"u"&&(u[this.fieldIndex[h]]=p.innerHTML)}n.push(u)}i.data=n,this.dispatchExternal("htmlImported")}_extractOptions(e,i,r){var s=e.attributes,n=Object.keys(r||i),o={};n.forEach(h=>{o[h.toLowerCase()]=h});for(var a in s){var l=s[a],u;l&&typeof l=="object"&&l.name&&l.name.indexOf("tabulator-")===0&&(u=l.name.replace("tabulator-",""),typeof o[u]<"u"&&(i[o[u]]=this._attribValue(l.value)))}}_attribValue(e){return e==="true"?!0:e==="false"?!1:e}_findCol(e){var i=this.table.options.columns.find(r=>r.title===e);return i||!1}_extractHeaders(e,i){for(var r=0;r<e.length;r++){var s=e[r],n=!1,o=this._findCol(s.textContent),a;o?n=!0:o={title:s.textContent.trim()},o.field||(o.field=s.textContent.trim().toLowerCase().replaceAll(" ","_")),a=s.getAttribute("width"),a&&!o.width&&(o.width=a),this._extractOptions(s,o,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[r]=o.field,o.field==this.table.options.index&&(this.hasIndex=!0),n||this.table.options.columns.push(o)}}_generateBlankHeaders(e,i){for(var r=0;r<e.length;r++){var s=e[r],n={title:"",field:"col"+r};this.fieldIndex[r]=n.field;var o=s.getAttribute("width");o&&(n.width=o),this.table.options.columns.push(n)}}}function MPe(t){var e=[],i=0,r=0,s=!1;for(let n=0;n<t.length;n++){let o=t[n],a=t[n+1];if(e[i]||(e[i]=[]),e[i][r]||(e[i][r]=""),o=='"'&&s&&a=='"'){e[i][r]+=o,n++;continue}if(o=='"'){s=!s;continue}if(o==","&&!s){r++;continue}if(o=="\r"&&a==`
`&&!s){r=0,i++,n++;continue}if((o=="\r"||o==`
`)&&!s){r=0,i++;continue}e[i][r]+=o}return e}function kPe(t){try{return JSON.parse(t)}catch(e){return console.warn("JSON Import Error - File contents is invalid JSON",e),Promise.reject()}}function RPe(t){return t}function IPe(t){var e=this.dependencyRegistry.lookup("XLSX"),i=e.read(t),r=i.Sheets[i.SheetNames[0]];return e.utils.sheet_to_json(r,{header:1})}var $Pe={csv:MPe,json:kPe,array:RPe,xlsx:IPe};class b3 extends ft{static moduleName="import";static importers=$Pe;constructor(e){super(e),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text"),this.registerTableOption("importHeaderTransform"),this.registerTableOption("importValueTransform"),this.registerTableOption("importDataValidator"),this.registerTableOption("importFileValidator")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(e){return this.table.options.importFormat&&(typeof e=="string"||Array.isArray(e)&&e.length&&Array.isArray(e))}loadData(e,i,r,s,n){return this.importData(this.lookupImporter(),e).then(this.structureData.bind(this)).catch(o=>(console.error("Import Error:",o||"Unable to import data"),Promise.reject(o)))}lookupImporter(e){var i;return e||(e=this.table.options.importFormat),typeof e=="string"?i=b3.importers[e]:i=e,i||console.error("Import Error - Importer not found:",e),i}importFromFile(e,i,r){var s=this.lookupImporter(e);if(s)return this.pickFile(i,r).then(this.importData.bind(this,s)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(n=>(this.dispatch("import-error",n),this.dispatchExternal("importError",n),console.error("Import Error:",n||"Unable to import file"),this.table.dataLoader.alertError(),setTimeout(()=>{this.table.dataLoader.clearAlert()},3e3),Promise.reject(n)))}pickFile(e,i){return new Promise((r,s)=>{var n=document.createElement("input");n.type="file",n.accept=e,n.addEventListener("change",o=>{var a=n.files[0],l=new FileReader,u=this.validateFile(a);if(u===!0){switch(this.dispatch("import-importing",n.files),this.dispatchExternal("importImporting",n.files),i||this.table.options.importReader){case"buffer":l.readAsArrayBuffer(a);break;case"binary":l.readAsBinaryString(a);break;case"url":l.readAsDataURL(a);break;case"text":default:l.readAsText(a)}l.onload=h=>{r(l.result)},l.onerror=h=>{console.warn("File Load Error - Unable to read file"),s(h)}}else s(u)}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),n.click()})}importData(e,i){var r;return this.table.dataLoader.alertLoader(),new Promise((s,n)=>{setTimeout(()=>{r=e.call(this.table,i),r instanceof Promise||r?s(r):n()},10)})}structureData(e){var i=[];return Array.isArray(e)&&e.length&&Array.isArray(e[0])?(this.table.options.autoColumns?i=this.structureArrayToObject(e):i=this.structureArrayToColumns(e),i):e}mutateData(e){var i=[];return Array.isArray(e)?e.forEach(r=>{i.push(this.table.modules.mutator.transformRow(r,"import"))}):i=e,i}transformHeader(e){var i=[];if(this.table.options.importHeaderTransform)e.forEach(r=>{i.push(this.table.options.importHeaderTransform.call(this.table,r,e))});else return e;return i}transformData(e){var i=[];if(this.table.options.importValueTransform)e.forEach(r=>{i.push(this.table.options.importValueTransform.call(this.table,r,e))});else return e;return i}structureArrayToObject(e){var i=this.transformHeader(e.shift()),r=e.map(s=>{var n={};return s=this.transformData(s),i.forEach((o,a)=>{n[o]=s[a]}),n});return r}structureArrayToColumns(e){var i=[],r=this.transformHeader(e[0]),s=this.table.getColumns();return s[0]&&r[0]&&s[0].getDefinition().title===r[0]&&e.shift(),e.forEach(n=>{var o={};n=this.transformData(n),n.forEach((a,l)=>{var u=s[l];u&&(o[u.getField()]=a)}),i.push(o)}),i}validateFile(e){return this.table.options.importFileValidator?this.table.options.importFileValidator.call(this.table,e):!0}validateData(e){var i;return this.table.options.importDataValidator?(i=this.table.options.importDataValidator.call(this.table,e),i===!0?e:Promise.reject(i)):e}setData(e){return this.dispatch("import-imported",e),this.dispatchExternal("importImported",e),this.table.dataLoader.clearAlert(),this.table.setData(e)}}let APe=class extends ft{static moduleName="interaction";constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var e=Object.values(this.touchWatchers);e.forEach(i=>{for(let r in i)i[r]=null})}cellContentsSelectionFixer(e,i){var r;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===i)){e.preventDefault();try{document.selection?(r=document.body.createTextRange(),r.moveToElementText(i.getElement()),r.select()):window.getSelection&&(r=document.createRange(),r.selectNode(i.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(r))}catch{}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,i){i?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var i=this.eventMap[e];this.touchSubscribers[i+"-touchstart"]||(this.touchSubscribers[i+"-touchstart"]=this.handleTouch.bind(this,i,"start"),this.touchSubscribers[i+"-touchend"]=this.handleTouch.bind(this,i,"end"),this.subscribe(i+"-touchstart",this.touchSubscribers[i+"-touchstart"]),this.subscribe(i+"-touchend",this.touchSubscribers[i+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var i=!0,r=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let s in this.eventMap)this.eventMap[s]===r&&this.subscribers[s]&&(i=!1);i&&(this.unsubscribe(r+"-touchstart",this.touchSubscribers[r+"-touchstart"]),this.unsubscribe(r+"-touchend",this.touchSubscribers[r+"-touchend"]),delete this.touchSubscribers[r+"-touchstart"],delete this.touchSubscribers[r+"-touchend"])}}initializeColumn(e){var i=e.definition;for(let r in this.eventMap)i[r]&&(this.subscriptionChanged(r,!0),this.columnSubscribers[r]||(this.columnSubscribers[r]=[]),this.columnSubscribers[r].push(e))}handle(e,i,r){this.dispatchEvent(e,i,r)}handleTouch(e,i,r,s){var n=this.touchWatchers[e];switch(e==="column"&&(e="header"),i){case"start":n.tap=!0,clearTimeout(n.tapHold),n.tapHold=setTimeout(()=>{clearTimeout(n.tapHold),n.tapHold=null,n.tap=null,clearTimeout(n.tapDbl),n.tapDbl=null,this.dispatchEvent(e+"TapHold",r,s)},1e3);break;case"end":n.tap&&(n.tap=null,this.dispatchEvent(e+"Tap",r,s)),n.tapDbl?(clearTimeout(n.tapDbl),n.tapDbl=null,this.dispatchEvent(e+"DblTap",r,s)):n.tapDbl=setTimeout(()=>{clearTimeout(n.tapDbl),n.tapDbl=null},300),clearTimeout(n.tapHold),n.tapHold=null;break}}dispatchEvent(e,i,r){var s=r.getComponent(),n;this.columnSubscribers[e]&&(r instanceof y1?n=r.column.definition[e]:r instanceof Cl&&(n=r.definition[e]),n&&n(i,s)),this.dispatchExternal(e,i,s)}};var OPe={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},PPe={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,i=e.scrollTop-e.element.clientHeight;t.preventDefault(),e.displayRowsCount&&(i>=0?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,i=e.scrollTop+e.element.clientHeight,r=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(i<=r?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){this.dispatch("keybinding-nav-prev",t)},navNext:function(t){this.dispatch("keybinding-nav-next",t)},navLeft:function(t){this.dispatch("keybinding-nav-left",t)},navRight:function(t){this.dispatch("keybinding-nav-right",t)},navUp:function(t){this.dispatch("keybinding-nav-up",t)},navDown:function(t){this.dispatch("keybinding-nav-down",t)}};class q0 extends ft{static moduleName="keybindings";static bindings=OPe;static actions=PPe;constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,i={};this.watchKeys={},this.pressedKeys=[],e!==!1&&(Object.assign(i,q0.bindings),Object.assign(i,e),this.mapBindings(i),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let i in e)q0.actions[i]?e[i]&&(typeof e[i]!="object"&&(e[i]=[e[i]]),e[i].forEach(r=>{var s=Array.isArray(r)?r:[r];s.forEach(n=>{this.mapBinding(i,n)})})):console.warn("Key Binding Error - no such action:",i)}mapBinding(e,i){var r={action:q0.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},s=i.toString().toLowerCase().split(" ").join("").split("+");s.forEach(n=>{switch(n){case"ctrl":r.ctrl=!0;break;case"shift":r.shift=!0;break;case"meta":r.meta=!0;break;default:n=isNaN(n)?n.toUpperCase().charCodeAt(0):parseInt(n),r.keys.push(n),this.watchKeys[n]||(this.watchKeys[n]=[]),this.watchKeys[n].push(r)}})}bindEvents(){var e=this;this.keyupBinding=function(i){var r=i.keyCode,s=e.watchKeys[r];s&&(e.pressedKeys.push(r),s.forEach(function(n){e.checkBinding(i,n)}))},this.keydownBinding=function(i){var r=i.keyCode,s=e.watchKeys[r];if(s){var n=e.pressedKeys.indexOf(r);n>-1&&e.pressedKeys.splice(n,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,i){var r=!0;return e.ctrlKey==i.ctrl&&e.shiftKey==i.shift&&e.metaKey==i.meta?(i.keys.forEach(s=>{var n=this.pressedKeys.indexOf(s);n==-1&&(r=!1)}),r&&i.action.call(this,e),!0):!1}}class DPe extends ft{static moduleName="menu";constructor(e){super(e),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(e){var i=e.definition;i.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),i.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),i.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),i.headerMenu&&this.initializeColumnHeaderMenu(e),i.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),i.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),i.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(e){var i=e.definition.headerMenuIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),i?(typeof i=="function"&&(i=i(e.getComponent())),i instanceof HTMLElement?r.appendChild(i):r.innerHTML=i):r.innerHTML="&vellip;",r.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.loadMenuEvent(e.definition.headerMenu,s,e)}),e.titleElement.insertBefore(r,e.titleElement.firstChild)}loadMenuTableCellEvent(e,i,r){r._cell&&(r=r._cell),r.column.definition[e]&&this.loadMenuEvent(r.column.definition[e],i,r)}loadMenuTableColumnEvent(e,i,r){r._column&&(r=r._column),r.definition[e]&&this.loadMenuEvent(r.definition[e],i,r)}loadMenuEvent(e,i,r){r._group?r=r._group:r._row&&(r=r._row),e=typeof e=="function"?e.call(this.table,i,r.getComponent()):e,this.loadMenu(i,r,e)}loadMenu(e,i,r,s,n){var o=!(e instanceof MouseEvent),a=document.createElement("div"),l;if(a.classList.add("tabulator-menu"),o||e.preventDefault(),!(!r||!r.length)){if(s)l=n.child(a);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=l=this.popup(a)}r.forEach(u=>{var h=document.createElement("div"),p=u.label,m=u.disabled;u.separator?h.classList.add("tabulator-menu-separator"):(h.classList.add("tabulator-menu-item"),typeof p=="function"&&(p=p.call(this.table,i.getComponent())),p instanceof Node?h.appendChild(p):h.innerHTML=p,typeof m=="function"&&(m=m.call(this.table,i.getComponent())),m?(h.classList.add("tabulator-menu-item-disabled"),h.addEventListener("click",y=>{y.stopPropagation()})):u.menu&&u.menu.length?h.addEventListener("click",y=>{y.stopPropagation(),this.loadMenu(y,i,u.menu,h,l)}):u.action&&h.addEventListener("click",y=>{u.action(y,i.getComponent())}),u.menu&&u.menu.length&&h.classList.add("tabulator-menu-item-submenu")),a.appendChild(h)}),a.addEventListener("click",u=>{this.rootPopup&&this.rootPopup.hide()}),l.show(s||e),l===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",r,l),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=i,this.dispatch("menu-opened",r,l),this.dispatchExternal("menuOpened",i.getComponent()))}}}class LPe extends ft{static moduleName="moveColumn";constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(e){var i=this,r={},s;!e.modules.frozen&&!e.isGroup&&!e.isRowHeader&&(s=e.getElement(),r.mousemove=(function(n){e.parent===i.moving.parent&&((i.touchMove?n.touches[0].pageX:n.pageX)-ti.elOffset(s).left+i.table.columnManager.contentsElement.scrollLeft>e.getWidth()/2?(i.toCol!==e||!i.toColAfter)&&(s.parentNode.insertBefore(i.placeholderElement,s.nextSibling),i.moveColumn(e,!0)):(i.toCol!==e||i.toColAfter)&&(s.parentNode.insertBefore(i.placeholderElement,s),i.moveColumn(e,!1)))}).bind(i),s.addEventListener("mousedown",function(n){i.touchMove=!1,n.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(n,e)},i.checkPeriod))}),s.addEventListener("mouseup",function(n){n.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),i.bindTouchEvents(e)),e.modules.moveColumn=r}bindTouchEvents(e){var i=e.getElement(),r=!1,s,n,o,a,l,u;i.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=e.nextColumn(),o=s?s.getWidth()/2:0,n=e.prevColumn(),a=n?n.getWidth()/2:0,l=0,u=0,r=!1,this.startMove(h,e)},this.checkPeriod)},{passive:!0}),i.addEventListener("touchmove",h=>{var p,m;this.moving&&(this.moveHover(h),r||(r=h.touches[0].pageX),p=h.touches[0].pageX-r,p>0?s&&p-l>o&&(m=s,m!==e&&(r=h.touches[0].pageX,m.getElement().parentNode.insertBefore(this.placeholderElement,m.getElement().nextSibling),this.moveColumn(m,!0))):n&&-p-u>a&&(m=n,m!==e&&(r=h.touches[0].pageX,m.getElement().parentNode.insertBefore(this.placeholderElement,m.getElement()),this.moveColumn(m,!1))),m&&(s=m.nextColumn(),l=o,o=s?s.getWidth()/2:0,n=m.prevColumn(),u=a,a=n?n.getWidth()/2:0))},{passive:!0}),i.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(h)})}startMove(e,i){var r=i.getElement(),s=this.table.columnManager.getContentsElement(),n=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=i,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-ti.elOffset(r).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=i.getWidth()+"px",this.placeholderElement.style.height=i.getHeight()+"px",r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),s.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=s.clientHeight-n.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e),this.dispatch("column-moving",e,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,i){var r=this.moving.getCells();this.toCol=e,this.toColAfter=i,i?e.getCells().forEach(function(s,n){var o=s.getElement(!0);o.parentNode&&r[n]&&o.parentNode.insertBefore(r[n].getElement(),o.nextSibling)}):e.getCells().forEach(function(s,n){var o=s.getElement(!0);o.parentNode&&r[n]&&o.parentNode.insertBefore(r[n].getElement(),o)})}endMove(e){(e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var i=this.table.columnManager.getContentsElement(),r=i.scrollLeft,s=(this.touchMove?e.touches[0].pageX:e.pageX)-ti.elOffset(i).left+r,n;this.hoverElement.style.left=s-this.startX+"px",s-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{n=Math.max(0,r-5),this.table.rowManager.getElement().scrollLeft=n,this.autoScrollTimeout=!1},1))),r+i.clientWidth-s<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{n=Math.min(i.clientWidth,r+5),this.table.rowManager.getElement().scrollLeft=n,this.autoScrollTimeout=!1},1)))}}var NPe={delete:function(t,e,i){t.delete()}},FPe={insert:function(t,e,i){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,i){return this.table.addRow(t.getData()),!0},update:function(t,e,i){return e?(e.update(t.getData()),!0):!1},replace:function(t,e,i){return e?(this.table.addRow(t.getData(),void 0,e),e.delete(),!0):!1}};class _C extends ft{static moduleName="moveRow";static senders=NPe;static receivers=FPe;constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var i=this,r={};r.mouseup=(function(s){i.tableRowDrop(s,e)}).bind(i),r.mousemove=(function(s){var n;s.pageY-ti.elOffset(e.element).top+i.table.rowManager.element.scrollTop>e.getHeight()/2?(i.toRow!==e||!i.toRowAfter)&&(n=e.getElement(),n.parentNode.insertBefore(i.placeholderElement,n.nextSibling),i.moveRow(e,!0)):(i.toRow!==e||i.toRowAfter)&&(n=e.getElement(),n.previousSibling&&(n.parentNode.insertBefore(i.placeholderElement,n),i.moveRow(e,!1)))}).bind(i),e.modules.moveRow=r}initializeRow(e){var i=this,r={},s;r.mouseup=(function(n){i.tableRowDrop(n,e)}).bind(i),r.mousemove=(function(n){var o=e.getElement();n.pageY-ti.elOffset(o).top+i.table.rowManager.element.scrollTop>e.getHeight()/2?(i.toRow!==e||!i.toRowAfter)&&(o.parentNode.insertBefore(i.placeholderElement,o.nextSibling),i.moveRow(e,!0)):(i.toRow!==e||i.toRowAfter)&&(o.parentNode.insertBefore(i.placeholderElement,o),i.moveRow(e,!1))}).bind(i),this.hasHandle||(s=e.getElement(),s.addEventListener("mousedown",function(n){n.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(n,e)},i.checkPeriod))}),s.addEventListener("mouseup",function(n){n.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=r}initializeColumn(e){e.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&this.table.options.movableRows!==!1){var i=this,r=e.getElement(!0);r.addEventListener("mousedown",function(s){s.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(s,e.row)},i.checkPeriod))}),r.addEventListener("mouseup",function(s){s.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),this.bindTouchEvents(e.row,r)}}bindTouchEvents(e,i){var r=!1,s,n,o,a,l,u;i.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=e.nextRow(),o=s?s.getHeight()/2:0,n=e.prevRow(),a=n?n.getHeight()/2:0,l=0,u=0,r=!1,this.startMove(h,e)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,i.addEventListener("touchmove",h=>{var p,m;this.moving&&(h.preventDefault(),this.moveHover(h),r||(r=h.touches[0].pageY),p=h.touches[0].pageY-r,p>0?s&&p-l>o&&(m=s,m!==e&&(r=h.touches[0].pageY,m.getElement().parentNode.insertBefore(this.placeholderElement,m.getElement().nextSibling),this.moveRow(m,!0))):n&&-p-u>a&&(m=n,m!==e&&(r=h.touches[0].pageY,m.getElement().parentNode.insertBefore(this.placeholderElement,m.getElement()),this.moveRow(m,!1))),m&&(s=m.nextRow(),l=o,o=s?s.getHeight()/2:0,n=m.prevRow(),u=a,a=n?n.getHeight()/2:0))}),i.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(h),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})}startMove(e,i){var r=i.getElement();this.setStartPosition(e,i),this.moving=i,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=i.getWidth()+"px",this.placeholderElement.style.height=i.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(i)):(r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r)),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",i.getComponent()),this.moveHover(e)}setStartPosition(e,i){var r=this.touchMove?e.touches[0].pageX:e.pageX,s=this.touchMove?e.touches[0].pageY:e.pageY,n,o;n=i.getElement(),this.connection?(o=n.getBoundingClientRect(),this.startX=o.left-r+window.pageXOffset,this.startY=o.top-s+window.pageYOffset):this.startY=s-n.getBoundingClientRect().top}endMove(e){(!e||e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,i){this.toRow=e,this.toRowAfter=i}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var i=this.table.rowManager.getElement(),r=i.scrollTop,s=(this.touchMove?e.touches[0].pageY:e.pageY)-i.getBoundingClientRect().top+r;this.hoverElement.style.top=Math.min(s-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,i,r){this.dispatchExternal("movableRowsElementDrop",e,i,r?r.getComponent():!1)}connectToTables(e){var i;this.connectionSelectorsTables&&(i=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",i),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(r=>{typeof r=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(r))):this.connectionElements.push(r)}),this.connectionElements.forEach(r=>{var s=n=>{this.elementRowDrop(n,r,this.moving)};r.addEventListener("mouseup",s),r.tabulatorElementDropEvent=s,r.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(i=>{i.classList.remove("tabulator-movingrow-receiving"),i.removeEventListener("mouseup",i.tabulatorElementDropEvent),delete i.tabulatorElementDropEvent})}connect(e,i){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=i,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{r.type==="row"&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().addEventListener("mouseup",r.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",i,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(i=>{i.type==="row"&&i.modules.moveRow&&i.modules.moveRow.mouseup&&i.getElement().removeEventListener("mouseup",i.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,i,r){var s=!1;if(r){switch(typeof this.table.options.movableRowsSender){case"string":s=_C.senders[this.table.options.movableRowsSender];break;case"function":s=this.table.options.movableRowsSender;break}s?s.call(this,this.moving?this.moving.getComponent():void 0,i?i.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),i?i.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),i?i.getComponent():void 0,e);this.endMove()}tableRowDrop(e,i){var r=!1,s=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":r=_C.receivers[this.table.options.movableRowsReceiver];break;case"function":r=this.table.options.movableRowsReceiver;break}r?s=r.call(this,this.connectedRow.getComponent(),i?i.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),s?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),i?i.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),i?i.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:i,success:s})}commsReceived(e,i,r){switch(i){case"connect":return this.connect(e,r.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,r.row,r.success)}}}var jPe={};class xC extends ft{static moduleName="mutator";static mutators=jPe;constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard","import"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutatorImport"),this.registerColumnOption("mutatorImportParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,i,r){return this.transformRow(i,"data",r)}initializeColumn(e){var i=!1,r={};this.allowedTypes.forEach(s=>{var n="mutator"+(s.charAt(0).toUpperCase()+s.slice(1)),o;e.definition[n]&&(o=this.lookupMutator(e.definition[n]),o&&(i=!0,r[n]={mutator:o,params:e.definition[n+"Params"]||{}}))}),i&&(e.modules.mutate=r)}lookupMutator(e){var i=!1;switch(typeof e){case"string":xC.mutators[e]?i=xC.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":i=e;break}return i}transformRow(e,i,r){var s="mutator"+(i.charAt(0).toUpperCase()+i.slice(1)),n;return this.enabled&&this.table.columnManager.traverse(o=>{var a,l,u;o.modules.mutate&&(a=o.modules.mutate[s]||o.modules.mutate.mutator||!1,a&&(n=o.getFieldValue(typeof r<"u"?r:e),(i=="data"&&!r||typeof n<"u")&&(u=o.getComponent(),l=typeof a.params=="function"?a.params(n,e,i,u):a.params,o.setFieldValue(e,a.mutator(n,e,i,l,u)))))}),e}transformCell(e,i){if(e.column.modules.mutate){var r=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,s={};if(r)return s=Object.assign(s,e.row.getData()),e.column.setFieldValue(s,i),r.mutator(i,s,"edit",r.params,e.getComponent())}return i}mutateLink(e){var i=e.column.definition.mutateLink;i&&(Array.isArray(i)||(i=[i]),i.forEach(r=>{var s=e.row.getCell(r);s&&s.setValue(s.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}}function zPe(t,e,i,r,s){var n=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",p=>{o.innerHTML=p}),this.table.modules.localize.langBind("pagination|counter|of",p=>{l.innerHTML=p}),this.table.modules.localize.langBind("pagination|counter|rows",p=>{h.innerHTML=p}),r?(a.innerHTML=" "+e+"-"+Math.min(e+t-1,r)+" ",u.innerHTML=" "+r+" ",n.appendChild(o),n.appendChild(a),n.appendChild(l),n.appendChild(u),n.appendChild(h)):(a.innerHTML=" 0 ",n.appendChild(o),n.appendChild(a),n.appendChild(h)),n}function VPe(t,e,i,r,s){var n=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",p=>{o.innerHTML=p}),a.innerHTML=" "+i+" ",this.table.modules.localize.langBind("pagination|counter|of",p=>{l.innerHTML=p}),u.innerHTML=" "+s+" ",this.table.modules.localize.langBind("pagination|counter|pages",p=>{h.innerHTML=p}),n.appendChild(o),n.appendChild(a),n.appendChild(l),n.appendChild(u),n.appendChild(h),n}var UPe={rows:zPe,pages:VPe};class v3 extends ft{static moduleName="page";static pageCounters=UPe;constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("paginationOutOfRange",!1),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,i){var r=this.table.rowManager,s=r.getDisplayRows(),n;return i?s.length?n=s[0]:r.activeRows.length&&(n=r.activeRows[r.activeRows.length-1],i=!1):s.length&&(n=s[s.length-1],i=!(s.length<this.size)),{index:n,top:i}}calculatePageSizes(){var e,i;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(e=document.createElement("div"),e.classList.add("tabulator-row"),e.style.visibility="hidden",i=document.createElement("div"),i.classList.add("tabulator-cell"),i.innerHTML="Page Row Test",e.appendChild(i),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,i,r,s){return this.initialLoad||(this.progressiveLoad&&!r||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),s.page=this.page,this.size&&(s.size=this.size),s}userSetPageToRow(e){return this.table.options.pagination&&(e=this.table.rowManager.findRow(e),e)?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return this.table.options.pagination?(this.setPageSize(e),this.setPage(1)):!1}scrollVertical(e,i){var r,s,n;!i&&!this.table.dataLoader.loading&&(r=this.table.rowManager.getElement(),s=r.scrollHeight-r.clientHeight-e,n=this.table.options.progressiveLoadScrollMargin||r.clientHeight*2,s<n&&this.nextPage().catch(()=>{}))}restOnRenderBefore(e,i){return i||this.mode==="local"&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,this.pageSizes.indexOf(this.size)==-1&&e.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){e=[];for(let i=1;i<5;i++)e.push(this.size*i);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(i=>{var r=document.createElement("option");r.value=i,i===!0?this.langBind("pagination|all",function(s){r.innerHTML=s}):r.innerHTML=i,this.pageSizeSelect.appendChild(r)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var e=this.table.options.paginationCounter,i=null;e&&(typeof e=="function"?i=e:i=v3.pageCounters[e],i?(this.pageCounter=i,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",e))}initializePaginator(e){var i,r;e||(this.langBind("pagination|first",s=>{this.firstBut.innerHTML=s}),this.langBind("pagination|first_title",s=>{this.firstBut.setAttribute("aria-label",s),this.firstBut.setAttribute("title",s)}),this.langBind("pagination|prev",s=>{this.prevBut.innerHTML=s}),this.langBind("pagination|prev_title",s=>{this.prevBut.setAttribute("aria-label",s),this.prevBut.setAttribute("title",s)}),this.langBind("pagination|next",s=>{this.nextBut.innerHTML=s}),this.langBind("pagination|next_title",s=>{this.nextBut.setAttribute("aria-label",s),this.nextBut.setAttribute("title",s)}),this.langBind("pagination|last",s=>{this.lastBut.innerHTML=s}),this.langBind("pagination|last_title",s=>{this.lastBut.setAttribute("aria-label",s),this.lastBut.setAttribute("title",s)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(i=document.createElement("label"),this.langBind("pagination|page_size",s=>{this.pageSizeSelect.setAttribute("aria-label",s),this.pageSizeSelect.setAttribute("title",s),i.innerHTML=s}),this.element.appendChild(i),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",s=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(r=document.querySelector(this.table.options.paginationCounterElement),r?r.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(e){e?this.max=this.size===!0?1:Math.ceil(e/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||(this.mode=="local"||e)&&(this.page=1,this.trackChanges())}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return e=parseInt(e),e>0&&e<=this.max||this.mode!=="local"?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var i=this.displayRows(-1),r=i.indexOf(e);if(r>-1){var s=this.size===!0?1:Math.ceil((r+1)/this.size);return this.setPage(s)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){e!==!0&&(e=parseInt(e)),e>0&&(this.size=e,this.dispatchExternal("pageSizeChanged",e)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(e,i,r){var s;if(this.pageCounter)switch(this.mode==="remote"&&(i=this.size,r=(this.page-1)*this.size+1,e=this.remoteRowCountEstimate),s=this.pageCounter.call(this,i,r,this.page,e,this.max),typeof s){case"object":if(s instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(s)}else this.pageCounterElement.innerHTML="",s!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",s);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=s}}_setPageButtons(){let e=Math.floor((this.count-1)/2),i=Math.ceil((this.count-1)/2),r=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),s=this.page<=i?Math.min(this.count,this.max):Math.min(this.page+i,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let n=r;n<=s;n++)n>0&&n<=this.max&&this.pagesElement.appendChild(this._generatePageButton(n));this.footerRedraw()}_generatePageButton(e){var i=document.createElement("button");return i.classList.add("tabulator-page"),e==this.page&&i.classList.add("active"),i.setAttribute("type","button"),i.setAttribute("role","button"),this.langBind("pagination|page_title",r=>{i.setAttribute("aria-label",r+" "+e),i.setAttribute("title",r+" "+e)}),i.setAttribute("data-page",e),i.textContent=e,i.addEventListener("click",r=>{this.setPage(e)}),i}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var i=0,r,s,n,o,a=e.filter(l=>l.type==="row");if(this.mode=="local"){r=[],this.setMaxRows(e.length),this.size===!0?(s=0,n=e.length):(s=this.size*(this.page-1),n=s+parseInt(this.size)),this._setPageButtons();for(let l=s;l<n;l++){let u=e[l];u&&(r.push(u),u.type==="row"&&(o||(o=u),i++))}return this._setPageCounter(a.length,i,o?a.indexOf(o)+1:0),r}else return this._setPageButtons(),this._setPageCounter(a.length),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var i,r;if(typeof e.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),e.data)if(this.max=parseInt(e.last_page)||1,this.remoteRowCountEstimate=typeof e.last_row<"u"?e.last_row:e.last_page*this.size-(this.page==e.last_page?this.size-e.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(e.data,!1,this.page==1):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.page===1?e.data:this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,this.page!==1,this.page==1),i=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+i&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else{if(this.page>this.max&&(console.warn("Remote Pagination Error - Server returned last page value lower than the current page"),r=this.options("paginationOutOfRange"),r))return this.setPage(typeof r=="function"?r.call(this,this.page,this.max):r);this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.containerElement;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}var HPe={local:function(t,e){var i=localStorage.getItem(t+"-"+e);return i?JSON.parse(i):!1},cookie:function(t,e){var i=document.cookie,r=t+"-"+e,s=i.indexOf(r+"="),n,o;return s>-1&&(i=i.slice(s),n=i.indexOf(";"),n>-1&&(i=i.slice(0,n)),o=i.replace(r+"=","")),o?JSON.parse(o):!1}},BPe={local:function(t,e,i){localStorage.setItem(t+"-"+e,JSON.stringify(i))},cookie:function(t,e,i){var r=new Date;r.setDate(r.getDate()+1e4),document.cookie=t+"-"+e+"="+JSON.stringify(i)+"; expires="+r.toUTCString()}};class ul extends ft{static moduleName="persistence";static moduleInitOrder=-10;static readers=HPe;static writers=BPe;constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,i=this.table.options.persistenceID,r;this.mode=e!==!0?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:ul.readers[this.table.options.persistenceReaderFunc]?this.readFunc=ul.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):ul.readers[this.mode]?this.readFunc=ul.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:ul.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=ul.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):ul.writers[this.mode]?this.writeFunc=ul.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(i||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(r=this.retrieveData("page"),r&&(typeof r.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=r.paginationSize),typeof r.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=r.paginationInitialPage))),this.config.group&&(r=this.retrieveData("group"),r&&(typeof r.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=r.groupBy),typeof r.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=r.groupStartOpen),typeof r.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=r.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,i,r;this.config.sort&&(e=this.load("sort"),e&&(this.table.options.initialSort=e)),this.config.filter&&(i=this.load("filter"),i&&(this.table.options.initialFilter=i)),this.config.headerFilter&&(r=this.load("headerFilter"),r&&(this.table.options.initialHeaderFilter=r))}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e,!0)),!0}initializeColumn(e){var i,r;this.config.columns&&(this.defWatcherBlock=!0,i=e.getDefinition(),r=this.config.columns===!0?Object.keys(i):this.config.columns,r.forEach(s=>{var n=Object.getOwnPropertyDescriptor(i,s),o=i[s];n&&Object.defineProperty(i,s,{set:a=>{o=a,this.defWatcherBlock||this.save("columns"),n.set&&n.set(a)},get:()=>(n.get&&n.get(),o)})}),this.defWatcherBlock=!1)}load(e,i){var r=this.retrieveData(e);return i&&(r=r?this.mergeDefinition(i,r):i),r}retrieveData(e){return this.readFunc?this.readFunc(this.id,e):!1}mergeDefinition(e,i,r){var s=[];return i=i||[],i.forEach((n,o)=>{var a=this._findColumn(e,n),l;a&&(r?l=Object.keys(n):this.config.columns===!0||this.config.columns==null?(l=Object.keys(a),l.push("width")):l=this.config.columns,l.forEach(u=>{u!=="columns"&&typeof n[u]<"u"&&(a[u]=n[u])}),a.columns&&(a.columns=this.mergeDefinition(a.columns,n.columns)),s.push(a))}),e.forEach((n,o)=>{var a=this._findColumn(i,n);a||(s.length>o?s.splice(o,0,n):s.push(n))}),s}_findColumn(e,i){var r=i.columns?"group":i.field?"field":"object";return e.find(function(s){switch(r){case"group":return s.title===i.title&&s.columns.length===i.columns.length;case"field":return s.field===i.field;case"object":return s===i}})}save(e){var i={};switch(e){case"columns":i=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":i=this.table.modules.filter.getFilters();break;case"headerFilter":i=this.table.modules.filter.getHeaderFilters();break;case"sort":i=this.validateSorters(this.table.modules.sort.getSort());break;case"group":i=this.getGroupConfig();break;case"page":i=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,e,i)}validateSorters(e){return e.forEach(function(i){i.column=i.field,delete i.field}),e}getGroupConfig(){var e={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var i=[],r=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(s=>{var n={},o=s.getDefinition(),a;s.isGroup?(n.title=o.title,n.columns=this.parseColumns(s.getColumns())):(n.field=s.getField(),this.config.columns===!0||this.config.columns==null?(a=Object.keys(o),a.push("width"),a.push("visible")):a=this.config.columns,a.forEach(l=>{switch(l){case"width":n.width=s.getWidth();break;case"visible":n.visible=s.visible;break;default:typeof o[l]!="function"&&r.indexOf(l)===-1&&(n[l]=o[l])}})),i.push(n)}),i}}class GPe extends ft{static moduleName="popup";constructor(e){super(e),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(e,i,r){this.loadPopupEvent(i,null,e,r)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(e){var i=e.definition;i.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),i.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),i.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),i.headerPopup&&this.initializeColumnHeaderPopup(e),i.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),i.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),i.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(e){var i=e.definition.headerPopupIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),i?(typeof i=="function"&&(i=i(e.getComponent())),i instanceof HTMLElement?r.appendChild(i):r.innerHTML=i):r.innerHTML="&vellip;",r.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.loadPopupEvent(e.definition.headerPopup,s,e)}),e.titleElement.insertBefore(r,e.titleElement.firstChild)}loadPopupTableCellEvent(e,i,r){r._cell&&(r=r._cell),r.column.definition[e]&&this.loadPopupEvent(r.column.definition[e],i,r)}loadPopupTableColumnEvent(e,i,r){r._column&&(r=r._column),r.definition[e]&&this.loadPopupEvent(r.definition[e],i,r)}loadPopupEvent(e,i,r,s){var n;function o(a){n=a}r._group?r=r._group:r._row&&(r=r._row),e=typeof e=="function"?e.call(this.table,i,r.getComponent(),o):e,this.loadPopup(i,r,e,n,s)}loadPopup(e,i,r,s,n){var o=!(e instanceof MouseEvent),a,l;r instanceof HTMLElement?a=r:(a=document.createElement("div"),a.innerHTML=r),a.classList.add("tabulator-popup"),a.addEventListener("click",u=>{u.stopPropagation()}),o||e.preventDefault(),l=this.popup(a),typeof s=="function"&&l.renderCallback(s),e?l.show(e):l.show(i.getElement(),n||"center"),l.hideOnBlur(()=>{this.dispatchExternal("popupClosed",i.getComponent())}),this.dispatchExternal("popupOpened",i.getComponent())}}class WPe extends ft{static moduleName="print";constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,i,r){var s=window.scrollX,n=window.scrollY,o=document.createElement("div"),a=document.createElement("div"),l=this.table.modules.export.generateTable(typeof r<"u"?r:this.table.options.printConfig,typeof i<"u"?i:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),u,h;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(o.classList.add("tabulator-print-header"),u=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof u=="string"?o.innerHTML=u:o.appendChild(u),this.element.appendChild(o)),this.element.appendChild(l),this.table.options.printFooter&&(a.classList.add("tabulator-print-footer"),h=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof h=="string"?a.innerHTML=h:a.appendChild(h),this.element.appendChild(a)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,l),window.print(),this.cleanup(),window.scrollTo(s,n),this.manualBlock=!1}}class qPe extends ft{static moduleName="reactiveData";constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var i=this,r;this.currentVersion++,r=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),n;return!i.blocked&&r===i.currentVersion&&(i.block("data-push"),s.forEach(o=>{i.table.rowManager.addRowActual(o,!1)}),n=i.origFuncs.push.apply(e,arguments),i.unblock("data-push")),n}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),n;return!i.blocked&&r===i.currentVersion&&(i.block("data-unshift"),s.forEach(o=>{i.table.rowManager.addRowActual(o,!0)}),n=i.origFuncs.unshift.apply(e,arguments),i.unblock("data-unshift")),n}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var s,n;return!i.blocked&&r===i.currentVersion&&(i.block("data-shift"),i.data.length&&(s=i.table.rowManager.getRowFromDataObject(i.data[0]),s&&s.deleteActual()),n=i.origFuncs.shift.call(e),i.unblock("data-shift")),n}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var s,n;return!i.blocked&&r===i.currentVersion&&(i.block("data-pop"),i.data.length&&(s=i.table.rowManager.getRowFromDataObject(i.data[i.data.length-1]),s&&s.deleteActual()),n=i.origFuncs.pop.call(e),i.unblock("data-pop")),n}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),n=s[0]<0?e.length+s[0]:s[0],o=s[1],a=s[2]?s.slice(2):!1,l,u;if(!i.blocked&&r===i.currentVersion){if(i.block("data-splice"),a&&(l=e[n]?i.table.rowManager.getRowFromDataObject(e[n]):!1,l?a.forEach(p=>{i.table.rowManager.addRowActual(p,!0,l,!0)}):(a=a.slice().reverse(),a.forEach(p=>{i.table.rowManager.addRowActual(p,!0,!1,!0)}))),o!==0){var h=e.slice(n,typeof s[1]>"u"?s[1]:n+o);h.forEach((p,m)=>{var y=i.table.rowManager.getRowFromDataObject(p);y&&y.deleteActual(m!==h.length-1)})}(a||o!==0)&&i.table.rowManager.reRenderInPosition(),u=i.origFuncs.splice.apply(e,arguments),i.unblock("data-splice")}return u}})}unwatchData(){if(this.data!==!1)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var i=e.getData();for(var r in i)this.watchKey(e,i,r);this.table.options.dataTree&&this.watchTreeChildren(e)}watchTreeChildren(e){var i=this,r=e.getData()[this.table.options.dataTreeChildField],s={};r&&(s.push=r.push,Object.defineProperty(r,"push",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-push");var n=s.push.apply(r,arguments);this.rebuildTree(e),i.unblock("tree-push")}return n}}),s.unshift=r.unshift,Object.defineProperty(r,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-unshift");var n=s.unshift.apply(r,arguments);this.rebuildTree(e),i.unblock("tree-unshift")}return n}}),s.shift=r.shift,Object.defineProperty(r,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-shift");var n=s.shift.call(r);this.rebuildTree(e),i.unblock("tree-shift")}return n}}),s.pop=r.pop,Object.defineProperty(r,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-pop");var n=s.pop.call(r);this.rebuildTree(e),i.unblock("tree-pop")}return n}}),s.splice=r.splice,Object.defineProperty(r,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-splice");var n=s.splice.apply(r,arguments);this.rebuildTree(e),i.unblock("tree-splice")}return n}}))}rebuildTree(e){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(e,i,r){var s=this,n=Object.getOwnPropertyDescriptor(i,r),o=i[r],a=this.currentVersion;Object.defineProperty(i,r,{set:l=>{if(o=l,!s.blocked&&a===s.currentVersion){s.block("key");var u={};u[r]=l,e.updateData(u),s.unblock("key")}n.set&&n.set(l)},get:()=>(n.get&&n.get(),o)})}unwatchRow(e){var i=e.getData();for(var r in i)Object.defineProperty(i,r,{value:i[r]})}block(e){this.blocked||(this.blocked=e)}unblock(e){this.blocked===e&&(this.blocked=!1)}}class YPe extends ft{static moduleName="resizeColumns";constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(e){e.row.type==="row"&&(this.deInitializeComponent(e),this.initializeColumn("cell",e,e.column,e.element))}layoutColumnHeader(e){e.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(e),this.initializeColumn("header",e,e,e.element))}columnLayoutUpdated(e){var i=e.prevColumn();this.reinitializeColumn(e),i&&this.reinitializeColumn(i)}columnWidthUpdated(e){e.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(e)?this.table.modules.frozenColumns.leftColumns.forEach(i=>{this.reinitializeColumn(i)}):this.table.modules.frozenColumns.rightColumns.includes(e)&&this.table.modules.frozenColumns.rightColumns.forEach(i=>{this.reinitializeColumn(i)}))}frozenColumnOffset(e){var i=!1;return e.modules.frozen&&(i=e.modules.frozen.marginValue,e.modules.frozen.position==="left"?i+=e.getWidth()-3:i&&(i-=3)),i!==!1?i+"px":!1}reinitializeColumn(e){var i=this.frozenColumnOffset(e);e.cells.forEach(r=>{r.modules.resize&&r.modules.resize.handleEl&&(i&&(r.modules.resize.handleEl.style[e.modules.frozen.position]=i,r.modules.resize.handleEl.style["z-index"]=11),r.element.after(r.modules.resize.handleEl))}),e.modules.resize&&e.modules.resize.handleEl&&(i&&(e.modules.resize.handleEl.style[e.modules.frozen.position]=i),e.element.after(e.modules.resize.handleEl))}initializeColumn(e,i,r,s){var n=this,o=!1,a=r.definition.resizable,l={},u=r.getLastColumn();if(e==="header"&&(o=r.definition.formatter=="textarea"||r.definition.variableHeight,l={variableHeight:o}),(a===!0||a==e)&&this._checkResizability(u)){var h=document.createElement("span");h.className="tabulator-col-resize-handle",h.addEventListener("click",function(m){m.stopPropagation()});var p=function(m){n.startColumn=r,n.initialNextColumn=n.nextColumn=u.nextColumn(),n._mouseDown(m,u,h)};h.addEventListener("mousedown",p),h.addEventListener("touchstart",p,{passive:!0}),h.addEventListener("dblclick",m=>{var y=u.getWidth();m.stopPropagation(),u.reinitializeWidth(!0),y!==u.getWidth()&&(n.dispatch("column-resized",u),n.dispatchExternal("columnResized",u.getComponent()))}),r.modules.frozen&&(h.style.position="sticky",h.style[r.modules.frozen.position]=this.frozenColumnOffset(r)),l.handleEl=h,s.parentNode&&r.visible&&s.after(h)}i.modules.resize=l}deInitializeColumn(e){this.deInitializeComponent(e),e.cells.forEach(i=>{this.deInitializeComponent(i)})}deInitializeComponent(e){var i;e.modules.resize&&(i=e.modules.resize.handleEl,i&&i.parentElement&&i.parentElement.removeChild(i))}resizeHandle(e,i){e.modules.resize&&e.modules.resize.handleEl&&(e.modules.resize.handleEl.style.height=i)}resize(e,i){var r=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s=r-this.startX,n=r-this.latestX,o,a;if(this.latestX=r,this.table.rtl&&(s=-s,n=-n),o=i.width==i.minWidth||i.width==i.maxWidth,i.setWidth(this.startWidth+s),a=i.width==i.minWidth||i.width==i.maxWidth,n<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(o&&a)){let l=this.nextColumn.getWidth();n>0&&l<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-n)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&i.modules.resize&&i.modules.resize.variableHeight&&i.checkCellHeights()}calcGuidePosition(e,i,r){var s=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,n=r.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,o=this.table.element.getBoundingClientRect().x,a=i.element.getBoundingClientRect().left-o,l=s-this.startX,u=Math.max(n+l,a+i.minWidth);return i.maxWidth&&(u=Math.min(u,a+i.maxWidth)),u}_checkResizability(e){return e.definition.resizable}_mouseDown(e,i,r){var s=this,n;this.dispatchExternal("columnResizing",i.getComponent()),s.table.options.resizableColumnGuide&&(n=document.createElement("span"),n.classList.add("tabulator-col-resize-guide"),s.table.element.appendChild(n),setTimeout(()=>{n.style.left=s.calcGuidePosition(e,i,r)+"px"})),s.table.element.classList.add("tabulator-block-select");function o(l){s.table.options.resizableColumnGuide?n.style.left=s.calcGuidePosition(l,i,r)+"px":s.resize(l,i)}function a(l){s.table.options.resizableColumnGuide&&(s.resize(l,i),n.remove()),s.startColumn.modules.edit&&(s.startColumn.modules.edit.blocked=!1),s.table.browserSlow&&i.modules.resize&&i.modules.resize.variableHeight&&i.checkCellHeights(),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",o),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),s.table.element.classList.remove("tabulator-block-select"),s.startWidth!==i.getWidth()&&(s.table.columnManager.verticalAlignHeaders(),s.dispatch("column-resized",i),s.dispatchExternal("columnResized",i.getComponent()))}e.stopPropagation(),s.startColumn.modules.edit&&(s.startColumn.modules.edit.blocked=!0),s.startX=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s.latestX=s.startX,s.startWidth=i.getWidth(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",a),r.addEventListener("touchmove",o,{passive:!0}),r.addEventListener("touchend",a)}}class JPe extends ft{static moduleName="resizeRows";constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var i=this,r=e.getElement(),s=document.createElement("div");s.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev",s.addEventListener("click",function(l){l.stopPropagation()});var o=function(l){i.startRow=e,i._mouseDown(l,e,s)};s.addEventListener("mousedown",o),s.addEventListener("touchstart",o,{passive:!0}),n.addEventListener("click",function(l){l.stopPropagation()});var a=function(l){var u=i.table.rowManager.prevDisplayRow(e);u&&(i.startRow=u,i._mouseDown(l,u,n))};n.addEventListener("mousedown",a),n.addEventListener("touchstart",a,{passive:!0}),r.appendChild(s),r.appendChild(n)}resize(e,i){i.setHeight(this.startHeight+((typeof e.screenY>"u"?e.touches[0].screenY:e.screenY)-this.startY))}calcGuidePosition(e,i,r){var s=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,n=r.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,o=this.table.element.getBoundingClientRect().y,a=i.element.getBoundingClientRect().top-o,l=s-this.startY;return Math.max(n+l,a)}_mouseDown(e,i,r){var s=this,n;s.dispatchExternal("rowResizing",i.getComponent()),s.table.options.resizableRowGuide&&(n=document.createElement("span"),n.classList.add("tabulator-row-resize-guide"),s.table.element.appendChild(n),setTimeout(()=>{n.style.top=s.calcGuidePosition(e,i,r)+"px"})),s.table.element.classList.add("tabulator-block-select");function o(l){s.table.options.resizableRowGuide?n.style.top=s.calcGuidePosition(l,i,r)+"px":s.resize(l,i)}function a(l){s.table.options.resizableRowGuide&&(s.resize(l,i),n.remove()),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",o),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),s.table.element.classList.remove("tabulator-block-select"),s.dispatchExternal("rowResized",i.getComponent())}e.stopPropagation(),s.startY=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,s.startHeight=i.getHeight(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",a),r.addEventListener("touchmove",o,{passive:!0}),r.addEventListener("touchend",a)}}class ZPe extends ft{static moduleName="resizeTable";constructor(e){super(e),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e=this.table,i;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&e.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(r=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var s=Math.floor(r[0].contentRect.height),n=Math.floor(r[0].contentRect.width);(this.tableHeight!=s||this.tableWidth!=n)&&(this.tableHeight=s,this.tableWidth=n,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(e.element),i=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(i.getPropertyValue("max-height")||i.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(r=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var s=Math.floor(r[0].contentRect.height),n=Math.floor(r[0].contentRect.width);(this.containerHeight!=s||this.containerWidth!=n)&&(this.containerHeight=s,this.containerWidth=n,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell))&&(e.columnManager.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{this.visible=e[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(e){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(e))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}function XPe(t,e,i){var r=document.createElement("div"),s=t.getRow()._row.modules.responsiveLayout;r.classList.add("tabulator-responsive-collapse-toggle"),r.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,t.getElement().classList.add("tabulator-row-handle");function n(o){var a=s.element;s.open=o,a&&(s.open?(r.classList.add("open"),a.style.display=""):(r.classList.remove("open"),a.style.display="none"))}return r.addEventListener("click",function(o){o.stopImmediatePropagation(),n(!s.open),t.getTable().rowManager.adjustTableSize()}),n(s.open),r}var KPe={format:{formatters:{responsiveCollapse:XPe}}};class QPe extends ft{static moduleName="responsiveLayout";static moduleExtensions=KPe;constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((i,r)=>{i.modules.responsive&&i.modules.responsive.order&&i.modules.responsive.visible&&(i.modules.responsive.index=r,e.push(i),!i.visible&&this.mode==="collapse"&&this.hiddenColumns.push(i))}),e=e.reverse(),e=e.sort((i,r)=>{var s=r.modules.responsive.order-i.modules.responsive.order;return s||r.modules.responsive.index-i.modules.responsive.index}),this.columns=e,this.mode==="collapse"&&this.generateCollapsedContent();for(let i of this.table.columnManager.columnsByIndex)if(i.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=i;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var i=e.getDefinition();e.modules.responsive={order:typeof i.responsive>"u"?1:i.responsive,visible:i.visible!==!1}}initializeRow(e){var i;e.type!=="calc"&&(i=document.createElement("div"),i.classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:i,open:this.collapseStartOpen},this.collapseStartOpen||(i.style.display="none"))}layoutRow(e){var i=e.getElement();e.modules.responsiveLayout&&(i.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,i){!i&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initializeResponsivity())}hideColumn(e){var i=this.hiddenColumns.length;e.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!i&&this.collapseHandleColumn.show())}showColumn(e){var i;e.show(!1,!0),e.setWidth(e.getWidth()),this.mode==="collapse"&&(i=this.hiddenColumns.indexOf(e),i>-1&&this.hiddenColumns.splice(i,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=!0;e;){let i=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),r=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-i;if(r<0){let s=this.columns[this.index];s?(this.hideColumn(s),this.index++):e=!1}else{let s=this.columns[this.index-1];s&&r>0&&r>=s.getWidth()?(this.showColumn(s),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this.table.rowManager.getDisplayRows();e.forEach(i=>{this.generateCollapsedRowContent(i)})}generateCollapsedRowContent(e){var i,r;if(e.modules.responsiveLayout){for(i=e.modules.responsiveLayout.element;i.firstChild;)i.removeChild(i.firstChild);r=this.collapseFormatter(this.generateCollapsedRowData(e)),r&&i.appendChild(r),e.calcHeight(!0)}}generateCollapsedRowData(e){var i=e.getData(),r=[],s;return this.hiddenColumns.forEach(n=>{var o=n.getFieldValue(i);if(n.definition.title&&n.field)if(n.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let a=function(l){l()};s={value:!1,data:{},getValue:function(){return o},getData:function(){return i},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return n.getComponent()},getTable:()=>this.table},r.push({field:n.field,title:n.definition.title,value:n.modules.format.formatter.call(this.table.modules.format,s,n.modules.format.params,a)})}else r.push({field:n.field,title:n.definition.title,value:o})}),r}formatCollapsedData(e){var i=document.createElement("table");return e.forEach(r=>{var s=document.createElement("tr"),n=document.createElement("td"),o=document.createElement("td"),a,l=document.createElement("strong");n.appendChild(l),this.modules.localize.bind("columns|"+r.field,function(u){l.innerHTML=u||r.title}),r.value instanceof Node?(a=document.createElement("div"),a.appendChild(r.value),o.appendChild(a)):o.innerHTML=r.value,s.appendChild(n),s.appendChild(o),i.appendChild(s)}),Object.keys(e).length?i:""}}function eDe(t,e,i){var r=document.createElement("input"),s=!1;if(r.type="checkbox",r.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(r.addEventListener("click",o=>{o.stopPropagation()}),typeof t.getRow=="function"){var n=t.getRow();n instanceof XT?(r.addEventListener("change",o=>{this.table.options.selectableRowsRangeMode==="click"&&s?s=!1:n.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&r.addEventListener("click",o=>{s=!0,this.table.modules.selectRow.handleComplexRowClick(n._row,o)}),r.checked=n.isSelected&&n.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(n,r)):r=""}else r.addEventListener("change",o=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(e.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(r);return r}var tDe={format:{formatters:{rowSelection:eDe}}};class iDe extends ft{static moduleName="selectRow";static moduleExtensions=tDe;constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(i,r){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(e,i){return e==="selected"?this.selectedRows:i}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){var i=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],i&&e!==!0&&this._rowSelectionChanged()}initializeRow(e){var i=this,r=i.checkRowSelectability(e),s=e.getElement(),n=function(){setTimeout(function(){i.selecting=!1},50),document.body.removeEventListener("mouseup",n)};e.modules.select={selected:!1},s.classList.toggle("tabulator-selectable",r),s.classList.toggle("tabulator-unselectable",!r),i.checkRowSelectability(e)&&i.table.options.selectableRows&&i.table.options.selectableRows!="highlight"&&(i.table.options.selectableRowsRangeMode==="click"?s.addEventListener("click",this.handleComplexRowClick.bind(this,e)):(s.addEventListener("click",function(o){(!i.table.modExists("edit")||!i.table.modules.edit.getCurrentCell())&&i.table._clearSelection(),i.selecting||i.toggleRow(e)}),s.addEventListener("mousedown",function(o){if(o.shiftKey)return i.table._clearSelection(),i.selecting=!0,i.selectPrev=[],document.body.addEventListener("mouseup",n),document.body.addEventListener("keyup",n),i.toggleRow(e),!1}),s.addEventListener("mouseenter",function(o){i.selecting&&(i.table._clearSelection(),i.toggleRow(e),i.selectPrev[1]==e&&i.toggleRow(i.selectPrev[0]))}),s.addEventListener("mouseout",function(o){i.selecting&&(i.table._clearSelection(),i.selectPrev.unshift(e))})))}handleComplexRowClick(e,i){if(i.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||e;var r=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),s=this.table.rowManager.getDisplayRowIndex(e),n=r<=s?r:s,o=r>=s?r:s,a=this.table.rowManager.getDisplayRows().slice(0),l=a.splice(n,o-n+1);i.ctrlKey||i.metaKey?(l.forEach(u=>{u!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(e)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(u):this.toggleRow(u))}),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&l.length>this.table.options.selectableRows&&(l=l.slice(0,this.table.options.selectableRows)),this.selectRows(l)),this.table._clearSelection()}else i.ctrlKey||i.metaKey?(this.toggleRow(e),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.selectRows(e),this.lastClickedRow=e)}checkRowSelectability(e){return e&&e.type==="row"?this.table.options.selectableRowsCheck.call(this.table,e.getComponent()):!1}toggleRow(e){this.checkRowSelectability(e)&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var i=[],r,s;switch(typeof e){case"undefined":r=this.table.rowManager.rows;break;case"number":r=this.table.rowManager.findRow(e);break;case"string":r=this.table.rowManager.findRow(e),r||(r=this.table.rowManager.getRows(e));break;default:r=e;break}Array.isArray(r)?r.length&&(r.forEach(n=>{s=this._selectRow(n,!0,!0),s&&i.push(s)}),this._rowSelectionChanged(!1,i)):r&&this._selectRow(r,!1,!0)}_selectRow(e,i,r){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!r&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var s=this.table.rowManager.findRow(e);if(s){if(this.selectedRows.indexOf(s)==-1)return s.getElement().classList.add("tabulator-selected"),s.modules.select||(s.modules.select={}),s.modules.select.selected=!0,s.modules.select.checkboxEl&&(s.modules.select.checkboxEl.checked=!0),this.selectedRows.push(s),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(s,!0),this.dispatchExternal("rowSelected",s.getComponent()),this._rowSelectionChanged(i,s),s}else i||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return this.selectedRows.indexOf(e)!==-1}deselectRows(e,i){var r=[],s,n;switch(typeof e){case"undefined":s=Object.assign([],this.selectedRows);break;case"number":s=this.table.rowManager.findRow(e);break;case"string":s=this.table.rowManager.findRow(e),s||(s=this.table.rowManager.getRows(e));break;default:s=e;break}Array.isArray(s)?s.length&&(s.forEach(o=>{n=this._deselectRow(o,!0,!0),n&&r.push(n)}),this._rowSelectionChanged(i,[],r)):s&&this._deselectRow(s,i,!0)}_deselectRow(e,i){var r=this,s=r.table.rowManager.findRow(e),n,o;if(s){if(n=r.selectedRows.findIndex(function(a){return a==s}),n>-1)return o=s.getElement(),o&&o.classList.remove("tabulator-selected"),s.modules.select||(s.modules.select={}),s.modules.select.selected=!1,s.modules.select.checkboxEl&&(s.modules.select.checkboxEl.checked=!1),r.selectedRows.splice(n,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(s,!1),this.dispatchExternal("rowDeselected",s.getComponent()),r._rowSelectionChanged(i,void 0,s),s}else i||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(i){e.push(i.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(i){e.push(i.getComponent())}),e}_rowSelectionChanged(e,i=[],r=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||(Array.isArray(i)||(i=[i]),i=i.map(s=>s.getComponent()),Array.isArray(r)||(r=[r]),r=r.map(s=>s.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),i,r))}registerRowSelectCheckbox(e,i){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=i}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,i){var r=this.table.modules.dataTree.getChildren(e,!0,!0);if(i)for(let s of r)this._selectRow(s,!0);else for(let s of r)this._deselectRow(s,!0)}}class rDe{constructor(e){return this._range=e,new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._range.table.componentFunctionBinder.handle("range",i._range,r)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(e=>e.getComponent())}getColumns(){return this._range.getColumns().map(e=>e.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(e,i){this._range.destroyedGuard("setBounds")&&this._range.setBounds(e&&e._cell,i&&i._cell)}setStartBound(e){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}setEndBound(e){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}}class sDe extends Xr{constructor(e,i,r,s){super(e),this.rangeManager=i,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=e,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(r,s)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(e,i){this._updateMinMax(),e&&this.setBounds(e,i||e)}setStart(e,i){(this.start.row!==e||this.start.col!==i)&&(this.start.row=e,this.start.col=i,this.initializing.start=!0,this._updateMinMax())}setEnd(e,i){(this.end.row!==e||this.end.col!==i)&&(this.end.row=e,this.end.col=i,this.initializing.end=!0,this._updateMinMax())}setBounds(e,i,r){e&&this.setStartBound(e),this.setEndBound(i||e),this.rangeManager.layoutElement(r)}setStartBound(e){var i,r;e.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,e.getPosition()-1):(i=e.row.position-1,r=e.column.getPosition()-1,e.column===this.rangeManager.rowHeader?this.setStart(i,1):this.setStart(i,r))}setEndBound(e){var i=this._getTableRows().length,r,s,n;e.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(i-1,e.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,e.getPosition()-1)):(r=e.row.position-1,s=e.column.getPosition()-1,n=e.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(r,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&n?this.setEnd(r,0):this.rangeManager.selecting==="column"?this.setEnd(i-1,s):this.setEnd(r,s))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}layout(){var e=this.table.rowManager.renderer.vDomTop,i=this.table.rowManager.renderer.vDomBottom,r=this.table.columnManager.renderer.leftCol,s=this.table.columnManager.renderer.rightCol,n,o,a,l,u,h,p,m,y,v;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(s+=1),e==null&&(e=0),i==null&&(i=1/0),r==null&&(r=0),s==null&&(s=1/0),this.overlaps(r,e,s,i)&&(n=Math.max(this.top,e),o=Math.min(this.bottom,i),a=Math.max(this.left,r),l=Math.min(this.right,s),u=this.rangeManager.getCell(n,a),h=this.rangeManager.getCell(o,l),p=u.getElement(),m=h.getElement(),y=u.row.getElement(),v=h.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=y.offsetWidth-p.offsetLeft-p.offsetWidth+"px",this.element.style.width=p.offsetLeft+p.offsetWidth-m.offsetLeft+"px"):(this.element.style.left=y.offsetLeft+p.offsetLeft+"px",this.element.style.width=m.offsetLeft+m.offsetWidth-p.offsetLeft+"px"),this.element.style.top=y.offsetTop+"px",this.element.style.height=v.offsetTop+v.offsetHeight-y.offsetTop+"px")}atTopLeft(e){return e.row.position-1===this.top&&e.column.getPosition()-1===this.left}atBottomRight(e){return e.row.position-1===this.bottom&&e.column.getPosition()-1===this.right}occupies(e){return this.occupiesRow(e.row)&&this.occupiesColumn(e.column)}occupiesRow(e){return this.top<=e.position-1&&e.position-1<=this.bottom}occupiesColumn(e){return this.left<=e.getPosition()-1&&e.getPosition()-1<=this.right}overlaps(e,i,r,s){return!(this.left>r||e>this.right||this.top>s||i>this.bottom)}getData(){var e=[],i=this.getRows(),r=this.getColumns();return i.forEach(s=>{var n=s.getData(),o={};r.forEach(a=>{o[a.field]=n[a.field]}),e.push(o)}),e}getCells(e,i){var r=[],s=this.getRows(),n=this.getColumns();return e?r=s.map(o=>{var a=[];return o.getCells().forEach(l=>{n.includes(l.column)&&a.push(i?l.getComponent():l)}),a}):s.forEach(o=>{o.getCells().forEach(a=>{n.includes(a.column)&&r.push(i?a.getComponent():a)})}),r}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var e=this.getCells(),i=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),e.forEach(r=>{r.setValue(i)}),this.table.restoreRedraw()}getBounds(e){var i=this.getCells(!1,e),r={start:null,end:null};return i.length?(r.start=i[0],r.end=i[i.length-1]):console.warn("No bounds defined on range"),r}getComponent(){return this.component||(this.component=new rDe(this)),this.component}destroy(e){this.destroyed=!0,this.element.remove(),e&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(e){return this.destroyed&&console.warn("You cannot call the "+e+" function on a destroyed range"),!this.destroyed}}var nDe={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},oDe={rangeJumpLeft:function(t){this.dispatch("keybinding-nav-range",t,"left",!0,!1)},rangeJumpRight:function(t){this.dispatch("keybinding-nav-range",t,"right",!0,!1)},rangeJumpUp:function(t){this.dispatch("keybinding-nav-range",t,"up",!0,!1)},rangeJumpDown:function(t){this.dispatch("keybinding-nav-range",t,"down",!0,!1)},rangeExpandLeft:function(t){this.dispatch("keybinding-nav-range",t,"left",!1,!0)},rangeExpandRight:function(t){this.dispatch("keybinding-nav-range",t,"right",!1,!0)},rangeExpandUp:function(t){this.dispatch("keybinding-nav-range",t,"up",!1,!0)},rangeExpandDown:function(t){this.dispatch("keybinding-nav-range",t,"down",!1,!0)},rangeExpandJumpLeft:function(t){this.dispatch("keybinding-nav-range",t,"left",!0,!0)},rangeExpandJumpRight:function(t){this.dispatch("keybinding-nav-range",t,"right",!0,!0)},rangeExpandJumpUp:function(t){this.dispatch("keybinding-nav-range",t,"up",!0,!0)},rangeExpandJumpDown:function(t){this.dispatch("keybinding-nav-range",t,"down",!0,!0)}},aDe={range:function(t){var e=[],i=this.table.modules.selectRange.activeRange,r=!1,s,n,o,a,l;return l=t.length,i&&(s=i.getBounds(),n=s.start,s.start===s.end&&(r=!0),n&&(e=this.table.rowManager.activeRows.slice(),o=e.indexOf(n.row),r?a=t.length:a=e.indexOf(s.end.row)-o+1,o>-1&&(this.table.blockRedraw(),e=e.slice(o,o+a),e.forEach((u,h)=>{u.updateData(t[h%l])}),this.table.restoreRedraw()))),e}},lDe={range:function(t){var e=[],i=[],r=this.table.modules.selectRange.activeRange,s=!1,n,o,a,l,u;return r&&(n=r.getBounds(),o=n.start,n.start===n.end&&(s=!0),o&&(t=t.split(`
`),t.forEach(function(h){e.push(h.split("	"))}),e.length&&(l=this.table.columnManager.getVisibleColumnsByIndex(),u=l.indexOf(o.column),u>-1)))?(s?a=e[0].length:a=l.indexOf(n.end.column)-u+1,l=l.slice(u,u+a),e.forEach(h=>{var p={},m=h.length;l.forEach(function(y,v){p[y.field]=h[v%m]}),i.push(p)}),i):!1}},uDe={range:function(){var t=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&t.unshift(this.columnManager.rowHeader),t}},cDe={range:function(){return this.modules.selectRange.selectedRows()}},hDe={keybindings:{bindings:nDe,actions:oDe},clipboard:{pasteActions:aDe,pasteParsers:lDe},export:{columnLookups:uDe,rowLookups:cDe}};class dDe extends ft{static moduleName="selectRange";static moduleInitOrder=1;static moduleExtensions=hDe;constructor(e){super(e),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableOption("selectableRangeAutoFocus",!0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(e=>e.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(e=>e.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(e){this.columnSelection&&e.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),e.modules.edit}updateHeaderColumn(){var e;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(e=this.table.modules.frozenColumns.getFrozenColumns(),(e.length>1||e.length===1&&e[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(e=>e.getComponent())}getRangesData(){return this.ranges.map(e=>e.getData())}addRangeFromComponent(e,i){return e=e?e._cell:null,i=i?i._cell:null,this.addRange(e,i)}cellGetRanges(e){var i=[];return e.column===this.rowHeader?i=this.ranges.filter(r=>r.occupiesRow(e.row)):i=this.ranges.filter(r=>r.occupies(e)),i.map(r=>r.getComponent())}rowGetRanges(e){var i=this.ranges.filter(r=>r.occupiesRow(e));return i.map(r=>r.getComponent())}colGetRanges(e){var i=this.ranges.filter(r=>r.occupiesColumn(e));return i.map(r=>r.getComponent())}_handleMouseUp(e){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(e){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(e.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),e.preventDefault()}(e.key==="Backspace"||e.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(e){var i;this.restoreFocus();try{document.selection?(i=document.body.createTextRange(),i.moveToElementText(e.getElement()),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))}catch{}}restoreFocus(e){return this.table.rowManager.element.focus(),!0}handleColumnResized(e){var i;this.selecting!=="column"&&this.selecting!=="all"||(i=this.ranges.some(r=>r.occupiesColumn(e)),i&&this.ranges.forEach(r=>{var s=r.getColumns(!0);s.forEach(n=>{n!==e&&n.setWidth(e.width)})}))}handleColumnMoving(e,i){this.resetRanges().setBounds(i),this.overlay.style.visibility="hidden"}handleColumnMoved(e,i,r){this.activeRange.setBounds(e),this.layoutElement()}handleColumnMouseDown(e,i){e.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(i)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(i)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,i))}handleColumnMouseMove(e,i){i===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,i,!0)}renderCell(e){var i=e.getElement(),r=this.ranges.findIndex(s=>s.occupies(e));i.classList.toggle("tabulator-range-selected",r!==-1),i.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(e)&&this.ranges[0].atBottomRight(e)),i.dataset.range=r}handleCellMouseDown(e,i){e.button===2&&(this.activeRange.occupies(i)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(i.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,i))}handleCellMouseMove(e,i){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,i,!0)}handleCellClick(e,i){this.initializeFocus(i)}handleEditingCell(e){this.activeRange&&this.activeRange.setBounds(e)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(e,i){this.navigate(!1,!1,e),i.preventDefault()}keyNavigateRange(e,i,r,s){this.navigate(r,s,i),e.preventDefault()}navigate(e,i,r){var s=!1,n,o,a,l,u,h,p,m,y,v,w;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(S=>S===this.activeRange?(S.setEnd(S.start.row,S.start.col),!0):(S.destroy(),!1))),n=this.activeRange,a={top:n.top,bottom:n.bottom,left:n.left,right:n.right},o=i?n.end:n.start,l=o.row,u=o.col,e)switch(r){case"left":u=this.findJumpCellLeft(n.start.row,o.col);break;case"right":u=this.findJumpCellRight(n.start.row,o.col);break;case"up":l=this.findJumpCellUp(o.row,n.start.col);break;case"down":l=this.findJumpCellDown(o.row,n.start.col);break}else{if(i&&(this.selecting==="row"&&(r==="left"||r==="right")||this.selecting==="column"&&(r==="up"||r==="down")))return;switch(r){case"left":u=Math.max(u-1,0);break;case"right":u=Math.min(u+1,this.getTableColumns().length-1);break;case"up":l=Math.max(l-1,0);break;case"down":l=Math.min(l+1,this.getTableRows().length-1);break}}if(this.rowHeader&&u===0&&(u=1),i||n.setStart(l,u),n.setEnd(l,u),i||(this.selecting="cell"),s=a.top!==n.top||a.bottom!==n.bottom||a.left!==n.left||a.right!==n.right,s)return h=this.getRowByRangePos(n.end.row),p=this.getColumnByRangePos(n.end.col),m=h.getElement().getBoundingClientRect(),v=p.getElement().getBoundingClientRect(),y=this.table.rowManager.getElement().getBoundingClientRect(),w=this.table.columnManager.getElement().getBoundingClientRect(),m.top>=y.top&&m.bottom<=y.bottom||(h.getElement().parentNode&&p.getElement().parentNode?this.autoScroll(n,h.getElement(),p.getElement()):h.getComponent().scrollTo(void 0,!1)),v.left>=w.left+this.getRowHeaderWidth()&&v.right<=w.right||(h.getElement().parentNode&&p.getElement().parentNode?this.autoScroll(n,h.getElement(),p.getElement()):p.getComponent().scrollTo(void 0,!1)),this.layoutElement(),!0}rangeRemoved(e){this.ranges=this.ranges.filter(i=>i!==e),this.activeRange===e&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(e,i,r,s,n){return r&&(i=i.reverse()),this.findJumpItem(s,n,i,function(o){return o.getData()[e.getField()]})}findJumpCol(e,i,r,s,n){return r&&(i=i.reverse()),this.findJumpItem(s,n,i,function(o){return e.getData()[o.getField()]})}findJumpItem(e,i,r,s){var n;for(let o of r){let a=s(o);if(e){if(n=o,a)break}else if(i){if(n=o,a)break}else if(a)n=o;else break}return n}findJumpCellLeft(e,i){var r=this.getRowByRangePos(e),s=this.getTableColumns(),n=this.isEmpty(r.getData()[s[i].getField()]),o=s[i-1]?this.isEmpty(r.getData()[s[i-1].getField()]):!1,a=this.rowHeader?s.slice(1,i):s.slice(0,i),l=this.findJumpCol(r,a,!0,n,o);return l?l.getPosition()-1:i}findJumpCellRight(e,i){var r=this.getRowByRangePos(e),s=this.getTableColumns(),n=this.isEmpty(r.getData()[s[i].getField()]),o=s[i+1]?this.isEmpty(r.getData()[s[i+1].getField()]):!1,a=this.findJumpCol(r,s.slice(i+1,s.length),!1,n,o);return a?a.getPosition()-1:i}findJumpCellUp(e,i){var r=this.getColumnByRangePos(i),s=this.getTableRows(),n=this.isEmpty(s[e].getData()[r.getField()]),o=s[e-1]?this.isEmpty(s[e-1].getData()[r.getField()]):!1,a=this.findJumpRow(r,s.slice(0,e),!0,n,o);return a?a.position-1:e}findJumpCellDown(e,i){var r=this.getColumnByRangePos(i),s=this.getTableRows(),n=this.isEmpty(s[e].getData()[r.getField()]),o=s[e+1]?this.isEmpty(s[e+1].getData()[r.getField()]):!1,a=this.findJumpRow(r,s.slice(e+1,s.length),!1,n,o);return a?a.position-1:e}newSelection(e,i){var r;if(i.type==="column"){if(!this.columnSelection)return;if(i===this.rowHeader){r=this.resetRanges(),this.selecting="all";var s,n=this.getCell(-1,-1);this.rowHeader?s=this.getCell(0,1):s=this.getCell(0,0),r.setBounds(s,n);return}else this.selecting="column"}else i.column===this.rowHeader?this.selecting="row":this.selecting="cell";e.shiftKey?this.activeRange.setBounds(!1,i):e.ctrlKey?this.addRange().setBounds(i):this.resetRanges().setBounds(i)}autoScroll(e,i,r){var s=this.table.rowManager.element,n,o,a,l;typeof i>"u"&&(i=this.getRowByRangePos(e.end.row).getElement()),typeof r>"u"&&(r=this.getColumnByRangePos(e.end.col).getElement()),n={left:r.offsetLeft,right:r.offsetLeft+r.offsetWidth,top:i.offsetTop,bottom:i.offsetTop+i.offsetHeight},o={left:s.scrollLeft+this.getRowHeaderWidth(),right:Math.ceil(s.scrollLeft+s.clientWidth),top:s.scrollTop,bottom:s.scrollTop+s.offsetHeight-this.table.rowManager.scrollbarWidth},a=o.left<n.left&&n.left<o.right&&o.left<n.right&&n.right<o.right,l=o.top<n.top&&n.top<o.bottom&&o.top<n.bottom&&n.bottom<o.bottom,a||(n.left<o.left?s.scrollLeft=n.left-this.getRowHeaderWidth():n.right>o.right&&(s.scrollLeft=Math.min(n.right-s.clientWidth,n.left-this.getRowHeaderWidth()))),l||(n.top<o.top?s.scrollTop=n.top:n.bottom>o.bottom&&(s.scrollTop=n.bottom-s.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(e){e&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(e){var i;e?i=this.table.rowManager.getVisibleRows(!0):i=this.table.rowManager.getRows(),i.forEach(r=>{r.type==="row"&&(this.layoutRow(r),r.cells.forEach(s=>this.renderCell(s)))}),this.getTableColumns().forEach(r=>{this.layoutColumn(r)}),this.layoutRanges()}layoutRow(e){var i=e.getElement(),r=!1,s=this.ranges.some(n=>n.occupiesRow(e));this.selecting==="row"?r=s:this.selecting==="all"&&(r=!0),i.classList.toggle("tabulator-range-selected",r),i.classList.toggle("tabulator-range-highlight",s)}layoutColumn(e){var i=e.getElement(),r=!1,s=this.ranges.some(n=>n.occupiesColumn(e));this.selecting==="column"?r=s:this.selecting==="all"&&(r=!0),i.classList.toggle("tabulator-range-selected",r),i.classList.toggle("tabulator-range-highlight",s)}layoutRanges(){var e,i,r;this.table.initialized&&(e=this.getActiveCell(),e&&(i=e.getElement(),r=e.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=r.offsetWidth-i.offsetLeft-i.offsetWidth+"px":this.activeRangeCellElement.style.left=r.offsetLeft+i.offsetLeft+"px",this.activeRangeCellElement.style.top=r.offsetTop+"px",this.activeRangeCellElement.style.width=i.offsetWidth+"px",this.activeRangeCellElement.style.height=r.offsetHeight+"px",this.ranges.forEach(s=>s.layout()),this.overlay.style.visibility="visible"))}getCell(e,i){var r;return i<0&&(i=this.getTableColumns().length+i,i<0)?null:(e<0&&(e=this.getTableRows().length+e),r=this.table.rowManager.getRowFromPosition(e+1),r?r.getCells(!1,!0).filter(s=>s.column.visible)[i]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(e){return this.getTableRows()[e]}getColumnByRangePos(e){return this.getTableColumns()[e]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(e,i){var r;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),r=new sDe(this.table,this,e,i),this.activeRange=r,this.ranges.push(r),this.rangeContainer.appendChild(r.element),r}resetRanges(){var e,i,r;return this.ranges.forEach(s=>s.destroy()),this.ranges=[],e=this.addRange(),this.table.rowManager.activeRows.length&&(r=this.table.rowManager.activeRows[0].cells.filter(s=>s.column.visible),i=r[this.rowHeader?1:0],i&&(e.setBounds(i),this.options("selectableRangeAutoFocus")&&this.initializeFocus(i))),e}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(e){return e?this.activeRange.getRows().map(i=>i.getComponent()):this.activeRange.getRows()}selectedColumns(e){return e?this.activeRange.getColumns().map(i=>i.getComponent()):this.activeRange.getColumns()}getRowHeaderWidth(){return this.rowHeader?this.rowHeader.getElement().offsetWidth:0}isEmpty(e){return e==null||e===""}}function pDe(t,e,i,r,s,n,o){var a=o.alignEmptyValues,l=o.decimalSeparator,u=o.thousandSeparator,h=0;if(t=String(t),e=String(e),u&&(t=t.split(u).join(""),e=e.split(u).join("")),l&&(t=t.split(l).join("."),e=e.split(l).join(".")),t=parseFloat(t),e=parseFloat(e),isNaN(t))h=isNaN(e)?0:-1;else if(isNaN(e))h=1;else return t-e;return(a==="top"&&n==="desc"||a==="bottom"&&n==="asc")&&(h*=-1),h}function fDe(t,e,i,r,s,n,o){var a=o.alignEmptyValues,l=0,u;if(!t)l=e?-1:0;else if(!e)l=1;else{switch(typeof o.locale){case"boolean":o.locale&&(u=this.langLocale());break;case"string":u=o.locale;break}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),u)}return(a==="top"&&n==="desc"||a==="bottom"&&n==="asc")&&(l*=-1),l}function w3(t,e,i,r,s,n,o){var a=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),l=o.format||"dd/MM/yyyy HH:mm:ss",u=o.alignEmptyValues,h=0;if(typeof a<"u"){if(a.isDateTime(t)||(l==="iso"?t=a.fromISO(String(t)):t=a.fromFormat(String(t),l)),a.isDateTime(e)||(l==="iso"?e=a.fromISO(String(e)):e=a.fromFormat(String(e),l)),!t.isValid)h=e.isValid?-1:0;else if(!e.isValid)h=1;else return t-e;return(u==="top"&&n==="desc"||u==="bottom"&&n==="asc")&&(h*=-1),h}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function mDe(t,e,i,r,s,n,o){return o.format||(o.format="dd/MM/yyyy"),w3.call(this,t,e,i,r,s,n,o)}function gDe(t,e,i,r,s,n,o){return o.format||(o.format="HH:mm"),w3.call(this,t,e,i,r,s,n,o)}function yDe(t,e,i,r,s,n,o){var a=t===!0||t==="true"||t==="True"||t===1?1:0,l=e===!0||e==="true"||e==="True"||e===1?1:0;return a-l}function bDe(t,e,i,r,s,n,o){var a=o.type||"length",l=o.alignEmptyValues,u=0,h=this.table,p;o.valueMap&&(typeof o.valueMap=="string"?p=function(y){return y.map(v=>ti.retrieveNestedData(h.options.nestedFieldSeparator,o.valueMap,v))}:p=o.valueMap);function m(y){var v;switch(p&&(y=p(y)),a){case"length":v=y.length;break;case"sum":v=y.reduce(function(w,S){return w+S});break;case"max":v=Math.max.apply(null,y);break;case"min":v=Math.min.apply(null,y);break;case"avg":v=y.reduce(function(w,S){return w+S})/y.length;break;case"string":v=y.join("");break}return v}if(!Array.isArray(t))u=Array.isArray(e)?-1:0;else if(!Array.isArray(e))u=1;else return a==="string"?String(m(t)).toLowerCase().localeCompare(String(m(e)).toLowerCase()):m(e)-m(t);return(l==="top"&&n==="desc"||l==="bottom"&&n==="asc")&&(u*=-1),u}function vDe(t,e,i,r,s,n,o){var a=typeof t>"u"?0:1,l=typeof e>"u"?0:1;return a-l}function wDe(t,e,i,r,s,n,o){var a,l,u,h,p=0,m,y=/(\d+)|(\D+)/g,v=/\d/,w=o.alignEmptyValues,S=0;if(!t&&t!==0)S=!e&&e!==0?0:-1;else if(!e&&e!==0)S=1;else{if(isFinite(t)&&isFinite(e))return t-e;if(a=String(t).toLowerCase(),l=String(e).toLowerCase(),a===l)return 0;if(!(v.test(a)&&v.test(l)))return a>l?1:-1;for(a=a.match(y),l=l.match(y),m=a.length>l.length?l.length:a.length;p<m;)if(u=a[p],h=l[p++],u!==h)return isFinite(u)&&isFinite(h)?(u.charAt(0)==="0"&&(u="."+u),h.charAt(0)==="0"&&(h="."+h),u-h):u>h?1:-1;return a.length>l.length}return(w==="top"&&n==="desc"||w==="bottom"&&n==="asc")&&(S*=-1),S}var _De={number:pDe,string:fDe,date:mDe,time:gDe,datetime:w3,boolean:yDe,array:bDe,exists:vDe,alphanum:wDe};class Y0 extends ft{static moduleName="sort";static sorters=_De;constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,i,r,s){var n=this.getSort();return n.forEach(o=>{delete o.column}),s.sort=n,s}userSetSort(e,i){this.setSort(e,i),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var i=!1,r,s;switch(typeof e.definition.sorter){case"string":Y0.sorters[e.definition.sorter]?i=Y0.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":i=e.definition.sorter;break}if(e.modules.sort={sorter:i,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},e.definition.headerSort!==!1){switch(r=e.getElement(),r.classList.add("tabulator-sortable"),s=document.createElement("div"),s.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":s.classList.add("tabulator-col-sorter-element");break;case"header":r.classList.add("tabulator-col-sorter-element");break;default:r.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":s.appendChild(this.table.options.headerSortElement);break;default:s.innerHTML=this.table.options.headerSortElement}e.titleHolderElement.appendChild(s),e.modules.sort.element=s,this.setColumnHeaderSortIcon(e,"none"),this.table.options.headerSortClickElement==="icon"&&s.addEventListener("mousedown",n=>{n.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?s:r).addEventListener("click",n=>{var o="",a=[],l=!1;if(e.modules.sort){if(e.modules.sort.tristate)e.modules.sort.dir=="none"?o=e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?o=e.modules.sort.dir=="asc"?"desc":"asc":o="none";else switch(e.modules.sort.dir){case"asc":o="desc";break;case"desc":o="asc";break;default:o=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(n.shiftKey||n.ctrlKey)?(a=this.getSort(),l=a.findIndex(u=>u.field===e.getField()),l>-1?(a[l].dir=o,l=a.splice(l,1)[0],o!="none"&&a.push(l)):o!="none"&&a.push({column:e,dir:o}),this.setSort(a)):o=="none"?this.clear():this.setSort(e,o),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=this,i=[];return e.sortList.forEach(function(r){r.column&&i.push({column:r.column.getComponent(),field:r.column.getField(),dir:r.dir})}),i}setSort(e,i){var r=this,s=[];Array.isArray(e)||(e=[{column:e,dir:i}]),e.forEach(function(n){var o;o=r.table.columnManager.findColumn(n.column),o?(n.column=o,s.push(n),r.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",n.column)}),r.sortList=s,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var i=this.table.rowManager.activeRows[0],r="string",s,n;if(i&&(i=i.getData(),s=e.getField(),s))switch(n=e.getFieldValue(i),typeof n){case"undefined":r="string";break;case"boolean":r="boolean";break;default:!isNaN(n)&&n!==""?r="number":n.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(r="alphanum");break}return Y0.sorters[r]}sort(e,i){var r=this,s=this.table.options.sortOrderReverse?r.sortList.slice().reverse():r.sortList,n=[],o=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",r.getSort()),i||r.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(s.forEach(function(a,l){var u;a.column&&(u=a.column.modules.sort,u&&(u.sorter||(u.sorter=r.findSorter(a.column)),a.params=typeof u.params=="function"?u.params(a.column.getComponent(),a.dir):u.params,n.push(a)),i||r.setColumnHeader(a.column,a.dir))}),n.length&&r._sortItems(e,n)):i||s.forEach(function(a,l){r.setColumnHeader(a.column,a.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(a=>{o.push(a.getComponent())}),this.dispatchExternal("dataSorted",r.getSort(),o)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(e=>{e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(e,"none"))})}setColumnHeader(e,i){e.modules.sort.dir=i,e.getElement().setAttribute("aria-sort",i==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(e,i)}setColumnHeaderSortIcon(e,i){var r=e.modules.sort.element,s;if(e.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;r.firstChild;)r.removeChild(r.firstChild);s=this.table.options.headerSortElement.call(this.table,e.getComponent(),i),typeof s=="object"?r.appendChild(s):r.innerHTML=s}}_sortItems(e,i){var r=i.length-1;e.sort((s,n)=>{for(var o,a=r;a>=0;a--){let l=i[a];if(o=this._sortRow(s,n,l.column,l.dir,l.params),o!==0)break}return o})}_sortRow(e,i,r,s,n){var o,a,l=s=="asc"?e:i,u=s=="asc"?i:e;return e=r.getFieldValue(l.getData()),i=r.getFieldValue(u.getData()),e=typeof e<"u"?e:"",i=typeof i<"u"?i:"",o=l.getComponent(),a=u.getComponent(),r.modules.sort.sorter.call(this,e,i,o,a,r.getComponent(),s,n)}}class xDe{constructor(e,i){this.columnCount=e,this.rowCount=i,this.columnString=[],this.columns=[],this.rows=[]}genColumns(e){var i=Math.max(this.columnCount,Math.max(...e.map(r=>r.length)));this.columnString=[],this.columns=[];for(let r=1;r<=i;r++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(e){var i=Math.max(this.rowCount,e.length);this.rows=[];for(let r=1;r<=i;r++)this.rows.push(r);return this.rows}incrementChar(e){let i=this.columnString[e];i?i!=="Z"?this.columnString[e]=String.fromCharCode(this.columnString[e].charCodeAt(0)+1):(this.columnString[e]="A",e?this.incrementChar(e-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(e){this.rowCount=e}setColumnCount(e){this.columnCount=e}}class $Q{constructor(e){return this._sheet=e,new Proxy(this,{get:function(i,r,s){return typeof i[r]<"u"?i[r]:i._sheet.table.componentFunctionBinder.handle("sheet",i._sheet,r)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(e){return this._sheet.setData(e)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(e){return this._sheet.setTitle(e)}setRows(e){return this._sheet.setRows(e)}setColumns(e){return this._sheet.setColumns(e)}}class WU extends Xr{constructor(e,i){super(e.table),this.spreadsheetManager=e,this.definition=i,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new xDe(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(e=>{var i=Object.assign({},this.columnDefinition);i.field=e,i.title=e,this.columnDefs.push(i)})}initializeRows(){var e;this.grid.setRowCount(this.rowCount),e=this.grid.genRows(this.data),this.rowDefs=[],e.forEach((i,r)=>{var s={_id:i},n=this.data[r];n&&n.forEach((o,a)=>{var l=this.columnFields[a];l&&(s[l]=o)}),this.rowDefs.push(s)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var e=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),e&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new $Q(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(e){var i=[],r,s,n;return this.rowDefs.forEach(o=>{var a=[];this.columnFields.forEach(l=>{a.push(o[l])}),i.push(a)}),!e&&!this.options("spreadsheetOutputFull")&&(r=i.map(o=>o.findLastIndex(a=>typeof a<"u")+1),s=Math.max(...r),n=r.findLastIndex(o=>o>0)+1,i=i.slice(0,n),i=i.map(o=>o.slice(0,s))),i}setData(e){this.data=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(e){this.title=e,this.element.innerText=e,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(e){this.rowCount=e,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(e){this.columnCount=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}}class SDe extends ft{static moduleName="spreadsheet";constructor(e){super(e),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var e=this.options("spreadsheetSheetTabsElement");e&&!(e instanceof HTMLElement)&&(e=document.querySelector(e),e||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),e?e.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(e,i,r){return console.log("data",e,i,r),Array.isArray(e)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",e),!e.length||Array.isArray(e[0])?this.loadData(e):this.loadSheets(e)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e),!1}loadData(e){var i={data:e};this.loadSheet(this.newSheet(i))}destroySheets(){this.sheets.forEach(e=>{e.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(e){Array.isArray(e)||(e=[]),this.destroySheets(),e.forEach(i=>{this.newSheet(i)}),this.loadSheet(this.sheets[0])}loadSheet(e){this.activeSheet!==e&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=e,e.load())}newSheet(e={}){var i;return e.rows||(e.rows=this.options("spreadsheetRows")),e.columns||(e.columns=this.options("spreadsheetColumns")),i=new WU(this,e),this.sheets.push(i),this.element&&this.element.appendChild(i.element),i}removeSheet(e){var i=this.sheets.indexOf(e),r;this.sheets.length>1?i>-1&&(this.sheets.splice(i,1),e.destroy(),this.activeSheet===e&&(r=this.sheets[i-1]||this.sheets[0],r?this.loadSheet(r):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(e){return e?e instanceof WU?e:e instanceof $Q?e._sheet:this.sheets.find(i=>i.key===e)||!1:this.activeSheet}setSheets(e){return this.loadSheets(e),this.getSheets()}addSheet(e){return this.newSheet(e).getComponent()}getSheetDefinitions(){return this.sheets.map(e=>e.getDefinition())}getSheets(){return this.sheets.map(e=>e.getComponent())}getSheet(e){var i=this.lookupSheet(e);return i?i.getComponent():!1}setSheetData(e,i){e&&!i&&(i=e,e=!1);var r=this.lookupSheet(e);return r?r.setData(i):!1}getSheetData(e){var i=this.lookupSheet(e);return i?i.getData():!1}clearSheet(e){var i=this.lookupSheet(e);return i?i.clear():!1}removeSheetFunc(e){var i=this.lookupSheet(e);i&&this.removeSheet(i)}activeSheetFunc(e){var i=this.lookupSheet(e);return i?this.loadSheet(i):!1}}let EDe=class extends ft{static moduleName="tooltip";constructor(e){super(e),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(e){e.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),e.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(e,i,r){var s=e==="tooltip"?r.column.definition.tooltip:r.definition.headerTooltip;s&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,i,r,s),this.table.options.tooltipDelay))}mouseoutCheck(e,i,r){this.popupInstance||this.clearPopup()}clearPopup(e,i,r){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(e,i,r){var s,n,o;function a(l){n=l}typeof r=="function"&&(r=r(e,i.getComponent(),a)),r instanceof HTMLElement?s=r:(s=document.createElement("div"),r===!0&&(i instanceof y1?r=i.value:i.definition.field?this.langBind("columns|"+i.definition.field,l=>{s.innerHTML=r=l||i.definition.title}):r=i.definition.title),s.innerHTML=r),(r||r===0||r===!1)&&(s.classList.add("tabulator-tooltip"),s.addEventListener("mousemove",l=>l.preventDefault()),this.popupInstance=this.popup(s),typeof n=="function"&&this.popupInstance.renderCallback(n),o=this.popupInstance.containerEventCoords(e),this.popupInstance.show(o.x+15,o.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",i.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",i.getComponent()))}};var CDe={integer:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&Math.floor(e)===e)},float:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&e%1!==0)},numeric:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:!isNaN(e)},string:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:isNaN(e)},alphanumeric:function(t,e,i){if(e===""||e===null||typeof e>"u")return!0;var r=new RegExp(/^[a-z0-9]+$/i);return r.test(e)},max:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)<=i},min:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)>=i},starts:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().startsWith(String(i).toLowerCase())},ends:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().endsWith(String(i).toLowerCase())},minLength:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).length>=i},maxLength:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).length<=i},in:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:(typeof i=="string"&&(i=i.split("|")),i.indexOf(e)>-1)},regex:function(t,e,i){if(e===""||e===null||typeof e>"u")return!0;var r=new RegExp(i);return r.test(e)},unique:function(t,e,i){if(e===""||e===null||typeof e>"u")return!0;var r=!0,s=t.getData(),n=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(o){var a=o.getData();a!==s&&e==n.getFieldValue(a)&&(r=!1)}),r},required:function(t,e,i){return e!==""&&e!==null&&typeof e<"u"}};class _3 extends ft{static moduleName="validate";static validators=CDe;constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(e,i,r){var s=this.table.options.validationMode!=="manual"?this.validate(e.column.modules.validate,e,i):!0;return s!==!0&&setTimeout(()=>{e.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",e.getComponent(),i,s)}),s}editorClear(e,i){i&&e.column.modules.validate&&this.cellValidate(e),e.getElement().classList.remove("tabulator-validation-fail")}editedClear(e){e.modules.validate&&(e.modules.validate.invalid=!1)}cellIsValid(e){return e.modules.validate&&e.modules.validate.invalid||!0}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var i=[];return e.cells.forEach(r=>{this.cellValidate(r)!==!0&&i.push(r.getComponent())}),i.length?i:!0}rowValidate(e){var i=[];return e.cells.forEach(r=>{this.cellValidate(r)!==!0&&i.push(r.getComponent())}),i.length?i:!0}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(i=>{this.clearValidation(i._getSelf())})}userValidate(e){var i=[];return this.table.rowManager.rows.forEach(r=>{r=r.getComponent();var s=r.validate();s!==!0&&(i=i.concat(s))}),i.length?i:!0}initializeColumnCheck(e){typeof e.definition.validator<"u"&&this.initializeColumn(e)}initializeColumn(e){var i=this,r=[],s;e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(n=>{s=i._extractValidator(n),s&&r.push(s)}):(s=this._extractValidator(e.definition.validator),s&&r.push(s)),e.modules.validate=r.length?r:!1)}_extractValidator(e){var i,r,s;switch(typeof e){case"string":return s=e.indexOf(":"),s>-1?(i=e.substring(0,s),r=e.substring(s+1)):i=e,this._buildValidator(i,r);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,i){var r=typeof e=="function"?e:_3.validators[e];return r?{type:typeof e=="function"?"function":e,func:r,params:i}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,i,r){var s=this,n=[],o=this.invalidCells.indexOf(i);return e&&e.forEach(a=>{a.func.call(s,i.getComponent(),r,a.params)||n.push({type:a.type,parameters:a.params})}),i.modules.validate||(i.modules.validate={}),n.length?(i.modules.validate.invalid=n,this.table.options.validationMode!=="manual"&&i.getElement().classList.add("tabulator-validation-fail"),o==-1&&this.invalidCells.push(i)):(i.modules.validate.invalid=!1,i.getElement().classList.remove("tabulator-validation-fail"),o>-1&&this.invalidCells.splice(o,1)),n.length?n:!0}getInvalidCells(){var e=[];return this.invalidCells.forEach(i=>{e.push(i.getComponent())}),e}clearValidation(e){var i;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,i=this.invalidCells.indexOf(e),i>-1&&this.invalidCells.splice(i,1))}}var mk=Object.freeze({__proto__:null,AccessorModule:yC,AjaxModule:dg,ClipboardModule:bC,ColumnCalcsModule:pg,DataTreeModule:SOe,DownloadModule:vC,EditModule:y3,ExportModule:W0,FilterModule:mp,FormatModule:fg,FrozenColumnsModule:yPe,FrozenRowsModule:bPe,GroupRowsModule:wPe,HistoryModule:wC,HtmlTableImportModule:TPe,ImportModule:b3,InteractionModule:APe,KeybindingsModule:q0,MenuModule:DPe,MoveColumnsModule:LPe,MoveRowsModule:_C,MutatorModule:xC,PageModule:v3,PersistenceModule:ul,PopupModule:GPe,PrintModule:WPe,ReactiveDataModule:qPe,ResizeColumnsModule:YPe,ResizeRowsModule:JPe,ResizeTableModule:ZPe,ResponsiveLayoutModule:QPe,SelectRangeModule:dDe,SelectRowModule:iDe,SortModule:Y0,SpreadsheetModule:SDe,TooltipModule:EDe,ValidateModule:_3}),TDe={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{},dependencies:{}};class AQ{constructor(e,i,r={}){this.table=e,this.msgType=i,this.registeredDefaults=Object.assign({},r)}register(e,i){this.registeredDefaults[e]=i}generate(e,i={}){var r=Object.assign({},this.registeredDefaults),s=this.table.options.debugInvalidOptions||i.debugInvalidOptions===!0;Object.assign(r,e);for(let n in i)r.hasOwnProperty(n)||(s&&console.warn("Invalid "+this.msgType+" option:",n),r[n]=i.key);for(let n in r)n in i?r[n]=i[n]:Array.isArray(r[n])?r[n]=Object.assign([],r[n]):typeof r[n]=="object"&&r[n]!==null?r[n]=Object.assign({},r[n]):typeof r[n]>"u"&&delete r[n];return r}}class QT extends Xr{constructor(e){super(e),this.elementVertical=e.rowManager.element,this.elementHorizontal=e.columnManager.element,this.tableElement=e.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(e){}renderRows(){}renderColumns(){}rerenderRows(e){e&&e()}rerenderColumns(e,i){}renderRowCells(e){}rerenderRowCells(e,i){}scrollColumns(e,i){}scrollRows(e,i){}resize(){}scrollToRow(e){}scrollToRowNearestTop(e){}visibleRows(e){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(e,i){var r=e.getElement();i%2?(r.classList.add("tabulator-row-even"),r.classList.remove("tabulator-row-odd")):(r.classList.add("tabulator-row-odd"),r.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(e){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(e,i,r){var s=this.rows().indexOf(e),n=e.getElement(),o=0;return new Promise((a,l)=>{if(s>-1){if(typeof r>"u"&&(r=this.table.options.scrollToRowIfVisible),!r&&ti.elVisible(n)&&(o=ti.elOffset(n).top-ti.elOffset(this.elementVertical).top,o>0&&o<this.elementVertical.clientHeight-n.offsetHeight))return a(),!1;switch(typeof i>"u"&&(i=this.table.options.scrollToRowPosition),i==="nearest"&&(i=this.scrollToRowNearestTop(e)?"top":"bottom"),this.scrollToRow(e),i){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(n.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-n.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-n.offsetTop)+n.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+n.offsetHeight;break;case"top":this.elementVertical.scrollTop=n.offsetTop;break}a()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})}}class MDe extends QT{constructor(e){super(e)}renderRowCells(e,i){const r=document.createDocumentFragment();e.cells.forEach(s=>{r.appendChild(s.getElement())}),e.element.appendChild(r),i||e.cells.forEach(s=>{s.cellRendered()})}reinitializeColumnWidths(e){e.forEach(function(i){i.reinitializeWidth()})}}class kDe extends QT{constructor(e){super(e),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(e,i){this.dataChange()}scrollColumns(e,i){this.scrollLeft!=e&&(this.scrollLeft=e,this.scroll(e-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var e=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(i=>{if(i.visible){var r=i.getWidth();r>e&&(e=r)}}),this.windowBuffer=e*2}rerenderColumns(e,i){var r={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},s=0;e&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(n=>{var o={},a;n.visible&&(n.modules.frozen||(a=n.getWidth(),o.leftPos=s,o.rightPos=s+a,o.width=a,this.isFitData&&(o.fitDataCheck=n.modules.vdomHoz?n.modules.vdomHoz.fitDataCheck:!0),s+a>this.vDomScrollPosLeft&&s<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=s),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=a),this.columns.push(n),n.modules.vdomHoz=o,s+=a))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,i||(!e||this.reinitChanged(r))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(e){if(this.initialized)this.initializeRow(e);else{const i=document.createDocumentFragment();e.cells.forEach(r=>{i.appendChild(r.getElement())}),e.element.appendChild(i),e.cells.forEach(r=>{r.cellRendered()})}}rerenderRowCells(e,i){this.reinitializeRow(e,i)}reinitializeColumnWidths(e){for(let i=this.leftCol;i<=this.rightCol;i++){let r=this.columns[i];r&&r.reinitializeWidth()}}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var e=!1,i,r;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(s=>{!s.definition.width&&s.visible&&(e=!0)}),e&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,i=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],i)){r=i.getElement(),i.generateCells(),this.tableElement.appendChild(r);for(let s=0;s<i.cells.length;s++){let n=i.cells[s];r.appendChild(n.getElement()),n.column.reinitializeWidth()}r.parentNode.removeChild(r),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(e){var i=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol?!0:(e.cols.forEach((r,s)=>{r!==this.columns[s]&&(i=!1)}),!i)}reinitializeRows(){var e=this.getVisibleRows(),i=this.table.rowManager.getRows().filter(r=>!e.includes(r));e.forEach(r=>{this.reinitializeRow(r,!0)}),i.forEach(r=>{r.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,Math.abs(e)>this.windowBuffer/2?this.rerenderColumns():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(e,i,r){for(let s=e;s<i;s++){let n=this.columns[s];n.modules.vdomHoz.leftPos+=r,n.modules.vdomHoz.rightPos+=r}}addColRight(){for(var e=!1,i=!0;i;){let r=this.columns[this.rightCol+1];r&&r.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var n=s.getCell(r);s.getElement().insertBefore(n.getElement(),s.getCell(this.columns[this.rightCol]).getElement().nextSibling),n.cellRendered()}}),this.fitDataColActualWidthCheck(r),this.rightCol++,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=r.getWidth()):i=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var e=!1,i=!0;i;){let r=this.columns[this.leftCol-1];if(r)if(r.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var o=n.getCell(r);n.getElement().insertBefore(o.getElement(),n.getCell(this.columns[this.leftCol]).getElement()),o.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=r.getWidth();let s=this.fitDataColActualWidthCheck(r);s&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+s,this.vDomPadRight-=s)}else i=!1;else i=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var e=!1,i=!0;i;){let r=this.columns[this.rightCol];r&&r.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var n=s.getCell(r);try{s.getElement().removeChild(n.getElement())}catch(o){console.warn("Could not removeColRight",o.message)}}}),this.vDomPadRight+=r.getWidth(),this.rightCol--,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.rightCol=this.rightCol)})):i=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var e=!1,i=!0;i;){let r=this.columns[this.leftCol];r&&r.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var n=s.getCell(r);try{s.getElement().removeChild(n.getElement())}catch(o){console.warn("Could not removeColLeft",o.message)}}}),this.vDomPadLeft+=r.getWidth(),this.leftCol++,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.leftCol=this.leftCol)})):i=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(e){var i,r;return e.modules.vdomHoz.fitDataCheck&&(e.reinitializeWidth(),i=e.getWidth(),r=i-e.modules.vdomHoz.width,r&&(e.modules.vdomHoz.rightPos+=r,e.modules.vdomHoz.width=i,this.colPositionAdjust(this.columns.indexOf(e)+1,this.columns.length,r)),e.modules.vdomHoz.fitDataCheck=!1),r}initializeRow(e){if(e.type!=="group"){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(i=>{this.appendCell(e,i)});for(let i=this.leftCol;i<=this.rightCol;i++)this.appendCell(e,this.columns[i]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(i=>{this.appendCell(e,i)})}}appendCell(e,i){if(i&&i.visible){let r=e.getCell(i);e.getElement().appendChild(r.getElement()),r.cellRendered()}}reinitializeRow(e,i){if(e.type!=="group"&&(i||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var r=e.getElement();r.firstChild;)r.removeChild(r.firstChild);this.initializeRow(e)}}}class RDe extends Xr{constructor(e){super(e),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new AQ(this.table,"column definition",IQ),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(e){this.table.rtl?this.headersElement.style.marginLeft=e+"px":this.headersElement.style.marginRight=e+"px"}initializeRenderer(){var e,i={virtual:kDe,basic:MDe};typeof this.table.options.renderHorizontal=="string"?e=i[this.table.options.renderHorizontal]:e=this.table.options.renderHorizontal,e?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e.setAttribute("role","row"),e}createHeaderContentsElement(){var e=document.createElement("div");return e.classList.add("tabulator-header-contents"),e.setAttribute("role","rowgroup"),e}createHeaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-header"),e.setAttribute("role","rowgroup"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(e){this.contentsElement.scrollLeft=e,this.scrollLeft=e,this.renderer.scrollColumns(e)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",e=>{var i;e.deltaX&&(i=this.contentsElement.scrollLeft+e.deltaX,this.table.rowManager.scrollHorizontal(i),this.table.columnManager.scrollHorizontal(i))})}generateColumnsFromRowData(e){var i=[],r={},s=this.table.options.autoColumns==="full"?e:[e[0]],n=this.table.options.autoColumnsDefinitions;if(e&&e.length){if(s.forEach(o=>{Object.keys(o).forEach((a,l)=>{let u=o[a],h;r[a]?r[a]!==!0&&typeof u<"u"&&(r[a].sorter=this.calculateSorterFromValue(u),r[a]=!0):(h={field:a,title:a,sorter:this.calculateSorterFromValue(u)},i.splice(l,0,h),r[a]=typeof u>"u"?h:!0)})}),n)switch(typeof n){case"function":this.table.options.columns=n.call(this.table,i);break;case"object":Array.isArray(n)?i.forEach(o=>{var a=n.find(l=>l.field===o.field);a&&Object.assign(o,a)}):i.forEach(o=>{n[o.field]&&Object.assign(o,n[o.field])}),this.table.options.columns=i;break}else this.table.options.columns=i;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(e){var i;switch(typeof e){case"undefined":i="string";break;case"boolean":i="boolean";break;case"number":i="number";break;case"object":Array.isArray(e)?i="array":i="string";break;default:!isNaN(e)&&e!==""?i="number":e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?i="alphanum":i="string";break}return i}setColumns(e,i){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new Cl(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),e.forEach((r,s)=>{this._addColumn(r)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(e,i,r){var s=new Cl(e,this),n=s.getElement(),o=r&&this.findColumnIndex(r);if(i&&this.rowHeader&&(!r||r===this.rowHeader)&&(i=!1,r=this.rowHeader,o=0),r&&o>-1){var a=r.getTopColumn(),l=this.columns.indexOf(a),u=a.getElement();i?(this.columns.splice(l,0,s),u.parentNode.insertBefore(n,u)):(this.columns.splice(l+1,0,s),u.parentNode.insertBefore(n,u.nextSibling))}else i?(this.columns.unshift(s),this.headersElement.insertBefore(s.getElement(),this.headersElement.firstChild)):(this.columns.push(s),this.headersElement.appendChild(s.getElement()));return s.columnRendered(),s}registerColumnField(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)}registerColumnPosition(e){this.columnsByIndex.push(e)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(e){e.reRegisterPosition()})}verticalAlignHeaders(){var e=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(i=>{i.clearVerticalAlign()}),this.columns.forEach(i=>{var r=i.getHeight();r>e&&(e=r)}),this.headersElement.style.height=e+"px",this.columns.forEach(i=>{i.verticalAlign(this.table.options.columnHeaderVertAlign,e)}),this.table.rowManager.adjustTableSize())}findColumn(e){var i;if(typeof e=="object"){if(e instanceof Cl)return e;if(e instanceof RQ)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return i=[],this.columns.forEach(s=>{i.push(s),i=i.concat(s.getColumns(!0))}),i.find(s=>s.element===e)||!1}else return this.columnsByField[e]||!1;return!1}getColumnByField(e){return this.columnsByField[e]}getColumnsByFieldRoot(e){var i=[];return Object.keys(this.columnsByField).forEach(r=>{var s=this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator)[0]:r;s===e&&i.push(this.columnsByField[r])}),i}getColumnByIndex(e){return this.columnsByIndex[e]}getFirstVisibleColumn(){var e=this.columnsByIndex.findIndex(i=>i.visible);return e>-1?this.columnsByIndex[e]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(e=>e.visible)}getColumns(){return this.columns}findColumnIndex(e){return this.columnsByIndex.findIndex(i=>e===i)}getRealColumns(){return this.columnsByIndex}traverse(e){this.columnsByIndex.forEach((i,r)=>{e(i,r)})}getDefinitions(e){var i=[];return this.columnsByIndex.forEach(r=>{(!e||e&&r.visible)&&i.push(r.getDefinition())}),i}getDefinitionTree(){var e=[];return this.columns.forEach(i=>{e.push(i.getDefinition(!0))}),e}getComponents(e){var i=[],r=e?this.columns:this.columnsByIndex;return r.forEach(s=>{i.push(s.getComponent())}),i}getWidth(){var e=0;return this.columnsByIndex.forEach(i=>{i.visible&&(e+=i.getWidth())}),e}moveColumn(e,i,r){i.element.parentNode.insertBefore(e.element,i.element),r&&i.element.parentNode.insertBefore(i.element,e.element),this.moveColumnActual(e,i,r),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(e,i,r){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,i,r):this._moveColumnInArray(this.columns,e,i,r),this._moveColumnInArray(this.columnsByIndex,e,i,r,!0),this.rerenderColumns(!0),this.dispatch("column-moved",e,i,r),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(e,i,r,s,n){var o=e.indexOf(i),a,l=[];o>-1&&(e.splice(o,1),a=e.indexOf(r),a>-1?s&&(a=a+1):a=o,e.splice(a,0,i),n&&(l=this.chain("column-moving-rows",[i,r,s],null,[])||[],l=l.concat(this.table.rowManager.rows),l.forEach(function(u){if(u.cells.length){var h=u.cells.splice(o,1)[0];u.cells.splice(a,0,h)}})))}scrollToColumn(e,i,r){var s=0,n=e.getLeftOffset(),o=0,a=e.getElement();return new Promise((l,u)=>{if(typeof i>"u"&&(i=this.table.options.scrollToColumnPosition),typeof r>"u"&&(r=this.table.options.scrollToColumnIfVisible),e.visible){switch(i){case"middle":case"center":o=-this.element.clientWidth/2;break;case"right":o=a.clientWidth-this.headersElement.clientWidth;break}if(!r&&n>0&&n+a.offsetWidth<this.element.clientWidth)return!1;s=n+o,s=Math.max(Math.min(s,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(s),this.scrollHorizontal(s),l()}else console.warn("Scroll Error - Column not visible"),u("Scroll Error - Column not visible")})}generateCells(e){var i=[];return this.columnsByIndex.forEach(r=>{i.push(r.generateCell(e))}),i}getFlexBaseWidth(){var e=this.table.element.clientWidth,i=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(r){var s,n,o;r.visible&&(s=r.definition.width||0,n=parseInt(r.minWidth),typeof s=="string"?s.indexOf("%")>-1?o=e/100*parseInt(s):o=parseInt(s):o=s,i+=o>n?o:n)}),i}addColumn(e,i,r){return new Promise((s,n)=>{var o=this._addColumn(e,i,r);this._reIndexColumns(),this.dispatch("column-add",e,i,r),this.layoutMode()!="fitColumns"&&o.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),s(o)})}deregisterColumn(e){var i=e.getField(),r;i&&delete this.columnsByField[i],r=this.columnsByIndex.indexOf(e),r>-1&&this.columnsByIndex.splice(r,1),r=this.columns.indexOf(e),r>-1&&this.columns.splice(r,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(e,i){this.redrawBlock?(e===!1||e===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=e):this.renderer.rerenderColumns(e,i)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(e){ti.elVisible(this.element)&&this.verticalAlignHeaders(),e&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",e)||this.layoutRefresh(e),this.dispatch("table-redraw",e),this.table.footerManager.redraw()}}class IDe extends QT{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.scrollTop=0,e.scrollLeft=0,e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility=""}renderRows(){var e=this.tableElement,i=!0,r=document.createDocumentFragment(),s=this.rows();s.forEach((n,o)=>{this.styleRow(n,o),n.initialize(!1,!0),n.type!=="group"&&(i=!1),r.appendChild(n.getElement())}),e.appendChild(r),s.forEach(n=>{n.rendered(),n.heightInitialized||n.calcHeight(!0)}),s.forEach(n=>{n.heightInitialized||n.setCellHeight()}),i?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}rerenderRows(e){this.clearRows(),e&&e(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(e){var i=ti.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-i)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-i))}scrollToRow(e){var i=e.getElement();this.elementVertical.scrollTop=ti.elOffset(i).top-ti.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(e){return this.rows()}}class $De extends QT{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(e){for(var i=this.elementVertical.scrollTop,r=!1,s=!1,n=this.table.rowManager.scrollLeft,o=this.rows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var l=i-o[a].getElement().offsetTop;if(s===!1||Math.abs(l)<s)s=l,r=a;else break}o.forEach(u=>{u.deinitializeHeight()}),e&&e(),this.rows().length?this._virtualRenderFill(r===!1?this.rows.length-1:r,!0,s||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(n)}scrollColumns(e){this.table.rowManager.scrollHorizontal(e)}scrollRows(e,i){var r=e-this.vDomScrollPosTop,s=e-this.vDomScrollPosBottom,n=this.vDomWindowBuffer*2,o=this.rows();if(this.scrollTop=e,-r>n||s>n){var a=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*o.length)),this.scrollColumns(a)}else i?(r<0&&this._addTopRow(o,-r),s<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(o,-s):this.vDomScrollPosBottom=this.scrollTop)):(s>=0&&this._addBottomRow(o,s),r>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(o,r):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(e){var i=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-i)>Math.abs(this.vDomBottom-i))}scrollToRow(e){var i=this.rows().indexOf(e);i>-1&&this._virtualRenderFill(i,!0)}visibleRows(e){var i=this.elementVertical.scrollTop,r=this.elementVertical.clientHeight+i,s=!1,n=0,o=0,a=this.rows();if(e)n=this.vDomTop,o=this.vDomBottom;else for(var l=this.vDomTop;l<=this.vDomBottom;l++)if(a[l])if(s)if(r-a[l].getElement().offsetTop>=0)o=l;else break;else if(i-a[l].getElement().offsetTop>=0)n=l;else if(s=!0,r-a[l].getElement().offsetTop>=0)o=l;else break;return a.slice(n,o+1)}_virtualRenderFill(e,i,r){var s=this.tableElement,n=this.elementVertical,o=0,a=0,l=0,u=0,h=0,p=0,m=this.rows(),y=m.length,v=0,w,S,E=[],I=0,D=0,O=this.table.rowManager.fixedHeight,A=this.elementVertical.clientHeight,z=this.table.options.rowHeight,_=!0;if(e=e||0,r=r||0,!e)this.clear();else{for(;s.firstChild;)s.removeChild(s.firstChild);u=(y-e+1)*this.vDomRowHeight,u<A&&(e-=Math.ceil((A-u)/this.vDomRowHeight),e<0&&(e=0)),o=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e),e-=o}if(y&&ti.elVisible(this.elementVertical)){for(this.vDomTop=e,this.vDomBottom=e-1,O||this.table.options.maxHeight?(z&&(D=A/z+this.vDomWindowBuffer/z),D=Math.max(this.vDomWindowMinTotalRows,Math.ceil(D))):D=y;(D==y||a<=A+this.vDomWindowBuffer||I<this.vDomWindowMinTotalRows)&&this.vDomBottom<y-1;){for(E=[],S=document.createDocumentFragment(),p=0;p<D&&this.vDomBottom<y-1;)v=this.vDomBottom+1,w=m[v],this.styleRow(w,v),w.initialize(!1,!0),!w.heightInitialized&&!this.table.options.rowHeight&&w.clearCellHeight(),S.appendChild(w.getElement()),E.push(w),this.vDomBottom++,p++;if(!E.length)break;s.appendChild(S),E.forEach(Z=>{Z.rendered(),Z.heightInitialized||Z.calcHeight(!0)}),E.forEach(Z=>{Z.heightInitialized||Z.setCellHeight()}),E.forEach(Z=>{l=Z.getHeight(),I<o?h+=l:a+=l,l>this.vDomWindowBuffer&&(this.vDomWindowBuffer=l*2),I++}),_=this.table.rowManager.adjustTableSize(),A=this.elementVertical.clientHeight,_&&(O||this.table.options.maxHeight)&&(z=a/I,D=Math.max(this.vDomWindowMinTotalRows,Math.ceil(A/z+this.vDomWindowBuffer/z)))}e?(this.vDomTopPad=i?this.vDomRowHeight*this.vDomTop+r:this.scrollTop-h,this.vDomBottomPad=this.vDomBottom==y-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-h,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+h)/I),this.vDomBottomPad=this.vDomRowHeight*(y-this.vDomBottom-1),this.vDomScrollHeight=h+a+this.vDomBottomPad-A),s.style.paddingTop=this.vDomTopPad+"px",s.style.paddingBottom=this.vDomBottomPad+"px",i&&(this.scrollTop=this.vDomTopPad+h+r-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-A:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-A),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&i&&(this.scrollTop+=this.elementVertical.offsetHeight-A),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,n.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(e,i){for(var r=this.tableElement,s=[],n=0,o=this.vDomTop-1,a=0,l=!0;l;)if(this.vDomTop){let u=e[o],h,p;u&&a<this.vDomMaxRenderChain?(h=u.getHeight()||this.vDomRowHeight,p=u.initialized,i>=h?(this.styleRow(u,o),r.insertBefore(u.getElement(),r.firstChild),(!u.initialized||!u.heightInitialized)&&s.push(u),u.initialize(),p||(h=u.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),i-=h,n+=h,this.vDomTop--,o--,a++):l=!1):l=!1}else l=!1;for(let u of s)u.clearCellHeight();this._quickNormalizeRowHeight(s),n&&(this.vDomTopPad-=n,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o<1&&(this.vDomTopPad=0),r.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=n)}_removeTopRow(e,i){for(var r=[],s=0,n=0,o=!0;o;){let a=e[this.vDomTop],l;a&&n<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,i>=l?(this.vDomTop++,i-=l,s+=l,r.push(a),n++):o=!1):o=!1}for(let a of r){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}s&&(this.vDomTopPad+=s,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?s:s+this.vDomWindowBuffer)}_addBottomRow(e,i){for(var r=this.tableElement,s=[],n=0,o=this.vDomBottom+1,a=0,l=!0;l;){let u=e[o],h,p;u&&a<this.vDomMaxRenderChain?(h=u.getHeight()||this.vDomRowHeight,p=u.initialized,i>=h?(this.styleRow(u,o),r.appendChild(u.getElement()),(!u.initialized||!u.heightInitialized)&&s.push(u),u.initialize(),p||(h=u.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),i-=h,n+=h,this.vDomBottom++,o++,a++):l=!1):l=!1}for(let u of s)u.clearCellHeight();this._quickNormalizeRowHeight(s),n&&(this.vDomBottomPad-=n,(this.vDomBottomPad<0||o==e.length-1)&&(this.vDomBottomPad=0),r.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=n)}_removeBottomRow(e,i){for(var r=[],s=0,n=0,o=!0;o;){let a=e[this.vDomBottom],l;a&&n<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,i>=l?(this.vDomBottom--,i-=l,s+=l,r.push(a),n++):o=!1):o=!1}for(let a of r){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}s&&(this.vDomBottomPad+=s,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=s)}_quickNormalizeRowHeight(e){for(let i of e)i.calcHeight();for(let i of e)i.setCellHeight()}}class ADe extends Xr{constructor(e){super(e),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var e=document.createElement("div");return e.classList.add("tabulator-tableholder"),e.setAttribute("tabindex",0),e}createTableElement(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e.setAttribute("role","rowgroup"),e}initializePlaceholder(){var e=this.table.options.placeholder;if(typeof e=="function"&&(e=e.call(this.table)),e=this.chain("placeholder",[e],e,e)||e,e){let i=document.createElement("div");if(i.classList.add("tabulator-placeholder"),typeof e=="string"){let r=document.createElement("div");r.classList.add("tabulator-placeholder-contents"),r.innerHTML=e,i.appendChild(r),this.placeholderContents=r}else typeof HTMLElement<"u"&&e instanceof HTMLElement?(i.appendChild(e),this.placeholderContents=e):(console.warn("Invalid placeholder provided, must be string or HTML Element",e),this.el=null);this.placeholder=i}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var e=this.element.scrollLeft,i=this.scrollLeft>e,r=this.element.scrollTop,s=this.scrollTop>r;this.scrollLeft!=e&&(this.scrollLeft=e,this.dispatch("scroll-horizontal",e,i),this.dispatchExternal("scrollHorizontal",e,i),this._positionPlaceholder()),this.scrollTop!=r&&(this.scrollTop=r,this.renderer.scrollRows(r,s),this.dispatch("scroll-vertical",r,s),this.dispatchExternal("scrollVertical",r,s))})}findRow(e){if(typeof e=="object"){if(e instanceof ds)return e;if(e instanceof XT)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return this.rows.find(r=>r.getElement()===e)||!1;if(e===null)return!1}else return typeof e>"u"?!1:this.rows.find(r=>r.data[this.table.options.index]==e)||!1;return!1}getRowFromDataObject(e){var i=this.rows.find(r=>r.data===e);return i||!1}getRowFromPosition(e){return this.getDisplayRows().find(i=>i.type==="row"&&i.getPosition()===e&&i.isDisplayed())}scrollToRow(e,i,r){return this.renderer.scrollToRowPosition(e,i,r)}setData(e,i,r){return new Promise((s,n)=>{i&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(e,!0):this.reRenderInPosition(()=>{this._setDataActual(e)}):(this.table.options.autoColumns&&r&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(e),this.resetScroll(),this._setDataActual(e)),s()})}_setDataActual(e,i){this.dispatchExternal("dataProcessing",e),this._wipeElements(),Array.isArray(e)?(this.dispatch("data-processing",e),e.forEach((r,s)=>{if(r&&typeof r=="object"){var n=new ds(r,this);this.rows.push(n)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",r)}),this.refreshActiveData(!1,!1,i),this.dispatch("data-processed",e),this.dispatchExternal("dataProcessed",e)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(e=>{e.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(e,i){var r=this.rows.indexOf(e),s=this.activeRows.indexOf(e);s>-1&&this.activeRows.splice(s,1),r>-1&&this.rows.splice(r,1),this.setActiveRows(this.activeRows),this.displayRowIterator(n=>{var o=n.indexOf(e);o>-1&&n.splice(o,1)}),i||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",e.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(e,i,r,s){var n=this.addRowActual(e,i,r,s);return n}addRows(e,i,r,s){var n=[];return new Promise((o,a)=>{i=this.findAddRowPos(i),Array.isArray(e)||(e=[e]),(typeof r>"u"&&i||typeof r<"u"&&!i)&&e.reverse(),e.forEach((l,u)=>{var h=this.addRow(l,i,r,!0);n.push(h),this.dispatch("row-added",h,l,i,r)}),this.refreshActiveData(s?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),o(n)})}findAddRowPos(e){return typeof e>"u"&&(e=this.table.options.addRowPos),e==="pos"&&(e=!0),e==="bottom"&&(e=!1),e}addRowActual(e,i,r,s){var n=e instanceof ds?e:new ds(e||{},this),o=this.findAddRowPos(i),a=-1,l,u;return r||(u=this.chain("row-adding-position",[n,o],null,{index:r,top:o}),r=u.index,o=u.top),typeof r<"u"&&(r=this.findRow(r)),r=this.chain("row-adding-index",[n,r,o],null,r),r&&(a=this.rows.indexOf(r)),r&&a>-1?(l=this.activeRows.indexOf(r),this.displayRowIterator(function(h){var p=h.indexOf(r);p>-1&&h.splice(o?p:p+1,0,n)}),l>-1&&this.activeRows.splice(o?l:l+1,0,n),this.rows.splice(o?a:a+1,0,n)):o?(this.displayRowIterator(function(h){h.unshift(n)}),this.activeRows.unshift(n),this.rows.unshift(n)):(this.displayRowIterator(function(h){h.push(n)}),this.activeRows.push(n),this.rows.push(n)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",n.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s||this.reRenderInPosition(),n}moveRow(e,i,r){this.dispatch("row-move",e,i,r),this.moveRowActual(e,i,r),this.regenerateRowPositions(),this.dispatch("row-moved",e,i,r),this.dispatchExternal("rowMoved",e.getComponent())}moveRowActual(e,i,r){this.moveRowInArray(this.rows,e,i,r),this.moveRowInArray(this.activeRows,e,i,r),this.displayRowIterator(s=>{this.moveRowInArray(s,e,i,r)}),this.dispatch("row-moving",e,i,r)}moveRowInArray(e,i,r,s){var n,o,a,l;if(i!==r&&(n=e.indexOf(i),n>-1&&(e.splice(n,1),o=e.indexOf(r),o>-1?s?e.splice(o+1,0,i):e.splice(o,0,i):e.splice(n,0,i)),e===this.getDisplayRows())){a=n<o?n:o,l=o>n?o:n+1;for(let u=a;u<=l;u++)e[u]&&this.styleRow(e[u],u)}}clearData(){this.setData([])}getRowIndex(e){return this.findRowIndex(e,this.rows)}getDisplayRowIndex(e){var i=this.getDisplayRows().indexOf(e);return i>-1?i:!1}nextDisplayRow(e,i){var r=this.getDisplayRowIndex(e),s=!1;return r!==!1&&r<this.displayRowsCount-1&&(s=this.getDisplayRows()[r+1]),s&&(!(s instanceof ds)||s.type!="row")?this.nextDisplayRow(s,i):s}prevDisplayRow(e,i){var r=this.getDisplayRowIndex(e),s=!1;return r&&(s=this.getDisplayRows()[r-1]),i&&s&&(!(s instanceof ds)||s.type!="row")?this.prevDisplayRow(s,i):s}findRowIndex(e,i){var r;return e=this.findRow(e),e&&(r=i.indexOf(e),r>-1)?r:!1}getData(e,i){var r=[],s=this.getRows(e);return s.forEach(function(n){n.type=="row"&&r.push(n.getData(i||"data"))}),r}getComponents(e){var i=[],r=this.getRows(e);return r.forEach(function(s){i.push(s.getComponent())}),i}getDataCount(e){var i=this.getRows(e);return i.length}scrollHorizontal(e){this.scrollLeft=e,this.element.scrollLeft=e,this.dispatch("scroll-horizontal",e)}registerDataPipelineHandler(e,i){typeof i<"u"?(this.dataPipeline.push({handler:e,priority:i}),this.dataPipeline.sort((r,s)=>r.priority-s.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(e,i){typeof i<"u"?(this.displayPipeline.push({handler:e,priority:i}),this.displayPipeline.sort((r,s)=>r.priority-s.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(e,i,r){var s=this.table,n="",o=0,a=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof e=="function")if(o=this.dataPipeline.findIndex(l=>l.handler===e),o>-1)n="dataPipeline",i&&(o==this.dataPipeline.length-1?n="display":o++);else if(o=this.displayPipeline.findIndex(l=>l.handler===e),o>-1)n="displayPipeline",i&&(o==this.displayPipeline.length-1?n="end":o++);else{console.error("Unable to refresh data, invalid handler provided",e);return}else n=e||"all",o=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===n&&o<this.redrawBlockRestoreConfig.index||a.indexOf(n)<a.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:e,skipStage:i,renderInPosition:r,stage:n,index:o});return}else ti.elVisible(this.element)?r?this.reRenderInPosition(this.refreshPipelines.bind(this,e,n,o,r)):(this.refreshPipelines(e,n,o,r),e||this.table.columnManager.renderer.renderColumns(),this.renderTable(),s.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(e,n,o,r),this.dispatch("data-refreshed")}}refreshPipelines(e,i,r,s){switch(this.dispatch("data-refreshing"),(!e||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),i){case"all":case"dataPipeline":for(let n=r;n<this.dataPipeline.length;n++){let o=this.dataPipeline[n].handler(this.activeRowsPipeline[n].slice(0));this.activeRowsPipeline[n+1]=o||this.activeRowsPipeline[n].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":r=0,this.resetDisplayRows();case"displayPipeline":for(let n=r;n<this.displayPipeline.length;n++){let o=this.displayPipeline[n].handler((n?this.getDisplayRows(n-1):this.activeRows).slice(0),s);this.setDisplayRows(o||this.getDisplayRows(n-1).slice(0),n)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var e=this.getDisplayRows(),i=1;e.forEach(r=>{r.type==="row"&&(r.setPosition(i),i++)})}setActiveRows(e){this.activeRows=this.activeRows=Object.assign([],e),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(e,i){this.displayRows[i]=e,i==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(e){return typeof e>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]}getVisibleRows(e,i){var r=Object.assign([],this.renderer.visibleRows(!i));return e&&(r=this.chain("rows-visible",[i],r,r)),r}displayRowIterator(e){this.activeRowsPipeline.forEach(e),this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(e){var i=[];switch(e){case"active":i=this.activeRows;break;case"display":i=this.table.rowManager.getDisplayRows();break;case"visible":i=this.getVisibleRows(!1,!0);break;default:i=this.chain("rows-retrieve",e,null,this.rows)||this.rows}return i}reRenderInPosition(e){this.redrawBlock?e?e():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(e),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var e=0;this.element.scrollHeight>this.element.clientHeight&&(e=this.element.offsetWidth-this.element.clientWidth),e!==this.scrollbarWidth&&(this.scrollbarWidth=e,this.dispatch("scrollbar-vertical",e))}initializeRenderer(){var e,i={virtual:$De,basic:IDe};typeof this.table.options.renderVertical=="string"?e=i[this.table.options.renderVertical]:e=this.table.options.renderVertical,e?(this.renderMode=this.table.options.renderVertical,this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(e,i){var r=e.getElement();i%2?(r.classList.add("tabulator-row-even"),r.classList.remove("tabulator-row-odd")):(r.classList.add("tabulator-row-odd"),r.classList.remove("tabulator-row-even"))}normalizeHeight(e){this.activeRows.forEach(function(i){i.normalizeHeight(e)})}adjustTableSize(){let e=this.element.clientHeight,i,r=!1;if(this.renderer.verticalFillMode==="fill"){let s=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){i=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";const n="calc(100% - "+s+"px)";this.element.style.minHeight=i||"calc(100% - "+s+"px)",this.element.style.height=n,this.element.style.maxHeight=n}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-s+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&e!=this.element.clientHeight&&(r=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),r}reinitialize(){this.rows.forEach(function(e){e.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(e){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))}}class ODe extends Xr{constructor(e){super(e),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e}createContainerElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer-contents"),this.element.appendChild(e),e}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(e){this.activate(),this.containerElement.appendChild(e),this.table.rowManager.adjustTableSize()}prepend(e){this.activate(),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(e){e.parentNode.removeChild(e),this.deactivate()}deactivate(e){(!this.element.firstChild||e)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}}class PDe extends Xr{constructor(e){super(e),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var e={};this.listeners.forEach(i=>{e[i]={handler:null,components:[]}}),this.listeners=e}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(e=>{this.pseudoTrackers[e].subscriber=this.pseudoMouseEnter.bind(this,e),this.subscribe(e+"-mouseover",this.pseudoTrackers[e].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(e,i,r){this.pseudoTrackers[e].target!==r&&(this.pseudoTrackers[e].target&&this.dispatch(e+"-mouseleave",i,this.pseudoTrackers[e].target),this.pseudoMouseLeave(e,i),this.pseudoTrackers[e].target=r,this.dispatch(e+"-mouseenter",i,r))}pseudoMouseLeave(e,i){var r=Object.keys(this.pseudoTrackers),s={row:["cell"],cell:["row"]};r=r.filter(n=>{var o=s[e];return n!==e&&(!o||o&&!o.includes(n))}),r.forEach(n=>{var o=this.pseudoTrackers[n].target;this.pseudoTrackers[n].target&&(this.dispatch(n+"-mouseleave",i,o),this.pseudoTrackers[n].target=null)})}bindSubscriptionWatchers(){var e=Object.keys(this.listeners),i=Object.values(this.componentMap);for(let r of i)for(let s of e){let n=r+"-"+s;this.subscriptionChange(n,this.subscriptionChanged.bind(this,r,s))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(e,i,r){var s=this.listeners[i].components,n=s.indexOf(e),o=!1;r?n===-1&&(s.push(e),o=!0):this.subscribed(e+"-"+i)||n>-1&&(s.splice(n,1),o=!0),(i==="mouseenter"||i==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),o&&this.updateEventListeners()}updateEventListeners(){for(let e in this.listeners){let i=this.listeners[e];i.components.length?i.handler||(i.handler=this.track.bind(this,e),this.el.addEventListener(e,i.handler)):i.handler&&(this.el.removeEventListener(e,i.handler),i.handler=null)}}track(e,i){var r=i.composedPath&&i.composedPath()||i.path,s=this.findTargets(r);s=this.bindComponents(e,s),this.triggerEvents(e,i,s),this.pseudoTracking&&(e=="mouseover"||e=="mouseleave")&&!Object.keys(s).length&&this.pseudoMouseLeave("none",i)}findTargets(e){var i={};let r=Object.keys(this.componentMap);for(let s of e){let n=s.classList?[...s.classList]:[];if(n.filter(l=>this.abortClasses.includes(l)).length)break;let a=n.filter(l=>r.includes(l));for(let l of a)i[this.componentMap[l]]||(i[this.componentMap[l]]=s)}return i.group&&i.group===i.row&&delete i.row,i}bindComponents(e,i){var r=Object.keys(i).reverse(),s=this.listeners[e],n={},o={},a={};for(let l of r){let u,h=i[l],p=this.previousTargets[l];if(p&&p.target===h)u=p.component;else switch(l){case"row":case"group":(s.components.includes("row")||s.components.includes("cell")||s.components.includes("group"))&&(u=this.table.rowManager.getVisibleRows(!0).find(y=>y.getElement()===h),i.row&&i.row.parentNode&&i.row.parentNode.closest(".tabulator-row")&&(i[l]=!1));break;case"column":s.components.includes("column")&&(u=this.table.columnManager.findColumn(h));break;case"cell":s.components.includes("cell")&&(n.row instanceof ds?u=n.row.findCell(h):i.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}u&&(n[l]=u,a[l]={target:h,component:u})}return this.previousTargets=a,Object.keys(i).forEach(l=>{let u=n[l];o[l]=u}),o}triggerEvents(e,i,r){var s=this.listeners[e];for(let n in r)r[n]&&s.components.includes(n)&&this.dispatch(n+"-"+e,i,r[n])}clearWatchers(){for(let e in this.listeners){let i=this.listeners[e];i.handler&&(this.el.removeEventListener(e,i.handler),i.handler=null)}}}class DDe{constructor(e){this.table=e,this.bindings={}}bind(e,i,r){this.bindings[e]||(this.bindings[e]={}),this.bindings[e][i]?console.warn("Unable to bind component handler, a matching function name is already bound",e,i,r):this.bindings[e][i]=r}handle(e,i,r){if(this.bindings[e]&&this.bindings[e][r]&&typeof this.bindings[e][r].bind=="function")return this.bindings[e][r].bind(null,i);r!=="then"&&typeof r=="string"&&!r.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+e+" component does not have a "+r+" function, have you checked that you have the correct Tabulator module installed?")}}class LDe extends Xr{constructor(e){super(e),this.requestOrder=0,this.loading=!1}initialize(){}load(e,i,r,s,n,o){var a=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",e),e&&(e.indexOf("{")==0||e.indexOf("[")==0)&&(e=JSON.parse(e)),this.confirm("data-loading",[e,i,r,n])){this.loading=!0,n||this.alertLoader(),i=this.chain("data-params",[e,r,n],i||{},i||{}),i=this.mapParams(i,this.table.options.dataSendParams);var l=this.chain("data-load",[e,i,r,n],!1,Promise.resolve([]));return l.then(u=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(u)&&typeof u=="object"&&(u=this.mapParams(u,this.objectInvert(this.table.options.dataReceiveParams)));var h=this.chain("data-loaded",[u],null,u);a==this.requestOrder?(this.clearAlert(),h!==!1&&(this.dispatchExternal("dataLoaded",h),this.table.rowManager.setData(h,s,typeof o>"u"?!s:o))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(u=>{console.error("Data Load Error: ",u),this.dispatchExternal("dataLoadError",u),n||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",e),e||(e=[]),this.table.rowManager.setData(e,s,typeof o>"u"?!s:o),Promise.resolve()}mapParams(e,i){var r={};for(let s in e)r[i.hasOwnProperty(s)?i[s]:s]=e[s];return r}objectInvert(e){var i={};for(let r in e)i[e[r]]=r;return i}blockActiveLoad(){this.requestOrder++}alertLoader(){var e=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;e&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}}class NDe{constructor(e,i,r){this.table=e,this.events={},this.optionsList=i||{},this.subscriptionNotifiers={},this.dispatch=r?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=r}subscriptionChange(e,i){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(i),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,i){this.events[e]||(this.events[e]=[]),this.events[e].push(i),this._notifySubscriptionChange(e,!0)}unsubscribe(e,i){var r;if(this.events[e])if(i)if(r=this.events[e].findIndex(s=>s===i),r>-1)this.events[e].splice(r,1);else{console.warn("Cannot remove event, no matching event found:",e,i);return}else delete this.events[e];else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_notifySubscriptionChange(e,i){var r=this.subscriptionNotifiers[e];r&&r.forEach(s=>{s(i)})}_dispatch(){var e=Array.from(arguments),i=e.shift(),r;return this.events[i]&&this.events[i].forEach((s,n)=>{let o=s.apply(this.table,e);n||(r=o)}),r}_debugDispatch(){var e=Array.from(arguments),i=e[0];return e[0]="ExternalEvent:"+e[0],(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._dispatch(...arguments)}}class FDe{constructor(e){this.events={},this.subscriptionNotifiers={},this.dispatch=e?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=e?this._debugChain.bind(this):this._chain.bind(this),this.confirm=e?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=e}subscriptionChange(e,i){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(i),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,i,r=1e4){this.events[e]||(this.events[e]=[]),this.events[e].push({callback:i,priority:r}),this.events[e].sort((s,n)=>s.priority-n.priority),this._notifySubscriptionChange(e,!0)}unsubscribe(e,i){var r;if(this.events[e]){if(i)if(r=this.events[e].findIndex(s=>s.callback===i),r>-1)this.events[e].splice(r,1);else{console.warn("Cannot remove event, no matching event found:",e,i);return}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_chain(e,i,r,s){var n=r;return Array.isArray(i)||(i=[i]),this.subscribed(e)?(this.events[e].forEach((o,a)=>{n=o.callback.apply(this,i.concat([n]))}),n):typeof s=="function"?s():s}_confirm(e,i){var r=!1;return Array.isArray(i)||(i=[i]),this.subscribed(e)&&this.events[e].forEach((s,n)=>{s.callback.apply(this,i)&&(r=!0)}),r}_notifySubscriptionChange(e,i){var r=this.subscriptionNotifiers[e];r&&r.forEach(s=>{s(i)})}_dispatch(){var e=Array.from(arguments),i=e.shift();this.events[i]&&this.events[i].forEach(r=>{r.callback.apply(this,e)})}_debugDispatch(){var e=Array.from(arguments),i=e[0];return e[0]="InternalEvent:"+i,(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._dispatch(...arguments)}_debugChain(){var e=Array.from(arguments),i=e[0];return e[0]="InternalEvent:"+i,(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._chain(...arguments)}_debugConfirm(){var e=Array.from(arguments),i=e[0];return e[0]="InternalEvent:"+i,(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._confirm(...arguments)}}class jDe extends Xr{constructor(e){super(e)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(e,i,r){var s="";return typeof this.options(e)<"u"?(s="Deprecated Setup Option - Use of the %c"+e+"%c option is now deprecated",i?(s=s+", Please use the %c"+i+"%c option instead",this._warnUser(s,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),r&&(this.table.options[i]=this.table.options[e])):this._warnUser(s,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(e,i){return typeof this.options(e)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+e+" %c option is now deprecated, "+i,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(e){this._warnUser(e)}}class zDe extends Xr{constructor(e){super(e),this.deps={},this.props={}}initialize(){this.deps=Object.assign({},this.options("dependencies"))}lookup(e,i,r){if(Array.isArray(e)){for(const n of e){var s=this.lookup(n,i,!0);if(s)break}if(s)return s;this.error(e)}else return i?this.lookupProp(e,i,r):this.lookupKey(e,r)}lookupProp(e,i,r){var s;if(this.props[e]&&this.props[e][i])return this.props[e][i];if(s=this.lookupKey(e,r),s)return this.props[e]||(this.props[e]={}),this.props[e][i]=s[i]||s,this.props[e][i]}lookupKey(e,i){var r;return this.deps[e]?r=this.deps[e]:window[e]?(this.deps[e]=window[e],r=this.deps[e]):i||this.error(e),r}error(e){console.error("Unable to find dependency",e,"Please check documentation and ensure you have imported the required library into your project")}}function VDe(t,e){e&&this.table.columnManager.renderer.reinitializeColumnWidths(t),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function qU(t,e){t.forEach(function(i){i.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function UDe(t,e){var i=0,r=this.table.rowManager.element.clientWidth,s=0,n=!1;t.forEach((o,a)=>{o.widthFixed||o.reinitializeWidth(),(this.table.options.responsiveLayout?o.modules.responsive.visible:o.visible)&&(n=o),o.visible&&(i+=o.getWidth())}),n?(s=r-i+n.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(n.setWidth(0),this.table.modules.responsiveLayout.update()),s>0?n.setWidth(s):n.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function HDe(t,e){var i=this.table.rowManager.element.getBoundingClientRect().width,r=0,s=0,n=0,o=0,a=[],l=[],u=0,h=0,p=0;function m(v){var w;return typeof v=="string"?v.indexOf("%")>-1?w=i/100*parseInt(v):w=parseInt(v):w=v,w}function y(v,w,S,E){var I=[],D=0,O=0,A=0,z=n,_=0,Z=0,Q=[];function ae(ne){return S*(ne.column.definition.widthGrow||1)}function ge(ne){return m(ne.width)-S*(ne.column.definition.widthShrink||0)}return v.forEach(function(ne,ve){var xe=E?ge(ne):ae(ne);ne.column.minWidth>=xe?I.push(ne):ne.column.maxWidth&&ne.column.maxWidth<xe?(ne.width=ne.column.maxWidth,w-=ne.column.maxWidth,z-=E?ne.column.definition.widthShrink||1:ne.column.definition.widthGrow||1,z&&(S=Math.floor(w/z))):(Q.push(ne),Z+=E?ne.column.definition.widthShrink||1:ne.column.definition.widthGrow||1)}),I.length?(I.forEach(function(ne){D+=E?ne.width-ne.column.minWidth:ne.column.minWidth,ne.width=ne.column.minWidth}),O=w-D,A=Z?Math.floor(O/Z):O,_=y(Q,O,A,E)):(_=Z?w-Math.floor(w/Z)*Z:w,Q.forEach(function(ne){ne.width=E?ge(ne):ae(ne)})),_}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(i-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach(function(v){var w,S,E;v.visible&&(w=v.definition.width,S=parseInt(v.minWidth),w?(E=m(w),r+=E>S?E:S,v.definition.widthShrink&&(l.push({column:v,width:E>S?E:S}),u+=v.definition.widthShrink)):(a.push({column:v,width:0}),n+=v.definition.widthGrow||1))}),s=i-r,o=Math.floor(s/n),p=y(a,s,o,!1),a.length&&p>0&&(a[a.length-1].width+=p),a.forEach(function(v){s-=v.width}),h=Math.abs(p)+s,h>0&&u&&(p=y(l,h,Math.floor(h/u),!0)),p&&l.length&&(l[l.length-1].width-=p),a.forEach(function(v){v.column.setWidth(v.width)}),l.forEach(function(v){v.column.setWidth(v.width)})}var BDe={fitData:VDe,fitDataFill:qU,fitDataTable:qU,fitDataStretch:UDe,fitColumns:HDe};class SC extends ft{static moduleName="layout";static modes=BDe;constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;SC.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){e.definition.widthGrow&&(e.definition.widthGrow=Number(e.definition.widthGrow)),e.definition.widthShrink&&(e.definition.widthShrink=Number(e.definition.widthShrink))}getMode(){return this.mode}layout(e){var i=this.table.columnManager.columnsByIndex.find(r=>r.definition.variableHeight||r.definition.formatter==="textarea");this.dispatch("layout-refreshing"),SC.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,e),i&&this.table.rowManager.normalizeHeight(!0),this.dispatch("layout-refreshed")}}var GDe={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}};class x3 extends ft{static moduleName="localize";static langs=GDe;constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=ti.deepClone(x3.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}installLang(e,i){this.langList[e]?this._setLangProp(this.langList[e],i):this.langList[e]=i}_setLangProp(e,i){for(let r in i)e[r]&&typeof e[r]=="object"?this._setLangProp(e[r],i[r]):e[r]=i[r]}setLocale(e){e=e||"default";function i(r,s){for(var n in r)typeof r[n]=="object"?(s[n]||(s[n]={}),i(r[n],s[n])):s[n]=r[n]}if(e===!0&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let r=e.split("-")[0];this.langList[r]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,r),e=r):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=ti.deepClone(this.langList.default||{}),e!="default"&&i(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,i){var r=i?e+"|"+i:e,s=r.split("|"),n=this._getLangElement(s,this.locale);return n||""}_getLangElement(e,i){var r=this.lang;return e.forEach(function(s){var n;r&&(n=r[s],typeof n<"u"?r=n:r=!1)}),r}bind(e,i){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(i),i(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(i=>{i(this.getText(e),this.lang)})}}class WDe extends ft{static moduleName="comms";constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var i=[],r;return r=this.table.constructor.registry.lookupTable(e),r.forEach(s=>{this.table!==s&&i.push(s)}),i}send(e,i,r,s){var n=this.getConnections(e);n.forEach(o=>{o.tableComms(this.table.element,i,r,s)}),!n.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,i,r,s){if(this.table.modExists(i))return this.table.modules[i].commsReceived(e,r,s);console.warn("Inter-table Comms Error - no such module:",i)}}var qDe=Object.freeze({__proto__:null,CommsModule:WDe,LayoutModule:SC,LocalizeModule:x3});class vo{static registry={tables:[],register(e){vo.registry.tables.push(e)},deregister(e){var i=vo.registry.tables.indexOf(e);i>-1&&vo.registry.tables.splice(i,1)},lookupTable(e,i){var r=[],s,n;if(typeof e=="string"){if(s=document.querySelectorAll(e),s.length)for(var o=0;o<s.length;o++)n=vo.registry.matchElement(s[o]),n&&r.push(n)}else typeof HTMLElement<"u"&&e instanceof HTMLElement||e instanceof vo?(n=vo.registry.matchElement(e),n&&r.push(n)):Array.isArray(e)?e.forEach(function(a){r=r.concat(vo.registry.lookupTable(a))}):i||console.warn("Table Connection Error - Invalid Selector",e);return r},matchElement(e){return vo.registry.tables.find(function(i){return e instanceof vo?i===e:i.element===e})}};static findTable(e){var i=vo.registry.lookupTable(e,!0);return Array.isArray(i)&&!i.length?!1:i}}class _i extends vo{static moduleBindings={};static moduleExtensions={};static modulesRegistered=!1;static defaultModules=!1;constructor(){super()}static initializeModuleBinder(e){_i.modulesRegistered||(_i.modulesRegistered=!0,_i._registerModules(qDe,!0),e&&_i._registerModules(e))}static _extendModule(e,i,r){if(_i.moduleBindings[e]){var s=_i.moduleBindings[e][i];if(s)if(typeof r=="object")for(let n in r)s[n]=r[n];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",i)}else console.warn("Module Error - module does not exist:",e)}static _registerModules(e,i){var r=Object.values(e);i&&r.forEach(s=>{s.prototype.moduleCore=!0}),_i._registerModule(r)}static _registerModule(e){Array.isArray(e)||(e=[e]),e.forEach(i=>{_i._registerModuleBinding(i),_i._registerModuleExtensions(i)})}static _registerModuleBinding(e){e.moduleName?_i.moduleBindings[e.moduleName]=e:console.error("Unable to bind module, no moduleName defined",e.moduleName)}static _registerModuleExtensions(e){var i=e.moduleExtensions;if(e.moduleExtensions)for(let r in i){let s=i[r];if(_i.moduleBindings[r])for(let n in s)_i._extendModule(r,n,s[n]);else{_i.moduleExtensions[r]||(_i.moduleExtensions[r]={});for(let n in s)_i.moduleExtensions[r][n]||(_i.moduleExtensions[r][n]={}),Object.assign(_i.moduleExtensions[r][n],s[n])}}_i._extendModuleFromQueue(e)}static _extendModuleFromQueue(e){var i=_i.moduleExtensions[e.moduleName];if(i)for(let r in i)_i._extendModule(e.moduleName,r,i[r])}_bindModules(){var e=[],i=[],r=[];this.modules={};for(var s in _i.moduleBindings){let n=_i.moduleBindings[s],o=new n(this);this.modules[s]=o,n.prototype.moduleCore?this.modulesCore.push(o):n.moduleInitOrder?n.moduleInitOrder<0?e.push(o):i.push(o):r.push(o)}e.sort((n,o)=>n.moduleInitOrder>o.moduleInitOrder?1:-1),i.sort((n,o)=>n.moduleInitOrder>o.moduleInitOrder?1:-1),this.modulesRegular=e.concat(r.concat(i))}}class YDe extends Xr{constructor(e){super(e),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert"),e}_createMsgElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert-msg"),e.setAttribute("role","alert"),e}_typeClass(){return"tabulator-alert-state-"+this.type}alert(e,i="msg"){if(e){for(this.clear(),this.dispatch("alert-show",i),this.type=i;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof e=="function"&&(e=e()),e instanceof HTMLElement?this.msgElement.appendChild(e):this.msgElement.innerHTML=e,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}}class eh extends _i{static defaultOptions=TDe;static extendModule(){eh.initializeModuleBinder(),eh._extendModule(...arguments)}static registerModule(){eh.initializeModuleBinder(),eh._registerModule(...arguments)}constructor(e,i,r){super(),eh.initializeModuleBinder(r),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new DDe(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new jDe(this),this.optionsList=new AQ(this,"table constructor"),this.dependencyRegistry=new zDe(this),this.initialized=!1,this.destroyed=!1,this.initializeElement(e)&&(this.initializeCoreSystems(i),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement?(this.element=e,!0):typeof e=="string"?(this.element=document.querySelector(e),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initializeCoreSystems(e){this.columnManager=new RDe(this),this.rowManager=new ADe(this),this.footerManager=new ODe(this),this.dataLoader=new LDe(this),this.alertManager=new YDe(this),this._bindModules(),this.options=this.optionsList.generate(eh.defaultOptions,e),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new NDe(this,this.options,this.options.debugEventsExternal),this.eventBus=new FDe(this.options.debugEventsInternal),this.interactionMonitor=new PDe(this),this.dataLoader.initialize(),this.footerManager.initialize(),this.dependencyRegistry.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(e.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e=this.element,i=this.options,r;if(e.tagName==="TABLE"){this.originalElement=this.element,r=document.createElement("div");var s=e.attributes;for(var n in s)typeof s[n]=="object"&&r.setAttribute(s[n].name,s[n].value);e.parentNode.replaceChild(r,e),this.element=e=r}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);i.height&&(i.height=isNaN(i.height)?i.height:i.height+"px",e.style.height=i.height),i.minHeight!==!1&&(i.minHeight=isNaN(i.minHeight)?i.minHeight:i.minHeight+"px",e.style.minHeight=i.minHeight),i.maxHeight!==!1&&(i.maxHeight=isNaN(i.maxHeight)?i.maxHeight:i.maxHeight+"px",e.style.maxHeight=i.maxHeight)}_initializeTable(){var e=this.element,i=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(r=>{r.initialize()}),e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),i.footerElement&&this.footerManager.activate(),i.autoColumns&&i.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(r=>{r.initialize()}),this.columnManager.setColumns(i.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var e=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):e.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0,4))}initGuard(e,i){var r,s;return this.options.debugInitialization&&!this.initialized&&(e||(r=new Error().stack.split(`
`),s=r[0]=="Error"?r[2]:r[1],s[0]==" "?e=s.trim().split(" ")[1].split(".")[1]:e=s.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+e+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(i?" "+i:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(e,i,r){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(e,i,r,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,i,r){return this.initGuard(),this.dataLoader.load(e,i,r,!0,!0)}updateData(e){var i=0;return this.initGuard(),new Promise((r,s)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(n=>{var o=this.rowManager.findRow(n[this.options.index]);o?(i++,o.updateData(n).then(()=>{i--,i||r()}).catch(a=>{s("Update Error - Unable to update row",n,a)})):s("Update Error - Unable to find row",n)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}addData(e,i,r){return this.initGuard(),new Promise((s,n)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,i,r).then(o=>{var a=[];o.forEach(function(l){a.push(l.getComponent())}),s(a)}):(console.warn("Update Error - No data provided"),n("Update Error - No data provided"))})}updateOrAddData(e){var i=[],r=0;return this.initGuard(),new Promise((s,n)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(o=>{var a=this.rowManager.findRow(o[this.options.index]);r++,a?a.updateData(o).then(()=>{r--,i.push(a.getComponent()),r||s(i)}):this.rowManager.addRows(o).then(l=>{r--,i.push(l[0].getComponent()),r||s(i)})}):(console.warn("Update Error - No data provided"),n("Update Error - No data provided"))})}getRow(e){var i=this.rowManager.findRow(e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e){var i=this.rowManager.getRowFromPosition(e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var i=[];this.initGuard(),Array.isArray(e)||(e=[e]);for(let r of e){let s=this.rowManager.findRow(r,!0);if(s)i.push(s);else return console.error("Delete Error - No matching row found:",r),Promise.reject("Delete Error - No matching row found")}return i.sort((r,s)=>this.rowManager.rows.indexOf(r)>this.rowManager.rows.indexOf(s)?1:-1),i.forEach(r=>{r.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,i,r){return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),this.rowManager.addRows(e,i,r,!0).then(s=>s[0].getComponent())}updateOrAddRow(e,i){var r=this.rowManager.findRow(e);return this.initGuard(),typeof i=="string"&&(i=JSON.parse(i)),r?r.updateData(i).then(()=>r.getComponent()):this.rowManager.addRows(i).then(s=>s[0].getComponent())}updateRow(e,i){var r=this.rowManager.findRow(e);return this.initGuard(),typeof i=="string"&&(i=JSON.parse(i)),r?r.updateData(i).then(()=>Promise.resolve(r.getComponent())):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,i,r){var s=this.rowManager.findRow(e);return s?this.rowManager.scrollToRow(s,i,r):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,i,r){var s=this.rowManager.findRow(e);this.initGuard(),s?s.moveToRow(i,r):console.warn("Move Error - No matching row found:",e)}getRows(e){return this.rowManager.getComponents(e)}getRowPosition(e){var i=this.rowManager.findRow(e);return i?i.getPosition():(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(e)}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var i=this.columnManager.findColumn(e);return i?i.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var i=this.columnManager.findColumn(e);if(this.initGuard(),i)i.show();else return console.warn("Column Show Error - No matching column found:",e),!1}hideColumn(e){var i=this.columnManager.findColumn(e);if(this.initGuard(),i)i.hide();else return console.warn("Column Hide Error - No matching column found:",e),!1}toggleColumn(e){var i=this.columnManager.findColumn(e);if(this.initGuard(),i)i.visible?i.hide():i.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1}addColumn(e,i,r){var s=this.columnManager.findColumn(r);return this.initGuard(),this.columnManager.addColumn(e,i,s).then(n=>n.getComponent())}deleteColumn(e){var i=this.columnManager.findColumn(e);return this.initGuard(),i?i.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,i){var r=this.columnManager.findColumn(e);return this.initGuard(),r?r.updateDefinition(i):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,i,r){var s=this.columnManager.findColumn(e),n=this.columnManager.findColumn(i);this.initGuard(),s?n?this.columnManager.moveColumn(s,n,r):console.warn("Move Error - No matching column found:",n):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,i,r){return new Promise((s,n)=>{var o=this.columnManager.findColumn(e);return o?this.columnManager.scrollToColumn(o,i,r):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initGuard(),this.columnManager.redraw(e),this.rowManager.redraw(e)}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(e,i){this.externalEvents.subscribe(e,i)}off(e,i){this.externalEvents.unsubscribe(e,i)}dispatchEvent(){var e=Array.from(arguments);e.shift(),this.externalEvents.dispatch(...arguments)}alert(e,i){this.initGuard(),this.alertManager.alert(e,i)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(e,i){return this.modules[e]?!0:(i&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var i=this.modules[e];return i||console.error("Tabulator module not installed: "+e),i}}var Jb=eh;class JDe extends Jb{static extendModule(){Jb.initializeModuleBinder(mk),Jb._extendModule(...arguments)}static registerModule(){Jb.initializeModuleBinder(mk),Jb._registerModule(...arguments)}constructor(e,i,r){super(e,i,mk)}}var ZDe=JDe;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function b1(t){return t+.5|0}const bh=(t,e,i)=>Math.max(Math.min(t,i),e);function l0(t){return bh(b1(t*2.55),0,255)}function Th(t){return bh(b1(t*255),0,255)}function Wu(t){return bh(b1(t/2.55)/100,0,1)}function YU(t){return bh(b1(t*100),0,100)}const lo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},iP=[..."0123456789ABCDEF"],XDe=t=>iP[t&15],KDe=t=>iP[(t&240)>>4]+iP[t&15],U_=t=>(t&240)>>4===(t&15),QDe=t=>U_(t.r)&&U_(t.g)&&U_(t.b)&&U_(t.a);function eLe(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&lo[t[1]]*17,g:255&lo[t[2]]*17,b:255&lo[t[3]]*17,a:e===5?lo[t[4]]*17:255}:(e===7||e===9)&&(i={r:lo[t[1]]<<4|lo[t[2]],g:lo[t[3]]<<4|lo[t[4]],b:lo[t[5]]<<4|lo[t[6]],a:e===9?lo[t[7]]<<4|lo[t[8]]:255})),i}const tLe=(t,e)=>t<255?e(t):"";function iLe(t){var e=QDe(t)?XDe:KDe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+tLe(t.a,e):void 0}const rLe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function OQ(t,e,i){const r=e*Math.min(i,1-i),s=(n,o=(n+t/30)%12)=>i-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function sLe(t,e,i){const r=(s,n=(s+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function nLe(t,e,i){const r=OQ(t,1,.5);let s;for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)r[s]*=1-e-i,r[s]+=e;return r}function oLe(t,e,i,r,s){return t===s?(e-i)/r+(e<i?6:0):e===s?(i-t)/r+2:(t-e)/r+4}function S3(t){const i=t.r/255,r=t.g/255,s=t.b/255,n=Math.max(i,r,s),o=Math.min(i,r,s),a=(n+o)/2;let l,u,h;return n!==o&&(h=n-o,u=a>.5?h/(2-n-o):h/(n+o),l=oLe(i,r,s,h,n),l=l*60+.5),[l|0,u||0,a]}function E3(t,e,i,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,r)).map(Th)}function C3(t,e,i){return E3(OQ,t,e,i)}function aLe(t,e,i){return E3(nLe,t,e,i)}function lLe(t,e,i){return E3(sLe,t,e,i)}function PQ(t){return(t%360+360)%360}function uLe(t){const e=rLe.exec(t);let i=255,r;if(!e)return;e[5]!==r&&(i=e[6]?l0(+e[5]):Th(+e[5]));const s=PQ(+e[2]),n=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=aLe(s,n,o):e[1]==="hsv"?r=lLe(s,n,o):r=C3(s,n,o),{r:r[0],g:r[1],b:r[2],a:i}}function cLe(t,e){var i=S3(t);i[0]=PQ(i[0]+e),i=C3(i),t.r=i[0],t.g=i[1],t.b=i[2]}function hLe(t){if(!t)return;const e=S3(t),i=e[0],r=YU(e[1]),s=YU(e[2]);return t.a<255?`hsla(${i}, ${r}%, ${s}%, ${Wu(t.a)})`:`hsl(${i}, ${r}%, ${s}%)`}const JU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ZU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function dLe(){const t={},e=Object.keys(ZU),i=Object.keys(JU);let r,s,n,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<i.length;s++)n=i[s],a=a.replace(n,JU[n]);n=parseInt(ZU[o],16),t[a]=[n>>16&255,n>>8&255,n&255]}return t}let H_;function pLe(t){H_||(H_=dLe(),H_.transparent=[0,0,0,0]);const e=H_[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const fLe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mLe(t){const e=fLe.exec(t);let i=255,r,s,n;if(e){if(e[7]!==r){const o=+e[7];i=e[8]?l0(o):bh(o*255,0,255)}return r=+e[1],s=+e[3],n=+e[5],r=255&(e[2]?l0(r):bh(r,0,255)),s=255&(e[4]?l0(s):bh(s,0,255)),n=255&(e[6]?l0(n):bh(n,0,255)),{r,g:s,b:n,a:i}}}function gLe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Wu(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const gk=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,tm=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function yLe(t,e,i){const r=tm(Wu(t.r)),s=tm(Wu(t.g)),n=tm(Wu(t.b));return{r:Th(gk(r+i*(tm(Wu(e.r))-r))),g:Th(gk(s+i*(tm(Wu(e.g))-s))),b:Th(gk(n+i*(tm(Wu(e.b))-n))),a:t.a+i*(e.a-t.a)}}function B_(t,e,i){if(t){let r=S3(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*i,e===0?360:1)),r=C3(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function DQ(t,e){return t&&Object.assign(e||{},t)}function XU(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Th(t[3]))):(e=DQ(t,{r:0,g:0,b:0,a:1}),e.a=Th(e.a)),e}function bLe(t){return t.charAt(0)==="r"?mLe(t):uLe(t)}class Pw{constructor(e){if(e instanceof Pw)return e;const i=typeof e;let r;i==="object"?r=XU(e):i==="string"&&(r=eLe(e)||pLe(e)||bLe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=DQ(this._rgb);return e&&(e.a=Wu(e.a)),e}set rgb(e){this._rgb=XU(e)}rgbString(){return this._valid?gLe(this._rgb):void 0}hexString(){return this._valid?iLe(this._rgb):void 0}hslString(){return this._valid?hLe(this._rgb):void 0}mix(e,i){if(e){const r=this.rgb,s=e.rgb;let n;const o=i===n?.5:i,a=2*o-1,l=r.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;n=1-u,r.r=255&u*r.r+n*s.r+.5,r.g=255&u*r.g+n*s.g+.5,r.b=255&u*r.b+n*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,i){return e&&(this._rgb=yLe(this._rgb,e._rgb,i)),this}clone(){return new Pw(this.rgb)}alpha(e){return this._rgb.a=Th(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=b1(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return B_(this._rgb,2,e),this}darken(e){return B_(this._rgb,2,-e),this}saturate(e){return B_(this._rgb,1,e),this}desaturate(e){return B_(this._rgb,1,-e),this}rotate(e){return cLe(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function su(){}const vLe=(()=>{let t=0;return()=>t++})();function wt(t){return t==null}function Ei(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _t(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Hi(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Hn(t,e){return Hi(t)?t:e}function ut(t,e){return typeof t>"u"?e:t}const wLe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,LQ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function li(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function Jt(t,e,i,r){let s,n,o;if(Ei(t))for(n=t.length,s=0;s<n;s++)e.call(i,t[s],s);else if(_t(t))for(o=Object.keys(t),n=o.length,s=0;s<n;s++)e.call(i,t[o[s]],o[s])}function EC(t,e){let i,r,s,n;if(!t||!e||t.length!==e.length)return!1;for(i=0,r=t.length;i<r;++i)if(s=t[i],n=e[i],s.datasetIndex!==n.datasetIndex||s.index!==n.index)return!1;return!0}function CC(t){if(Ei(t))return t.map(CC);if(_t(t)){const e=Object.create(null),i=Object.keys(t),r=i.length;let s=0;for(;s<r;++s)e[i[s]]=CC(t[i[s]]);return e}return t}function NQ(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function _Le(t,e,i,r){if(!NQ(t))return;const s=e[t],n=i[t];_t(s)&&_t(n)?Dw(s,n,r):e[t]=CC(n)}function Dw(t,e,i){const r=Ei(e)?e:[e],s=r.length;if(!_t(t))return t;i=i||{};const n=i.merger||_Le;let o;for(let a=0;a<s;++a){if(o=r[a],!_t(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)n(l[u],t,o,i)}return t}function J0(t,e){return Dw(t,e,{merger:xLe})}function xLe(t,e,i){if(!NQ(t))return;const r=e[t],s=i[t];_t(r)&&_t(s)?J0(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=CC(s))}const KU={"":t=>t,x:t=>t.x,y:t=>t.y};function SLe(t){const e=t.split("."),i=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(i.push(r),r="");return i}function ELe(t){const e=SLe(t);return i=>{for(const r of e){if(r==="")break;i=i&&i[r]}return i}}function Hh(t,e){return(KU[e]||(KU[e]=ELe(e)))(t)}function T3(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Lw=t=>typeof t<"u",Bh=t=>typeof t=="function",QU=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function CLe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Lt=Math.PI,bi=2*Lt,TLe=bi+Lt,TC=Number.POSITIVE_INFINITY,MLe=Lt/180,rr=Lt/2,xd=Lt/4,eH=Lt*2/3,vh=Math.log10,Il=Math.sign;function Z0(t,e,i){return Math.abs(t-e)<i}function tH(t){const e=Math.round(t);t=Z0(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(vh(t))),r=t/i;return(r<=1?1:r<=2?2:r<=5?5:10)*i}function kLe(t){const e=[],i=Math.sqrt(t);let r;for(r=1;r<i;r++)t%r===0&&(e.push(r),e.push(t/r));return i===(i|0)&&e.push(i),e.sort((s,n)=>s-n).pop(),e}function RLe(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Iy(t){return!RLe(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ILe(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function FQ(t,e,i){let r,s,n;for(r=0,s=t.length;r<s;r++)n=t[r][i],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function _a(t){return t*(Lt/180)}function M3(t){return t*(180/Lt)}function iH(t){if(!Hi(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function jQ(t,e){const i=e.x-t.x,r=e.y-t.y,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n<-.5*Lt&&(n+=bi),{angle:n,distance:s}}function rP(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $Le(t,e){return(t-e+TLe)%bi-Lt}function ps(t){return(t%bi+bi)%bi}function Nw(t,e,i,r){const s=ps(t),n=ps(e),o=ps(i),a=ps(n-s),l=ps(o-s),u=ps(s-n),h=ps(s-o);return s===n||s===o||r&&n===o||a>l&&u<h}function zr(t,e,i){return Math.max(e,Math.min(i,t))}function ALe(t){return zr(t,-32768,32767)}function Ku(t,e,i,r=1e-6){return t>=Math.min(e,i)-r&&t<=Math.max(e,i)+r}function k3(t,e,i){i=i||(o=>t[o]<e);let r=t.length-1,s=0,n;for(;r-s>1;)n=s+r>>1,i(n)?s=n:r=n;return{lo:s,hi:r}}const Qu=(t,e,i,r)=>k3(t,i,r?s=>{const n=t[s][e];return n<i||n===i&&t[s+1][e]===i}:s=>t[s][e]<i),OLe=(t,e,i)=>k3(t,i,r=>t[r][e]>=i);function PLe(t,e,i){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>i;)s--;return r>0||s<t.length?t.slice(r,s):t}const zQ=["push","pop","shift","splice","unshift"];function DLe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),zQ.forEach(i=>{const r="_onData"+T3(i),s=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...n){const o=s.apply(this,n);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...n)}),o}})})}function rH(t,e){const i=t._chartjs;if(!i)return;const r=i.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(zQ.forEach(n=>{delete t[n]}),delete t._chartjs)}function VQ(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const UQ=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function HQ(t,e){let i=[],r=!1;return function(...s){i=s,r||(r=!0,UQ.call(window,()=>{r=!1,t.apply(e,i)}))}}function LLe(t,e){let i;return function(...r){return e?(clearTimeout(i),i=setTimeout(t,e,r)):t.apply(this,r),e}}const R3=t=>t==="start"?"left":t==="end"?"right":"center",ss=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,NLe=(t,e,i,r)=>t===(r?"left":"right")?i:t==="center"?(e+i)/2:e;function BQ(t,e,i){const r=e.length;let s=0,n=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:p,max:m,minDefined:y,maxDefined:v}=o.getUserBounds();if(y){if(s=Math.min(Qu(l,h,p).lo,i?r:Qu(e,h,o.getPixelForValue(p)).lo),u){const w=l.slice(0,s+1).reverse().findIndex(S=>!wt(S[a.axis]));s-=Math.max(0,w)}s=zr(s,0,r-1)}if(v){let w=Math.max(Qu(l,o.axis,m,!0).hi+1,i?0:Qu(e,h,o.getPixelForValue(m),!0).hi+1);if(u){const S=l.slice(w-1).findIndex(E=>!wt(E[a.axis]));w+=Math.max(0,S)}n=zr(w,s,r)-s}else n=r-s}return{start:s,count:n}}function GQ(t){const{xScale:e,yScale:i,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!r)return t._scaleRanges=s,!0;const n=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==i.min||r.ymax!==i.max;return Object.assign(r,s),n}const G_=t=>t===0||t===1,sH=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*bi/i)),nH=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*bi/i)+1,X0={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*rr)+1,easeOutSine:t=>Math.sin(t*rr),easeInOutSine:t=>-.5*(Math.cos(Lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>G_(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>G_(t)?t:sH(t,.075,.3),easeOutElastic:t=>G_(t)?t:nH(t,.075,.3),easeInOutElastic(t){return G_(t)?t:t<.5?.5*sH(t*2,.1125,.45):.5+.5*nH(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-X0.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?X0.easeInBounce(t*2)*.5:X0.easeOutBounce(t*2-1)*.5+.5};function I3(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function oH(t){return I3(t)?t:new Pw(t)}function yk(t){return I3(t)?t:new Pw(t).saturate(.5).darken(.1).hexString()}const FLe=["x","y","borderWidth","radius","tension"],jLe=["color","borderColor","backgroundColor"];function zLe(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:jLe},numbers:{type:"number",properties:FLe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function VLe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const aH=new Map;function ULe(t,e){e=e||{};const i=t+JSON.stringify(e);let r=aH.get(i);return r||(r=new Intl.NumberFormat(t,e),aH.set(i,r)),r}function v1(t,e,i){return ULe(e,i).format(t)}const WQ={values(t){return Ei(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const r=this.chart.options.locale;let s,n=t;if(i.length>1){const u=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),n=HLe(t,i)}const o=vh(Math.abs(n)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),v1(t,r,l)},logarithmic(t,e,i){if(t===0)return"0";const r=i[e].significand||t/Math.pow(10,Math.floor(vh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*i.length?WQ.numeric.call(this,t,e,i):""}};function HLe(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var eM={formatters:WQ};function BLe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:eM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const lf=Object.create(null),sP=Object.create(null);function K0(t,e){if(!e)return t;const i=e.split(".");for(let r=0,s=i.length;r<s;++r){const n=i[r];t=t[n]||(t[n]=Object.create(null))}return t}function bk(t,e,i){return typeof e=="string"?Dw(K0(t,e),i):Dw(K0(t,""),e)}class GLe{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>yk(s.backgroundColor),this.hoverBorderColor=(r,s)=>yk(s.borderColor),this.hoverColor=(r,s)=>yk(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return bk(this,e,i)}get(e){return K0(this,e)}describe(e,i){return bk(sP,e,i)}override(e,i){return bk(lf,e,i)}route(e,i,r,s){const n=K0(this,e),o=K0(this,r),a="_"+i;Object.defineProperties(n,{[a]:{value:n[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],u=o[s];return _t(l)?Object.assign({},u,l):ut(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(i=>i(this))}}var Ci=new GLe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zLe,VLe,BLe]);function WLe(t){return!t||wt(t.size)||wt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function MC(t,e,i,r,s){let n=e[s];return n||(n=e[s]=t.measureText(s).width,i.push(s)),n>r&&(r=n),r}function qLe(t,e,i,r){r=r||{};let s=r.data=r.data||{},n=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(s=r.data={},n=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=i.length;let l,u,h,p,m;for(l=0;l<a;l++)if(p=i[l],p!=null&&!Ei(p))o=MC(t,s,n,o,p);else if(Ei(p))for(u=0,h=p.length;u<h;u++)m=p[u],m!=null&&!Ei(m)&&(o=MC(t,s,n,o,m));t.restore();const y=n.length/2;if(y>i.length){for(l=0;l<y;l++)delete s[n[l]];n.splice(0,y)}return o}function Sd(t,e,i){const r=t.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((e-s)*r)/r+s}function lH(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function nP(t,e,i,r){qQ(t,e,i,r,null)}function qQ(t,e,i,r,s){let n,o,a,l,u,h,p,m;const y=e.pointStyle,v=e.rotation,w=e.radius;let S=(v||0)*MLe;if(y&&typeof y=="object"&&(n=y.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]")){t.save(),t.translate(i,r),t.rotate(S),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),y){default:s?t.ellipse(i,r,s/2,w,0,0,bi):t.arc(i,r,w,0,bi),t.closePath();break;case"triangle":h=s?s/2:w,t.moveTo(i+Math.sin(S)*h,r-Math.cos(S)*w),S+=eH,t.lineTo(i+Math.sin(S)*h,r-Math.cos(S)*w),S+=eH,t.lineTo(i+Math.sin(S)*h,r-Math.cos(S)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(S+xd)*l,p=Math.cos(S+xd)*(s?s/2-u:l),a=Math.sin(S+xd)*l,m=Math.sin(S+xd)*(s?s/2-u:l),t.arc(i-p,r-a,u,S-Lt,S-rr),t.arc(i+m,r-o,u,S-rr,S),t.arc(i+p,r+a,u,S,S+rr),t.arc(i-m,r+o,u,S+rr,S+Lt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=s?s/2:l,t.rect(i-h,r-l,2*h,2*l);break}S+=xd;case"rectRot":p=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(i-p,r-a),t.lineTo(i+m,r-o),t.lineTo(i+p,r+a),t.lineTo(i-m,r+o),t.closePath();break;case"crossRot":S+=xd;case"cross":p=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(i-p,r-a),t.lineTo(i+p,r+a),t.moveTo(i+m,r-o),t.lineTo(i-m,r+o);break;case"star":p=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(i-p,r-a),t.lineTo(i+p,r+a),t.moveTo(i+m,r-o),t.lineTo(i-m,r+o),S+=xd,p=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(i-p,r-a),t.lineTo(i+p,r+a),t.moveTo(i+m,r-o),t.lineTo(i-m,r+o);break;case"line":o=s?s/2:Math.cos(S)*w,a=Math.sin(S)*w,t.moveTo(i-o,r-a),t.lineTo(i+o,r+a);break;case"dash":t.moveTo(i,r),t.lineTo(i+Math.cos(S)*(s?s/2:w),r+Math.sin(S)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ec(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function tM(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function iM(t){t.restore()}function YLe(t,e,i,r,s){if(!e)return t.lineTo(i.x,i.y);if(s==="middle"){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else s==="after"!=!!r?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function JLe(t,e,i,r){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function ZLe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function XLe(t,e,i,r,s){if(s.strikethrough||s.underline){const n=t.measureText(r),o=e-n.actualBoundingBoxLeft,a=e+n.actualBoundingBoxRight,l=i-n.actualBoundingBoxAscent,u=i+n.actualBoundingBoxDescent,h=s.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function KLe(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function uf(t,e,i,r,s,n={}){const o=Ei(e)?e:[e],a=n.strokeWidth>0&&n.strokeColor!=="";let l,u;for(t.save(),t.font=s.string,ZLe(t,n),l=0;l<o.length;++l)u=o[l],n.backdrop&&KLe(t,n.backdrop),a&&(n.strokeColor&&(t.strokeStyle=n.strokeColor),wt(n.strokeWidth)||(t.lineWidth=n.strokeWidth),t.strokeText(u,i,r,n.maxWidth)),t.fillText(u,i,r,n.maxWidth),XLe(t,i,r,u,n),r+=Number(s.lineHeight);t.restore()}function Mh(t,e){const{x:i,y:r,w:s,h:n,radius:o}=e;t.arc(i+o.topLeft,r+o.topLeft,o.topLeft,1.5*Lt,Lt,!0),t.lineTo(i,r+n-o.bottomLeft),t.arc(i+o.bottomLeft,r+n-o.bottomLeft,o.bottomLeft,Lt,rr,!0),t.lineTo(i+s-o.bottomRight,r+n),t.arc(i+s-o.bottomRight,r+n-o.bottomRight,o.bottomRight,rr,0,!0),t.lineTo(i+s,r+o.topRight),t.arc(i+s-o.topRight,r+o.topRight,o.topRight,0,-rr,!0),t.lineTo(i+o.topLeft,r)}const QLe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,e3e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function t3e(t,e){const i=(""+t).match(QLe);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const i3e=t=>+t||0;function $3(t,e){const i={},r=_t(e),s=r?Object.keys(e):e,n=_t(t)?r?o=>ut(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)i[o]=i3e(n(o));return i}function YQ(t){return $3(t,{top:"y",right:"x",bottom:"y",left:"x"})}function kh(t){return $3(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _s(t){const e=YQ(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _r(t,e){t=t||{},e=e||Ci.font;let i=ut(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let r=ut(t.style,e.style);r&&!(""+r).match(e3e)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ut(t.family,e.family),lineHeight:t3e(ut(t.lineHeight,e.lineHeight),i),size:i,style:r,weight:ut(t.weight,e.weight),string:""};return s.string=WLe(s),s}function u0(t,e,i,r){let s,n,o;for(s=0,n=t.length;s<n;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function r3e(t,e,i){const{min:r,max:s}=t,n=LQ(e,(s-r)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(r,-Math.abs(n)),max:o(s,n)}}function Kh(t,e){return Object.assign(Object.create(t),e)}function A3(t,e=[""],i,r,s=()=>t[0]){const n=i||t;typeof r>"u"&&(r=KQ("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:r,_getTarget:s,override:a=>A3([a,...t],e,n,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return ZQ(a,l,()=>h3e(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return cH(a).includes(l)},ownKeys(a){return cH(a)},set(a,l,u){const h=a._storage||(a._storage=s());return a[l]=h[l]=u,delete a._keys,!0}})}function $y(t,e,i,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:JQ(t,r),setContext:n=>$y(t,n,i,r),override:n=>$y(t.override(n),e,i,r)};return new Proxy(s,{deleteProperty(n,o){return delete n[o],delete t[o],!0},get(n,o,a){return ZQ(n,o,()=>n3e(n,o,a))},getOwnPropertyDescriptor(n,o){return n._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(n,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(n,o,a){return t[o]=a,delete n[o],!0}})}function JQ(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:r,isScriptable:Bh(i)?i:()=>i,isIndexable:Bh(r)?r:()=>r}}const s3e=(t,e)=>t?t+T3(e):e,O3=(t,e)=>_t(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ZQ(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=i();return t[e]=r,r}function n3e(t,e,i){const{_proxy:r,_context:s,_subProxy:n,_descriptors:o}=t;let a=r[e];return Bh(a)&&o.isScriptable(e)&&(a=o3e(e,a,t,i)),Ei(a)&&a.length&&(a=a3e(e,a,t,o.isIndexable)),O3(e,a)&&(a=$y(a,s,n&&n[e],o)),a}function o3e(t,e,i,r){const{_proxy:s,_context:n,_subProxy:o,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(n,o||r);return a.delete(t),O3(t,l)&&(l=P3(s._scopes,s,t,l)),l}function a3e(t,e,i,r){const{_proxy:s,_context:n,_subProxy:o,_descriptors:a}=i;if(typeof n.index<"u"&&r(t))return e[n.index%e.length];if(_t(e[0])){const l=e,u=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=P3(u,s,t,h);e.push($y(p,n,o&&o[t],a))}}return e}function XQ(t,e,i){return Bh(t)?t(e,i):t}const l3e=(t,e)=>t===!0?e:typeof t=="string"?Hh(e,t):void 0;function u3e(t,e,i,r,s){for(const n of e){const o=l3e(i,n);if(o){t.add(o);const a=XQ(o._fallback,i,s);if(typeof a<"u"&&a!==i&&a!==r)return a}else if(o===!1&&typeof r<"u"&&i!==r)return null}return!1}function P3(t,e,i,r){const s=e._rootScopes,n=XQ(e._fallback,i,r),o=[...t,...s],a=new Set;a.add(r);let l=uH(a,o,i,n||i,r);return l===null||typeof n<"u"&&n!==i&&(l=uH(a,o,n,l,r),l===null)?!1:A3(Array.from(a),[""],s,n,()=>c3e(e,i,r))}function uH(t,e,i,r,s){for(;i;)i=u3e(t,e,i,r,s);return i}function c3e(t,e,i){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ei(s)&&_t(i)?i:s||{}}function h3e(t,e,i,r){let s;for(const n of e)if(s=KQ(s3e(n,t),i),typeof s<"u")return O3(t,s)?P3(i,r,t,s):s}function KQ(t,e){for(const i of e){if(!i)continue;const r=i[t];if(typeof r<"u")return r}}function cH(t){let e=t._keys;return e||(e=t._keys=d3e(t._scopes)),e}function d3e(t){const e=new Set;for(const i of t)for(const r of Object.keys(i).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function QQ(t,e,i,r){const{iScale:s}=t,{key:n="r"}=this._parsing,o=new Array(r);let a,l,u,h;for(a=0,l=r;a<l;++a)u=a+i,h=e[u],o[a]={r:s.parse(Hh(h,n),u)};return o}const p3e=Number.EPSILON||1e-14,Ay=(t,e)=>e<t.length&&!t[e].skip&&t[e],eee=t=>t==="x"?"y":"x";function f3e(t,e,i,r){const s=t.skip?e:t,n=e,o=i.skip?e:i,a=rP(n,s),l=rP(o,n);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const p=r*u,m=r*h;return{previous:{x:n.x-p*(o.x-s.x),y:n.y-p*(o.y-s.y)},next:{x:n.x+m*(o.x-s.x),y:n.y+m*(o.y-s.y)}}}function m3e(t,e,i){const r=t.length;let s,n,o,a,l,u=Ay(t,0);for(let h=0;h<r-1;++h)if(l=u,u=Ay(t,h+1),!(!l||!u)){if(Z0(e[h],0,p3e)){i[h]=i[h+1]=0;continue}s=i[h]/e[h],n=i[h+1]/e[h],a=Math.pow(s,2)+Math.pow(n,2),!(a<=9)&&(o=3/Math.sqrt(a),i[h]=s*o*e[h],i[h+1]=n*o*e[h])}}function g3e(t,e,i="x"){const r=eee(i),s=t.length;let n,o,a,l=Ay(t,0);for(let u=0;u<s;++u){if(o=a,a=l,l=Ay(t,u+1),!a)continue;const h=a[i],p=a[r];o&&(n=(h-o[i])/3,a[`cp1${i}`]=h-n,a[`cp1${r}`]=p-n*e[u]),l&&(n=(l[i]-h)/3,a[`cp2${i}`]=h+n,a[`cp2${r}`]=p+n*e[u])}}function y3e(t,e="x"){const i=eee(e),r=t.length,s=Array(r).fill(0),n=Array(r);let o,a,l,u=Ay(t,0);for(o=0;o<r;++o)if(a=l,l=u,u=Ay(t,o+1),!!l){if(u){const h=u[e]-l[e];s[o]=h!==0?(u[i]-l[i])/h:0}n[o]=a?u?Il(s[o-1])!==Il(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}m3e(t,s,n),g3e(t,n,e)}function W_(t,e,i){return Math.max(Math.min(t,i),e)}function b3e(t,e){let i,r,s,n,o,a=ec(t[0],e);for(i=0,r=t.length;i<r;++i)o=n,n=a,a=i<r-1&&ec(t[i+1],e),n&&(s=t[i],o&&(s.cp1x=W_(s.cp1x,e.left,e.right),s.cp1y=W_(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=W_(s.cp2x,e.left,e.right),s.cp2y=W_(s.cp2y,e.top,e.bottom)))}function v3e(t,e,i,r,s){let n,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")y3e(t,s);else{let u=r?t[t.length-1]:t[0];for(n=0,o=t.length;n<o;++n)a=t[n],l=f3e(u,a,t[Math.min(n+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&b3e(t,i)}function D3(){return typeof window<"u"&&typeof document<"u"}function L3(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kC(t,e,i){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[i])):r=t,r}const rM=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function w3e(t,e){return rM(t).getPropertyValue(e)}const _3e=["top","right","bottom","left"];function Lp(t,e,i){const r={};i=i?"-"+i:"";for(let s=0;s<4;s++){const n=_3e[s];r[n]=parseFloat(t[e+"-"+n+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const x3e=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function S3e(t,e){const i=t.touches,r=i&&i.length?i[0]:t,{offsetX:s,offsetY:n}=r;let o=!1,a,l;if(x3e(s,n,t.target))a=s,l=n;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function sp(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:r}=e,s=rM(i),n=s.boxSizing==="border-box",o=Lp(s,"padding"),a=Lp(s,"border","width"),{x:l,y:u,box:h}=S3e(t,i),p=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:y,height:v}=e;return n&&(y-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-p)/y*i.width/r),y:Math.round((u-m)/v*i.height/r)}}function E3e(t,e,i){let r,s;if(e===void 0||i===void 0){const n=t&&L3(t);if(!n)e=t.clientWidth,i=t.clientHeight;else{const o=n.getBoundingClientRect(),a=rM(n),l=Lp(a,"border","width"),u=Lp(a,"padding");e=o.width-u.width-l.width,i=o.height-u.height-l.height,r=kC(a.maxWidth,n,"clientWidth"),s=kC(a.maxHeight,n,"clientHeight")}}return{width:e,height:i,maxWidth:r||TC,maxHeight:s||TC}}const q_=t=>Math.round(t*10)/10;function C3e(t,e,i,r){const s=rM(t),n=Lp(s,"margin"),o=kC(s.maxWidth,t,"clientWidth")||TC,a=kC(s.maxHeight,t,"clientHeight")||TC,l=E3e(t,e,i);let{width:u,height:h}=l;if(s.boxSizing==="content-box"){const m=Lp(s,"border","width"),y=Lp(s,"padding");u-=y.width+m.width,h-=y.height+m.height}return u=Math.max(0,u-n.width),h=Math.max(0,r?u/r:h-n.height),u=q_(Math.min(u,o,l.maxWidth)),h=q_(Math.min(h,a,l.maxHeight)),u&&!h&&(h=q_(u/2)),(e!==void 0||i!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,u=q_(Math.floor(h*r))),{width:u,height:h}}function hH(t,e,i){const r=e||1,s=Math.floor(t.height*r),n=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==n?(t.currentDevicePixelRatio=r,o.height=s,o.width=n,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const T3e=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};D3()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function dH(t,e){const i=w3e(t,e),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function np(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function M3e(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:r==="middle"?i<.5?t.y:e.y:r==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function k3e(t,e,i,r){const s={x:t.cp2x,y:t.cp2y},n={x:e.cp1x,y:e.cp1y},o=np(t,s,i),a=np(s,n,i),l=np(n,e,i),u=np(o,a,i),h=np(a,l,i);return np(u,h,i)}const R3e=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,r){return i-r},leftForLtr(i,r){return i-r}}},I3e=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Pg(t,e,i){return t?R3e(e,i):I3e()}function tee(t,e){let i,r;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,r=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=r)}function iee(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ree(t){return t==="angle"?{between:Nw,compare:$Le,normalize:ps}:{between:Ku,compare:(e,i)=>e-i,normalize:e=>e}}function pH({start:t,end:e,count:i,loop:r,style:s}){return{start:t%i,end:e%i,loop:r&&(e-t+1)%i===0,style:s}}function $3e(t,e,i){const{property:r,start:s,end:n}=i,{between:o,normalize:a}=ree(r),l=e.length;let{start:u,end:h,loop:p}=t,m,y;if(p){for(u+=l,h+=l,m=0,y=l;m<y&&o(a(e[u%l][r]),s,n);++m)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:t.style}}function see(t,e,i){if(!i)return[t];const{property:r,start:s,end:n}=i,o=e.length,{compare:a,between:l,normalize:u}=ree(r),{start:h,end:p,loop:m,style:y}=$3e(t,e,i),v=[];let w=!1,S=null,E,I,D;const O=()=>l(s,D,E)&&a(s,D)!==0,A=()=>a(n,E)===0||l(n,D,E),z=()=>w||O(),_=()=>!w||A();for(let Z=h,Q=h;Z<=p;++Z)I=e[Z%o],!I.skip&&(E=u(I[r]),E!==D&&(w=l(E,s,n),S===null&&z()&&(S=a(E,s)===0?Z:Q),S!==null&&_()&&(v.push(pH({start:S,end:Z,loop:m,count:o,style:y})),S=null),Q=Z,D=E));return S!==null&&v.push(pH({start:S,end:p,loop:m,count:o,style:y})),v}function nee(t,e){const i=[],r=t.segments;for(let s=0;s<r.length;s++){const n=see(r[s],t.points,e);n.length&&i.push(...n)}return i}function A3e(t,e,i,r){let s=0,n=e-1;if(i&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(n+=s);n>s&&t[n%e].skip;)n--;return n%=e,{start:s,end:n}}function O3e(t,e,i,r){const s=t.length,n=[];let o=e,a=t[e],l;for(l=e+1;l<=i;++l){const u=t[l%s];u.skip||u.stop?a.skip||(r=!1,n.push({start:e%s,end:(l-1)%s,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&n.push({start:e%s,end:o%s,loop:r}),n}function P3e(t,e){const i=t.points,r=t.options.spanGaps,s=i.length;if(!s)return[];const n=!!t._loop,{start:o,end:a}=A3e(i,s,n,r);if(r===!0)return fH(t,[{start:o,end:a,loop:n}],i,e);const l=a<o?a+s:a,u=!!t._fullLoop&&o===0&&a===s-1;return fH(t,O3e(i,o,l,u),i,e)}function fH(t,e,i,r){return!r||!r.setContext||!i?e:D3e(t,e,i,r)}function D3e(t,e,i,r){const s=t._chart.getContext(),n=mH(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=i.length,u=[];let h=n,p=e[0].start,m=p;function y(v,w,S,E){const I=a?-1:1;if(v!==w){for(v+=l;i[v%l].skip;)v-=I;for(;i[w%l].skip;)w+=I;v%l!==w%l&&(u.push({start:v%l,end:w%l,loop:S,style:E}),h=E,p=w%l)}}for(const v of e){p=a?p:v.start;let w=i[p%l],S;for(m=p+1;m<=v.end;m++){const E=i[m%l];S=mH(r.setContext(Kh(s,{type:"segment",p0:w,p1:E,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),L3e(S,h)&&y(p,m-1,v.loop,h),w=E,h=S}p<m-1&&y(p,m-1,v.loop,h)}return u}function mH(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function L3e(t,e){if(!e)return!1;const i=[],r=function(s,n){return I3(n)?(i.includes(n)||i.push(n),i.indexOf(n)):n};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Y_(t,e,i){return t.options.clip?t[i]:e[i]}function N3e(t,e){const{xScale:i,yScale:r}=t;return i&&r?{left:Y_(i,e,"left"),right:Y_(i,e,"right"),top:Y_(r,e,"top"),bottom:Y_(r,e,"bottom")}:e}function oee(t,e){const i=e._clip;if(i.disabled)return!1;const r=N3e(e,t.chartArea);return{left:i.left===!1?0:r.left-(i.left===!0?0:i.left),right:i.right===!1?t.width:r.right+(i.right===!0?0:i.right),top:i.top===!1?0:r.top-(i.top===!0?0:i.top),bottom:i.bottom===!1?t.height:r.bottom+(i.bottom===!0?0:i.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class F3e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,r,s){const n=i.listeners[s],o=i.duration;n.forEach(a=>a({chart:e,initial:i.initial,numSteps:o,currentStep:Math.min(r-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=UQ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const n=r.items;let o=n.length-1,a=!1,l;for(;o>=0;--o)l=n[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(n[o]=n[n.length-1],n.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),n.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),i+=n.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let r=i.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,r)),r}listen(e,i,r){this._getAnims(e).listeners[i].push(r)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const r=i.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Mu=new F3e;const gH="transparent",j3e={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const r=oH(t||gH),s=r.valid&&oH(e||gH);return s&&s.valid?s.mix(r,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class z3e{constructor(e,i,r,s){const n=i[r];s=u0([e.to,s,n,e.from]);const o=u0([e.from,n,s]);this._active=!0,this._fn=e.fn||j3e[e.type||typeof o],this._easing=X0[e.easing]||X0.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,i,r){if(this._active){this._notify(!1);const s=this._target[this._prop],n=r-this._start,o=this._duration-n;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=u0([e.to,i,s,e.from]),this._from=u0([e.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,r=this._duration,s=this._prop,n=this._from,o=this._loop,a=this._to;let l;if(this._active=n!==a&&(o||i<r),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=n;return}l=i/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(n,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,r)=>{e.push({res:i,rej:r})})}_notify(e){const i=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][i]()}}class aee{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!_t(e))return;const i=Object.keys(Ci.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const n=e[s];if(!_t(n))return;const o={};for(const a of i)o[a]=n[a];(Ei(n.properties)&&n.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,i){const r=i.options,s=U3e(e,r);if(!s)return[];const n=this._createAnimations(s,r);return r.$shared&&V3e(e.options.$animations,r).then(()=>{e.options=r},()=>{}),n}_createAnimations(e,i){const r=this._properties,s=[],n=e.$animations||(e.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,i));continue}const h=i[u];let p=n[u];const m=r.get(u);if(p)if(m&&p.active()){p.update(m,h,a);continue}else p.cancel();if(!m||!m.duration){e[u]=h;continue}n[u]=p=new z3e(m,e,u,h),s.push(p)}return s}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const r=this._createAnimations(e,i);if(r.length)return Mu.add(this._chart,r),!0}}function V3e(t,e){const i=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const n=t[r[s]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}function U3e(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function yH(t,e){const i=t&&t.options||{},r=i.reverse,s=i.min===void 0?e:0,n=i.max===void 0?e:0;return{start:r?n:s,end:r?s:n}}function H3e(t,e,i){if(i===!1)return!1;const r=yH(t,i),s=yH(e,i);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function B3e(t){let e,i,r,s;return _t(t)?(e=t.top,i=t.right,r=t.bottom,s=t.left):e=i=r=s=t,{top:e,right:i,bottom:r,left:s,disabled:t===!1}}function lee(t,e){const i=[],r=t._getSortedDatasetMetas(e);let s,n;for(s=0,n=r.length;s<n;++s)i.push(r[s].index);return i}function bH(t,e,i,r={}){const s=t.keys,n=r.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===i){if(h=!0,r.all)continue;break}u=t.values[l],Hi(u)&&(n||e===0||Il(e)===Il(u))&&(e+=u)}return!h&&!r.all?0:e}function G3e(t,e){const{iScale:i,vScale:r}=e,s=i.axis==="x"?"x":"y",n=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[s]:h,[n]:t[h]};return a}function vk(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function W3e(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function q3e(t){const{min:e,max:i,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function Y3e(t,e,i){const r=t[e]||(t[e]={});return r[i]||(r[i]={})}function vH(t,e,i,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const n=t[s.index];if(i&&n>0||!i&&n<0)return s.index}return null}function wH(t,e){const{chart:i,_cachedMeta:r}=t,s=i._stacks||(i._stacks={}),{iScale:n,vScale:o,index:a}=r,l=n.axis,u=o.axis,h=W3e(n,o,r),p=e.length;let m;for(let y=0;y<p;++y){const v=e[y],{[l]:w,[u]:S}=v,E=v._stacks||(v._stacks={});m=E[u]=Y3e(s,h,w),m[a]=S,m._top=vH(m,o,!0,r.type),m._bottom=vH(m,o,!1,r.type);const I=m._visualValues||(m._visualValues={});I[a]=S}}function wk(t,e){const i=t.scales;return Object.keys(i).filter(r=>i[r].axis===e).shift()}function J3e(t,e){return Kh(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Z3e(t,e,i){return Kh(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function Zb(t,e){const i=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const n=s._stacks;if(!n||n[r]===void 0||n[r][i]===void 0)return;delete n[r][i],n[r]._visualValues!==void 0&&n[r]._visualValues[i]!==void 0&&delete n[r]._visualValues[i]}}}const _k=t=>t==="reset"||t==="none",_H=(t,e)=>e?t:Object.assign({},t),X3e=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:lee(i,!0),values:null};class lc{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vk(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zb(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(p,m,y,v)=>p==="x"?m:p==="r"?v:y,n=i.xAxisID=ut(r.xAxisID,wk(e,"x")),o=i.yAxisID=ut(r.yAxisID,wk(e,"y")),a=i.rAxisID=ut(r.rAxisID,wk(e,"r")),l=i.indexAxis,u=i.iAxisID=s(l,n,o,a),h=i.vAxisID=s(l,o,n,a);i.xScale=this.getScaleForId(n),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&rH(this._data,this),e._stacked&&Zb(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(_t(i)){const s=this._cachedMeta;this._data=G3e(i,s)}else if(r!==i){if(r){rH(r,this);const s=this._cachedMeta;Zb(s),s._parsed=[]}i&&Object.isExtensible(i)&&DLe(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const n=i._stacked;i._stacked=vk(i.vScale,i),i.stack!==r.stack&&(s=!0,Zb(i),i.stack=r.stack),this._resyncElements(e),(s||n!==i._stacked)&&(wH(this,i._parsed),i._stacked=vk(i.vScale,i))}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:r,_data:s}=this,{iScale:n,_stacked:o}=r,a=n.axis;let l=e===0&&i===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,p,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Ei(s[e])?m=this.parseArrayData(r,s,e,i):_t(s[e])?m=this.parseObjectData(r,s,e,i):m=this.parsePrimitiveData(r,s,e,i);const y=()=>p[a]===null||u&&p[a]<u[a];for(h=0;h<i;++h)r._parsed[h+e]=p=m[h],l&&(y()&&(l=!1),u=p);r._sorted=l}o&&wH(this,m)}parsePrimitiveData(e,i,r,s){const{iScale:n,vScale:o}=e,a=n.axis,l=o.axis,u=n.getLabels(),h=n===o,p=new Array(s);let m,y,v;for(m=0,y=s;m<y;++m)v=m+r,p[m]={[a]:h||n.parse(u[v],v),[l]:o.parse(i[v],v)};return p}parseArrayData(e,i,r,s){const{xScale:n,yScale:o}=e,a=new Array(s);let l,u,h,p;for(l=0,u=s;l<u;++l)h=l+r,p=i[h],a[l]={x:n.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,i,r,s){const{xScale:n,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let h,p,m,y;for(h=0,p=s;h<p;++h)m=h+r,y=i[m],u[h]={x:n.parse(Hh(y,a),m),y:o.parse(Hh(y,l),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){const s=this.chart,n=this._cachedMeta,o=i[e.axis],a={keys:lee(s,!0),values:i._stacks[e.axis]._visualValues};return bH(a,o,n.index,{mode:r})}updateRangeFromParsed(e,i,r,s){const n=r[i.axis];let o=n===null?NaN:n;const a=s&&r._stacks[i.axis];s&&a&&(s.values=a,o=bH(s,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,i){const r=this._cachedMeta,s=r._parsed,n=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=X3e(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=q3e(a);let m,y;function v(){y=s[m];const w=y[a.axis];return!Hi(y[e.axis])||h>w||p<w}for(m=0;m<o&&!(!v()&&(this.updateRangeFromParsed(u,e,y,l),n));++m);if(n){for(m=o-1;m>=0;--m)if(!v()){this.updateRangeFromParsed(u,e,y,l);break}}return u}getAllParsedValues(e){const i=this._cachedMeta._parsed,r=[];let s,n,o;for(s=0,n=i.length;s<n;++s)o=i[s][e.axis],Hi(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,r=i.iScale,s=i.vScale,n=this.getParsed(e);return{label:r?""+r.getLabelForValue(n[r.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=B3e(ut(this.options.clip,H3e(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],n=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,n,a,l),h=a;h<a+l;++h){const p=s[h];p.hidden||(p.active&&u?o.push(p):p.draw(e,n))}for(h=0;h<o.length;++h)o[h].draw(e,n)}getStyle(e,i){const r=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){const s=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];n=o.$context||(o.$context=Z3e(this.getContext(),e,o)),n.parsed=this.getParsed(e),n.raw=s.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=J3e(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!i,n.mode=r,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){const s=i==="active",n=this._cachedDataOpts,o=e+"-"+i,a=n[o],l=this.enableOptionSharing&&Lw(r);if(a)return _H(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),p=s?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),h),y=Object.keys(Ci.elements[e]),v=()=>this.getContext(r,s,i),w=u.resolveNamedOptions(m,y,v,p);return w.$shared&&(w.$shared=l,n[o]=Object.freeze(_H(w,l))),w}_resolveAnimations(e,i,r){const s=this.chart,n=this._cachedDataOpts,o=`animation-${i}`,a=n[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,i),m=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(m,this.getContext(e,r,i))}const u=new aee(s,l&&l.animations);return l&&l._cacheable&&(n[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||_k(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,n=this.getSharedOptions(r),o=this.includeOptions(i,n)||n!==s;return this.updateSharedOptions(n,i,r),{sharedOptions:n,includeOptions:o}}updateElement(e,i,r,s){_k(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!_k(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;const n=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=r.length,n=i.length,o=Math.min(n,s);o&&this.parse(0,o),n>s?this._insertElements(s,n-s,e):n<s&&this._removeElements(n,s-n)}_insertElements(e,i,r=!0){const s=this._cachedMeta,n=s.data,o=e+i;let a;const l=u=>{for(u.length+=i,a=u.length-1;a>=o;a--)u[a]=u[a-i]};for(l(n),a=e;a<o;++a)n[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,i),r&&this.updateElements(n,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,i);r._stacked&&Zb(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function K3e(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,n=i.length;s<n;s++)r=r.concat(i[s].controller.getAllParsedValues(t));t._cache.$bar=VQ(r.sort((s,n)=>s-n))}return t._cache.$bar}function Q3e(t){const e=t.iScale,i=K3e(e,t.type);let r=e._length,s,n,o,a;const l=()=>{o===32767||o===-32768||(Lw(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,n=i.length;s<n;++s)o=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,n=e.ticks.length;s<n;++s)o=e.getPixelForTick(s),l();return r}function eNe(t,e,i,r){const s=i.barThickness;let n,o;return wt(s)?(n=e.min*i.categoryPercentage,o=i.barPercentage):(n=s*r,o=1),{chunk:n/r,ratio:o,start:e.pixels[t]-n/2}}function tNe(t,e,i,r){const s=e.pixels,n=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=i.categoryPercentage;o===null&&(o=n-(a===null?e.end-e.start:a-n)),a===null&&(a=n+n-o);const u=n-(n-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:i.barPercentage,start:u}}function iNe(t,e,i,r){const s=i.parse(t[0],r),n=i.parse(t[1],r),o=Math.min(s,n),a=Math.max(s,n);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[i.axis]=u,e._custom={barStart:l,barEnd:u,start:s,end:n,min:o,max:a}}function uee(t,e,i,r){return Ei(t)?iNe(t,e,i,r):e[i.axis]=i.parse(t,r),e}function xH(t,e,i,r){const s=t.iScale,n=t.vScale,o=s.getLabels(),a=s===n,l=[];let u,h,p,m;for(u=i,h=i+r;u<h;++u)m=e[u],p={},p[s.axis]=a||s.parse(o[u],u),l.push(uee(m,p,n,u));return l}function xk(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function rNe(t,e,i){return t!==0?Il(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function sNe(t){let e,i,r,s,n;return t.horizontal?(e=t.base>t.x,i="left",r="right"):(e=t.base<t.y,i="bottom",r="top"),e?(s="end",n="start"):(s="start",n="end"),{start:i,end:r,reverse:e,top:s,bottom:n}}function nNe(t,e,i,r){let s=e.borderSkipped;const n={};if(!s){t.borderSkipped=n;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=sNe(t);s==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===r?s=u:(i._bottom||0)===r?s=h:(n[SH(h,o,a,l)]=!0,s=u)),n[SH(s,o,a,l)]=!0,t.borderSkipped=n}function SH(t,e,i,r){return r?(t=oNe(t,e,i),t=EH(t,i,e)):t=EH(t,e,i),t}function oNe(t,e,i){return t===e?i:t===i?e:t}function EH(t,e,i){return t==="start"?e:t==="end"?i:t}function aNe(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class lNe extends lc{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return xH(e,i,r,s)}parseArrayData(e,i,r,s){return xH(e,i,r,s)}parseObjectData(e,i,r,s){const{iScale:n,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=n.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let m,y,v,w;for(m=r,y=r+s;m<y;++m)w=i[m],v={},v[n.axis]=n.parse(Hh(w,u),m),p.push(uee(Hh(w,h),v,o,m));return p}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);const n=r._custom;n&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:r,vScale:s}=i,n=this.getParsed(e),o=n._custom,a=xk(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+r.getLabelForValue(n[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){const n=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(i,s);for(let y=i;y<i+r;y++){const v=this.getParsed(y),w=n||wt(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),S=this._calculateBarIndexPixels(y,h),E=(v._stacks||{})[a.axis],I={horizontal:u,base:w.base,enableBorderRadius:!E||xk(v._custom)||o===E._top||o===E._bottom,x:u?w.head:S.center,y:u?S.center:w.head,height:u?S.size:Math.abs(w.size),width:u?Math.abs(w.size):S.size};m&&(I.options=p||this.resolveDataElementOptions(y,e[y].active?"active":s));const D=I.options||e[y].options;nNe(I,D,E,o),aNe(I,D,h.ratio),this.updateElement(e[y],y,I,s)}}_getStacks(e,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),n=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(i),l=a&&a[r.axis],u=h=>{const p=h._parsed.find(y=>y[r.axis]===l),m=p&&p[h.vScale.axis];if(wt(m)||isNaN(m))return!0};for(const h of s)if(!(i!==void 0&&u(h))&&((n===!1||o.indexOf(h.stack)===-1||n===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===i).shift()}_getAxis(){const e={},i=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[ut(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,r){const s=this._getStacks(e,r),n=i!==void 0?s.indexOf(i):-1;return n===-1?s.length-1:n}_getRuler(){const e=this.options,i=this._cachedMeta,r=i.iScale,s=[];let n,o;for(n=0,o=i.data.length;n<o;++n)s.push(r.getPixelForValue(this.getParsed(n)[r.axis],n));const a=e.barThickness;return{min:a||Q3e(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:n,minBarLength:o}}=this,a=n||0,l=this.getParsed(e),u=l._custom,h=xk(u);let p=l[i.axis],m=0,y=r?this.applyStack(i,l,r):p,v,w;y!==p&&(m=y-p,y=p),h&&(p=u.barStart,y=u.barEnd-u.barStart,p!==0&&Il(p)!==Il(u.barEnd)&&(m=0),m+=p);const S=!wt(n)&&!h?n:m;let E=i.getPixelForValue(S);if(this.chart.getDataVisibility(e)?v=i.getPixelForValue(m+y):v=E,w=v-E,Math.abs(w)<o){w=rNe(w,i,a)*o,p===a&&(E-=w/2);const I=i.getPixelForDecimal(0),D=i.getPixelForDecimal(1),O=Math.min(I,D),A=Math.max(I,D);E=Math.max(Math.min(E,A),O),v=E+w,r&&!h&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(v)-i.getValueForPixel(E))}if(E===i.getPixelForValue(a)){const I=Il(w)*i.getLineWidthForValue(a)/2;E+=I,w-=I}return{size:w,base:E,head:v,center:v+w/2}}_calculateBarIndexPixels(e,i){const r=i.scale,s=this.options,n=s.skipNull,o=ut(s.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(i.grouped){const h=n?this._getStackCount(e):i.stackCount,p=s.barThickness==="flex"?tNe(e,i,s,h*u):eNe(e,i,s,h*u),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(ut(m,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+y;a=p.start+p.chunk*v+p.chunk/2,l=Math.min(o,p.chunk*p.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length;let n=0;for(;n<s;++n)this.getParsed(n)[i.axis]!==null&&!r[n].hidden&&r[n].draw(this._ctx)}}class uNe extends lc{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){const n=super.parsePrimitiveData(e,i,r,s);for(let o=0;o<n.length;o++)n[o]._custom=this.resolveDataElementOptions(o+r).radius;return n}parseArrayData(e,i,r,s){const n=super.parseArrayData(e,i,r,s);for(let o=0;o<n.length;o++){const a=i[r+o];n[o]._custom=ut(a[2],this.resolveDataElementOptions(o+r).radius)}return n}parseObjectData(e,i,r,s){const n=super.parseObjectData(e,i,r,s);for(let o=0;o<n.length;o++){const a=i[r+o];n[o]._custom=ut(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return n}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:n}=i,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=n.getLabelForValue(o.y),u=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){const n=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(i,s),h=o.axis,p=a.axis;for(let m=i;m<i+r;m++){const y=e[m],v=!n&&this.getParsed(m),w={},S=w[h]=n?o.getPixelForDecimal(.5):o.getPixelForValue(v[h]),E=w[p]=n?a.getBasePixel():a.getPixelForValue(v[p]);w.skip=isNaN(S)||isNaN(E),u&&(w.options=l||this.resolveDataElementOptions(m,y.active?"active":s),n&&(w.options.radius=0)),this.updateElement(y,m,w,s)}}resolveDataElementOptions(e,i){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const n=s.radius;return i!=="active"&&(s.radius=0),s.radius+=ut(r&&r._custom,n),s}}function cNe(t,e,i){let r=1,s=1,n=0,o=0;if(e<bi){const a=t,l=a+e,u=Math.cos(a),h=Math.sin(a),p=Math.cos(l),m=Math.sin(l),y=(D,O,A)=>Nw(D,a,l,!0)?1:Math.max(O,O*i,A,A*i),v=(D,O,A)=>Nw(D,a,l,!0)?-1:Math.min(O,O*i,A,A*i),w=y(0,u,p),S=y(rr,h,m),E=v(Lt,u,p),I=v(Lt+rr,h,m);r=(w-E)/2,s=(S-I)/2,n=-(w+E)/2,o=-(S+I)/2}return{ratioX:r,ratioY:s,offsetX:n,offsetY:o}}class N3 extends lc{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((n,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let n=l=>+r[l];if(_t(r[e])){const{key:l="value"}=this._parsing;n=u=>+Hh(r[u],l)}let o,a;for(o=e,a=e+i;o<a;++o)s._parsed[o]=n(o)}}_getRotation(){return _a(this.options.rotation-90)}_getCircumference(){return _a(this.options.circumference)}_getRotationExtents(){let e=bi,i=-bi;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,n=s._getRotation(),o=s._getCircumference();e=Math.min(e,n),i=Math.max(i,n+o)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,n=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(wLe(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:y,offsetX:v,offsetY:w}=cNe(p,h,l),S=(r.width-o)/m,E=(r.height-o)/y,I=Math.max(Math.min(S,E)/2,0),D=LQ(this.options.radius,I),O=Math.max(D*l,0),A=(D-O)/this._getVisibleDatasetWeightTotal();this.offsetX=v*D,this.offsetY=w*D,s.total=this.calculateTotal(),this.outerRadius=D-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*u,0),this.updateElements(n,0,n.length,e)}_circumference(e,i){const r=this.options,s=this._cachedMeta,n=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*n/bi)}updateElements(e,i,r,s){const n=s==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,m=n&&u.animateScale,y=m?0:this.innerRadius,v=m?0:this.outerRadius,{sharedOptions:w,includeOptions:S}=this._getSharedOptions(i,s);let E=this._getRotation(),I;for(I=0;I<i;++I)E+=this._circumference(I,n);for(I=i;I<i+r;++I){const D=this._circumference(I,n),O=e[I],A={x:h+this.offsetX,y:p+this.offsetY,startAngle:E,endAngle:E+D,circumference:D,outerRadius:v,innerRadius:y};S&&(A.options=w||this.resolveDataElementOptions(I,O.active?"active":s)),E+=D,this.updateElement(O,I,A,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let r=0,s;for(s=0;s<i.length;s++){const n=e._parsed[s];n!==null&&!isNaN(n)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(n))}return r}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?bi*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart,s=r.data.labels||[],n=v1(i._parsed[e],r.options.locale);return{label:s[e]||"",value:n}}getMaxBorderWidth(e){let i=0;const r=this.chart;let s,n,o,a,l;if(!e){for(s=0,n=r.data.datasets.length;s<n;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,n=e.length;s<n;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){const n=this.resolveDataElementOptions(r);i=Math.max(i,n.offset||0,n.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(ut(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class hNe extends lc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:n}=i,o=this.chart._animationsDisabled;let{start:a,count:l}=BQ(i,s,o);this._drawStart=a,this._drawCount=l,GQ(i)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!n._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,a,l,e)}updateElements(e,i,r,s){const n=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s),m=o.axis,y=a.axis,{spanGaps:v,segment:w}=this.options,S=Iy(v)?v:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||n||s==="none",I=i+r,D=e.length;let O=i>0&&this.getParsed(i-1);for(let A=0;A<D;++A){const z=e[A],_=E?z:{};if(A<i||A>=I){_.skip=!0;continue}const Z=this.getParsed(A),Q=wt(Z[y]),ae=_[m]=o.getPixelForValue(Z[m],A),ge=_[y]=n||Q?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,Z,l):Z[y],A);_.skip=isNaN(ae)||isNaN(ge)||Q,_.stop=A>0&&Math.abs(Z[m]-O[m])>S,w&&(_.parsed=Z,_.raw=u.data[A]),p&&(_.options=h||this.resolveDataElementOptions(A,z.active?"active":s)),E||this.updateElement(z,A,_,s),O=Z}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,n,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class cee extends lc{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((n,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart,s=r.data.labels||[],n=v1(i._parsed[e].r,r.options.locale);return{label:s[e]||"",value:n}}parseObjectData(e,i,r,s){return QQ.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{const n=this.getParsed(s).r;!isNaN(n)&&this.chart.getDataVisibility(s)&&(n<i.min&&(i.min=n),n>i.max&&(i.max=n))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),n=Math.max(s/2,0),o=Math.max(r.cutoutPercentage?n/100*r.cutoutPercentage:1,0),a=(n-o)/e.getVisibleDatasetCount();this.outerRadius=n-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,i,r,s){const n=s==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,p=u.yCenter,m=u.getIndexAngle(0)-.5*Lt;let y=m,v;const w=360/this.countVisibleElements();for(v=0;v<i;++v)y+=this._computeAngle(v,s,w);for(v=i;v<i+r;v++){const S=e[v];let E=y,I=y+this._computeAngle(v,s,w),D=o.getDataVisibility(v)?u.getDistanceFromCenterForValue(this.getParsed(v).r):0;y=I,n&&(l.animateScale&&(D=0),l.animateRotate&&(E=I=m));const O={x:h,y:p,innerRadius:0,outerRadius:D,startAngle:E,endAngle:I,options:this.resolveDataElementOptions(v,S.active?"active":s)};this.updateElement(S,v,O,s)}}countVisibleElements(){const e=this._cachedMeta;let i=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?_a(this.resolveDataElementOptions(e,i).angle||r):0}}class dNe extends N3{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class pNe extends lc{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return QQ.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta,r=i.dataset,s=i.data||[],n=i.iScale.getLabels();if(r.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:n.length===s.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){const n=this._cachedMeta.rScale,o=s==="reset";for(let a=i;a<i+r;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":s),h=n.getPointPositionForValue(a,this.getParsed(a).r),p=o?n.xCenter:h.x,m=o?n.yCenter:h.y,y={x:p,y:m,angle:h.angle,skip:isNaN(p)||isNaN(m),options:u};this.updateElement(l,a,y,s)}}}class fNe extends lc{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:n}=i,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=n.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:n,count:o}=BQ(i,r,s);if(this._drawStart=n,this._drawCount=o,GQ(i)&&(n=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,n,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){const n=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),p=this.getSharedOptions(h),m=this.includeOptions(s,p),y=o.axis,v=a.axis,{spanGaps:w,segment:S}=this.options,E=Iy(w)?w:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||n||s==="none";let D=i>0&&this.getParsed(i-1);for(let O=i;O<i+r;++O){const A=e[O],z=this.getParsed(O),_=I?A:{},Z=wt(z[v]),Q=_[y]=o.getPixelForValue(z[y],O),ae=_[v]=n||Z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,z,l):z[v],O);_.skip=isNaN(Q)||isNaN(ae)||Z,_.stop=O>0&&Math.abs(z[y]-D[y])>E,S&&(_.parsed=z,_.raw=u.data[O]),m&&(_.options=p||this.resolveDataElementOptions(O,A.active?"active":s)),I||this.updateElement(A,O,_,s),D=z}this.updateSharedOptions(p,s,h)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const n=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,n,o)/2}}var mNe=Object.freeze({__proto__:null,BarController:lNe,BubbleController:uNe,DoughnutController:N3,LineController:hNe,PieController:dNe,PolarAreaController:cee,RadarController:pNe,ScatterController:fNe});function Ed(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class F3{static override(e){Object.assign(F3.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ed()}parse(){return Ed()}format(){return Ed()}add(){return Ed()}diff(){return Ed()}startOf(){return Ed()}endOf(){return Ed()}}var hee={_date:F3};function gNe(t,e,i,r){const{controller:s,data:n,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&n.length){const u=a._reversePixels?OLe:Qu;if(r){if(s._sharedOptions){const h=n[0],p=typeof h.getRange=="function"&&h.getRange(e);if(p){const m=u(n,e,i-p),y=u(n,e,i+p);return{lo:m.lo,hi:y.hi}}}}else{const h=u(n,e,i);if(l){const{vScale:p}=s._cachedMeta,{_parsed:m}=t,y=m.slice(0,h.lo+1).reverse().findIndex(w=>!wt(w[p.axis]));h.lo-=Math.max(0,y);const v=m.slice(h.hi).findIndex(w=>!wt(w[p.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:n.length-1}}function sM(t,e,i,r,s){const n=t.getSortedVisibleDatasetMetas(),o=i[e];for(let a=0,l=n.length;a<l;++a){const{index:u,data:h}=n[a],{lo:p,hi:m}=gNe(n[a],e,o,s);for(let y=p;y<=m;++y){const v=h[y];v.skip||r(v,u,y)}}}function yNe(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(r,s){const n=e?Math.abs(r.x-s.x):0,o=i?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}function Sk(t,e,i,r,s){const n=[];return!s&&!t.isPointInArea(e)||sM(t,i,e,function(a,l,u){!s&&!ec(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&n.push({element:a,datasetIndex:l,index:u})},!0),n}function bNe(t,e,i,r){let s=[];function n(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=jQ(o,{x:e.x,y:e.y});Nw(p,u,h)&&s.push({element:o,datasetIndex:a,index:l})}return sM(t,i,e,n),s}function vNe(t,e,i,r,s,n){let o=[];const a=yNe(i);let l=Number.POSITIVE_INFINITY;function u(h,p,m){const y=h.inRange(e.x,e.y,s);if(r&&!y)return;const v=h.getCenterPoint(s);if(!(!!n||t.isPointInArea(v))&&!y)return;const S=a(e,v);S<l?(o=[{element:h,datasetIndex:p,index:m}],l=S):S===l&&o.push({element:h,datasetIndex:p,index:m})}return sM(t,i,e,u),o}function Ek(t,e,i,r,s,n){return!n&&!t.isPointInArea(e)?[]:i==="r"&&!r?bNe(t,e,i,s):vNe(t,e,i,r,s,n)}function CH(t,e,i,r,s){const n=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return sM(t,i,e,(l,u,h)=>{l[o]&&l[o](e[i],s)&&(n.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:n}var wNe={modes:{index(t,e,i,r){const s=sp(e,t),n=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Sk(t,s,n,r,o):Ek(t,s,n,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,p=u.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,i,r){const s=sp(e,t),n=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?Sk(t,s,n,r,o):Ek(t,s,n,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,i,r){const s=sp(e,t),n=i.axis||"xy",o=i.includeInvisible||!1;return Sk(t,s,n,r,o)},nearest(t,e,i,r){const s=sp(e,t),n=i.axis||"xy",o=i.includeInvisible||!1;return Ek(t,s,n,i.intersect,r,o)},x(t,e,i,r){const s=sp(e,t);return CH(t,s,"x",i.intersect,r)},y(t,e,i,r){const s=sp(e,t);return CH(t,s,"y",i.intersect,r)}}};const dee=["left","top","right","bottom"];function Xb(t,e){return t.filter(i=>i.pos===e)}function TH(t,e){return t.filter(i=>dee.indexOf(i.pos)===-1&&i.box.axis===e)}function Kb(t,e){return t.sort((i,r)=>{const s=e?r:i,n=e?i:r;return s.weight===n.weight?s.index-n.index:s.weight-n.weight})}function _Ne(t){const e=[];let i,r,s,n,o,a;for(i=0,r=(t||[]).length;i<r;++i)s=t[i],{position:n,options:{stack:o,stackWeight:a=1}}=s,e.push({index:i,box:s,pos:n,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&n+o,stackWeight:a});return e}function xNe(t){const e={};for(const i of t){const{stack:r,pos:s,stackWeight:n}=i;if(!r||!dee.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}function SNe(t,e){const i=xNe(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let n,o,a;for(n=0,o=t.length;n<o;++n){a=t[n];const{fullSize:l}=a.box,u=i[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return i}function ENe(t){const e=_Ne(t),i=Kb(e.filter(u=>u.box.fullSize),!0),r=Kb(Xb(e,"left"),!0),s=Kb(Xb(e,"right")),n=Kb(Xb(e,"top"),!0),o=Kb(Xb(e,"bottom")),a=TH(e,"x"),l=TH(e,"y");return{fullSize:i,leftAndTop:r.concat(n),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Xb(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:n.concat(o).concat(a)}}function MH(t,e,i,r){return Math.max(t[i],e[i])+Math.max(t[r],e[r])}function pee(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function CNe(t,e,i,r){const{pos:s,box:n}=i,o=t.maxPadding;if(!_t(s)){i.size&&(t[s]-=i.size);const p=r[i.stack]||{size:0,count:1};p.size=Math.max(p.size,i.horizontal?n.height:n.width),i.size=p.size/p.count,t[s]+=i.size}n.getPadding&&pee(o,n.getPadding());const a=Math.max(0,e.outerWidth-MH(o,t,"left","right")),l=Math.max(0,e.outerHeight-MH(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:u,other:h}:{same:h,other:u}}function TNe(t){const e=t.maxPadding;function i(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function MNe(t,e){const i=e.maxPadding;function r(s){const n={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{n[o]=Math.max(e[o],i[o])}),n}return r(t?["left","right"]:["top","bottom"])}function c0(t,e,i,r){const s=[];let n,o,a,l,u,h;for(n=0,o=t.length,u=0;n<o;++n){a=t[n],l=a.box,l.update(a.width||e.w,a.height||e.h,MNe(a.horizontal,e));const{same:p,other:m}=CNe(e,i,a,r);u|=p&&s.length,h=h||m,l.fullSize||s.push(a)}return u&&c0(s,e,i,r)||h}function J_(t,e,i,r,s){t.top=i,t.left=e,t.right=e+r,t.bottom=i+s,t.width=r,t.height=s}function kH(t,e,i,r){const s=i.padding;let{x:n,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const p=e.w*h,m=u.size||l.height;Lw(u.start)&&(o=u.start),l.fullSize?J_(l,s.left,o,i.outerWidth-s.right-s.left,m):J_(l,e.left+u.placed,o,p,m),u.start=o,u.placed+=p,o=l.bottom}else{const p=e.h*h,m=u.size||l.width;Lw(u.start)&&(n=u.start),l.fullSize?J_(l,n,s.top,m,i.outerHeight-s.bottom-s.top):J_(l,n,e.top+u.placed,m,p),u.start=n,u.placed+=p,n=l.right}}e.x=n,e.y=o}var bs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,r){if(!t)return;const s=_s(t.options.layout.padding),n=Math.max(e-s.width,0),o=Math.max(i-s.height,0),a=ENe(t.boxes),l=a.vertical,u=a.horizontal;Jt(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,S)=>S.box.options&&S.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:i,padding:s,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},s);pee(m,_s(r));const y=Object.assign({maxPadding:m,w:n,h:o,x:s.left,y:s.top},s),v=SNe(l.concat(u),p);c0(a.fullSize,y,p,v),c0(l,y,p,v),c0(u,y,p,v)&&c0(l,y,p,v),TNe(y),kH(a.leftAndTop,y,p,v),y.x+=y.w,y.y+=y.h,kH(a.rightAndBottom,y,p,v),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Jt(a.chartArea,w=>{const S=w.box;Object.assign(S,t.chartArea),S.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class fee{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,r){}removeEventListener(e,i,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,r,s){return i=Math.max(0,i||e.width),r=r||e.height,{width:i,height:Math.max(0,s?Math.floor(i/s):r)}}isAttached(e){return!0}updateConfig(e){}}class kNe extends fee{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const MS="$chartjs",RNe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},RH=t=>t===null||t==="";function INe(t,e){const i=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[MS]={initial:{height:r,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",RH(s)){const n=dH(t,"width");n!==void 0&&(t.width=n)}if(RH(r))if(t.style.height==="")t.height=t.width/(e||2);else{const n=dH(t,"height");n!==void 0&&(t.height=n)}return t}const mee=T3e?{passive:!0}:!1;function $Ne(t,e,i){t&&t.addEventListener(e,i,mee)}function ANe(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,mee)}function ONe(t,e){const i=RNe[t.type]||t.type,{x:r,y:s}=sp(t,e);return{type:i,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function RC(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function PNe(t,e,i){const r=t.canvas,s=new MutationObserver(n=>{let o=!1;for(const a of n)o=o||RC(a.addedNodes,r),o=o&&!RC(a.removedNodes,r);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function DNe(t,e,i){const r=t.canvas,s=new MutationObserver(n=>{let o=!1;for(const a of n)o=o||RC(a.removedNodes,r),o=o&&!RC(a.addedNodes,r);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const Fw=new Map;let IH=0;function gee(){const t=window.devicePixelRatio;t!==IH&&(IH=t,Fw.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function LNe(t,e){Fw.size||window.addEventListener("resize",gee),Fw.set(t,e)}function NNe(t){Fw.delete(t),Fw.size||window.removeEventListener("resize",gee)}function FNe(t,e,i){const r=t.canvas,s=r&&L3(r);if(!s)return;const n=HQ((a,l)=>{const u=s.clientWidth;i(a,l),u<s.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||n(u,h)});return o.observe(s),LNe(t,n),o}function Ck(t,e,i){i&&i.disconnect(),e==="resize"&&NNe(t)}function jNe(t,e,i){const r=t.canvas,s=HQ(n=>{t.ctx!==null&&i(ONe(n,t))},t);return $Ne(r,e,s),s}class zNe extends fee{acquireContext(e,i){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(INe(e,i),r):null}releaseContext(e){const i=e.canvas;if(!i[MS])return!1;const r=i[MS].initial;["height","width"].forEach(n=>{const o=r[n];wt(o)?i.removeAttribute(n):i.setAttribute(n,o)});const s=r.style||{};return Object.keys(s).forEach(n=>{i.style[n]=s[n]}),i.width=i.width,delete i[MS],!0}addEventListener(e,i,r){this.removeEventListener(e,i);const s=e.$proxies||(e.$proxies={}),o={attach:PNe,detach:DNe,resize:FNe}[i]||jNe;s[i]=o(e,i,r)}removeEventListener(e,i){const r=e.$proxies||(e.$proxies={}),s=r[i];if(!s)return;({attach:Ck,detach:Ck,resize:Ck}[i]||ANe)(e,i,s),r[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,r,s){return C3e(e,i,r,s)}isAttached(e){const i=e&&L3(e);return!!(i&&i.isConnected)}}function VNe(t){return!D3()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?kNe:zNe}let Ul=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}hasValue(){return Iy(this.x)&&Iy(this.y)}getProps(e,i){const r=this.$animations;if(!i||!r)return this;const s={};return e.forEach(n=>{s[n]=r[n]&&r[n].active()?r[n]._to:this[n]}),s}};function UNe(t,e){const i=t.options.ticks,r=HNe(t),s=Math.min(i.maxTicksLimit||r,r),n=i.major.enabled?GNe(e):[],o=n.length,a=n[0],l=n[o-1],u=[];if(o>s)return WNe(e,u,n,o/s),u;const h=BNe(n,e,s);if(o>0){let p,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(Z_(e,u,h,wt(y)?0:a-y,a),p=0,m=o-1;p<m;p++)Z_(e,u,h,n[p],n[p+1]);return Z_(e,u,h,l,wt(y)?e.length:l+y),u}return Z_(e,u,h),u}function HNe(t){const e=t.options.offset,i=t._tickSize(),r=t._length/i+(e?0:1),s=t._maxLength/i;return Math.floor(Math.min(r,s))}function BNe(t,e,i){const r=qNe(t),s=e.length/i;if(!r)return Math.max(s,1);const n=kLe(r);for(let o=0,a=n.length-1;o<a;o++){const l=n[o];if(l>s)return l}return Math.max(s,1)}function GNe(t){const e=[];let i,r;for(i=0,r=t.length;i<r;i++)t[i].major&&e.push(i);return e}function WNe(t,e,i,r){let s=0,n=i[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===n&&(e.push(t[o]),s++,n=i[s*r])}function Z_(t,e,i,r,s){const n=ut(r,0),o=Math.min(ut(s,t.length),t.length);let a=0,l,u,h;for(i=Math.ceil(i),s&&(l=s-r,i=l/Math.floor(l/i)),h=n;h<0;)a++,h=Math.round(n+a*i);for(u=Math.max(n,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(n+a*i))}function qNe(t){const e=t.length;let i,r;if(e<2)return!1;for(r=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==r)return!1;return r}const YNe=t=>t==="left"?"right":t==="right"?"left":t,$H=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i,AH=(t,e)=>Math.min(e||t,t);function OH(t,e){const i=[],r=t.length/e,s=t.length;let n=0;for(;n<s;n+=r)i.push(t[Math.floor(n)]);return i}function JNe(t,e,i){const r=t.ticks.length,s=Math.min(e,r-1),n=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),u;if(!(i&&(r===1?u=Math.max(l-n,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(s-1))/2,l+=s<e?u:-u,l<n-a||l>o+a)))return l}function ZNe(t,e){Jt(t,i=>{const r=i.gc,s=r.length/2;let n;if(s>e){for(n=0;n<s;++n)delete i.data[r[n]];r.splice(0,s)}})}function Qb(t){return t.drawTicks?t.tickLength:0}function PH(t,e){if(!t.display)return 0;const i=_r(t.font,e),r=_s(t.padding);return(Ei(t.text)?t.text.length:1)*i.lineHeight+r.height}function XNe(t,e){return Kh(t,{scale:e,type:"scale"})}function KNe(t,e,i){return Kh(t,{tick:i,index:e,type:"tick"})}function QNe(t,e,i){let r=R3(t);return(i&&e!=="right"||!i&&e==="right")&&(r=YNe(r)),r}function eFe(t,e,i,r){const{top:s,left:n,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let p=0,m,y,v;const w=o-s,S=a-n;if(t.isHorizontal()){if(y=ss(r,n,a),_t(i)){const E=Object.keys(i)[0],I=i[E];v=h[E].getPixelForValue(I)+w-e}else i==="center"?v=(u.bottom+u.top)/2+w-e:v=$H(t,i,e);m=a-n}else{if(_t(i)){const E=Object.keys(i)[0],I=i[E];y=h[E].getPixelForValue(I)-S+e}else i==="center"?y=(u.left+u.right)/2-S+e:y=$H(t,i,e);v=ss(r,o,s),p=i==="left"?-rr:rr}return{titleX:y,titleY:v,maxWidth:m,rotation:p}}class bf extends Ul{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:r,_suggestedMax:s}=this;return e=Hn(e,Number.POSITIVE_INFINITY),i=Hn(i,Number.NEGATIVE_INFINITY),r=Hn(r,Number.POSITIVE_INFINITY),s=Hn(s,Number.NEGATIVE_INFINITY),{min:Hn(e,r),max:Hn(i,s),minDefined:Hi(e),maxDefined:Hi(i)}}getMinMax(e){let{min:i,max:r,minDefined:s,maxDefined:n}=this.getUserBounds(),o;if(s&&n)return{min:i,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),s||(i=Math.min(i,o.min)),n||(r=Math.max(r,o.max));return i=n&&i>r?r:i,r=s&&i>r?i:r,{min:Hn(i,Hn(r,i)),max:Hn(r,Hn(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){li(this.options.beforeUpdate,[this])}update(e,i,r){const{beginAtZero:s,grace:n,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r3e(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?OH(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=UNe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,r;this.isHorizontal()?(i=this.left,r=this.right):(i=this.top,r=this.bottom,e=!e),this._startPixel=i,this._endPixel=r,this._reversePixels=e,this._length=r-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){li(this.options.afterUpdate,[this])}beforeSetDimensions(){li(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){li(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),li(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){li(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let r,s,n;for(r=0,s=e.length;r<s;r++)n=e[r],n.label=li(i.callback,[n.value,r,e],this)}afterTickToLabelConversion(){li(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){li(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,r=AH(this.ticks.length,e.ticks.maxTicksLimit),s=i.minRotation||0,n=i.maxRotation;let o=s,a,l,u;if(!this._isVisible()||!i.display||s>=n||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,y=zr(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),p+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-Qb(e.grid)-i.padding-PH(e.title,this.chart.options.font),u=Math.sqrt(p*p+m*m),o=M3(Math.min(Math.asin(zr((h.highest.height+6)/a,-1,1)),Math.asin(zr(l/u,-1,1))-Math.asin(zr(m/u,-1,1)))),o=Math.max(s,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){li(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){li(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:r,title:s,grid:n}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=PH(s,i.options.font);if(a?(e.width=this.maxWidth,e.height=Qb(n)+l):(e.height=this.maxHeight,e.width=Qb(n)+l),r.display&&this.ticks.length){const{first:u,last:h,widest:p,highest:m}=this._getLabelSizes(),y=r.padding*2,v=_a(this.labelRotation),w=Math.cos(v),S=Math.sin(v);if(a){const E=r.mirror?0:S*p.width+w*m.height;e.height=Math.min(this.maxHeight,e.height+E+y)}else{const E=r.mirror?0:w*p.width+S*m.height;e.width=Math.min(this.maxWidth,e.width+E+y)}this._calculatePadding(u,h,S,w)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,r,s){const{ticks:{align:n,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?u?(m=s*e.width,y=r*i.height):(m=r*e.height,y=s*i.width):n==="start"?y=i.width:n==="end"?m=e.width:n!=="inner"&&(m=e.width/2,y=i.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((y-p+o)*this.width/(this.width-p),0)}else{let h=i.height/2,p=e.height/2;n==="start"?(h=0,p=e.height):n==="end"&&(h=i.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){li(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,r;for(i=0,r=e.length;i<r;i++)wt(e[i].label)&&(e.splice(i,1),r--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let r=this.ticks;i<r.length&&(r=OH(r,i)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,r){const{ctx:s,_longestTextCache:n}=this,o=[],a=[],l=Math.floor(i/AH(i,r));let u=0,h=0,p,m,y,v,w,S,E,I,D,O,A;for(p=0;p<i;p+=l){if(v=e[p].label,w=this._resolveTickFontOptions(p),s.font=S=w.string,E=n[S]=n[S]||{data:{},gc:[]},I=w.lineHeight,D=O=0,!wt(v)&&!Ei(v))D=MC(s,E.data,E.gc,D,v),O=I;else if(Ei(v))for(m=0,y=v.length;m<y;++m)A=v[m],!wt(A)&&!Ei(A)&&(D=MC(s,E.data,E.gc,D,A),O+=I);o.push(D),a.push(O),u=Math.max(D,u),h=Math.max(O,h)}ZNe(n,i);const z=o.indexOf(u),_=a.indexOf(h),Z=Q=>({width:o[Q]||0,height:a[Q]||0});return{first:Z(0),last:Z(i-1),widest:Z(z),highest:Z(_),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return ALe(this._alignToPixels?Sd(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const r=i[e];return r.$context||(r.$context=KNe(this.getContext(),e,r))}return this.$context||(this.$context=XNe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=_a(this.labelRotation),r=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,a=n?n.widest.width+o:0,l=n?n.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,r=this.chart,s=this.options,{grid:n,position:o,border:a}=s,l=n.offset,u=this.isHorizontal(),p=this.ticks.length+(l?1:0),m=Qb(n),y=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,S=w/2,E=function(dt){return Sd(r,dt,w)};let I,D,O,A,z,_,Z,Q,ae,ge,ne,ve;if(o==="top")I=E(this.bottom),_=this.bottom-m,Q=I-S,ge=E(e.top)+S,ve=e.bottom;else if(o==="bottom")I=E(this.top),ge=e.top,ve=E(e.bottom)-S,_=I+S,Q=this.top+m;else if(o==="left")I=E(this.right),z=this.right-m,Z=I-S,ae=E(e.left)+S,ne=e.right;else if(o==="right")I=E(this.left),ae=e.left,ne=E(e.right)-S,z=I+S,Z=this.left+m;else if(i==="x"){if(o==="center")I=E((e.top+e.bottom)/2+.5);else if(_t(o)){const dt=Object.keys(o)[0],Ke=o[dt];I=E(this.chart.scales[dt].getPixelForValue(Ke))}ge=e.top,ve=e.bottom,_=I+S,Q=_+m}else if(i==="y"){if(o==="center")I=E((e.left+e.right)/2);else if(_t(o)){const dt=Object.keys(o)[0],Ke=o[dt];I=E(this.chart.scales[dt].getPixelForValue(Ke))}z=I-S,Z=z-m,ae=e.left,ne=e.right}const xe=ut(s.ticks.maxTicksLimit,p),Be=Math.max(1,Math.ceil(p/xe));for(D=0;D<p;D+=Be){const dt=this.getContext(D),Ke=n.setContext(dt),Qe=a.setContext(dt),gt=Ke.lineWidth,Sn=Ke.color,qs=Qe.dash||[],En=Qe.dashOffset,Cn=Ke.tickWidth,Ys=Ke.tickColor,xs=Ke.tickBorderDash||[],Ss=Ke.tickBorderDashOffset;O=JNe(this,D,l),O!==void 0&&(A=Sd(r,O,gt),u?z=Z=ae=ne=A:_=Q=ge=ve=A,y.push({tx1:z,ty1:_,tx2:Z,ty2:Q,x1:ae,y1:ge,x2:ne,y2:ve,width:gt,color:Sn,borderDash:qs,borderDashOffset:En,tickWidth:Cn,tickColor:Ys,tickBorderDash:xs,tickBorderDashOffset:Ss}))}return this._ticksLength=p,this._borderValue=I,y}_computeLabelItems(e){const i=this.axis,r=this.options,{position:s,ticks:n}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:p}=n,m=Qb(r.grid),y=m+h,v=p?-h:y,w=-_a(this.labelRotation),S=[];let E,I,D,O,A,z,_,Z,Q,ae,ge,ne,ve="middle";if(s==="top")z=this.bottom-v,_=this._getXAxisLabelAlignment();else if(s==="bottom")z=this.top+v,_=this._getXAxisLabelAlignment();else if(s==="left"){const Be=this._getYAxisLabelAlignment(m);_=Be.textAlign,A=Be.x}else if(s==="right"){const Be=this._getYAxisLabelAlignment(m);_=Be.textAlign,A=Be.x}else if(i==="x"){if(s==="center")z=(e.top+e.bottom)/2+y;else if(_t(s)){const Be=Object.keys(s)[0],dt=s[Be];z=this.chart.scales[Be].getPixelForValue(dt)+y}_=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")A=(e.left+e.right)/2-y;else if(_t(s)){const Be=Object.keys(s)[0],dt=s[Be];A=this.chart.scales[Be].getPixelForValue(dt)}_=this._getYAxisLabelAlignment(m).textAlign}i==="y"&&(l==="start"?ve="top":l==="end"&&(ve="bottom"));const xe=this._getLabelSizes();for(E=0,I=a.length;E<I;++E){D=a[E],O=D.label;const Be=n.setContext(this.getContext(E));Z=this.getPixelForTick(E)+n.labelOffset,Q=this._resolveTickFontOptions(E),ae=Q.lineHeight,ge=Ei(O)?O.length:1;const dt=ge/2,Ke=Be.color,Qe=Be.textStrokeColor,gt=Be.textStrokeWidth;let Sn=_;o?(A=Z,_==="inner"&&(E===I-1?Sn=this.options.reverse?"left":"right":E===0?Sn=this.options.reverse?"right":"left":Sn="center"),s==="top"?u==="near"||w!==0?ne=-ge*ae+ae/2:u==="center"?ne=-xe.highest.height/2-dt*ae+ae:ne=-xe.highest.height+ae/2:u==="near"||w!==0?ne=ae/2:u==="center"?ne=xe.highest.height/2-dt*ae:ne=xe.highest.height-ge*ae,p&&(ne*=-1),w!==0&&!Be.showLabelBackdrop&&(A+=ae/2*Math.sin(w))):(z=Z,ne=(1-ge)*ae/2);let qs;if(Be.showLabelBackdrop){const En=_s(Be.backdropPadding),Cn=xe.heights[E],Ys=xe.widths[E];let xs=ne-En.top,Ss=0-En.left;switch(ve){case"middle":xs-=Cn/2;break;case"bottom":xs-=Cn;break}switch(_){case"center":Ss-=Ys/2;break;case"right":Ss-=Ys;break;case"inner":E===I-1?Ss-=Ys:E>0&&(Ss-=Ys/2);break}qs={left:Ss,top:xs,width:Ys+En.width,height:Cn+En.height,color:Be.backdropColor}}S.push({label:O,font:Q,textOffset:ne,options:{rotation:w,color:Ke,strokeColor:Qe,strokeWidth:gt,textAlign:Sn,textBaseline:ve,translation:[A,z],backdrop:qs}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-_a(this.labelRotation))return e==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:r,mirror:s,padding:n}}=this.options,o=this._getLabelSizes(),a=e+n,l=o.widest.width;let u,h;return i==="left"?s?(h=this.right+n,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h=this.left)):i==="right"?s?(h=this.left+n,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:r,top:s,width:n,height:o}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(r,s,n,o),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(n=>n.value===e);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const i=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const a=(l,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(i.display)for(n=0,o=s.length;n<o;++n){const l=s[n];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:r,grid:s}}=this,n=r.setContext(this.getContext()),o=r.display?n.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,p,m;this.isHorizontal()?(u=Sd(e,this.left,o)-o/2,h=Sd(e,this.right,a)+a/2,p=m=l):(p=Sd(e,this.top,o)-o/2,m=Sd(e,this.bottom,a)+a/2,u=h=l),i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.beginPath(),i.moveTo(u,p),i.lineTo(h,m),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&tM(r,s);const n=this.getLabelItems(e);for(const o of n){const a=o.options,l=o.font,u=o.label,h=o.textOffset;uf(r,u,0,h,l,a)}s&&iM(r)}drawTitle(){const{ctx:e,options:{position:i,title:r,reverse:s}}=this;if(!r.display)return;const n=_r(r.font),o=_s(r.padding),a=r.align;let l=n.lineHeight/2;i==="bottom"||i==="center"||_t(i)?(l+=o.bottom,Ei(r.text)&&(l+=n.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:p,rotation:m}=eFe(this,l,i,a);uf(e,r.text,0,0,n,{color:r.color,maxWidth:p,rotation:m,textAlign:QNe(a,i,s),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,r=ut(e.grid&&e.grid.z,-1),s=ut(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==bf.prototype.draw?[{z:i,draw:n=>{this.draw(n)}}]:[{z:r,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let n,o;for(n=0,o=i.length;n<o;++n){const a=i[n];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return _r(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class X_{constructor(e,i,r){this.type=e,this.scope=i,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let r;rFe(i)&&(r=this.register(i));const s=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in s||(s[n]=e,tFe(e,o,r),this.override&&Ci.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const i=this.items,r=e.id,s=this.scope;r in i&&delete i[r],s&&r in Ci[s]&&(delete Ci[s][r],this.override&&delete lf[r])}}function tFe(t,e,i){const r=Dw(Object.create(null),[i?Ci.get(i):{},Ci.get(e),t.defaults]);Ci.set(e,r),t.defaultRoutes&&iFe(e,t.defaultRoutes),t.descriptors&&Ci.describe(e,t.descriptors)}function iFe(t,e){Object.keys(e).forEach(i=>{const r=i.split("."),s=r.pop(),n=[t].concat(r).join("."),o=e[i].split("."),a=o.pop(),l=o.join(".");Ci.route(n,s,l,a)})}function rFe(t){return"id"in t&&"defaults"in t}class sFe{constructor(){this.controllers=new X_(lc,"datasets",!0),this.elements=new X_(Ul,"elements"),this.plugins=new X_(Object,"plugins"),this.scales=new X_(bf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,r){[...i].forEach(s=>{const n=r||this._getRegistryForType(s);r||n.isForType(s)||n===this.plugins&&s.id?this._exec(e,n,s):Jt(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,i,r){const s=T3(e);li(r["before"+s],[],r),i[e](r),li(r["after"+s],[],r)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const r=this._typedRegistries[i];if(r.isForType(e))return r}return this.plugins}_get(e,i,r){const s=i.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var cl=new sFe;class nFe{constructor(){this._init=[]}notify(e,i,r,s){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(n,e,i,r);return i==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,i,r,s){s=s||{};for(const n of e){const o=n.plugin,a=o[r],l=[i,s,n.options];if(li(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const r=e&&e.config,s=ut(r.options&&r.options.plugins,{}),n=oFe(r);return s===!1&&!i?[]:lFe(e,n,s,i)}_notifyStateChanges(e){const i=this._oldCache||[],r=this._cache,s=(n,o)=>n.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,r),e,"stop"),this._notify(s(r,i),e,"start")}}function oFe(t){const e={},i=[],r=Object.keys(cl.plugins.items);for(let n=0;n<r.length;n++)i.push(cl.getPlugin(r[n]));const s=t.plugins||[];for(let n=0;n<s.length;n++){const o=s[n];i.indexOf(o)===-1&&(i.push(o),e[o.id]=!0)}return{plugins:i,localIds:e}}function aFe(t,e){return!e&&t===!1?null:t===!0?{}:t}function lFe(t,{plugins:e,localIds:i},r,s){const n=[],o=t.getContext();for(const a of e){const l=a.id,u=aFe(r[l],s);u!==null&&n.push({plugin:a,options:uFe(t.config,{plugin:a,local:i[l]},u,o)})}return n}function uFe(t,{plugin:e,local:i},r,s){const n=t.pluginScopeKeys(e),o=t.getOptionScopes(r,n);return i&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oP(t,e){const i=Ci.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function cFe(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function hFe(t,e){return t===e?"_index_":"_value_"}function DH(t){if(t==="x"||t==="y"||t==="r")return t}function dFe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function aP(t,...e){if(DH(t))return t;for(const i of e){const r=i.axis||dFe(i.position)||t.length>1&&DH(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function LH(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function pFe(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(i.length)return LH(t,"x",i[0])||LH(t,"y",i[0])}return{}}function fFe(t,e){const i=lf[t.type]||{scales:{}},r=e.scales||{},s=oP(t.type,e),n=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!_t(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=aP(o,a,pFe(o,t),Ci.scales[a.type]),u=hFe(l,s),h=i.scales||{};n[o]=J0(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||oP(a,e),h=(lf[a]||{}).scales||{};Object.keys(h).forEach(p=>{const m=cFe(p,l),y=o[m+"AxisID"]||m;n[y]=n[y]||Object.create(null),J0(n[y],[{axis:m},r[y],h[p]])})}),Object.keys(n).forEach(o=>{const a=n[o];J0(a,[Ci.scales[a.type],Ci.scale])}),n}function yee(t){const e=t.options||(t.options={});e.plugins=ut(e.plugins,{}),e.scales=fFe(t,e)}function bee(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function mFe(t){return t=t||{},t.data=bee(t.data),yee(t),t}const NH=new Map,vee=new Set;function K_(t,e){let i=NH.get(t);return i||(i=e(),NH.set(t,i),vee.add(i)),i}const ev=(t,e,i)=>{const r=Hh(e,i);r!==void 0&&t.add(r)};class gFe{constructor(e){this._config=mFe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=bee(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yee(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return K_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return K_(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return K_(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,r=this.type;return K_(`${r}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const r=this._scopeCache;let s=r.get(e);return(!s||i)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,i,r){const{options:s,type:n}=this,o=this._cachedScopes(e,r),a=o.get(i);if(a)return a;const l=new Set;i.forEach(h=>{e&&(l.add(e),h.forEach(p=>ev(l,e,p))),h.forEach(p=>ev(l,s,p)),h.forEach(p=>ev(l,lf[n]||{},p)),h.forEach(p=>ev(l,Ci,p)),h.forEach(p=>ev(l,sP,p))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),vee.has(i)&&o.set(i,u),u}chartOptionScopes(){const{options:e,type:i}=this;return[e,lf[i]||{},Ci.datasets[i]||{},{type:i},Ci,sP]}resolveNamedOptions(e,i,r,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:a}=FH(this._resolverCache,e,s);let l=o;if(bFe(o,i)){n.$shared=!1,r=Bh(r)?r():r;const u=this.createResolver(e,r,a);l=$y(o,r,u)}for(const u of i)n[u]=l[u];return n}createResolver(e,i,r=[""],s){const{resolver:n}=FH(this._resolverCache,e,r);return _t(i)?$y(n,i,void 0,s):n}}function FH(t,e,i){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=i.join();let n=r.get(s);return n||(n={resolver:A3(e,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,n)),n}const yFe=t=>_t(t)&&Object.getOwnPropertyNames(t).some(e=>Bh(t[e]));function bFe(t,e){const{isScriptable:i,isIndexable:r}=JQ(t);for(const s of e){const n=i(s),o=r(s),a=(o||n)&&t[s];if(n&&(Bh(a)||yFe(a))||o&&Ei(a))return!0}return!1}var vFe="4.5.0";const wFe=["top","bottom","left","right","chartArea"];function jH(t,e){return t==="top"||t==="bottom"||wFe.indexOf(t)===-1&&e==="x"}function zH(t,e){return function(i,r){return i[t]===r[t]?i[e]-r[e]:i[t]-r[t]}}function VH(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),li(i&&i.onComplete,[t],e)}function _Fe(t){const e=t.chart,i=e.options.animation;li(i&&i.onProgress,[t],e)}function wee(t){return D3()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const kS={},UH=t=>{const e=wee(t);return Object.values(kS).filter(i=>i.canvas===e).pop()};function xFe(t,e,i){const r=Object.keys(t);for(const s of r){const n=+s;if(n>=e){const o=t[s];delete t[s],(i>0||n>e)&&(t[n+i]=o)}}}function SFe(t,e,i,r){return!i||t.type==="mouseout"?null:r?e:t}class io{static defaults=Ci;static instances=kS;static overrides=lf;static registry=cl;static version=vFe;static getChart=UH;static register(...e){cl.add(...e),HH()}static unregister(...e){cl.remove(...e),HH()}constructor(e,i){const r=this.config=new gFe(i),s=wee(e),n=UH(s);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||VNe(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=vLe(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nFe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LLe(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],kS[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Mu.listen(this,"complete",VH),Mu.listen(this,"progress",_Fe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:n}=this;return wt(e)?i&&n?n:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return cl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hH(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lH(this.canvas,this.ctx),this}stop(){return Mu.stop(this),this}resize(e,i){Mu.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const r=this.options,s=this.canvas,n=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,i,n),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hH(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),li(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Jt(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let n=[];i&&(n=n.concat(Object.keys(i).map(o=>{const a=i[o],l=aP(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Jt(n,o=>{const a=o.options,l=a.id,u=aP(l,a),h=ut(a.type,o.dtype);(a.position===void 0||jH(a.position,u)!==jH(o.dposition))&&(a.position=o.dposition),s[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const m=cl.getScale(h);p=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Jt(s,(o,a)=>{o||delete r[a]}),Jt(r,o=>{bs.configure(this,o,o.options),bs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,n)=>s.index-n.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(zH("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{i.filter(n=>n===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){const n=i[r];let o=this.getDatasetMeta(r);const a=n.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=n.indexAxis||oP(a,this.options),o.order=n.order||0,o.index=r,o.label=""+n.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=cl.getController(a),{datasetElementType:u,dataElementType:h}=Ci.datasets[a];Object.assign(l,{dataElementType:cl.getElement(h),datasetElementType:u&&cl.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Jt(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:p}=this.getDatasetMeta(u),m=!s&&n.indexOf(p)===-1;p.buildOrUpdateElements(m),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Jt(n,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(zH("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Jt(this.scales,e=>{bs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!QU(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:n}of i){const o=r==="_removeElements"?-n:n;xFe(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,r=n=>new Set(e.filter(o=>o[0]===n).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let n=1;n<i;n++)if(!QU(s,r(n)))return;return Array.from(s).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;bs.update(this,this.width,this.height,e);const i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Jt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,n)=>{s._idx=n}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Bh(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Mu.has(this)?this.attached&&!Mu.running(this)&&Mu.start(this):(this.draw(),VH({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,r=[];let s,n;for(s=0,n=i.length;s<n;++s){const o=i[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=oee(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&tM(i,s),e.controller.draw(),s&&iM(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ec(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){const n=wNe.modes[i];return typeof n=="function"?n(this,e,r,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],r=this._metasets;let s=r.filter(n=>n&&n._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Kh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(e,i){const r=this.getDatasetMeta(e);r.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){const s=r?"show":"hide",n=this.getDatasetMeta(e),o=n.controller._resolveAnimations(void 0,s);Lw(i)?(n.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(n,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Mu.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lH(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete kS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,r=(n,o)=>{i.addEventListener(this,n,o),e[n]=o},s=(n,o,a)=>{n.offsetX=o,n.offsetY=a,this._eventHandler(n)};Jt(this.options.events,n=>r(n,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),e[l]=u},s=(l,u)=>{e[l]&&(i.removeEventListener(this,l,u),delete e[l])},n=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",n),r("detach",o)};o=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),r("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Jt(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Jt(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){const s=r?"set":"remove";let n,o,a,l;for(i==="dataset"&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],r=e.map(({datasetIndex:n,index:o})=>{const a=this.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[o],index:o}});!EC(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,r){const s=this.options.hover,n=(l,u)=>l.filter(h=>!u.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=n(i,e),a=r?e:n(e,i);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,i){const r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const n=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(n||r.changed)&&this.render(),this}_handleEvent(e,i,r){const{_active:s=[],options:n}=this,o=i,a=this._getActiveElements(e,s,r,o),l=CLe(e),u=SFe(e,this._lastEvent,r,l);r&&(this._lastEvent=null,li(n.onHover,[e,a,this],this),l&&li(n.onClick,[e,a,this],this));const h=!EC(a,s);return(h||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=u,h}_getActiveElements(e,i,r,s){if(e.type==="mouseout")return[];if(!r)return i;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,s)}}function HH(){return Jt(io.instances,t=>t._plugins.invalidate())}function EFe(t,e,i){const{startAngle:r,x:s,y:n,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:u,borderJoinStyle:h}=l,p=Math.min(u/o,ps(r-i));if(t.beginPath(),t.arc(s,n,o-u/2,r+p/2,i-p/2),a>0){const m=Math.min(u/a,ps(r-i));t.arc(s,n,a+u/2,i-m/2,r+m/2,!0)}else{const m=Math.min(u/2,o*ps(r-i));if(h==="round")t.arc(s,n,m,i-Lt/2,r+Lt/2,!0);else if(h==="bevel"){const y=2*m*m,v=-y*Math.cos(i+Lt/2)+s,w=-y*Math.sin(i+Lt/2)+n,S=y*Math.cos(r+Lt/2)+s,E=y*Math.sin(r+Lt/2)+n;t.lineTo(v,w),t.lineTo(S,E)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function CFe(t,e,i){const{startAngle:r,pixelMargin:s,x:n,y:o,outerRadius:a,innerRadius:l}=e;let u=s/a;t.beginPath(),t.arc(n,o,a,r-u,i+u),l>s?(u=s/l,t.arc(n,o,l,i+u,r-u,!0)):t.arc(n,o,s,i+rr,r-rr),t.closePath(),t.clip()}function TFe(t){return $3(t,["outerStart","outerEnd","innerStart","innerEnd"])}function MFe(t,e,i,r){const s=TFe(t.options.borderRadius),n=(i-e)/2,o=Math.min(n,r*e/2),a=l=>{const u=(i-Math.min(n,l))*r/2;return zr(l,0,Math.min(n,u))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:zr(s.innerStart,0,o),innerEnd:zr(s.innerEnd,0,o)}}function im(t,e,i,r){return{x:i+t*Math.cos(e),y:r+t*Math.sin(e)}}function IC(t,e,i,r,s,n){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=e,p=Math.max(e.outerRadius+r+i-u,0),m=h>0?h+r+i+u:0;let y=0;const v=s-l;if(r){const Be=h>0?h-r:0,dt=p>0?p-r:0,Ke=(Be+dt)/2,Qe=Ke!==0?v*Ke/(Ke+r):v;y=(v-Qe)/2}const w=Math.max(.001,v*p-i/Lt)/p,S=(v-w)/2,E=l+S+y,I=s-S-y,{outerStart:D,outerEnd:O,innerStart:A,innerEnd:z}=MFe(e,m,p,I-E),_=p-D,Z=p-O,Q=E+D/_,ae=I-O/Z,ge=m+A,ne=m+z,ve=E+A/ge,xe=I-z/ne;if(t.beginPath(),n){const Be=(Q+ae)/2;if(t.arc(o,a,p,Q,Be),t.arc(o,a,p,Be,ae),O>0){const gt=im(Z,ae,o,a);t.arc(gt.x,gt.y,O,ae,I+rr)}const dt=im(ne,I,o,a);if(t.lineTo(dt.x,dt.y),z>0){const gt=im(ne,xe,o,a);t.arc(gt.x,gt.y,z,I+rr,xe+Math.PI)}const Ke=(I-z/m+(E+A/m))/2;if(t.arc(o,a,m,I-z/m,Ke,!0),t.arc(o,a,m,Ke,E+A/m,!0),A>0){const gt=im(ge,ve,o,a);t.arc(gt.x,gt.y,A,ve+Math.PI,E-rr)}const Qe=im(_,E,o,a);if(t.lineTo(Qe.x,Qe.y),D>0){const gt=im(_,Q,o,a);t.arc(gt.x,gt.y,D,E-rr,Q)}}else{t.moveTo(o,a);const Be=Math.cos(Q)*p+o,dt=Math.sin(Q)*p+a;t.lineTo(Be,dt);const Ke=Math.cos(ae)*p+o,Qe=Math.sin(ae)*p+a;t.lineTo(Ke,Qe)}t.closePath()}function kFe(t,e,i,r,s){const{fullCircles:n,startAngle:o,circumference:a}=e;let l=e.endAngle;if(n){IC(t,e,i,r,l,s);for(let u=0;u<n;++u)t.fill();isNaN(a)||(l=o+(a%bi||bi))}return IC(t,e,i,r,l,s),t.fill(),l}function RFe(t,e,i,r,s){const{fullCircles:n,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:h,borderDash:p,borderDashOffset:m,borderRadius:y}=l,v=l.borderAlign==="inner";if(!u)return;t.setLineDash(p||[]),t.lineDashOffset=m,v?(t.lineWidth=u*2,t.lineJoin=h||"round"):(t.lineWidth=u,t.lineJoin=h||"bevel");let w=e.endAngle;if(n){IC(t,e,i,r,w,s);for(let S=0;S<n;++S)t.stroke();isNaN(a)||(w=o+(a%bi||bi))}v&&CFe(t,e,w),l.selfJoin&&w-o>=Lt&&y===0&&h!=="miter"&&EFe(t,e,w),n||(IC(t,e,i,r,w,s),t.stroke())}class IFe extends Ul{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.getProps(["x","y"],r),{angle:n,distance:o}=jQ(s,{x:e,y:i}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,y=ut(p,l-a),v=Nw(n,a,l)&&a!==l,w=y>=bi||v,S=Ku(o,u+m,h+m);return w&&S}getCenterPoint(e){const{x:i,y:r,startAngle:s,endAngle:n,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:u}=this.options,h=(s+n)/2,p=(o+a+u+l)/2;return{x:i+Math.cos(h)*p,y:r+Math.sin(h)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,s=(i.offset||0)/4,n=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>bi?Math.floor(r/bi):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(Lt,r||0)),u=s*l;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,kFe(e,this,u,n,o),RFe(e,this,u,n,o),e.restore()}}function _ee(t,e,i=e){t.lineCap=ut(i.borderCapStyle,e.borderCapStyle),t.setLineDash(ut(i.borderDash,e.borderDash)),t.lineDashOffset=ut(i.borderDashOffset,e.borderDashOffset),t.lineJoin=ut(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ut(i.borderWidth,e.borderWidth),t.strokeStyle=ut(i.borderColor,e.borderColor)}function $Fe(t,e,i){t.lineTo(i.x,i.y)}function AFe(t){return t.stepped?YLe:t.tension||t.cubicInterpolationMode==="monotone"?JLe:$Fe}function xee(t,e,i={}){const r=t.length,{start:s=0,end:n=r-1}=i,{start:o,end:a}=e,l=Math.max(s,o),u=Math.min(n,a),h=s<o&&n<o||s>a&&n>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!h?r+u-l:u-l}}function OFe(t,e,i,r){const{points:s,options:n}=e,{count:o,start:a,loop:l,ilen:u}=xee(s,i,r),h=AFe(n);let{move:p=!0,reverse:m}=r||{},y,v,w;for(y=0;y<=u;++y)v=s[(a+(m?u-y:y))%o],!v.skip&&(p?(t.moveTo(v.x,v.y),p=!1):h(t,w,v,m,n.stepped),w=v);return l&&(v=s[(a+(m?u:0))%o],h(t,w,v,m,n.stepped)),!!l}function PFe(t,e,i,r){const s=e.points,{count:n,start:o,ilen:a}=xee(s,i,r),{move:l=!0,reverse:u}=r||{};let h=0,p=0,m,y,v,w,S,E;const I=O=>(o+(u?a-O:O))%n,D=()=>{w!==S&&(t.lineTo(h,S),t.lineTo(h,w),t.lineTo(h,E))};for(l&&(y=s[I(0)],t.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=s[I(m)],y.skip)continue;const O=y.x,A=y.y,z=O|0;z===v?(A<w?w=A:A>S&&(S=A),h=(p*h+O)/++p):(D(),t.lineTo(O,A),v=z,p=0,w=S=A),E=A}D()}function lP(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?PFe:OFe}function DFe(t){return t.stepped?M3e:t.tension||t.cubicInterpolationMode==="monotone"?k3e:np}function LFe(t,e,i,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,i,r)&&s.closePath()),_ee(t,e.options),t.stroke(s)}function NFe(t,e,i,r){const{segments:s,options:n}=e,o=lP(e);for(const a of s)_ee(t,n,a.style),t.beginPath(),o(t,e,a,{start:i,end:i+r-1})&&t.closePath(),t.stroke()}const FFe=typeof Path2D=="function";function jFe(t,e,i,r){FFe&&!e.options.segment?LFe(t,e,i,r):NFe(t,e,i,r)}class nM extends Ul{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;v3e(this._points,r,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=P3e(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,r=e.length;return r&&i[e[r-1].end]}interpolate(e,i){const r=this.options,s=e[i],n=this.points,o=nee(this,{property:i,start:s,end:s});if(!o.length)return;const a=[],l=DFe(r);let u,h;for(u=0,h=o.length;u<h;++u){const{start:p,end:m}=o[u],y=n[p],v=n[m];if(y===v){a.push(y);continue}const w=Math.abs((s-y[i])/(v[i]-y[i])),S=l(y,v,w,r.stepped);S[i]=e[i],a.push(S)}return a.length===1?a[0]:a}pathSegment(e,i,r){return lP(this)(e,this,i,r)}path(e,i,r){const s=this.segments,n=lP(this);let o=this._loop;i=i||0,r=r||this.points.length-i;for(const a of s)o&=n(e,this,a,{start:i,end:i+r-1});return!!o}draw(e,i,r,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),jFe(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function BH(t,e,i,r){const s=t.options,{[i]:n}=t.getProps([i],r);return Math.abs(e-n)<s.radius+s.hitRadius}class zFe extends Ul{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.options,{x:n,y:o}=this.getProps(["x","y"],r);return Math.pow(e-n,2)+Math.pow(i-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return BH(this,e,"x",i)}inYRange(e,i){return BH(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!ec(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,nP(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function See(t,e){const{x:i,y:r,base:s,width:n,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,h,p;return t.horizontal?(p=o/2,a=Math.min(i,s),l=Math.max(i,s),u=r-p,h=r+p):(p=n/2,a=i-p,l=i+p,u=Math.min(r,s),h=Math.max(r,s)),{left:a,top:u,right:l,bottom:h}}function wh(t,e,i,r){return t?0:zr(e,i,r)}function VFe(t,e,i){const r=t.options.borderWidth,s=t.borderSkipped,n=YQ(r);return{t:wh(s.top,n.top,0,i),r:wh(s.right,n.right,0,e),b:wh(s.bottom,n.bottom,0,i),l:wh(s.left,n.left,0,e)}}function UFe(t,e,i){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,n=kh(s),o=Math.min(e,i),a=t.borderSkipped,l=r||_t(s);return{topLeft:wh(!l||a.top||a.left,n.topLeft,0,o),topRight:wh(!l||a.top||a.right,n.topRight,0,o),bottomLeft:wh(!l||a.bottom||a.left,n.bottomLeft,0,o),bottomRight:wh(!l||a.bottom||a.right,n.bottomRight,0,o)}}function HFe(t){const e=See(t),i=e.right-e.left,r=e.bottom-e.top,s=VFe(t,i/2,r/2),n=UFe(t,i/2,r/2);return{outer:{x:e.left,y:e.top,w:i,h:r,radius:n},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,n.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(s.b,s.r))}}}}function Tk(t,e,i,r){const s=e===null,n=i===null,a=t&&!(s&&n)&&See(t,r);return a&&(s||Ku(e,a.left,a.right))&&(n||Ku(i,a.top,a.bottom))}function BFe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function GFe(t,e){t.rect(e.x,e.y,e.w,e.h)}function Mk(t,e,i={}){const r=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,n=(t.x+t.w!==i.x+i.w?e:0)-r,o=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+n,h:t.h+o,radius:t.radius}}class WFe extends Ul{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:r,backgroundColor:s}}=this,{inner:n,outer:o}=HFe(this),a=BFe(o.radius)?Mh:GFe;e.save(),(o.w!==n.w||o.h!==n.h)&&(e.beginPath(),a(e,Mk(o,i,n)),e.clip(),a(e,Mk(n,-i,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Mk(n,i)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,i,r){return Tk(this,e,i,r)}inXRange(e,i){return Tk(this,e,null,i)}inYRange(e,i){return Tk(this,null,e,i)}getCenterPoint(e){const{x:i,y:r,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(i+s)/2:i,y:n?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var qFe=Object.freeze({__proto__:null,ArcElement:IFe,BarElement:WFe,LineElement:nM,PointElement:zFe});const uP=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],GH=uP.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Eee(t){return uP[t%uP.length]}function Cee(t){return GH[t%GH.length]}function YFe(t,e){return t.borderColor=Eee(e),t.backgroundColor=Cee(e),++e}function JFe(t,e){return t.backgroundColor=t.data.map(()=>Eee(e++)),e}function ZFe(t,e){return t.backgroundColor=t.data.map(()=>Cee(e++)),e}function XFe(t){let e=0;return(i,r)=>{const s=t.getDatasetMeta(r).controller;s instanceof N3?e=JFe(i,e):s instanceof cee?e=ZFe(i,e):s&&(e=YFe(i,e))}}function WH(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function KFe(t){return t&&(t.borderColor||t.backgroundColor)}function QFe(){return Ci.borderColor!=="rgba(0,0,0,0.1)"||Ci.backgroundColor!=="rgba(0,0,0,0.1)"}var eje={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{data:{datasets:r},options:s}=t.config,{elements:n}=s,o=WH(r)||KFe(s)||n&&WH(n)||QFe();if(!i.forceOverride&&o)return;const a=XFe(t);r.forEach(a)}};function tje(t,e,i,r,s){const n=s.samples||r;if(n>=i)return t.slice(e,e+i);const o=[],a=(i-2)/(n-2);let l=0;const u=e+i-1;let h=e,p,m,y,v,w;for(o[l++]=t[h],p=0;p<n-2;p++){let S=0,E=0,I;const D=Math.floor((p+1)*a)+1+e,O=Math.min(Math.floor((p+2)*a)+1,i)+e,A=O-D;for(I=D;I<O;I++)S+=t[I].x,E+=t[I].y;S/=A,E/=A;const z=Math.floor(p*a)+1+e,_=Math.min(Math.floor((p+1)*a)+1,i)+e,{x:Z,y:Q}=t[h];for(y=v=-1,I=z;I<_;I++)v=.5*Math.abs((Z-S)*(t[I].y-Q)-(Z-t[I].x)*(E-Q)),v>y&&(y=v,m=t[I],w=I);o[l++]=m,h=w}return o[l++]=t[u],o}function ije(t,e,i,r){let s=0,n=0,o,a,l,u,h,p,m,y,v,w;const S=[],E=e+i-1,I=t[e].x,O=t[E].x-I;for(o=e;o<e+i;++o){a=t[o],l=(a.x-I)/O*r,u=a.y;const A=l|0;if(A===h)u<v?(v=u,p=o):u>w&&(w=u,m=o),s=(n*s+a.x)/++n;else{const z=o-1;if(!wt(p)&&!wt(m)){const _=Math.min(p,m),Z=Math.max(p,m);_!==y&&_!==z&&S.push({...t[_],x:s}),Z!==y&&Z!==z&&S.push({...t[Z],x:s})}o>0&&z!==y&&S.push(t[z]),S.push(a),h=A,n=0,v=w=u,p=m=y=o}}return S}function Tee(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function qH(t){t.data.datasets.forEach(e=>{Tee(e)})}function rje(t,e){const i=e.length;let r=0,s;const{iScale:n}=t,{min:o,max:a,minDefined:l,maxDefined:u}=n.getUserBounds();return l&&(r=zr(Qu(e,n.axis,o).lo,0,i-1)),u?s=zr(Qu(e,n.axis,a).hi+1,r,i)-r:s=i-r,{start:r,count:s}}var sje={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled){qH(t);return}const r=t.width;t.data.datasets.forEach((s,n)=>{const{_data:o,indexAxis:a}=s,l=t.getDatasetMeta(n),u=o||s.data;if(u0([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:p,count:m}=rje(l,u);const y=i.threshold||4*r;if(m<=y){Tee(s);return}wt(o)&&(s._data=u,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let v;switch(i.algorithm){case"lttb":v=tje(u,p,m,r,i);break;case"min-max":v=ije(u,p,m,r);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=v})},destroy(t){qH(t)}};function nje(t,e,i){const r=t.segments,s=t.points,n=e.points,o=[];for(const a of r){let{start:l,end:u}=a;u=oM(l,u,s);const h=cP(i,s[l],s[u],a.loop);if(!e.segments){o.push({source:a,target:h,start:s[l],end:s[u]});continue}const p=nee(e,h);for(const m of p){const y=cP(i,n[m.start],n[m.end],m.loop),v=see(a,s,y);for(const w of v)o.push({source:w,target:m,start:{[i]:YH(h,y,"start",Math.max)},end:{[i]:YH(h,y,"end",Math.min)}})}}return o}function cP(t,e,i,r){if(r)return;let s=e[t],n=i[t];return t==="angle"&&(s=ps(s),n=ps(n)),{property:t,start:s,end:n}}function oje(t,e){const{x:i=null,y:r=null}=t||{},s=e.points,n=[];return e.segments.forEach(({start:o,end:a})=>{a=oM(o,a,s);const l=s[o],u=s[a];r!==null?(n.push({x:l.x,y:r}),n.push({x:u.x,y:r})):i!==null&&(n.push({x:i,y:l.y}),n.push({x:i,y:u.y}))}),n}function oM(t,e,i){for(;e>t;e--){const r=i[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function YH(t,e,i,r){return t&&e?r(t[i],e[i]):t?t[i]:e?e[i]:0}function Mee(t,e){let i=[],r=!1;return Ei(t)?(r=!0,i=t):i=oje(t,e),i.length?new nM({points:i,options:{tension:0},_loop:r,_fullLoop:r}):null}function JH(t){return t&&t.fill!==!1}function aje(t,e,i){let s=t[e].fill;const n=[e];let o;if(!i)return s;for(;s!==!1&&n.indexOf(s)===-1;){if(!Hi(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function lje(t,e,i){const r=dje(t);if(_t(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Hi(s)&&Math.floor(s)===s?uje(r[0],e,s,i):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function uje(t,e,i,r){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=r?!1:i}function cje(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:_t(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function hje(t,e,i){let r;return t==="start"?r=i:t==="end"?r=e.options.reverse?e.min:e.max:_t(t)?r=t.value:r=e.getBaseValue(),r}function dje(t){const e=t.options,i=e.fill;let r=ut(i&&i.target,i);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function pje(t){const{scale:e,index:i,line:r}=t,s=[],n=r.segments,o=r.points,a=fje(e,i);a.push(Mee({x:null,y:e.bottom},r));for(let l=0;l<n.length;l++){const u=n[l];for(let h=u.start;h<=u.end;h++)mje(s,o[h],a)}return new nM({points:s,options:{}})}function fje(t,e){const i=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const n=r[s];if(n.index===e)break;n.hidden||i.unshift(n.dataset)}return i}function mje(t,e,i){const r=[];for(let s=0;s<i.length;s++){const n=i[s],{first:o,last:a,point:l}=gje(n,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function gje(t,e,i){const r=t.interpolate(e,i);if(!r)return{};const s=r[i],n=t.segments,o=t.points;let a=!1,l=!1;for(let u=0;u<n.length;u++){const h=n[u],p=o[h.start][i],m=o[h.end][i];if(Ku(s,p,m)){a=s===p,l=s===m;break}}return{first:a,last:l,point:r}}class kee{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,r){const{x:s,y:n,radius:o}=this;return i=i||{start:0,end:bi},e.arc(s,n,o,i.end,i.start,!0),!r.bounds}interpolate(e){const{x:i,y:r,radius:s}=this,n=e.angle;return{x:i+Math.cos(n)*s,y:r+Math.sin(n)*s,angle:n}}}function yje(t){const{chart:e,fill:i,line:r}=t;if(Hi(i))return bje(e,i);if(i==="stack")return pje(t);if(i==="shape")return!0;const s=vje(t);return s instanceof kee?s:Mee(s,r)}function bje(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function vje(t){return(t.scale||{}).getPointPositionForValue?_je(t):wje(t)}function wje(t){const{scale:e={},fill:i}=t,r=cje(i,e);if(Hi(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function _je(t){const{scale:e,fill:i}=t,r=e.options,s=e.getLabels().length,n=r.reverse?e.max:e.min,o=hje(i,e,n),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,n);return new kee({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function kk(t,e,i){const r=yje(e),{chart:s,index:n,line:o,scale:a,axis:l}=e,u=o.options,h=u.fill,p=u.backgroundColor,{above:m=p,below:y=p}=h||{},v=s.getDatasetMeta(n),w=oee(s,v);r&&o.points.length&&(tM(t,i),xje(t,{line:o,target:r,above:m,below:y,area:i,scale:a,axis:l,clip:w}),iM(t))}function xje(t,e){const{line:i,target:r,above:s,below:n,area:o,scale:a,clip:l}=e,u=i._loop?"angle":e.axis;t.save();let h=n;n!==s&&(u==="x"?(ZH(t,r,o.top),Rk(t,{line:i,target:r,color:s,scale:a,property:u,clip:l}),t.restore(),t.save(),ZH(t,r,o.bottom)):u==="y"&&(XH(t,r,o.left),Rk(t,{line:i,target:r,color:n,scale:a,property:u,clip:l}),t.restore(),t.save(),XH(t,r,o.right),h=s)),Rk(t,{line:i,target:r,color:h,scale:a,property:u,clip:l}),t.restore()}function ZH(t,e,i){const{segments:r,points:s}=e;let n=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:u}=a,h=s[l],p=s[oM(l,u,s)];n?(t.moveTo(h.x,h.y),n=!1):(t.lineTo(h.x,i),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function XH(t,e,i){const{segments:r,points:s}=e;let n=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:u}=a,h=s[l],p=s[oM(l,u,s)];n?(t.moveTo(h.x,h.y),n=!1):(t.lineTo(i,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(i,p.y)}t.lineTo(i,e.first().y),t.closePath(),t.clip()}function Rk(t,e){const{line:i,target:r,property:s,color:n,scale:o,clip:a}=e,l=nje(i,r,s);for(const{source:u,target:h,start:p,end:m}of l){const{style:{backgroundColor:y=n}={}}=u,v=r!==!0;t.save(),t.fillStyle=y,Sje(t,o,a,v&&cP(s,p,m)),t.beginPath();const w=!!i.pathSegment(t,u);let S;if(v){w?t.closePath():KH(t,r,m,s);const E=!!r.pathSegment(t,h,{move:w,reverse:!0});S=w&&E,S||KH(t,r,p,s)}t.closePath(),t.fill(S?"evenodd":"nonzero"),t.restore()}}function Sje(t,e,i,r){const s=e.chart.chartArea,{property:n,start:o,end:a}=r||{};if(n==="x"||n==="y"){let l,u,h,p;n==="x"?(l=o,u=s.top,h=a,p=s.bottom):(l=s.left,u=o,h=s.right,p=a),t.beginPath(),i&&(l=Math.max(l,i.left),h=Math.min(h,i.right),u=Math.max(u,i.top),p=Math.min(p,i.bottom)),t.rect(l,u,h-l,p-u),t.clip()}}function KH(t,e,i,r){const s=e.interpolate(i,r);s&&t.lineTo(s.x,s.y)}var Eje={id:"filler",afterDatasetsUpdate(t,e,i){const r=(t.data.datasets||[]).length,s=[];let n,o,a,l;for(o=0;o<r;++o)n=t.getDatasetMeta(o),a=n.dataset,l=null,a&&a.options&&a instanceof nM&&(l={visible:t.isDatasetVisible(o),index:o,fill:lje(a,o,r),chart:t,axis:n.controller.options.indexAxis,scale:n.vScale,line:a}),n.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=aje(s,o,i.propagate))},beforeDraw(t,e,i){const r=i.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),n=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(n,a.axis),r&&a.fill&&kk(t.ctx,a,n))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const n=r[s].$filler;JH(n)&&kk(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,i){const r=e.meta.$filler;!JH(r)||i.drawTime!=="beforeDatasetDraw"||kk(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const QH=(t,e)=>{let{boxHeight:i=e,boxWidth:r=e}=t;return t.usePointStyle&&(i=Math.min(i,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(e,i)}},Cje=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class eB extends Ul{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,r){this.maxWidth=e,this.maxHeight=i,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=li(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(r=>e.filter(r,this.chart.data))),e.sort&&(i=i.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=_r(r.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=QH(r,n);let u,h;i.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,n,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,s,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,i,r,s){const{ctx:n,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+a;let p=e;n.textAlign="left",n.textBaseline="middle";let m=-1,y=-h;return this.legendItems.forEach((v,w)=>{const S=r+i/2+n.measureText(v.text).width;(w===0||u[u.length-1]+S+2*a>o)&&(p+=h,u[u.length-(w>0?0:1)]=0,y+=h,m++),l[w]={left:0,top:y,row:m,width:S,height:s},u[u.length-1]+=S+a}),p}_fitCols(e,i,r,s){const{ctx:n,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let p=a,m=0,y=0,v=0,w=0;return this.legendItems.forEach((S,E)=>{const{itemWidth:I,itemHeight:D}=Tje(r,i,n,S,s);E>0&&y+D+2*a>h&&(p+=m+a,u.push({width:m,height:y}),v+=m+a,w++,m=y=0),l[E]={left:v,top:y,col:w,width:I,height:D},m=Math.max(m,I),y+=D+a}),p+=m,u.push({width:m,height:y}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:r,labels:{padding:s},rtl:n}}=this,o=Pg(n,this.left,this.width);if(this.isHorizontal()){let a=0,l=ss(r,this.left+s,this.right-this.lineWidths[a]);for(const u of i)a!==u.row&&(a=u.row,l=ss(r,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+s}else{let a=0,l=ss(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of i)u.col!==a&&(a=u.col,l=ss(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;tM(e,this),this._draw(),iM(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:r,ctx:s}=this,{align:n,labels:o}=e,a=Ci.color,l=Pg(e.rtl,this.left,this.width),u=_r(o.font),{padding:h}=o,p=u.size,m=p/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:w,itemHeight:S}=QH(o,p),E=function(z,_,Z){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;s.save();const Q=ut(Z.lineWidth,1);if(s.fillStyle=ut(Z.fillStyle,a),s.lineCap=ut(Z.lineCap,"butt"),s.lineDashOffset=ut(Z.lineDashOffset,0),s.lineJoin=ut(Z.lineJoin,"miter"),s.lineWidth=Q,s.strokeStyle=ut(Z.strokeStyle,a),s.setLineDash(ut(Z.lineDash,[])),o.usePointStyle){const ae={radius:w*Math.SQRT2/2,pointStyle:Z.pointStyle,rotation:Z.rotation,borderWidth:Q},ge=l.xPlus(z,v/2),ne=_+m;qQ(s,ae,ge,ne,o.pointStyleWidth&&v)}else{const ae=_+Math.max((p-w)/2,0),ge=l.leftForLtr(z,v),ne=kh(Z.borderRadius);s.beginPath(),Object.values(ne).some(ve=>ve!==0)?Mh(s,{x:ge,y:ae,w:v,h:w,radius:ne}):s.rect(ge,ae,v,w),s.fill(),Q!==0&&s.stroke()}s.restore()},I=function(z,_,Z){uf(s,Z.text,z,_+S/2,u,{strikethrough:Z.hidden,textAlign:l.textAlign(Z.textAlign)})},D=this.isHorizontal(),O=this._computeTitleHeight();D?y={x:ss(n,this.left+h,this.right-r[0]),y:this.top+h+O,line:0}:y={x:this.left+h,y:ss(n,this.top+O+h,this.bottom-i[0].height),line:0},tee(this.ctx,e.textDirection);const A=S+h;this.legendItems.forEach((z,_)=>{s.strokeStyle=z.fontColor,s.fillStyle=z.fontColor;const Z=s.measureText(z.text).width,Q=l.textAlign(z.textAlign||(z.textAlign=o.textAlign)),ae=v+m+Z;let ge=y.x,ne=y.y;l.setWidth(this.width),D?_>0&&ge+ae+h>this.right&&(ne=y.y+=A,y.line++,ge=y.x=ss(n,this.left+h,this.right-r[y.line])):_>0&&ne+A>this.bottom&&(ge=y.x=ge+i[y.line].width+h,y.line++,ne=y.y=ss(n,this.top+O+h,this.bottom-i[y.line].height));const ve=l.x(ge);if(E(ve,ne,z),ge=NLe(Q,ge+v+m,D?ge+ae:this.right,e.rtl),I(l.x(ge),ne,z),D)y.x+=ae+h;else if(typeof z.text!="string"){const xe=u.lineHeight;y.y+=Ree(z,xe)+h}else y.y+=A}),iee(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,r=_r(i.font),s=_s(i.padding);if(!i.display)return;const n=Pg(e.rtl,this.left,this.width),o=this.ctx,a=i.position,l=r.size/2,u=s.top+l;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+u,p=ss(e.align,p,this.right-m);else{const v=this.columnSizes.reduce((w,S)=>Math.max(w,S.height),0);h=u+ss(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const y=ss(a,p,p+m);o.textAlign=n.textAlign(R3(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=r.string,uf(o,i.text,y,h,r)}_computeTitleHeight(){const e=this.options.title,i=_r(e.font),r=_s(e.padding);return e.display?i.lineHeight+r.height:0}_getLegendItemAt(e,i){let r,s,n;if(Ku(e,this.left,this.right)&&Ku(i,this.top,this.bottom)){for(n=this.legendHitBoxes,r=0;r<n.length;++r)if(s=n[r],Ku(e,s.left,s.left+s.width)&&Ku(i,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const i=this.options;if(!Rje(e.type,i))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,n=Cje(s,r);s&&!n&&li(i.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!n&&li(i.onHover,[e,r,this],this)}else r&&li(i.onClick,[e,r,this],this)}}function Tje(t,e,i,r,s){const n=Mje(r,t,e,i),o=kje(s,r,e.lineHeight);return{itemWidth:n,itemHeight:o}}function Mje(t,e,i,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((n,o)=>n.length>o.length?n:o)),e+i.size/2+r.measureText(s).width}function kje(t,e,i){let r=t;return typeof e.text!="string"&&(r=Ree(e,i)),r}function Ree(t,e){const i=t.text?t.text.length:0;return e*i}function Rje(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ije={id:"legend",_element:eB,start(t,e,i){const r=t.legend=new eB({ctx:t.ctx,options:i,chart:t});bs.configure(t,r,i),bs.addBox(t,r)},stop(t){bs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const r=t.legend;bs.configure(t,r,i),r.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const r=e.datasetIndex,s=i.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:s,color:n,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(i?0:void 0),h=_s(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:n,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class j3 extends Ul{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const s=Ei(r.text)?r.text.length:1;this._padding=_s(r.padding);const n=s*_r(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:r,bottom:s,right:n,options:o}=this,a=o.align;let l=0,u,h,p;return this.isHorizontal()?(h=ss(a,r,n),p=i+e,u=n-r):(o.position==="left"?(h=r+e,p=ss(a,s,i),l=Lt*-.5):(h=n-e,p=ss(a,i,s),l=Lt*.5),u=s-i),{titleX:h,titleY:p,maxWidth:u,rotation:l}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const r=_r(i.font),n=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(n);uf(e,i.text,0,0,r,{color:i.color,maxWidth:l,rotation:u,textAlign:R3(i.align),textBaseline:"middle",translation:[o,a]})}}function $je(t,e){const i=new j3({ctx:t.ctx,options:e,chart:t});bs.configure(t,i,e),bs.addBox(t,i),t.titleBlock=i}var Aje={id:"title",_element:j3,start(t,e,i){$je(t,i)},stop(t){const e=t.titleBlock;bs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const r=t.titleBlock;bs.configure(t,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Q_=new WeakMap;var Oje={id:"subtitle",start(t,e,i){const r=new j3({ctx:t.ctx,options:i,chart:t});bs.configure(t,r,i),bs.addBox(t,r),Q_.set(t,r)},stop(t){bs.removeBox(t,Q_.get(t)),Q_.delete(t)},beforeUpdate(t,e,i){const r=Q_.get(t);bs.configure(t,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const h0={average(t){if(!t.length)return!1;let e,i,r=new Set,s=0,n=0;for(e=0,i=t.length;e<i;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++n}}return n===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/n}},nearest(t,e){if(!t.length)return!1;let i=e.x,r=e.y,s=Number.POSITIVE_INFINITY,n,o,a;for(n=0,o=t.length;n<o;++n){const l=t[n].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=rP(e,u);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,r=l.y}return{x:i,y:r}}};function il(t,e){return e&&(Ei(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ku(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Pje(t,e){const{element:i,datasetIndex:r,index:s}=e,n=t.getDatasetMeta(r).controller,{label:o,value:a}=n.getLabelAndValue(s);return{chart:t,label:o,parsed:n.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:n.getDataset(),dataIndex:s,datasetIndex:r,element:i}}function tB(t,e){const i=t.chart.ctx,{body:r,footer:s,title:n}=t,{boxWidth:o,boxHeight:a}=e,l=_r(e.bodyFont),u=_r(e.titleFont),h=_r(e.footerFont),p=n.length,m=s.length,y=r.length,v=_s(e.padding);let w=v.height,S=0,E=r.reduce((O,A)=>O+A.before.length+A.lines.length+A.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,p&&(w+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),E){const O=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=y*O+(E-y)*l.lineHeight+(E-1)*e.bodySpacing}m&&(w+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let I=0;const D=function(O){S=Math.max(S,i.measureText(O).width+I)};return i.save(),i.font=u.string,Jt(t.title,D),i.font=l.string,Jt(t.beforeBody.concat(t.afterBody),D),I=e.displayColors?o+2+e.boxPadding:0,Jt(r,O=>{Jt(O.before,D),Jt(O.lines,D),Jt(O.after,D)}),I=0,i.font=h.string,Jt(t.footer,D),i.restore(),S+=v.width,{width:S,height:w}}function Dje(t,e){const{y:i,height:r}=e;return i<r/2?"top":i>t.height-r/2?"bottom":"center"}function Lje(t,e,i,r){const{x:s,width:n}=r,o=i.caretSize+i.caretPadding;if(t==="left"&&s+n+o>e.width||t==="right"&&s-n-o<0)return!0}function Nje(t,e,i,r){const{x:s,width:n}=i,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=s<=(a+l)/2?"left":"right":s<=n/2?u="left":s>=o-n/2&&(u="right"),Lje(u,t,e,i)&&(u="center"),u}function iB(t,e,i){const r=i.yAlign||e.yAlign||Dje(t,i);return{xAlign:i.xAlign||e.xAlign||Nje(t,e,i,r),yAlign:r}}function Fje(t,e){let{x:i,width:r}=t;return e==="right"?i-=r:e==="center"&&(i-=r/2),i}function jje(t,e,i){let{y:r,height:s}=t;return e==="top"?r+=i:e==="bottom"?r-=s+i:r-=s/2,r}function rB(t,e,i,r){const{caretSize:s,caretPadding:n,cornerRadius:o}=t,{xAlign:a,yAlign:l}=i,u=s+n,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:y}=kh(o);let v=Fje(e,a);const w=jje(e,l,u);return l==="center"?a==="left"?v+=u:a==="right"&&(v-=u):a==="left"?v-=Math.max(h,m)+s:a==="right"&&(v+=Math.max(p,y)+s),{x:zr(v,0,r.width-e.width),y:zr(w,0,r.height-e.height)}}function ex(t,e,i){const r=_s(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function sB(t){return il([],ku(t))}function zje(t,e,i){return Kh(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function nB(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const Iee={beforeTitle:su,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,r=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return i[e.dataIndex]}return""},afterTitle:su,beforeBody:su,beforeLabel:su,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return wt(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:su,afterBody:su,beforeFooter:su,footer:su,afterFooter:su};function en(t,e,i,r){const s=t[e].call(i,r);return typeof s>"u"?Iee[e].call(i,r):s}class oB extends Ul{static positioners=h0;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,n=new aee(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=zje(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:r}=i,s=en(r,"beforeTitle",this,e),n=en(r,"title",this,e),o=en(r,"afterTitle",this,e);let a=[];return a=il(a,ku(s)),a=il(a,ku(n)),a=il(a,ku(o)),a}getBeforeBody(e,i){return sB(en(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:r}=i,s=[];return Jt(e,n=>{const o={before:[],lines:[],after:[]},a=nB(r,n);il(o.before,ku(en(a,"beforeLabel",this,n))),il(o.lines,en(a,"label",this,n)),il(o.after,ku(en(a,"afterLabel",this,n))),s.push(o)}),s}getAfterBody(e,i){return sB(en(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:r}=i,s=en(r,"beforeFooter",this,e),n=en(r,"footer",this,e),o=en(r,"afterFooter",this,e);let a=[];return a=il(a,ku(s)),a=il(a,ku(n)),a=il(a,ku(o)),a}_createItems(e){const i=this._active,r=this.chart.data,s=[],n=[],o=[];let a=[],l,u;for(l=0,u=i.length;l<u;++l)a.push(Pje(this.chart,i[l]));return e.filter&&(a=a.filter((h,p,m)=>e.filter(h,p,m,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),Jt(a,h=>{const p=nB(e.callbacks,h);s.push(en(p,"labelColor",this,h)),n.push(en(p,"labelPointStyle",this,h)),o.push(en(p,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=a,a}update(e,i){const r=this.options.setContext(this.getContext()),s=this._active;let n,o=[];if(!s.length)this.opacity!==0&&(n={opacity:0});else{const a=h0[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=tB(this,r),u=Object.assign({},a,l),h=iB(this.chart,r,u),p=rB(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,n={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){const n=this.getCaretPosition(e,r,s);i.lineTo(n.x1,n.y1),i.lineTo(n.x2,n.y2),i.lineTo(n.x3,n.y3)}getCaretPosition(e,i,r){const{xAlign:s,yAlign:n}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:p}=kh(a),{x:m,y}=e,{width:v,height:w}=i;let S,E,I,D,O,A;return n==="center"?(O=y+w/2,s==="left"?(S=m,E=S-o,D=O+o,A=O-o):(S=m+v,E=S+o,D=O-o,A=O+o),I=S):(s==="left"?E=m+Math.max(l,h)+o:s==="right"?E=m+v-Math.max(u,p)-o:E=this.caretX,n==="top"?(D=y,O=D-o,S=E-o,I=E+o):(D=y+w,O=D+o,S=E+o,I=E-o),A=D),{x1:S,x2:E,x3:I,y1:D,y2:O,y3:A}}drawTitle(e,i,r){const s=this.title,n=s.length;let o,a,l;if(n){const u=Pg(r.rtl,this.x,this.width);for(e.x=ex(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",o=_r(r.titleFont),a=r.titleSpacing,i.fillStyle=r.titleColor,i.font=o.string,l=0;l<n;++l)i.fillText(s[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===n&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,i,r,s,n){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=n,h=_r(n.bodyFont),p=ex(this,"left",n),m=s.x(p),y=l<h.lineHeight?(h.lineHeight-l)/2:0,v=i.y+y;if(n.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=s.leftForLtr(m,u)+u/2,E=v+l/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,nP(e,w,S,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,nP(e,w,S,E)}else{e.lineWidth=_t(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=s.leftForLtr(m,u),S=s.leftForLtr(s.xPlus(m,1),u-2),E=kh(o.borderRadius);Object.values(E).some(I=>I!==0)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,Mh(e,{x:w,y:v,w:u,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mh(e,{x:S,y:v+1,w:u-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(w,v,u,l),e.strokeRect(w,v,u,l),e.fillStyle=o.backgroundColor,e.fillRect(S,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){const{body:s}=this,{bodySpacing:n,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=r,p=_r(r.bodyFont);let m=p.lineHeight,y=0;const v=Pg(r.rtl,this.x,this.width),w=function(Z){i.fillText(Z,v.x(e.x+y),e.y+m/2),e.y+=m+n},S=v.textAlign(o);let E,I,D,O,A,z,_;for(i.textAlign=o,i.textBaseline="middle",i.font=p.string,e.x=ex(this,S,r),i.fillStyle=r.bodyColor,Jt(this.beforeBody,w),y=a&&S!=="right"?o==="center"?u/2+h:u+2+h:0,O=0,z=s.length;O<z;++O){for(E=s[O],I=this.labelTextColors[O],i.fillStyle=I,Jt(E.before,w),D=E.lines,a&&D.length&&(this._drawColorBox(i,e,O,v,r),m=Math.max(p.lineHeight,l)),A=0,_=D.length;A<_;++A)w(D[A]),m=p.lineHeight;Jt(E.after,w)}y=0,m=p.lineHeight,Jt(this.afterBody,w),e.y-=n}drawFooter(e,i,r){const s=this.footer,n=s.length;let o,a;if(n){const l=Pg(r.rtl,this.x,this.width);for(e.x=ex(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",o=_r(r.footerFont),i.fillStyle=r.footerColor,i.font=o.string,a=0;a<n;++a)i.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){const{xAlign:n,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=r,{topLeft:p,topRight:m,bottomLeft:y,bottomRight:v}=kh(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+p,l),o==="top"&&this.drawCaret(e,i,r,s),i.lineTo(a+u-m,l),i.quadraticCurveTo(a+u,l,a+u,l+m),o==="center"&&n==="right"&&this.drawCaret(e,i,r,s),i.lineTo(a+u,l+h-v),i.quadraticCurveTo(a+u,l+h,a+u-v,l+h),o==="bottom"&&this.drawCaret(e,i,r,s),i.lineTo(a+y,l+h),i.quadraticCurveTo(a,l+h,a,l+h-y),o==="center"&&n==="left"&&this.drawCaret(e,i,r,s),i.lineTo(a,l+p),i.quadraticCurveTo(a,l,a+p,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,r=this.$animations,s=r&&r.x,n=r&&r.y;if(s||n){const o=h0[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=tB(this,e),l=Object.assign({},o,this._size),u=iB(i,e,l),h=rB(e,l,u,i);(s._to!==h.x||n._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=_s(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(n,e,s,i),tee(e,i.textDirection),n.y+=o.top,this.drawTitle(n,e,i),this.drawBody(n,e,i),this.drawFooter(n,e,i),iee(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),n=!EC(r,s),o=this._positionChanged(s,i);(n||o)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],o=this._getActiveElements(e,n,i,r),a=this._positionChanged(o,e),l=i||!EC(o,n)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),l}_getActiveElements(e,i,r,s){const n=this.options;if(e.type==="mouseout")return[];if(!s)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,n.mode,n,r);return n.reverse&&o.reverse(),o}_positionChanged(e,i){const{caretX:r,caretY:s,options:n}=this,o=h0[n.position].call(this,e,i);return o!==!1&&(r!==o.x||s!==o.y)}}var Vje={id:"tooltip",_element:oB,positioners:h0,afterInit(t,e,i){i&&(t.tooltip=new oB({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Iee},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Uje=Object.freeze({__proto__:null,Colors:eje,Decimation:sje,Filler:Eje,Legend:Ije,SubTitle:Oje,Title:Aje,Tooltip:Vje});const Hje=(t,e,i,r)=>(typeof e=="string"?(i=t.push(e)-1,r.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function Bje(t,e,i,r){const s=t.indexOf(e);if(s===-1)return Hje(t,e,i,r);const n=t.lastIndexOf(e);return s!==n?i:s}const Gje=(t,e)=>t===null?null:zr(Math.round(t),0,e);function aB(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Wje extends bf{static id="category";static defaults={ticks:{callback:aB}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const r=this.getLabels();for(const{index:s,label:n}of i)r[s]===n&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(wt(e))return null;const r=this.getLabels();return i=isFinite(i)&&r[i]===e?i:Bje(r,e,ut(i,e),this._addedLabels),Gje(i,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,i=this.max,r=this.options.offset,s=[];let n=this.getLabels();n=e===0&&i===n.length-1?n:n.slice(e,i+1),this._valueRange=Math.max(n.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=i;o++)s.push({value:o});return s}getLabelForValue(e){return aB.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function qje(t,e){const i=[],{bounds:s,step:n,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:p,includeBounds:m}=t,y=n||1,v=h-1,{min:w,max:S}=e,E=!wt(o),I=!wt(a),D=!wt(u),O=(S-w)/(p+1);let A=tH((S-w)/v/y)*y,z,_,Z,Q;if(A<1e-14&&!E&&!I)return[{value:w},{value:S}];Q=Math.ceil(S/A)-Math.floor(w/A),Q>v&&(A=tH(Q*A/v/y)*y),wt(l)||(z=Math.pow(10,l),A=Math.ceil(A*z)/z),s==="ticks"?(_=Math.floor(w/A)*A,Z=Math.ceil(S/A)*A):(_=w,Z=S),E&&I&&n&&ILe((a-o)/n,A/1e3)?(Q=Math.round(Math.min((a-o)/A,h)),A=(a-o)/Q,_=o,Z=a):D?(_=E?o:_,Z=I?a:Z,Q=u-1,A=(Z-_)/Q):(Q=(Z-_)/A,Z0(Q,Math.round(Q),A/1e3)?Q=Math.round(Q):Q=Math.ceil(Q));const ae=Math.max(iH(A),iH(_));z=Math.pow(10,wt(l)?ae:l),_=Math.round(_*z)/z,Z=Math.round(Z*z)/z;let ge=0;for(E&&(m&&_!==o?(i.push({value:o}),_<o&&ge++,Z0(Math.round((_+ge*A)*z)/z,o,lB(o,O,t))&&ge++):_<o&&ge++);ge<Q;++ge){const ne=Math.round((_+ge*A)*z)/z;if(I&&ne>a)break;i.push({value:ne})}return I&&m&&Z!==a?i.length&&Z0(i[i.length-1].value,a,lB(a,O,t))?i[i.length-1].value=a:i.push({value:a}):(!I||Z===a)&&i.push({value:Z}),i}function lB(t,e,{horizontal:i,minRotation:r}){const s=_a(r),n=(i?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/n,o)}class $C extends bf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return wt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:r}=this.getUserBounds();let{min:s,max:n}=this;const o=l=>s=i?s:l,a=l=>n=r?n:l;if(e){const l=Il(s),u=Il(n);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(s===n){let l=n===0?1:Math.abs(n*.05);a(n+l),e||o(s-l)}this.min=s,this.max=n}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},n=this._range||this,o=qje(s,n);return e.bounds==="ticks"&&FQ(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let i=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-i)/Math.max(e.length-1,1)/2;i-=s,r+=s}this._startValue=i,this._endValue=r,this._valueRange=r-i}getLabelForValue(e){return v1(e,this.chart.options.locale,this.options.ticks.format)}}class Yje extends $C{static id="linear";static defaults={ticks:{callback:eM.formatters.numeric}};determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=Hi(e)?e:0,this.max=Hi(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,r=_a(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,n.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const jw=t=>Math.floor(vh(t)),Cd=(t,e)=>Math.pow(10,jw(t)+e);function uB(t){return t/Math.pow(10,jw(t))===1}function cB(t,e,i){const r=Math.pow(10,i),s=Math.floor(t/r);return Math.ceil(e/r)-s}function Jje(t,e){const i=e-t;let r=jw(i);for(;cB(t,e,r)>10;)r++;for(;cB(t,e,r)<10;)r--;return Math.min(r,jw(t))}function Zje(t,{min:e,max:i}){e=Hn(t.min,e);const r=[],s=jw(e);let n=Jje(e,i),o=n<0?Math.pow(10,Math.abs(n)):1;const a=Math.pow(10,n),l=s>n?Math.pow(10,s):0,u=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((u-h)/Math.pow(10,n)),m=Hn(t.min,Math.round((l+h+p*Math.pow(10,n))*o)/o);for(;m<i;)r.push({value:m,major:uB(m),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(n++,p=2,o=n>=0?1:o),m=Math.round((l+h+p*Math.pow(10,n))*o)/o;const y=Hn(t.max,m);return r.push({value:y,major:uB(y),significand:p}),r}class Xje extends bf{static id="logarithmic";static defaults={ticks:{callback:eM.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){const r=$C.prototype.parse.apply(this,[e,i]);if(r===0){this._zero=!0;return}return Hi(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=Hi(e)?Math.max(0,e):null,this.max=Hi(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Hi(this._userMin)&&(this.min=e===Cd(this.min,0)?Cd(this.min,-1):Cd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let r=this.min,s=this.max;const n=a=>r=e?r:a,o=a=>s=i?s:a;r===s&&(r<=0?(n(1),o(10)):(n(Cd(r,-1)),o(Cd(s,1)))),r<=0&&n(Cd(s,-1)),s<=0&&o(Cd(r,1)),this.min=r,this.max=s}buildTicks(){const e=this.options,i={min:this._userMin,max:this._userMax},r=Zje(i,this);return e.bounds==="ticks"&&FQ(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":v1(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=vh(e),this._valueRange=vh(this.max)-vh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(vh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}}function hP(t){const e=t.ticks;if(e.display&&t.display){const i=_s(e.backdropPadding);return ut(e.font&&e.font.size,Ci.font.size)+i.height}return 0}function Kje(t,e,i){return i=Ei(i)?i:[i],{w:qLe(t,e.string,i),h:i.length*e.lineHeight}}function hB(t,e,i,r,s){return t===r||t===s?{start:e-i/2,end:e+i/2}:t<r||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function Qje(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),r=[],s=[],n=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Lt/n:0;for(let l=0;l<n;l++){const u=o.setContext(t.getPointLabelContext(l));s[l]=u.padding;const h=t.getPointPosition(l,t.drawingArea+s[l],a),p=_r(u.font),m=Kje(t.ctx,p,t._pointLabels[l]);r[l]=m;const y=ps(t.getIndexAngle(l)+a),v=Math.round(M3(y)),w=hB(v,h.x,m.w,0,180),S=hB(v,h.y,m.h,90,270);eze(i,e,y,w,S)}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=rze(t,r,s)}function eze(t,e,i,r,s){const n=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/n,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/n,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function tze(t,e,i){const r=t.drawingArea,{extra:s,additionalAngle:n,padding:o,size:a}=i,l=t.getPointPosition(e,r+s+o,n),u=Math.round(M3(ps(l.angle+rr))),h=oze(l.y,a.h,u),p=sze(u),m=nze(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:m,top:h,right:m+a.w,bottom:h+a.h}}function ize(t,e){if(!e)return!0;const{left:i,top:r,right:s,bottom:n}=t;return!(ec({x:i,y:r},e)||ec({x:i,y:n},e)||ec({x:s,y:r},e)||ec({x:s,y:n},e))}function rze(t,e,i){const r=[],s=t._pointLabels.length,n=t.options,{centerPointLabels:o,display:a}=n.pointLabels,l={extra:hP(n)/2,additionalAngle:o?Lt/s:0};let u;for(let h=0;h<s;h++){l.padding=i[h],l.size=e[h];const p=tze(t,h,l);r.push(p),a==="auto"&&(p.visible=ize(p,u),p.visible&&(u=p))}return r}function sze(t){return t===0||t===180?"center":t<180?"left":"right"}function nze(t,e,i){return i==="right"?t-=e:i==="center"&&(t-=e/2),t}function oze(t,e,i){return i===90||i===270?t-=e/2:(i>270||i<90)&&(t-=e),t}function aze(t,e,i){const{left:r,top:s,right:n,bottom:o}=i,{backdropColor:a}=e;if(!wt(a)){const l=kh(e.borderRadius),u=_s(e.backdropPadding);t.fillStyle=a;const h=r-u.left,p=s-u.top,m=n-r+u.width,y=o-s+u.height;Object.values(l).some(v=>v!==0)?(t.beginPath(),Mh(t,{x:h,y:p,w:m,h:y,radius:l}),t.fill()):t.fillRect(h,p,m,y)}}function lze(t,e){const{ctx:i,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){const n=t._pointLabelItems[s];if(!n.visible)continue;const o=r.setContext(t.getPointLabelContext(s));aze(i,o,n);const a=_r(o.font),{x:l,y:u,textAlign:h}=n;uf(i,t._pointLabels[s],l,u+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function $ee(t,e,i,r){const{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,bi);else{let n=t.getPointPosition(0,e);s.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=t.getPointPosition(o,e),s.lineTo(n.x,n.y)}}function uze(t,e,i,r,s){const n=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||i<0||(n.save(),n.strokeStyle=a,n.lineWidth=l,n.setLineDash(s.dash||[]),n.lineDashOffset=s.dashOffset,n.beginPath(),$ee(t,i,o,r),n.closePath(),n.stroke(),n.restore())}function cze(t,e,i){return Kh(t,{label:i,index:e,type:"pointLabel"})}class hze extends $C{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:eM.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=_s(hP(this.options)/2),i=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(i,r)/2)}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!1);this.min=Hi(e)&&!isNaN(e)?e:0,this.max=Hi(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hP(this.options))}generateTickLabels(e){$C.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((i,r)=>{const s=li(this.options.pointLabels.callback,[i,r],this);return s||s===0?s:""}).filter((i,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Qje(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,r,s){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,r,s))}getIndexAngle(e){const i=bi/(this._pointLabels.length||1),r=this.options.startAngle||0;return ps(e*i+_a(r))}getDistanceFromCenterForValue(e){if(wt(e))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if(wt(e))return NaN;const i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){const i=this._pointLabels||[];if(e>=0&&e<i.length){const r=i[e];return cze(this.getContext(),e,r)}}getPointPosition(e,i,r=0){const s=this.getIndexAngle(e)-rr+r;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:i,top:r,right:s,bottom:n}=this._pointLabelItems[e];return{left:i,top:r,right:s,bottom:n}}drawBackground(){const{backgroundColor:e,grid:{circular:i}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),$ee(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,i=this.options,{angleLines:r,grid:s,border:n}=i,o=this._pointLabels.length;let a,l,u;if(i.pointLabels.display&&lze(this,o),s.display&&this.ticks.forEach((h,p)=>{if(p!==0||p===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const m=this.getContext(p),y=s.setContext(m),v=n.setContext(m);uze(this,y,l,o,v)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:m}=h;!m||!p||(e.lineWidth=m,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(i.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,i=this.options,r=i.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let n,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!i.reverse)return;const u=r.setContext(this.getContext(l)),h=_r(u.font);if(n=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const p=_s(u.backdropPadding);e.fillRect(-o/2-p.left,-n-h.size/2-p.top,o+p.width,h.size+p.height)}uf(e,a.label,0,-n,h,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}const aM={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(aM);function dB(t,e){return t-e}function pB(t,e){if(wt(e))return null;const i=t._adapter,{parser:r,round:s,isoWeekday:n}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Hi(o)||(o=typeof r=="string"?i.parse(o,r):i.parse(o)),o===null?null:(s&&(o=s==="week"&&(Iy(n)||n===!0)?i.startOf(o,"isoWeek",n):i.startOf(o,s)),+o)}function fB(t,e,i,r){const s=yn.length;for(let n=yn.indexOf(t);n<s-1;++n){const o=aM[yn[n]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-e)/(a*o.size))<=r)return yn[n]}return yn[s-1]}function dze(t,e,i,r,s){for(let n=yn.length-1;n>=yn.indexOf(i);n--){const o=yn[n];if(aM[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return yn[i?yn.indexOf(i):0]}function pze(t){for(let e=yn.indexOf(t)+1,i=yn.length;e<i;++e)if(aM[yn[e]].common)return yn[e]}function mB(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:r,hi:s}=k3(i,e),n=i[r]>=e?i[r]:i[s];t[n]=!0}}function fze(t,e,i,r){const s=t._adapter,n=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=n;a<=o;a=+s.add(a,1,r))l=i[a],l>=0&&(e[l].major=!0);return e}function gB(t,e,i){const r=[],s={},n=e.length;let o,a;for(o=0;o<n;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return n===0||!i?r:fze(t,r,s,i)}class dP extends bf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const r=e.time||(e.time={}),s=this._adapter=new hee._date(e.adapters.date);s.init(i),J0(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:pB(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,r=e.time.unit||"day";let{min:s,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(n=Math.max(n,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Hi(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),n=Hi(n)&&!isNaN(n)?n:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){const e=this.options,i=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,o=this.max,a=PLe(s,n,o);return this._unit=i.unit||(r.autoSkip?fB(i.minUnit,this.min,this.max,this._getLabelCapacity(n)):dze(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:pze(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),gB(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,r=0,s,n;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,n=this.getDecimalForValue(e[e.length-1]),e.length===1?r=n:r=(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;i=zr(i,0,o),r=zr(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,i=this.min,r=this.max,s=this.options,n=s.time,o=n.unit||fB(n.minUnit,i,r,this._getLabelCapacity(i)),a=ut(s.ticks.stepSize,1),l=o==="week"?n.isoWeekday:!1,u=Iy(l)||l===!0,h={};let p=i,m,y;if(u&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,u?"day":o),e.diff(r,i,o)>1e5*a)throw new Error(i+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(m=p,y=0;m<r;m=+e.add(m,a,o),y++)mB(h,m,v);return(m===r||s.bounds==="ticks"||y===1)&&mB(h,m,v),Object.keys(h).sort(dB).map(w=>+w)}getLabelForValue(e){const i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(e,r.tooltipFormat):i.format(e,r.displayFormats.datetime)}format(e,i){const s=this.options.time.displayFormats,n=this._unit,o=i||s[n];return this._adapter.format(e,o)}_tickFormatFunction(e,i,r,s){const n=this.options,o=n.ticks.callback;if(o)return li(o,[e,i,r],this);const a=n.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],p=u&&a[u],m=r[i],y=u&&p&&m&&m.major;return this._adapter.format(e,s||(y?p:h))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){const i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,r=this.ctx.measureText(e).width,s=_a(this.isHorizontal()?i.maxRotation:i.minRotation),n=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*n+a*o,h:r*o+a*n}}_getLabelCapacity(e){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,n=this._tickFormatFunction(e,0,gB(this,[e],this._majorUnit),s),o=this._getLabelSize(n),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],i,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,r;if(e.length)return e;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(pB(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return VQ(e.sort(dB))}}function tx(t,e,i){let r=0,s=t.length-1,n,o,a,l;i?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Qu(t,"pos",e)),{pos:n,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Qu(t,"time",e)),{time:n,pos:a}=t[r],{time:o,pos:l}=t[s]);const u=o-n;return u?a+(l-a)*(e-n)/u:a}class mze extends dP{static id="timeseries";static defaults=dP.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=tx(i,this.min),this._tableRange=tx(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:r}=this,s=[],n=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=i&&u<=r&&s.push(u);if(s.length<2)return[{time:i,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],u=s[o],Math.round((h+l)/2)!==u&&n.push({time:u,pos:o/(a-1)});return n}_generate(){const e=this.min,i=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(i)||r.length===1)&&r.push(i),r.sort((s,n)=>s-n)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),r=this.getLabelTimestamps();return i.length&&r.length?e=this.normalize(i.concat(r)):e=i.length?i:r,e=this._cache.all=e,e}getDecimalForValue(e){return(tx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return tx(this._table,r*this._tableRange+this._minPos,!0)}}var gze=Object.freeze({__proto__:null,CategoryScale:Wje,LinearScale:Yje,LogarithmicScale:Xje,RadialLinearScale:hze,TimeScale:dP,TimeSeriesScale:mze});const yze=[mNe,qFe,Uje,gze],Aee=6048e5,bze=864e5,w1=6e4,_1=36e5,vze=1e3,yB=Symbol.for("constructDateFrom");function Wi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&yB in t?t[yB](e):t instanceof Date?new t.constructor(e):new Date(e)}function ct(t,e){return Wi(e||t,t)}function lM(t,e,i){const r=ct(t,i?.in);return isNaN(e)?Wi(i?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function z3(t,e,i){const r=ct(t,i?.in);if(isNaN(e))return Wi(t,NaN);if(!e)return r;const s=r.getDate(),n=Wi(t,r.getTime());n.setMonth(r.getMonth()+e+1,0);const o=n.getDate();return s>=o?n:(r.setFullYear(n.getFullYear(),n.getMonth(),s),r)}function V3(t,e,i){return Wi(t,+ct(t)+e)}function wze(t,e,i){return V3(t,e*_1)}let _ze={};function vf(){return _ze}function jl(t,e){const i=vf(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=ct(t,e?.in),n=s.getDay(),o=(n<r?7:0)+n-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Oy(t,e){return jl(t,{...e,weekStartsOn:1})}function Oee(t,e){const i=ct(t,e?.in),r=i.getFullYear(),s=Wi(i,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const n=Oy(s),o=Wi(i,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Oy(o);return i.getTime()>=n.getTime()?r+1:i.getTime()>=a.getTime()?r:r-1}function AC(t){const e=ct(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+t-+i}function wf(t,...e){const i=Wi.bind(null,e.find(r=>typeof r=="object"));return e.map(i)}function pP(t,e){const i=ct(t,e?.in);return i.setHours(0,0,0,0),i}function Pee(t,e,i){const[r,s]=wf(i?.in,t,e),n=pP(r),o=pP(s),a=+n-AC(n),l=+o-AC(o);return Math.round((a-l)/bze)}function xze(t,e){const i=Oee(t,e),r=Wi(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),Oy(r)}function Sze(t,e,i){const r=ct(t,i?.in);return r.setTime(r.getTime()+e*w1),r}function Eze(t,e,i){return z3(t,e*3,i)}function Cze(t,e,i){return V3(t,e*1e3)}function Tze(t,e,i){return lM(t,e*7,i)}function Mze(t,e,i){return z3(t,e*12,i)}function Q0(t,e){const i=+ct(t)-+ct(e);return i<0?-1:i>0?1:i}function kze(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Dee(t){return!(!kze(t)&&typeof t!="number"||isNaN(+ct(t)))}function Rze(t,e,i){const[r,s]=wf(i?.in,t,e),n=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return n*12+o}function Ize(t,e,i){const[r,s]=wf(i?.in,t,e);return r.getFullYear()-s.getFullYear()}function Lee(t,e,i){const[r,s]=wf(i?.in,t,e),n=bB(r,s),o=Math.abs(Pee(r,s));r.setDate(r.getDate()-n*o);const a=+(bB(r,s)===-n),l=n*(o-a);return l===0?0:l}function bB(t,e){const i=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return i<0?-1:i>0?1:i}function x1(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function $ze(t,e,i){const[r,s]=wf(i?.in,t,e),n=(+r-+s)/_1;return x1(i?.roundingMethod)(n)}function U3(t,e){return+ct(t)-+ct(e)}function Aze(t,e,i){const r=U3(t,e)/w1;return x1(i?.roundingMethod)(r)}function Nee(t,e){const i=ct(t,e?.in);return i.setHours(23,59,59,999),i}function Fee(t,e){const i=ct(t,e?.in),r=i.getMonth();return i.setFullYear(i.getFullYear(),r+1,0),i.setHours(23,59,59,999),i}function Oze(t,e){const i=ct(t,e?.in);return+Nee(i,e)==+Fee(i,e)}function jee(t,e,i){const[r,s,n]=wf(i?.in,t,t,e),o=Q0(s,n),a=Math.abs(Rze(s,n));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let l=Q0(s,n)===-o;Oze(r)&&a===1&&Q0(r,n)===1&&(l=!1);const u=o*(a-+l);return u===0?0:u}function Pze(t,e,i){const r=jee(t,e,i)/3;return x1(i?.roundingMethod)(r)}function Dze(t,e,i){const r=U3(t,e)/1e3;return x1(i?.roundingMethod)(r)}function Lze(t,e,i){const r=Lee(t,e,i)/7;return x1(i?.roundingMethod)(r)}function Nze(t,e,i){const[r,s]=wf(i?.in,t,e),n=Q0(r,s),o=Math.abs(Ize(r,s));r.setFullYear(1584),s.setFullYear(1584);const a=Q0(r,s)===-n,l=n*(o-+a);return l===0?0:l}function Fze(t,e){const i=ct(t,e?.in),r=i.getMonth(),s=r-r%3;return i.setMonth(s,1),i.setHours(0,0,0,0),i}function jze(t,e){const i=ct(t,e?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function zze(t,e){const i=ct(t,e?.in),r=i.getFullYear();return i.setFullYear(r+1,0,0),i.setHours(23,59,59,999),i}function zee(t,e){const i=ct(t,e?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}function Vze(t,e){const i=ct(t,e?.in);return i.setMinutes(59,59,999),i}function Uze(t,e){const i=vf(),r=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=ct(t,e?.in),n=s.getDay(),o=(n<r?-7:0)+6-(n-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function Hze(t,e){const i=ct(t,e?.in);return i.setSeconds(59,999),i}function Bze(t,e){const i=ct(t,e?.in),r=i.getMonth(),s=r-r%3+3;return i.setMonth(s,0),i.setHours(23,59,59,999),i}function Gze(t,e){const i=ct(t,e?.in);return i.setMilliseconds(999),i}const Wze={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qze=(t,e,i)=>{let r;const s=Wze[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function Ik(t){return(e={})=>{const i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}const Yze={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jze={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zze={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xze={date:Ik({formats:Yze,defaultWidth:"full"}),time:Ik({formats:Jze,defaultWidth:"full"}),dateTime:Ik({formats:Zze,defaultWidth:"full"})},Kze={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qze=(t,e,i,r)=>Kze[t];function tv(t){return(e,i)=>{const r=i?.context?String(i.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=i?.width?String(i.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=i?.width?String(i.width):t.defaultWidth;s=t.values[a]||t.values[o]}const n=t.argumentCallback?t.argumentCallback(e):e;return s[n]}}const e5e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t5e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},i5e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},r5e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s5e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},n5e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o5e=(t,e)=>{const i=Number(t),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},a5e={ordinalNumber:o5e,era:tv({values:e5e,defaultWidth:"wide"}),quarter:tv({values:t5e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:tv({values:i5e,defaultWidth:"wide"}),day:tv({values:r5e,defaultWidth:"wide"}),dayPeriod:tv({values:s5e,defaultWidth:"wide",formattingValues:n5e,defaultFormattingWidth:"wide"})};function iv(t){return(e,i={})=>{const r=i.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],n=e.match(s);if(!n)return null;const o=n[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?u5e(a,p=>p.test(o)):l5e(a,p=>p.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=i.valueCallback?i.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function l5e(t,e){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i}function u5e(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i}function c5e(t){return(e,i={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],n=e.match(t.parsePattern);if(!n)return null;let o=t.valueCallback?t.valueCallback(n[0]):n[0];o=i.valueCallback?i.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const h5e=/^(\d+)(th|st|nd|rd)?/i,d5e=/\d+/i,p5e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},f5e={any:[/^b/i,/^(a|c)/i]},m5e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},g5e={any:[/1/i,/2/i,/3/i,/4/i]},y5e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},b5e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v5e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},w5e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_5e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},x5e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},S5e={ordinalNumber:c5e({matchPattern:h5e,parsePattern:d5e,valueCallback:t=>parseInt(t,10)}),era:iv({matchPatterns:p5e,defaultMatchWidth:"wide",parsePatterns:f5e,defaultParseWidth:"any"}),quarter:iv({matchPatterns:m5e,defaultMatchWidth:"wide",parsePatterns:g5e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:iv({matchPatterns:y5e,defaultMatchWidth:"wide",parsePatterns:b5e,defaultParseWidth:"any"}),day:iv({matchPatterns:v5e,defaultMatchWidth:"wide",parsePatterns:w5e,defaultParseWidth:"any"}),dayPeriod:iv({matchPatterns:_5e,defaultMatchWidth:"any",parsePatterns:x5e,defaultParseWidth:"any"})},Vee={code:"en-US",formatDistance:qze,formatLong:Xze,formatRelative:Qze,localize:a5e,match:S5e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function E5e(t,e){const i=ct(t,e?.in);return Pee(i,zee(i))+1}function Uee(t,e){const i=ct(t,e?.in),r=+Oy(i)-+xze(i);return Math.round(r/Aee)+1}function H3(t,e){const i=ct(t,e?.in),r=i.getFullYear(),s=vf(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Wi(e?.in||t,0);o.setFullYear(r+1,0,n),o.setHours(0,0,0,0);const a=jl(o,e),l=Wi(e?.in||t,0);l.setFullYear(r,0,n),l.setHours(0,0,0,0);const u=jl(l,e);return+i>=+a?r+1:+i>=+u?r:r-1}function C5e(t,e){const i=vf(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=H3(t,e),n=Wi(e?.in||t,0);return n.setFullYear(s,0,r),n.setHours(0,0,0,0),jl(n,e)}function Hee(t,e){const i=ct(t,e?.in),r=+jl(i,e)-+C5e(i,e);return Math.round(r/Aee)+1}function Yt(t,e){const i=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return i+r}const Cc={y(t,e){const i=t.getFullYear(),r=i>0?i:1-i;return Yt(e==="yy"?r%100:r,e.length)},M(t,e){const i=t.getMonth();return e==="M"?String(i+1):Yt(i+1,2)},d(t,e){return Yt(t.getDate(),e.length)},a(t,e){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(t,e){return Yt(t.getHours()%12||12,e.length)},H(t,e){return Yt(t.getHours(),e.length)},m(t,e){return Yt(t.getMinutes(),e.length)},s(t,e){return Yt(t.getSeconds(),e.length)},S(t,e){const i=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,i-3));return Yt(s,e.length)}},rm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vB={G:function(t,e,i){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(t,e,i){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return i.ordinalNumber(s,{unit:"year"})}return Cc.y(t,e)},Y:function(t,e,i,r){const s=H3(t,r),n=s>0?s:1-s;if(e==="YY"){const o=n%100;return Yt(o,2)}return e==="Yo"?i.ordinalNumber(n,{unit:"year"}):Yt(n,e.length)},R:function(t,e){const i=Oee(t);return Yt(i,e.length)},u:function(t,e){const i=t.getFullYear();return Yt(i,e.length)},Q:function(t,e,i){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Yt(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,i){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Yt(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,i){const r=t.getMonth();switch(e){case"M":case"MM":return Cc.M(t,e);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,i){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Yt(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,i,r){const s=Hee(t,r);return e==="wo"?i.ordinalNumber(s,{unit:"week"}):Yt(s,e.length)},I:function(t,e,i){const r=Uee(t);return e==="Io"?i.ordinalNumber(r,{unit:"week"}):Yt(r,e.length)},d:function(t,e,i){return e==="do"?i.ordinalNumber(t.getDate(),{unit:"date"}):Cc.d(t,e)},D:function(t,e,i){const r=E5e(t);return e==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):Yt(r,e.length)},E:function(t,e,i){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,i,r){const s=t.getDay(),n=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(n);case"ee":return Yt(n,2);case"eo":return i.ordinalNumber(n,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,i,r){const s=t.getDay(),n=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(n);case"cc":return Yt(n,e.length);case"co":return i.ordinalNumber(n,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,i){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Yt(s,e.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,i){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,i){const r=t.getHours();let s;switch(r===12?s=rm.noon:r===0?s=rm.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,i){const r=t.getHours();let s;switch(r>=17?s=rm.evening:r>=12?s=rm.afternoon:r>=4?s=rm.morning:s=rm.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,i){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return Cc.h(t,e)},H:function(t,e,i){return e==="Ho"?i.ordinalNumber(t.getHours(),{unit:"hour"}):Cc.H(t,e)},K:function(t,e,i){const r=t.getHours()%12;return e==="Ko"?i.ordinalNumber(r,{unit:"hour"}):Yt(r,e.length)},k:function(t,e,i){let r=t.getHours();return r===0&&(r=24),e==="ko"?i.ordinalNumber(r,{unit:"hour"}):Yt(r,e.length)},m:function(t,e,i){return e==="mo"?i.ordinalNumber(t.getMinutes(),{unit:"minute"}):Cc.m(t,e)},s:function(t,e,i){return e==="so"?i.ordinalNumber(t.getSeconds(),{unit:"second"}):Cc.s(t,e)},S:function(t,e){return Cc.S(t,e)},X:function(t,e,i){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return _B(r);case"XXXX":case"XX":return op(r);case"XXXXX":case"XXX":default:return op(r,":")}},x:function(t,e,i){const r=t.getTimezoneOffset();switch(e){case"x":return _B(r);case"xxxx":case"xx":return op(r);case"xxxxx":case"xxx":default:return op(r,":")}},O:function(t,e,i){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+wB(r,":");case"OOOO":default:return"GMT"+op(r,":")}},z:function(t,e,i){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+wB(r,":");case"zzzz":default:return"GMT"+op(r,":")}},t:function(t,e,i){const r=Math.trunc(+t/1e3);return Yt(r,e.length)},T:function(t,e,i){return Yt(+t,e.length)}};function wB(t,e=""){const i=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),n=r%60;return n===0?i+String(s):i+String(s)+e+Yt(n,2)}function _B(t,e){return t%60===0?(t>0?"-":"+")+Yt(Math.abs(t)/60,2):op(t,e)}function op(t,e=""){const i=t>0?"-":"+",r=Math.abs(t),s=Yt(Math.trunc(r/60),2),n=Yt(r%60,2);return i+s+e+n}const xB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Bee=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},T5e=(t,e)=>{const i=t.match(/(P+)(p+)?/)||[],r=i[1],s=i[2];if(!s)return xB(t,e);let n;switch(r){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"});break}return n.replace("{{date}}",xB(r,e)).replace("{{time}}",Bee(s,e))},fP={p:Bee,P:T5e},M5e=/^D+$/,k5e=/^Y+$/,R5e=["D","DD","YY","YYYY"];function Gee(t){return M5e.test(t)}function Wee(t){return k5e.test(t)}function mP(t,e,i){const r=I5e(t,e,i);if(console.warn(r),R5e.includes(t))throw new RangeError(r)}function I5e(t,e,i){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $5e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,A5e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,O5e=/^'([^]*?)'?$/,P5e=/''/g,D5e=/[a-zA-Z]/;function L5e(t,e,i){const r=vf(),s=i?.locale??r.locale??Vee,n=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=ct(t,i?.in);if(!Dee(a))throw new RangeError("Invalid time value");let l=e.match(A5e).map(h=>{const p=h[0];if(p==="p"||p==="P"){const m=fP[p];return m(h,s.formatLong)}return h}).join("").match($5e).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:N5e(h)};if(vB[p])return{isToken:!0,value:h};if(p.match(D5e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:n,weekStartsOn:o,locale:s};return l.map(h=>{if(!h.isToken)return h.value;const p=h.value;(!i?.useAdditionalWeekYearTokens&&Wee(p)||!i?.useAdditionalDayOfYearTokens&&Gee(p))&&mP(p,e,String(t));const m=vB[p[0]];return m(a,p,s.localize,u)}).join("")}function N5e(t){const e=t.match(O5e);return e?e[1].replace(P5e,"'"):t}function F5e(){return Object.assign({},vf())}function j5e(t,e){const i=ct(t,e?.in).getDay();return i===0?7:i}function z5e(t,e){const i=V5e(e)?new e(0):Wi(e,0);return i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),i}function V5e(t){return typeof t=="function"&&t.prototype?.constructor===t}const U5e=10;class qee{subPriority=0;validate(e,i){return!0}}class H5e extends qee{constructor(e,i,r,s,n){super(),this.value=e,this.validateValue=i,this.setValue=r,this.priority=s,n&&(this.subPriority=n)}validate(e,i){return this.validateValue(e,this.value,i)}set(e,i,r){return this.setValue(e,i,this.value,r)}}class B5e extends qee{priority=U5e;subPriority=-1;constructor(e,i){super(),this.context=e||(r=>Wi(i,r))}set(e,i){return i.timestampIsSet?e:Wi(e,z5e(e,this.context))}}class Ut{run(e,i,r,s){const n=this.parse(e,i,r,s);return n?{setter:new H5e(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(e,i,r){return!0}}class G5e extends Ut{priority=140;parse(e,i,r){switch(i){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,i,r){return i.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const sr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},vl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function nr(t,e){return t&&{value:e(t.value),rest:t.rest}}function ki(t,e){const i=e.match(t);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function wl(t,e){const i=e.match(t);if(!i)return null;if(i[0]==="Z")return{value:0,rest:e.slice(1)};const r=i[1]==="+"?1:-1,s=i[2]?parseInt(i[2],10):0,n=i[3]?parseInt(i[3],10):0,o=i[5]?parseInt(i[5],10):0;return{value:r*(s*_1+n*w1+o*vze),rest:e.slice(i[0].length)}}function Yee(t){return ki(sr.anyDigitsSigned,t)}function qi(t,e){switch(t){case 1:return ki(sr.singleDigit,e);case 2:return ki(sr.twoDigits,e);case 3:return ki(sr.threeDigits,e);case 4:return ki(sr.fourDigits,e);default:return ki(new RegExp("^\\d{1,"+t+"}"),e)}}function OC(t,e){switch(t){case 1:return ki(sr.singleDigitSigned,e);case 2:return ki(sr.twoDigitsSigned,e);case 3:return ki(sr.threeDigitsSigned,e);case 4:return ki(sr.fourDigitsSigned,e);default:return ki(new RegExp("^-?\\d{1,"+t+"}"),e)}}function B3(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Jee(t,e){const i=e>0,r=i?e:1-e;let s;if(r<=50)s=t||100;else{const n=r+50,o=Math.trunc(n/100)*100,a=t>=n%100;s=t+o-(a?100:0)}return i?s:1-s}function Zee(t){return t%400===0||t%4===0&&t%100!==0}class W5e extends Ut{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,i,r){const s=n=>({year:n,isTwoDigitYear:i==="yy"});switch(i){case"y":return nr(qi(4,e),s);case"yo":return nr(r.ordinalNumber(e,{unit:"year"}),s);default:return nr(qi(i.length,e),s)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,r){const s=e.getFullYear();if(r.isTwoDigitYear){const o=Jee(r.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const n=!("era"in i)||i.era===1?r.year:1-r.year;return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}class q5e extends Ut{priority=130;parse(e,i,r){const s=n=>({year:n,isTwoDigitYear:i==="YY"});switch(i){case"Y":return nr(qi(4,e),s);case"Yo":return nr(r.ordinalNumber(e,{unit:"year"}),s);default:return nr(qi(i.length,e),s)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,r,s){const n=H3(e,s);if(r.isTwoDigitYear){const a=Jee(r.year,n);return e.setFullYear(a,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),jl(e,s)}const o=!("era"in i)||i.era===1?r.year:1-r.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),jl(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Y5e extends Ut{priority=130;parse(e,i){return OC(i==="R"?4:i.length,e)}set(e,i,r){const s=Wi(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Oy(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class J5e extends Ut{priority=130;parse(e,i){return OC(i==="u"?4:i.length,e)}set(e,i,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Z5e extends Ut{priority=120;parse(e,i,r){switch(i){case"Q":case"QQ":return qi(i.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=1&&i<=4}set(e,i,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class X5e extends Ut{priority=120;parse(e,i,r){switch(i){case"q":case"qq":return qi(i.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=1&&i<=4}set(e,i,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class K5e extends Ut{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,i,r){const s=n=>n-1;switch(i){case"M":return nr(ki(sr.month,e),s);case"MM":return nr(qi(2,e),s);case"Mo":return nr(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Q5e extends Ut{priority=110;parse(e,i,r){const s=n=>n-1;switch(i){case"L":return nr(ki(sr.month,e),s);case"LL":return nr(qi(2,e),s);case"Lo":return nr(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function e4e(t,e,i){const r=ct(t,i?.in),s=Hee(r,i)-e;return r.setDate(r.getDate()-s*7),ct(r,i?.in)}class t4e extends Ut{priority=100;parse(e,i,r){switch(i){case"w":return ki(sr.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return qi(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,r,s){return jl(e4e(e,r,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function i4e(t,e,i){const r=ct(t,i?.in),s=Uee(r,i)-e;return r.setDate(r.getDate()-s*7),r}class r4e extends Ut{priority=100;parse(e,i,r){switch(i){case"I":return ki(sr.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return qi(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,r){return Oy(i4e(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const s4e=[31,28,31,30,31,30,31,31,30,31,30,31],n4e=[31,29,31,30,31,30,31,31,30,31,30,31];class o4e extends Ut{priority=90;subPriority=1;parse(e,i,r){switch(i){case"d":return ki(sr.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return qi(i.length,e)}}validate(e,i){const r=e.getFullYear(),s=Zee(r),n=e.getMonth();return s?i>=1&&i<=n4e[n]:i>=1&&i<=s4e[n]}set(e,i,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class a4e extends Ut{priority=90;subpriority=1;parse(e,i,r){switch(i){case"D":case"DD":return ki(sr.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return qi(i.length,e)}}validate(e,i){const r=e.getFullYear();return Zee(r)?i>=1&&i<=366:i>=1&&i<=365}set(e,i,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function G3(t,e,i){const r=vf(),s=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,n=ct(t,i?.in),o=n.getDay(),l=(e%7+7)%7,u=7-s,h=e<0||e>6?e-(o+u)%7:(l+u)%7-(o+u)%7;return lM(n,h,i)}class l4e extends Ut{priority=90;parse(e,i,r){switch(i){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,s){return e=G3(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class u4e extends Ut{priority=90;parse(e,i,r,s){const n=o=>{const a=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+a};switch(i){case"e":case"ee":return nr(qi(i.length,e),n);case"eo":return nr(r.ordinalNumber(e,{unit:"day"}),n);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,s){return e=G3(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class c4e extends Ut{priority=90;parse(e,i,r,s){const n=o=>{const a=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+a};switch(i){case"c":case"cc":return nr(qi(i.length,e),n);case"co":return nr(r.ordinalNumber(e,{unit:"day"}),n);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,s){return e=G3(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function h4e(t,e,i){const r=ct(t,i?.in),s=j5e(r,i),n=e-s;return lM(r,n,i)}class d4e extends Ut{priority=90;parse(e,i,r){const s=n=>n===0?7:n;switch(i){case"i":case"ii":return qi(i.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return nr(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return nr(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return nr(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return nr(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,i){return i>=1&&i<=7}set(e,i,r){return e=h4e(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class p4e extends Ut{priority=80;parse(e,i,r){switch(i){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(B3(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class f4e extends Ut{priority=80;parse(e,i,r){switch(i){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(B3(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class m4e extends Ut{priority=80;parse(e,i,r){switch(i){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(B3(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class g4e extends Ut{priority=70;parse(e,i,r){switch(i){case"h":return ki(sr.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return qi(i.length,e)}}validate(e,i){return i>=1&&i<=12}set(e,i,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class y4e extends Ut{priority=70;parse(e,i,r){switch(i){case"H":return ki(sr.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return qi(i.length,e)}}validate(e,i){return i>=0&&i<=23}set(e,i,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class b4e extends Ut{priority=70;parse(e,i,r){switch(i){case"K":return ki(sr.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return qi(i.length,e)}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class v4e extends Ut{priority=70;parse(e,i,r){switch(i){case"k":return ki(sr.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return qi(i.length,e)}}validate(e,i){return i>=1&&i<=24}set(e,i,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class w4e extends Ut{priority=60;parse(e,i,r){switch(i){case"m":return ki(sr.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return qi(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class _4e extends Ut{priority=50;parse(e,i,r){switch(i){case"s":return ki(sr.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return qi(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class x4e extends Ut{priority=30;parse(e,i){const r=s=>Math.trunc(s*Math.pow(10,-i.length+3));return nr(qi(i.length,e),r)}set(e,i,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class S4e extends Ut{priority=10;parse(e,i){switch(i){case"X":return wl(vl.basicOptionalMinutes,e);case"XX":return wl(vl.basic,e);case"XXXX":return wl(vl.basicOptionalSeconds,e);case"XXXXX":return wl(vl.extendedOptionalSeconds,e);case"XXX":default:return wl(vl.extended,e)}}set(e,i,r){return i.timestampIsSet?e:Wi(e,e.getTime()-AC(e)-r)}incompatibleTokens=["t","T","x"]}class E4e extends Ut{priority=10;parse(e,i){switch(i){case"x":return wl(vl.basicOptionalMinutes,e);case"xx":return wl(vl.basic,e);case"xxxx":return wl(vl.basicOptionalSeconds,e);case"xxxxx":return wl(vl.extendedOptionalSeconds,e);case"xxx":default:return wl(vl.extended,e)}}set(e,i,r){return i.timestampIsSet?e:Wi(e,e.getTime()-AC(e)-r)}incompatibleTokens=["t","T","X"]}class C4e extends Ut{priority=40;parse(e){return Yee(e)}set(e,i,r){return[Wi(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class T4e extends Ut{priority=20;parse(e){return Yee(e)}set(e,i,r){return[Wi(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const M4e={G:new G5e,y:new W5e,Y:new q5e,R:new Y5e,u:new J5e,Q:new Z5e,q:new X5e,M:new K5e,L:new Q5e,w:new t4e,I:new r4e,d:new o4e,D:new a4e,E:new l4e,e:new u4e,c:new c4e,i:new d4e,a:new p4e,b:new f4e,B:new m4e,h:new g4e,H:new y4e,K:new b4e,k:new v4e,m:new w4e,s:new _4e,S:new x4e,X:new S4e,x:new E4e,t:new C4e,T:new T4e},k4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,R4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I4e=/^'([^]*?)'?$/,$4e=/''/g,A4e=/\S/,O4e=/[a-zA-Z]/;function P4e(t,e,i,r){const s=()=>Wi(r?.in||i,NaN),n=F5e(),o=r?.locale??n.locale??Vee,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0;if(!e)return t?s():ct(i,r?.in);const u={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new B5e(r?.in,i)],p=e.match(R4e).map(S=>{const E=S[0];if(E in fP){const I=fP[E];return I(S,o.formatLong)}return S}).join("").match(k4e),m=[];for(let S of p){!r?.useAdditionalWeekYearTokens&&Wee(S)&&mP(S,e,t),!r?.useAdditionalDayOfYearTokens&&Gee(S)&&mP(S,e,t);const E=S[0],I=M4e[E];if(I){const{incompatibleTokens:D}=I;if(Array.isArray(D)){const A=m.find(z=>D.includes(z.token)||z.token===E);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${S}\` at the same time`)}else if(I.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${S}\` and any other token at the same time`);m.push({token:E,fullToken:S});const O=I.run(t,S,o.match,u);if(!O)return s();h.push(O.setter),t=O.rest}else{if(E.match(O4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(S==="''"?S="'":E==="'"&&(S=D4e(S)),t.indexOf(S)===0)t=t.slice(S.length);else return s()}}if(t.length>0&&A4e.test(t))return s();const y=h.map(S=>S.priority).sort((S,E)=>E-S).filter((S,E,I)=>I.indexOf(S)===E).map(S=>h.filter(E=>E.priority===S).sort((E,I)=>I.subPriority-E.subPriority)).map(S=>S[0]);let v=ct(i,r?.in);if(isNaN(+v))return s();const w={};for(const S of y){if(!S.validate(v,u))return s();const E=S.set(v,w,u);Array.isArray(E)?(v=E[0],Object.assign(w,E[1])):v=E}return v}function D4e(t){return t.match(I4e)[1].replace($4e,"'")}function L4e(t,e){const i=ct(t,e?.in);return i.setMinutes(0,0,0),i}function N4e(t,e){const i=ct(t,e?.in);return i.setSeconds(0,0),i}function F4e(t,e){const i=ct(t,e?.in);return i.setMilliseconds(0),i}function j4e(t,e){const i=()=>Wi(e?.in,NaN),r=e?.additionalDigits??2,s=H4e(t);let n;if(s.date){const u=B4e(s.date,r);n=G4e(u.restDateString,u.year)}if(!n||isNaN(+n))return i();const o=+n;let a=0,l;if(s.time&&(a=W4e(s.time),isNaN(a)))return i();if(s.timezone){if(l=q4e(s.timezone),isNaN(l))return i()}else{const u=new Date(o+a),h=ct(0,e?.in);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return ct(o+a+l,e?.in)}const ix={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},z4e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,V4e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,U4e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function H4e(t){const e={},i=t.split(ix.dateTimeDelimiter);let r;if(i.length>2)return e;if(/:/.test(i[0])?r=i[0]:(e.date=i[0],r=i[1],ix.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ix.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=ix.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function B4e(t,e){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(i);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:n===null?s:n*100,restDateString:t.slice((r[1]||r[2]).length)}}function G4e(t,e){if(e===null)return new Date(NaN);const i=t.match(z4e);if(!i)return new Date(NaN);const r=!!i[4],s=rv(i[1]),n=rv(i[2])-1,o=rv(i[3]),a=rv(i[4]),l=rv(i[5])-1;if(r)return K4e(e,a,l)?Y4e(e,a,l):new Date(NaN);{const u=new Date(0);return!Z4e(e,n,o)||!X4e(e,s)?new Date(NaN):(u.setUTCFullYear(e,n,Math.max(s,o)),u)}}function rv(t){return t?parseInt(t):1}function W4e(t){const e=t.match(V4e);if(!e)return NaN;const i=$k(e[1]),r=$k(e[2]),s=$k(e[3]);return Q4e(i,r,s)?i*_1+r*w1+s*1e3:NaN}function $k(t){return t&&parseFloat(t.replace(",","."))||0}function q4e(t){if(t==="Z")return 0;const e=t.match(U4e);if(!e)return 0;const i=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return eVe(r,s)?i*(r*_1+s*w1):NaN}function Y4e(t,e,i){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,n=(e-1)*7+i+1-s;return r.setUTCDate(r.getUTCDate()+n),r}const J4e=[31,null,31,30,31,30,31,31,30,31,30,31];function Xee(t){return t%400===0||t%4===0&&t%100!==0}function Z4e(t,e,i){return e>=0&&e<=11&&i>=1&&i<=(J4e[e]||(Xee(t)?29:28))}function X4e(t,e){return e>=1&&e<=(Xee(t)?366:365)}function K4e(t,e,i){return e>=1&&e<=53&&i>=0&&i<=6}function Q4e(t,e,i){return t===24?e===0&&i===0:i>=0&&i<60&&e>=0&&e<60&&t>=0&&t<25}function eVe(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const tVe={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};hee._date.override({_id:"date-fns",formats:function(){return tVe},parse:function(t,e){if(t===null||typeof t>"u")return null;const i=typeof t;return i==="number"||t instanceof Date?t=ct(t):i==="string"&&(typeof e=="string"?t=P4e(t,e,new Date,this.options):t=j4e(t,this.options)),Dee(t)?t.getTime():null},format:function(t,e){return L5e(t,e,this.options)},add:function(t,e,i){switch(i){case"millisecond":return V3(t,e);case"second":return Cze(t,e);case"minute":return Sze(t,e);case"hour":return wze(t,e);case"day":return lM(t,e);case"week":return Tze(t,e);case"month":return z3(t,e);case"quarter":return Eze(t,e);case"year":return Mze(t,e);default:return t}},diff:function(t,e,i){switch(i){case"millisecond":return U3(t,e);case"second":return Dze(t,e);case"minute":return Aze(t,e);case"hour":return $ze(t,e);case"day":return Lee(t,e);case"week":return Lze(t,e);case"month":return jee(t,e);case"quarter":return Pze(t,e);case"year":return Nze(t,e);default:return 0}},startOf:function(t,e,i){switch(e){case"second":return F4e(t);case"minute":return N4e(t);case"hour":return L4e(t);case"day":return pP(t);case"week":return jl(t);case"isoWeek":return jl(t,{weekStartsOn:+i});case"month":return jze(t);case"quarter":return Fze(t);case"year":return zee(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Gze(t);case"minute":return Hze(t);case"hour":return Vze(t);case"day":return Nee(t);case"week":return Uze(t);case"month":return Fee(t);case"quarter":return Bze(t);case"year":return zze(t);default:return t}}});/*!
 * chartjs-chart-matrix v0.0.0-development
 * https://chartjs-chart-matrix.pages.dev/
 * (c) 2025 Jukka Kurkela
 * Released under the MIT license
 */var iVe="0.0.0-development";class S1 extends lc{initialize(){this.enableOptionSharing=!0,super.initialize()}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){const n=s==="reset",{xScale:o,yScale:a}=this._cachedMeta,l=this.resolveDataElementOptions(i,s),u=this.getSharedOptions(l);for(let h=i;h<i+r;h++){const p=!n&&this.getParsed(h),m=n?o.getBasePixel():o.getPixelForValue(p.x),y=n?a.getBasePixel():a.getPixelForValue(p.y),v=this.resolveDataElementOptions(h,s),{width:w,height:S,anchorX:E,anchorY:I}=v,D={x:rVe(E,m,w),y:sVe(I,y,S),width:w,height:S,options:v};this.updateElement(e[h],h,D,s)}this.updateSharedOptions(u,s,l)}draw(){const e=this.chart.ctx,i=this.getMeta().data||[];let r,s;for(r=0,s=i.length;r<s;++r)i[r].draw(e)}}S1.id="matrix";S1.version=iVe;S1.defaults={dataElementType:"matrix",animations:{numbers:{type:"number",properties:["x","y","width","height"]}}};S1.overrides={interaction:{mode:"nearest",intersect:!0},scales:{x:{type:"linear",offset:!0},y:{type:"linear",reverse:!0}}};function rVe(t,e,i){return t==="left"||t==="start"?e:t==="right"||t==="end"?e-i:e-i/2}function sVe(t,e,i){return t==="top"||t==="start"?e:t==="bottom"||t==="end"?e-i:e-i/2}function Kee(t,e){const{x:i,y:r,width:s,height:n}=t.getProps(["x","y","width","height"],e);return{left:i,top:r,right:i+s,bottom:r+n}}function rx(t,e,i){return Math.max(Math.min(t,i),e)}function nVe(t,e,i){const r=t.borderWidth;let s,n,o,a;return _t(r)?(s=+r.top||0,n=+r.right||0,o=+r.bottom||0,a=+r.left||0):s=n=o=a=+r||0,{t:rx(s,0,i),r:rx(n,0,e),b:rx(o,0,i),l:rx(a,0,e)}}function oVe(t){const e=Kee(t,!1),i=e.right-e.left,r=e.bottom-e.top,s=nVe(t.options,i/2,r/2);return{outer:{x:e.left,y:e.top,w:i,h:r},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:r-s.t-s.b}}}function Ak(t,e,i,r){const s=e===null,n=i===null,o=!t||s&&n?!1:Kee(t,r);return o&&(s||e>=o.left&&e<=o.right)&&(n||i>=o.top&&i<=o.bottom)}class W3 extends Ul{draw(e){const i=this.options,{inner:r,outer:s}=oVe(this),n=kh(i.borderRadius);e.save(),s.w!==r.w||s.h!==r.h?(e.beginPath(),Mh(e,{x:s.x,y:s.y,w:s.w,h:s.h,radius:n}),Mh(e,{x:r.x,y:r.y,w:r.w,h:r.h,radius:n}),e.fillStyle=i.backgroundColor,e.fill(),e.fillStyle=i.borderColor,e.fill("evenodd")):(e.beginPath(),Mh(e,{x:r.x,y:r.y,w:r.w,h:r.h,radius:n}),e.fillStyle=i.backgroundColor,e.fill()),e.restore()}inRange(e,i,r){return Ak(this,e,i,r)}inXRange(e,i){return Ak(this,e,null,i)}inYRange(e,i){return Ak(this,null,e,i)}getCenterPoint(e){const{x:i,y:r,width:s,height:n}=this.getProps(["x","y","width","height"],e);return{x:i+s/2,y:r+n/2}}tooltipPosition(){return this.getCenterPoint()}getRange(e){return e==="x"?this.width/2:this.height/2}constructor(e){super(),e&&Object.assign(this,e)}}W3.id="matrix";W3.defaults={backgroundColor:void 0,borderColor:void 0,borderWidth:void 0,borderRadius:0,anchorX:"center",anchorY:"center",width:20,height:20};let Ru=class extends xX(WK(mi)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new Ap,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,e){return super.on(t,e)}graphicChanged(t){this.emit("graphic-update",t)}};c([d({type:ol})],Ru.prototype,"elevationInfo",void 0),c([d(bI(Ap,"graphics"))],Ru.prototype,"graphics",void 0),c([d({type:["show","hide"]})],Ru.prototype,"listMode",void 0),c([d()],Ru.prototype,"screenSizePerspectiveEnabled",void 0),c([d({readOnly:!0})],Ru.prototype,"type",void 0),c([d({constructOnly:!0})],Ru.prototype,"internal",void 0),Ru=c([R("esri.layers.GraphicsLayer")],Ru);io.register(...yze);const aVe=document.getElementById("media"),lVe=document.getElementById("SQM");function uVe(t){let e=document.getElementById("span"),i,r;t.queryFeatures({where:"1=1",outFields:["*"],orderByFields:["OBJECTID DESC"],returnGeometry:!1,num:1}).then(s=>{s.features.length>0?(i=s.features[0].attributes,t.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1,num:1}).then(n=>{if(n.features.length>0){r=n.features[0].attributes,console.log("primo record:",r),console.log("Ultimo record:",i);const o=_h(new Date(r.DataOra))+" ~ "+_h(new Date(i.DataOra));return e.innerHTML=o,[_h(new Date(r.DataOra)),_h(new Date(i.DataOra))]}else console.log("Nessun record trovato.")})):console.log("Nessun record trovato.")})}function cVe(t){if(!t.length)throw new Error("Array vuoto");const e=t.map(o=>o.Pioggia_mm).filter(o=>typeof o=="number"&&!isNaN(o));if(!e.length)throw new Error("Nessun valore numerico Pioggia_mm trovato");const r=e.reduce((o,a)=>o+a,0)/e.length,s=e.reduce((o,a)=>o+Math.pow(a-r,2),0),n=Math.sqrt(s/e.length);return aVe.innerHTML=r.toFixed(3),lVe.innerHTML=n.toFixed(3),{media:Number(r.toFixed(3)),sqm:Number(n.toFixed(3))}}function _h(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}-${i}-${e}`}function SB(t){let e=[],i,r,s=t[0].Giorno,n=0;return t.forEach(o=>{if(o.Giorno==s)n=n+o.Pioggia_mm;else{let a={x:i,y:r};a.y=n/24,a.x=s,e.push(a),s=o.Giorno,n=o.Pioggia_mm}}),e}function hVe(t){return t.map(i=>({x:i.DataOra,y:i.Pioggia_mm}))}function dVe(t){let e=0;return t.map(r=>(e+=r.Pioggia_mm,{x:r.DataOra,y:e}))}function Py(t){const e=new Date(t),i=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${i}-${r}-${s}`}function pVe(t){const e=new Date(t),i=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${i}-${r}-${s} ${n}:${o}`}function q3(t){if(t==null)return"2025-01-01";let e;return t.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1}).then(r=>{if(r.features.length>0)return e=r.features[0].attributes,console.log("mindate."+Py(e.DataOra)),Py(e.DataOra);console.log("Nessun record trovato.")})}function fVe(t){if(t==null)return"2025-01-01";let e;return t.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1}).then(r=>{if(r.features.length>0)return e=r.features[1999].attributes,console.log("getLastOfQuery."+Py(e.DataOra)),Py(e.DataOra);console.log("Nessun record trovato.")})}function mVe(t){if(t==null)return"2025-01-01";let e;return t.queryFeatures({where:"1=1",outFields:["*"],orderByFields:["OBJECTID DESC"],returnGeometry:!1,num:1}).then(r=>{if(r.features.length>0)return e=r.features[0].attributes,console.log("mindate."+Py(e.DataOra)),Py(e.DataOra);console.log("Nessun record trovato.")})}function gVe(t,e){const r=new Date(t),s=new Date(e);return Math.abs(r-s)/864e5<=4}io.register(S1,W3);function yVe(t,e){const i=io.getChart("graficoTorta");if(i){i.data.datasets[0].data=t,i.update();return}new io(e,{type:"doughnut",data:{labels:["Attenzionare","Malfunzionanti","Zero Pioggia","Discordanti","Elaborati"],datasets:[{data:t,backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(234, 179, 8, 0.6)","rgba(239, 68, 68, 0.6)","rgba(209, 213, 219, 0.6)","rgba(30, 64, 175, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:0}]},options:{responsive:!0,plugins:{legend:{maxHeight:100,align:"center",position:"right"},title:{text:"Grafico Cartellini"}}}})}function Qee(t,e,i){const r=io.getChart("cumulata");let s=[];if(r){e.queryFeatures({where:i,outFields:["*"],returnGeometry:!1}).then(n=>{s=n.features.map(a=>({...a.attributes}));let o=dVe(s);r.data.datasets[0].data=o,r.update()});return}e.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1}).then(n=>{let o=0;s=n.features.map(l=>({...l.attributes}));let a=s.map(l=>(o+=l.Pioggia_mm,{x:l.DataOra,y:o}));new io(t,{type:"line",data:{labels:[],datasets:[{label:"Pioggia in mm",data:a,backgroundColor:"#64748b",spanGaps:!0,borderWidth:0}]},options:{plugins:{legend:{display:!1}},parsing:!1,scales:{x:{type:"time",time:{unit:"day"}},y:{title:{display:!0,text:"mm"}}}}})})}function ete(t,e,i){const r=io.getChart("ietogramma");let s=[];if(r){e.queryFeatures({where:i,outFields:["*"],returnGeometry:!1}).then(n=>{s=n.features.map(o=>({...o.attributes})),r.data.datasets[0].data=SB(s),r.update()});return}e.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1}).then(n=>{s=n.features.map(o=>({...o.attributes})),s.map(o=>({x:o.DataOra,y:o.Pioggia_mm})),new io(t,{type:"bar",data:{labels:[],datasets:[{label:"Pioggia in mm",data:SB(s),backgroundColor:"#64748b",borderWidth:0}]},options:{legend:{display:!1},parsing:!1,scales:{x:{type:"time",time:{unit:"day"}},y:{title:{display:!0,text:"mm/h"}}},plugins:{legend:{display:!1}}}})})}function bVe(t,e,i){const r=io.getChart("ietogramma");let s=[];if(r){e.queryFeatures({where:i,outFields:["*"],returnGeometry:!1}).then(n=>{s=n.features.map(o=>({...o.attributes})),r.data.datasets[0].data=hVe(s),r.update()});return}e.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1}).then(n=>{s=n.features.map(a=>({...a.attributes}));let o=s.map(a=>({x:a.DataOra,y:a.Pioggia_mm}));new io(t,{type:"bar",data:{labels:[],datasets:[{label:"Pioggia in mm",data:o,backgroundColor:"#64748b",borderWidth:0}]},options:{legend:{display:!1},parsing:!1,scales:{x:{type:"time",time:{unit:"day"}},y:{title:{display:!0,text:"mm/h"}}}}})})}function vVe(t,e){const i={y:{type:"time",offset:!0,time:{unit:"day",round:"day",isoWeekday:1,parser:"i",displayFormats:{day:"iiiiii"}},reverse:!0,position:"right",ticks:{maxRotation:0,autoSkip:!0,padding:1,font:{size:9}},grid:{display:!1,drawBorder:!1,tickLength:0}},x:{type:"time",position:"bottom",offset:!0,time:{unit:"week",round:"week",isoWeekday:1,displayFormats:{week:"MMM dd"}},ticks:{maxRotation:0,autoSkip:!0,font:{size:9}},grid:{display:!1,drawBorder:!1,tickLength:0}}},r={datasets:[{label:"My Matrix",data:e,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"transparent",backgroundColor(o){const a=o.dataset.data[o.dataIndex].v;return s(a)},borderColor(o){return"#ffffff"},borderWidth:1.5,hoverBorderColor:"blue",width(o){const a=o.chart.chartArea||{};return(a.right-a.left)/53-1},height(o){const a=o.chart.chartArea||{};return(a.bottom-a.top)/7-1}}]};function s(o){const a=Math.min(Math.max(o,0),100)/100,u=(S=>S<.5?2*S*S:-1+(4-2*S)*S)(a),h={r:241,g:245,b:249},p={r:100,g:116,b:139},m=Math.round(h.r+(p.r-h.r)*u),y=Math.round(h.g+(p.g-h.g)*u),v=Math.round(h.b+(p.b-h.b)*u),w=S=>S.toString(16).padStart(2,"0");return`#${w(m)}${w(y)}${w(v)}`}const n={aspectRatio:6,plugins:{legend:!1,tooltip:{displayColors:!1,callbacks:{title(){return""},label(o){const a=o.dataset.data[o.dataIndex];return["Giorno: "+a.d," Ore presenti: "+a.v.toFixed(2)]+"%"}}}},scales:i,layout:{padding:{top:10}}};new io(t,{type:"matrix",data:r,options:n,scales:i})}function tte(t,e,i){let r=[];const s=io.getChart("matrix");if(s){t.queryFeatures({where:i,outFields:["*"],returnGeometry:!1,num:365}).then(n=>{n.features.map(a=>({...a.attributes})).forEach(a=>{let l=new Date(a.Data),u=l.toISOString().substring(0,10);r.push({x:u,y:EB(l),d:u,v:a.Ore_Presenti/24*100})}),s.data.datasets[0].data=r,s.update()});return}t.queryFeatures({where:i,outFields:["*"],returnGeometry:!1,num:365}).then(n=>{n.features.map(a=>({...a.attributes})).forEach(a=>{let l=new Date(a.Data),u=l.toISOString().substring(0,10);r.push({x:u,y:EB(l),d:u,v:a.Ore_Presenti/24*100})}),console.log(r),vVe(e,r)})}function EB(t){let e=t.getDay();return e=(e+6)%7+1,""+e}var RS={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var wVe=RS.exports,CB;function _Ve(){return CB||(CB=1,function(t){(function(e,i){t.exports=e.document?i(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return i(r)}})(typeof window<"u"?window:wVe,function(e,i){var r=[],s=Object.getPrototypeOf,n=r.slice,o=r.flat?function(g){return r.flat.call(g)}:function(g){return r.concat.apply([],g)},a=r.push,l=r.indexOf,u={},h=u.toString,p=u.hasOwnProperty,m=p.toString,y=m.call(Object),v={},w=function(b){return typeof b=="function"&&typeof b.nodeType!="number"&&typeof b.item!="function"},S=function(b){return b!=null&&b===b.window},E=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function D(g,b,x){x=x||E;var C,T,M=x.createElement("script");if(M.text=g,b)for(C in I)T=b[C]||b.getAttribute&&b.getAttribute(C),T&&M.setAttribute(C,T);x.head.appendChild(M).parentNode.removeChild(M)}function O(g){return g==null?g+"":typeof g=="object"||typeof g=="function"?u[h.call(g)]||"object":typeof g}var A="3.7.1",z=/HTML$/i,_=function(g,b){return new _.fn.init(g,b)};_.fn=_.prototype={jquery:A,constructor:_,length:0,toArray:function(){return n.call(this)},get:function(g){return g==null?n.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var b=_.merge(this.constructor(),g);return b.prevObject=this,b},each:function(g){return _.each(this,g)},map:function(g){return this.pushStack(_.map(this,function(b,x){return g.call(b,x,b)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(g,b){return(b+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(g,b){return b%2}))},eq:function(g){var b=this.length,x=+g+(g<0?b:0);return this.pushStack(x>=0&&x<b?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},_.extend=_.fn.extend=function(){var g,b,x,C,T,M,$=arguments[0]||{},U=1,V=arguments.length,Y=!1;for(typeof $=="boolean"&&(Y=$,$=arguments[U]||{},U++),typeof $!="object"&&!w($)&&($={}),U===V&&($=this,U--);U<V;U++)if((g=arguments[U])!=null)for(b in g)C=g[b],!(b==="__proto__"||$===C)&&(Y&&C&&(_.isPlainObject(C)||(T=Array.isArray(C)))?(x=$[b],T&&!Array.isArray(x)?M=[]:!T&&!_.isPlainObject(x)?M={}:M=x,T=!1,$[b]=_.extend(Y,M,C)):C!==void 0&&($[b]=C));return $},_.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var b,x;return!g||h.call(g)!=="[object Object]"?!1:(b=s(g),b?(x=p.call(b,"constructor")&&b.constructor,typeof x=="function"&&m.call(x)===y):!0)},isEmptyObject:function(g){var b;for(b in g)return!1;return!0},globalEval:function(g,b,x){D(g,{nonce:b&&b.nonce},x)},each:function(g,b){var x,C=0;if(Z(g))for(x=g.length;C<x&&b.call(g[C],C,g[C])!==!1;C++);else for(C in g)if(b.call(g[C],C,g[C])===!1)break;return g},text:function(g){var b,x="",C=0,T=g.nodeType;if(!T)for(;b=g[C++];)x+=_.text(b);return T===1||T===11?g.textContent:T===9?g.documentElement.textContent:T===3||T===4?g.nodeValue:x},makeArray:function(g,b){var x=b||[];return g!=null&&(Z(Object(g))?_.merge(x,typeof g=="string"?[g]:g):a.call(x,g)),x},inArray:function(g,b,x){return b==null?-1:l.call(b,g,x)},isXMLDoc:function(g){var b=g&&g.namespaceURI,x=g&&(g.ownerDocument||g).documentElement;return!z.test(b||x&&x.nodeName||"HTML")},merge:function(g,b){for(var x=+b.length,C=0,T=g.length;C<x;C++)g[T++]=b[C];return g.length=T,g},grep:function(g,b,x){for(var C,T=[],M=0,$=g.length,U=!x;M<$;M++)C=!b(g[M],M),C!==U&&T.push(g[M]);return T},map:function(g,b,x){var C,T,M=0,$=[];if(Z(g))for(C=g.length;M<C;M++)T=b(g[M],M,x),T!=null&&$.push(T);else for(M in g)T=b(g[M],M,x),T!=null&&$.push(T);return o($)},guid:1,support:v}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=r[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,b){u["[object "+b+"]"]=b.toLowerCase()});function Z(g){var b=!!g&&"length"in g&&g.length,x=O(g);return w(g)||S(g)?!1:x==="array"||b===0||typeof b=="number"&&b>0&&b-1 in g}function Q(g,b){return g.nodeName&&g.nodeName.toLowerCase()===b.toLowerCase()}var ae=r.pop,ge=r.sort,ne=r.splice,ve="[\\x20\\t\\r\\n\\f]",xe=new RegExp("^"+ve+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ve+"+$","g");_.contains=function(g,b){var x=b&&b.parentNode;return g===x||!!(x&&x.nodeType===1&&(g.contains?g.contains(x):g.compareDocumentPosition&&g.compareDocumentPosition(x)&16))};var Be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function dt(g,b){return b?g==="\0"?"":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g}_.escapeSelector=function(g){return(g+"").replace(Be,dt)};var Ke=E,Qe=a;(function(){var g,b,x,C,T,M=Qe,$,U,V,Y,se,ce=_.expando,ie=0,be=0,rt=R1(),Rt=R1(),pt=R1(),Ur=R1(),dr=function(F,G){return F===G&&(T=!0),0},Da="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",La="(?:\\\\[\\da-fA-F]{1,6}"+ve+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",St="\\["+ve+"*("+La+")(?:"+ve+"*([*^$|!~]?=)"+ve+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+La+"))|)"+ve+"*\\]",ud=":("+La+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+St+")*)|.*)\\)|)",$t=new RegExp(ve+"+","g"),Oi=new RegExp("^"+ve+"*,"+ve+"*"),bb=new RegExp("^"+ve+"*([>+~]|"+ve+")"+ve+"*"),bM=new RegExp(ve+"|>"),Na=new RegExp(ud),vb=new RegExp("^"+La+"$"),Fa={ID:new RegExp("^#("+La+")"),CLASS:new RegExp("^\\.("+La+")"),TAG:new RegExp("^("+La+"|[*])"),ATTR:new RegExp("^"+St),PSEUDO:new RegExp("^"+ud),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ve+"*(even|odd|(([+-]|)(\\d*)n|)"+ve+"*(?:([+-]|)"+ve+"*(\\d+)|))"+ve+"*\\)|)","i"),bool:new RegExp("^(?:"+Da+")$","i"),needsContext:new RegExp("^"+ve+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ve+"*((?:-\\d)?\\d*)"+ve+"*\\)|)(?=[^-]|$)","i")},hc=/^(?:input|select|textarea|button)$/i,dc=/^h\d$/i,so=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vM=/[+~]/,Jl=new RegExp("\\\\[\\da-fA-F]{1,6}"+ve+"?|\\\\([^\\r\\n\\f])","g"),Zl=function(F,G){var ee="0x"+F.slice(1)-65536;return G||(ee<0?String.fromCharCode(ee+65536):String.fromCharCode(ee>>10|55296,ee&1023|56320))},Mte=function(){pc()},kte=$1(function(F){return F.disabled===!0&&Q(F,"fieldset")},{dir:"parentNode",next:"legend"});function Rte(){try{return $.activeElement}catch{}}try{M.apply(r=n.call(Ke.childNodes),Ke.childNodes),r[Ke.childNodes.length].nodeType}catch{M={apply:function(G,ee){Qe.apply(G,n.call(ee))},call:function(G){Qe.apply(G,n.call(arguments,1))}}}function qt(F,G,ee,re){var ue,we,Ie,je,$e,bt,tt,ot=G&&G.ownerDocument,vt=G?G.nodeType:9;if(ee=ee||[],typeof F!="string"||!F||vt!==1&&vt!==9&&vt!==11)return ee;if(!re&&(pc(G),G=G||$,V)){if(vt!==11&&($e=so.exec(F)))if(ue=$e[1]){if(vt===9)if(Ie=G.getElementById(ue)){if(Ie.id===ue)return M.call(ee,Ie),ee}else return ee;else if(ot&&(Ie=ot.getElementById(ue))&&qt.contains(G,Ie)&&Ie.id===ue)return M.call(ee,Ie),ee}else{if($e[2])return M.apply(ee,G.getElementsByTagName(F)),ee;if((ue=$e[3])&&G.getElementsByClassName)return M.apply(ee,G.getElementsByClassName(ue)),ee}if(!Ur[F+" "]&&(!Y||!Y.test(F))){if(tt=F,ot=G,vt===1&&(bM.test(F)||bb.test(F))){for(ot=vM.test(F)&&wM(G.parentNode)||G,(ot!=G||!v.scope)&&((je=G.getAttribute("id"))?je=_.escapeSelector(je):G.setAttribute("id",je=ce)),bt=wb(F),we=bt.length;we--;)bt[we]=(je?"#"+je:":scope")+" "+I1(bt[we]);tt=bt.join(",")}try{return M.apply(ee,ot.querySelectorAll(tt)),ee}catch{Ur(F,!0)}finally{je===ce&&G.removeAttribute("id")}}}return lN(F.replace(xe,"$1"),G,ee,re)}function R1(){var F=[];function G(ee,re){return F.push(ee+" ")>b.cacheLength&&delete G[F.shift()],G[ee+" "]=re}return G}function Uo(F){return F[ce]=!0,F}function Af(F){var G=$.createElement("fieldset");try{return!!F(G)}catch{return!1}finally{G.parentNode&&G.parentNode.removeChild(G),G=null}}function Ite(F){return function(G){return Q(G,"input")&&G.type===F}}function $te(F){return function(G){return(Q(G,"input")||Q(G,"button"))&&G.type===F}}function oN(F){return function(G){return"form"in G?G.parentNode&&G.disabled===!1?"label"in G?"label"in G.parentNode?G.parentNode.disabled===F:G.disabled===F:G.isDisabled===F||G.isDisabled!==!F&&kte(G)===F:G.disabled===F:"label"in G?G.disabled===F:!1}}function cd(F){return Uo(function(G){return G=+G,Uo(function(ee,re){for(var ue,we=F([],ee.length,G),Ie=we.length;Ie--;)ee[ue=we[Ie]]&&(ee[ue]=!(re[ue]=ee[ue]))})})}function wM(F){return F&&typeof F.getElementsByTagName<"u"&&F}function pc(F){var G,ee=F?F.ownerDocument||F:Ke;return ee==$||ee.nodeType!==9||!ee.documentElement||($=ee,U=$.documentElement,V=!_.isXMLDoc($),se=U.matches||U.webkitMatchesSelector||U.msMatchesSelector,U.msMatchesSelector&&Ke!=$&&(G=$.defaultView)&&G.top!==G&&G.addEventListener("unload",Mte),v.getById=Af(function(re){return U.appendChild(re).id=_.expando,!$.getElementsByName||!$.getElementsByName(_.expando).length}),v.disconnectedMatch=Af(function(re){return se.call(re,"*")}),v.scope=Af(function(){return $.querySelectorAll(":scope")}),v.cssHas=Af(function(){try{return $.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),v.getById?(b.filter.ID=function(re){var ue=re.replace(Jl,Zl);return function(we){return we.getAttribute("id")===ue}},b.find.ID=function(re,ue){if(typeof ue.getElementById<"u"&&V){var we=ue.getElementById(re);return we?[we]:[]}}):(b.filter.ID=function(re){var ue=re.replace(Jl,Zl);return function(we){var Ie=typeof we.getAttributeNode<"u"&&we.getAttributeNode("id");return Ie&&Ie.value===ue}},b.find.ID=function(re,ue){if(typeof ue.getElementById<"u"&&V){var we,Ie,je,$e=ue.getElementById(re);if($e){if(we=$e.getAttributeNode("id"),we&&we.value===re)return[$e];for(je=ue.getElementsByName(re),Ie=0;$e=je[Ie++];)if(we=$e.getAttributeNode("id"),we&&we.value===re)return[$e]}return[]}}),b.find.TAG=function(re,ue){return typeof ue.getElementsByTagName<"u"?ue.getElementsByTagName(re):ue.querySelectorAll(re)},b.find.CLASS=function(re,ue){if(typeof ue.getElementsByClassName<"u"&&V)return ue.getElementsByClassName(re)},Y=[],Af(function(re){var ue;U.appendChild(re).innerHTML="<a id='"+ce+"' href='' disabled='disabled'></a><select id='"+ce+"-\r\\' disabled='disabled'><option selected=''></option></select>",re.querySelectorAll("[selected]").length||Y.push("\\["+ve+"*(?:value|"+Da+")"),re.querySelectorAll("[id~="+ce+"-]").length||Y.push("~="),re.querySelectorAll("a#"+ce+"+*").length||Y.push(".#.+[+~]"),re.querySelectorAll(":checked").length||Y.push(":checked"),ue=$.createElement("input"),ue.setAttribute("type","hidden"),re.appendChild(ue).setAttribute("name","D"),U.appendChild(re).disabled=!0,re.querySelectorAll(":disabled").length!==2&&Y.push(":enabled",":disabled"),ue=$.createElement("input"),ue.setAttribute("name",""),re.appendChild(ue),re.querySelectorAll("[name='']").length||Y.push("\\["+ve+"*name"+ve+"*="+ve+`*(?:''|"")`)}),v.cssHas||Y.push(":has"),Y=Y.length&&new RegExp(Y.join("|")),dr=function(re,ue){if(re===ue)return T=!0,0;var we=!re.compareDocumentPosition-!ue.compareDocumentPosition;return we||(we=(re.ownerDocument||re)==(ue.ownerDocument||ue)?re.compareDocumentPosition(ue):1,we&1||!v.sortDetached&&ue.compareDocumentPosition(re)===we?re===$||re.ownerDocument==Ke&&qt.contains(Ke,re)?-1:ue===$||ue.ownerDocument==Ke&&qt.contains(Ke,ue)?1:C?l.call(C,re)-l.call(C,ue):0:we&4?-1:1)}),$}qt.matches=function(F,G){return qt(F,null,null,G)},qt.matchesSelector=function(F,G){if(pc(F),V&&!Ur[G+" "]&&(!Y||!Y.test(G)))try{var ee=se.call(F,G);if(ee||v.disconnectedMatch||F.document&&F.document.nodeType!==11)return ee}catch{Ur(G,!0)}return qt(G,$,null,[F]).length>0},qt.contains=function(F,G){return(F.ownerDocument||F)!=$&&pc(F),_.contains(F,G)},qt.attr=function(F,G){(F.ownerDocument||F)!=$&&pc(F);var ee=b.attrHandle[G.toLowerCase()],re=ee&&p.call(b.attrHandle,G.toLowerCase())?ee(F,G,!V):void 0;return re!==void 0?re:F.getAttribute(G)},qt.error=function(F){throw new Error("Syntax error, unrecognized expression: "+F)},_.uniqueSort=function(F){var G,ee=[],re=0,ue=0;if(T=!v.sortStable,C=!v.sortStable&&n.call(F,0),ge.call(F,dr),T){for(;G=F[ue++];)G===F[ue]&&(re=ee.push(ue));for(;re--;)ne.call(F,ee[re],1)}return C=null,F},_.fn.uniqueSort=function(){return this.pushStack(_.uniqueSort(n.apply(this)))},b=_.expr={cacheLength:50,createPseudo:Uo,match:Fa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(F){return F[1]=F[1].replace(Jl,Zl),F[3]=(F[3]||F[4]||F[5]||"").replace(Jl,Zl),F[2]==="~="&&(F[3]=" "+F[3]+" "),F.slice(0,4)},CHILD:function(F){return F[1]=F[1].toLowerCase(),F[1].slice(0,3)==="nth"?(F[3]||qt.error(F[0]),F[4]=+(F[4]?F[5]+(F[6]||1):2*(F[3]==="even"||F[3]==="odd")),F[5]=+(F[7]+F[8]||F[3]==="odd")):F[3]&&qt.error(F[0]),F},PSEUDO:function(F){var G,ee=!F[6]&&F[2];return Fa.CHILD.test(F[0])?null:(F[3]?F[2]=F[4]||F[5]||"":ee&&Na.test(ee)&&(G=wb(ee,!0))&&(G=ee.indexOf(")",ee.length-G)-ee.length)&&(F[0]=F[0].slice(0,G),F[2]=ee.slice(0,G)),F.slice(0,3))}},filter:{TAG:function(F){var G=F.replace(Jl,Zl).toLowerCase();return F==="*"?function(){return!0}:function(ee){return Q(ee,G)}},CLASS:function(F){var G=rt[F+" "];return G||(G=new RegExp("(^|"+ve+")"+F+"("+ve+"|$)"))&&rt(F,function(ee){return G.test(typeof ee.className=="string"&&ee.className||typeof ee.getAttribute<"u"&&ee.getAttribute("class")||"")})},ATTR:function(F,G,ee){return function(re){var ue=qt.attr(re,F);return ue==null?G==="!=":G?(ue+="",G==="="?ue===ee:G==="!="?ue!==ee:G==="^="?ee&&ue.indexOf(ee)===0:G==="*="?ee&&ue.indexOf(ee)>-1:G==="$="?ee&&ue.slice(-ee.length)===ee:G==="~="?(" "+ue.replace($t," ")+" ").indexOf(ee)>-1:G==="|="?ue===ee||ue.slice(0,ee.length+1)===ee+"-":!1):!0}},CHILD:function(F,G,ee,re,ue){var we=F.slice(0,3)!=="nth",Ie=F.slice(-4)!=="last",je=G==="of-type";return re===1&&ue===0?function($e){return!!$e.parentNode}:function($e,bt,tt){var ot,vt,Ye,ri,Ks,Kr=we!==Ie?"nextSibling":"previousSibling",no=$e.parentNode,ja=je&&$e.nodeName.toLowerCase(),Of=!tt&&!je,Cs=!1;if(no){if(we){for(;Kr;){for(Ye=$e;Ye=Ye[Kr];)if(je?Q(Ye,ja):Ye.nodeType===1)return!1;Ks=Kr=F==="only"&&!Ks&&"nextSibling"}return!0}if(Ks=[Ie?no.firstChild:no.lastChild],Ie&&Of){for(vt=no[ce]||(no[ce]={}),ot=vt[F]||[],ri=ot[0]===ie&&ot[1],Cs=ri&&ot[2],Ye=ri&&no.childNodes[ri];Ye=++ri&&Ye&&Ye[Kr]||(Cs=ri=0)||Ks.pop();)if(Ye.nodeType===1&&++Cs&&Ye===$e){vt[F]=[ie,ri,Cs];break}}else if(Of&&(vt=$e[ce]||($e[ce]={}),ot=vt[F]||[],ri=ot[0]===ie&&ot[1],Cs=ri),Cs===!1)for(;(Ye=++ri&&Ye&&Ye[Kr]||(Cs=ri=0)||Ks.pop())&&!((je?Q(Ye,ja):Ye.nodeType===1)&&++Cs&&(Of&&(vt=Ye[ce]||(Ye[ce]={}),vt[F]=[ie,Cs]),Ye===$e)););return Cs-=ue,Cs===re||Cs%re===0&&Cs/re>=0}}},PSEUDO:function(F,G){var ee,re=b.pseudos[F]||b.setFilters[F.toLowerCase()]||qt.error("unsupported pseudo: "+F);return re[ce]?re(G):re.length>1?(ee=[F,F,"",G],b.setFilters.hasOwnProperty(F.toLowerCase())?Uo(function(ue,we){for(var Ie,je=re(ue,G),$e=je.length;$e--;)Ie=l.call(ue,je[$e]),ue[Ie]=!(we[Ie]=je[$e])}):function(ue){return re(ue,0,ee)}):re}},pseudos:{not:Uo(function(F){var G=[],ee=[],re=EM(F.replace(xe,"$1"));return re[ce]?Uo(function(ue,we,Ie,je){for(var $e,bt=re(ue,null,je,[]),tt=ue.length;tt--;)($e=bt[tt])&&(ue[tt]=!(we[tt]=$e))}):function(ue,we,Ie){return G[0]=ue,re(G,null,Ie,ee),G[0]=null,!ee.pop()}}),has:Uo(function(F){return function(G){return qt(F,G).length>0}}),contains:Uo(function(F){return F=F.replace(Jl,Zl),function(G){return(G.textContent||_.text(G)).indexOf(F)>-1}}),lang:Uo(function(F){return vb.test(F||"")||qt.error("unsupported lang: "+F),F=F.replace(Jl,Zl).toLowerCase(),function(G){var ee;do if(ee=V?G.lang:G.getAttribute("xml:lang")||G.getAttribute("lang"))return ee=ee.toLowerCase(),ee===F||ee.indexOf(F+"-")===0;while((G=G.parentNode)&&G.nodeType===1);return!1}}),target:function(F){var G=e.location&&e.location.hash;return G&&G.slice(1)===F.id},root:function(F){return F===U},focus:function(F){return F===Rte()&&$.hasFocus()&&!!(F.type||F.href||~F.tabIndex)},enabled:oN(!1),disabled:oN(!0),checked:function(F){return Q(F,"input")&&!!F.checked||Q(F,"option")&&!!F.selected},selected:function(F){return F.parentNode&&F.parentNode.selectedIndex,F.selected===!0},empty:function(F){for(F=F.firstChild;F;F=F.nextSibling)if(F.nodeType<6)return!1;return!0},parent:function(F){return!b.pseudos.empty(F)},header:function(F){return dc.test(F.nodeName)},input:function(F){return hc.test(F.nodeName)},button:function(F){return Q(F,"input")&&F.type==="button"||Q(F,"button")},text:function(F){var G;return Q(F,"input")&&F.type==="text"&&((G=F.getAttribute("type"))==null||G.toLowerCase()==="text")},first:cd(function(){return[0]}),last:cd(function(F,G){return[G-1]}),eq:cd(function(F,G,ee){return[ee<0?ee+G:ee]}),even:cd(function(F,G){for(var ee=0;ee<G;ee+=2)F.push(ee);return F}),odd:cd(function(F,G){for(var ee=1;ee<G;ee+=2)F.push(ee);return F}),lt:cd(function(F,G,ee){var re;for(ee<0?re=ee+G:ee>G?re=G:re=ee;--re>=0;)F.push(re);return F}),gt:cd(function(F,G,ee){for(var re=ee<0?ee+G:ee;++re<G;)F.push(re);return F})}},b.pseudos.nth=b.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[g]=Ite(g);for(g in{submit:!0,reset:!0})b.pseudos[g]=$te(g);function aN(){}aN.prototype=b.filters=b.pseudos,b.setFilters=new aN;function wb(F,G){var ee,re,ue,we,Ie,je,$e,bt=Rt[F+" "];if(bt)return G?0:bt.slice(0);for(Ie=F,je=[],$e=b.preFilter;Ie;){(!ee||(re=Oi.exec(Ie)))&&(re&&(Ie=Ie.slice(re[0].length)||Ie),je.push(ue=[])),ee=!1,(re=bb.exec(Ie))&&(ee=re.shift(),ue.push({value:ee,type:re[0].replace(xe," ")}),Ie=Ie.slice(ee.length));for(we in b.filter)(re=Fa[we].exec(Ie))&&(!$e[we]||(re=$e[we](re)))&&(ee=re.shift(),ue.push({value:ee,type:we,matches:re}),Ie=Ie.slice(ee.length));if(!ee)break}return G?Ie.length:Ie?qt.error(F):Rt(F,je).slice(0)}function I1(F){for(var G=0,ee=F.length,re="";G<ee;G++)re+=F[G].value;return re}function $1(F,G,ee){var re=G.dir,ue=G.next,we=ue||re,Ie=ee&&we==="parentNode",je=be++;return G.first?function($e,bt,tt){for(;$e=$e[re];)if($e.nodeType===1||Ie)return F($e,bt,tt);return!1}:function($e,bt,tt){var ot,vt,Ye=[ie,je];if(tt){for(;$e=$e[re];)if(($e.nodeType===1||Ie)&&F($e,bt,tt))return!0}else for(;$e=$e[re];)if($e.nodeType===1||Ie)if(vt=$e[ce]||($e[ce]={}),ue&&Q($e,ue))$e=$e[re]||$e;else{if((ot=vt[we])&&ot[0]===ie&&ot[1]===je)return Ye[2]=ot[2];if(vt[we]=Ye,Ye[2]=F($e,bt,tt))return!0}return!1}}function _M(F){return F.length>1?function(G,ee,re){for(var ue=F.length;ue--;)if(!F[ue](G,ee,re))return!1;return!0}:F[0]}function Ate(F,G,ee){for(var re=0,ue=G.length;re<ue;re++)qt(F,G[re],ee);return ee}function A1(F,G,ee,re,ue){for(var we,Ie=[],je=0,$e=F.length,bt=G!=null;je<$e;je++)(we=F[je])&&(!ee||ee(we,re,ue))&&(Ie.push(we),bt&&G.push(je));return Ie}function xM(F,G,ee,re,ue,we){return re&&!re[ce]&&(re=xM(re)),ue&&!ue[ce]&&(ue=xM(ue,we)),Uo(function(Ie,je,$e,bt){var tt,ot,vt,Ye,ri=[],Ks=[],Kr=je.length,no=Ie||Ate(G||"*",$e.nodeType?[$e]:$e,[]),ja=F&&(Ie||!G)?A1(no,ri,F,$e,bt):no;if(ee?(Ye=ue||(Ie?F:Kr||re)?[]:je,ee(ja,Ye,$e,bt)):Ye=ja,re)for(tt=A1(Ye,Ks),re(tt,[],$e,bt),ot=tt.length;ot--;)(vt=tt[ot])&&(Ye[Ks[ot]]=!(ja[Ks[ot]]=vt));if(Ie){if(ue||F){if(ue){for(tt=[],ot=Ye.length;ot--;)(vt=Ye[ot])&&tt.push(ja[ot]=vt);ue(null,Ye=[],tt,bt)}for(ot=Ye.length;ot--;)(vt=Ye[ot])&&(tt=ue?l.call(Ie,vt):ri[ot])>-1&&(Ie[tt]=!(je[tt]=vt))}}else Ye=A1(Ye===je?Ye.splice(Kr,Ye.length):Ye),ue?ue(null,je,Ye,bt):M.apply(je,Ye)})}function SM(F){for(var G,ee,re,ue=F.length,we=b.relative[F[0].type],Ie=we||b.relative[" "],je=we?1:0,$e=$1(function(ot){return ot===G},Ie,!0),bt=$1(function(ot){return l.call(G,ot)>-1},Ie,!0),tt=[function(ot,vt,Ye){var ri=!we&&(Ye||vt!=x)||((G=vt).nodeType?$e(ot,vt,Ye):bt(ot,vt,Ye));return G=null,ri}];je<ue;je++)if(ee=b.relative[F[je].type])tt=[$1(_M(tt),ee)];else{if(ee=b.filter[F[je].type].apply(null,F[je].matches),ee[ce]){for(re=++je;re<ue&&!b.relative[F[re].type];re++);return xM(je>1&&_M(tt),je>1&&I1(F.slice(0,je-1).concat({value:F[je-2].type===" "?"*":""})).replace(xe,"$1"),ee,je<re&&SM(F.slice(je,re)),re<ue&&SM(F=F.slice(re)),re<ue&&I1(F))}tt.push(ee)}return _M(tt)}function Ote(F,G){var ee=G.length>0,re=F.length>0,ue=function(we,Ie,je,$e,bt){var tt,ot,vt,Ye=0,ri="0",Ks=we&&[],Kr=[],no=x,ja=we||re&&b.find.TAG("*",bt),Of=ie+=no==null?1:Math.random()||.1,Cs=ja.length;for(bt&&(x=Ie==$||Ie||bt);ri!==Cs&&(tt=ja[ri])!=null;ri++){if(re&&tt){for(ot=0,!Ie&&tt.ownerDocument!=$&&(pc(tt),je=!V);vt=F[ot++];)if(vt(tt,Ie||$,je)){M.call($e,tt);break}bt&&(ie=Of)}ee&&((tt=!vt&&tt)&&Ye--,we&&Ks.push(tt))}if(Ye+=ri,ee&&ri!==Ye){for(ot=0;vt=G[ot++];)vt(Ks,Kr,Ie,je);if(we){if(Ye>0)for(;ri--;)Ks[ri]||Kr[ri]||(Kr[ri]=ae.call($e));Kr=A1(Kr)}M.apply($e,Kr),bt&&!we&&Kr.length>0&&Ye+G.length>1&&_.uniqueSort($e)}return bt&&(ie=Of,x=no),Ks};return ee?Uo(ue):ue}function EM(F,G){var ee,re=[],ue=[],we=pt[F+" "];if(!we){for(G||(G=wb(F)),ee=G.length;ee--;)we=SM(G[ee]),we[ce]?re.push(we):ue.push(we);we=pt(F,Ote(ue,re)),we.selector=F}return we}function lN(F,G,ee,re){var ue,we,Ie,je,$e,bt=typeof F=="function"&&F,tt=!re&&wb(F=bt.selector||F);if(ee=ee||[],tt.length===1){if(we=tt[0]=tt[0].slice(0),we.length>2&&(Ie=we[0]).type==="ID"&&G.nodeType===9&&V&&b.relative[we[1].type]){if(G=(b.find.ID(Ie.matches[0].replace(Jl,Zl),G)||[])[0],G)bt&&(G=G.parentNode);else return ee;F=F.slice(we.shift().value.length)}for(ue=Fa.needsContext.test(F)?0:we.length;ue--&&(Ie=we[ue],!b.relative[je=Ie.type]);)if(($e=b.find[je])&&(re=$e(Ie.matches[0].replace(Jl,Zl),vM.test(we[0].type)&&wM(G.parentNode)||G))){if(we.splice(ue,1),F=re.length&&I1(we),!F)return M.apply(ee,re),ee;break}}return(bt||EM(F,tt))(re,G,!V,ee,!G||vM.test(F)&&wM(G.parentNode)||G),ee}v.sortStable=ce.split("").sort(dr).join("")===ce,pc(),v.sortDetached=Af(function(F){return F.compareDocumentPosition($.createElement("fieldset"))&1}),_.find=qt,_.expr[":"]=_.expr.pseudos,_.unique=_.uniqueSort,qt.compile=EM,qt.select=lN,qt.setDocument=pc,qt.tokenize=wb,qt.escape=_.escapeSelector,qt.getText=_.text,qt.isXML=_.isXMLDoc,qt.selectors=_.expr,qt.support=_.support,qt.uniqueSort=_.uniqueSort})();var gt=function(g,b,x){for(var C=[],T=x!==void 0;(g=g[b])&&g.nodeType!==9;)if(g.nodeType===1){if(T&&_(g).is(x))break;C.push(g)}return C},Sn=function(g,b){for(var x=[];g;g=g.nextSibling)g.nodeType===1&&g!==b&&x.push(g);return x},qs=_.expr.match.needsContext,En=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Cn(g,b,x){return w(b)?_.grep(g,function(C,T){return!!b.call(C,T,C)!==x}):b.nodeType?_.grep(g,function(C){return C===b!==x}):typeof b!="string"?_.grep(g,function(C){return l.call(b,C)>-1!==x}):_.filter(b,g,x)}_.filter=function(g,b,x){var C=b[0];return x&&(g=":not("+g+")"),b.length===1&&C.nodeType===1?_.find.matchesSelector(C,g)?[C]:[]:_.find.matches(g,_.grep(b,function(T){return T.nodeType===1}))},_.fn.extend({find:function(g){var b,x,C=this.length,T=this;if(typeof g!="string")return this.pushStack(_(g).filter(function(){for(b=0;b<C;b++)if(_.contains(T[b],this))return!0}));for(x=this.pushStack([]),b=0;b<C;b++)_.find(g,T[b],x);return C>1?_.uniqueSort(x):x},filter:function(g){return this.pushStack(Cn(this,g||[],!1))},not:function(g){return this.pushStack(Cn(this,g||[],!0))},is:function(g){return!!Cn(this,typeof g=="string"&&qs.test(g)?_(g):g||[],!1).length}});var Ys,xs=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ss=_.fn.init=function(g,b,x){var C,T;if(!g)return this;if(x=x||Ys,typeof g=="string")if(g[0]==="<"&&g[g.length-1]===">"&&g.length>=3?C=[null,g,null]:C=xs.exec(g),C&&(C[1]||!b))if(C[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(C[1],b&&b.nodeType?b.ownerDocument||b:E,!0)),En.test(C[1])&&_.isPlainObject(b))for(C in b)w(this[C])?this[C](b[C]):this.attr(C,b[C]);return this}else return T=E.getElementById(C[2]),T&&(this[0]=T,this.length=1),this;else return!b||b.jquery?(b||x).find(g):this.constructor(b).find(g);else{if(g.nodeType)return this[0]=g,this.length=1,this;if(w(g))return x.ready!==void 0?x.ready(g):g(_)}return _.makeArray(g,this)};Ss.prototype=_.fn,Ys=_(E);var uc=/^(?:parents|prev(?:Until|All))/,Fo={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(g){var b=_(g,this),x=b.length;return this.filter(function(){for(var C=0;C<x;C++)if(_.contains(this,b[C]))return!0})},closest:function(g,b){var x,C=0,T=this.length,M=[],$=typeof g!="string"&&_(g);if(!qs.test(g)){for(;C<T;C++)for(x=this[C];x&&x!==b;x=x.parentNode)if(x.nodeType<11&&($?$.index(x)>-1:x.nodeType===1&&_.find.matchesSelector(x,g))){M.push(x);break}}return this.pushStack(M.length>1?_.uniqueSort(M):M)},index:function(g){return g?typeof g=="string"?l.call(_(g),this[0]):l.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,b){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(g,b))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function Hl(g,b){for(;(g=g[b])&&g.nodeType!==1;);return g}_.each({parent:function(g){var b=g.parentNode;return b&&b.nodeType!==11?b:null},parents:function(g){return gt(g,"parentNode")},parentsUntil:function(g,b,x){return gt(g,"parentNode",x)},next:function(g){return Hl(g,"nextSibling")},prev:function(g){return Hl(g,"previousSibling")},nextAll:function(g){return gt(g,"nextSibling")},prevAll:function(g){return gt(g,"previousSibling")},nextUntil:function(g,b,x){return gt(g,"nextSibling",x)},prevUntil:function(g,b,x){return gt(g,"previousSibling",x)},siblings:function(g){return Sn((g.parentNode||{}).firstChild,g)},children:function(g){return Sn(g.firstChild)},contents:function(g){return g.contentDocument!=null&&s(g.contentDocument)?g.contentDocument:(Q(g,"template")&&(g=g.content||g),_.merge([],g.childNodes))}},function(g,b){_.fn[g]=function(x,C){var T=_.map(this,b,x);return g.slice(-5)!=="Until"&&(C=x),C&&typeof C=="string"&&(T=_.filter(C,T)),this.length>1&&(Fo[g]||_.uniqueSort(T),uc.test(g)&&T.reverse()),this.pushStack(T)}});var Js=/[^\x20\t\r\n\f]+/g;function _f(g){var b={};return _.each(g.match(Js)||[],function(x,C){b[C]=!0}),b}_.Callbacks=function(g){g=typeof g=="string"?_f(g):_.extend({},g);var b,x,C,T,M=[],$=[],U=-1,V=function(){for(T=T||g.once,C=b=!0;$.length;U=-1)for(x=$.shift();++U<M.length;)M[U].apply(x[0],x[1])===!1&&g.stopOnFalse&&(U=M.length,x=!1);g.memory||(x=!1),b=!1,T&&(x?M=[]:M="")},Y={add:function(){return M&&(x&&!b&&(U=M.length-1,$.push(x)),function se(ce){_.each(ce,function(ie,be){w(be)?(!g.unique||!Y.has(be))&&M.push(be):be&&be.length&&O(be)!=="string"&&se(be)})}(arguments),x&&!b&&V()),this},remove:function(){return _.each(arguments,function(se,ce){for(var ie;(ie=_.inArray(ce,M,ie))>-1;)M.splice(ie,1),ie<=U&&U--}),this},has:function(se){return se?_.inArray(se,M)>-1:M.length>0},empty:function(){return M&&(M=[]),this},disable:function(){return T=$=[],M=x="",this},disabled:function(){return!M},lock:function(){return T=$=[],!x&&!b&&(M=x=""),this},locked:function(){return!!T},fireWith:function(se,ce){return T||(ce=ce||[],ce=[se,ce.slice?ce.slice():ce],$.push(ce),b||V()),this},fire:function(){return Y.fireWith(this,arguments),this},fired:function(){return!!C}};return Y};function Tn(g){return g}function cc(g){throw g}function xf(g,b,x,C){var T;try{g&&w(T=g.promise)?T.call(g).done(b).fail(x):g&&w(T=g.then)?T.call(g,b,x):b.apply(void 0,[g].slice(C))}catch(M){x.apply(void 0,[M])}}_.extend({Deferred:function(g){var b=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],x="pending",C={state:function(){return x},always:function(){return T.done(arguments).fail(arguments),this},catch:function(M){return C.then(null,M)},pipe:function(){var M=arguments;return _.Deferred(function($){_.each(b,function(U,V){var Y=w(M[V[4]])&&M[V[4]];T[V[1]](function(){var se=Y&&Y.apply(this,arguments);se&&w(se.promise)?se.promise().progress($.notify).done($.resolve).fail($.reject):$[V[0]+"With"](this,Y?[se]:arguments)})}),M=null}).promise()},then:function(M,$,U){var V=0;function Y(se,ce,ie,be){return function(){var rt=this,Rt=arguments,pt=function(){var dr,Da;if(!(se<V)){if(dr=ie.apply(rt,Rt),dr===ce.promise())throw new TypeError("Thenable self-resolution");Da=dr&&(typeof dr=="object"||typeof dr=="function")&&dr.then,w(Da)?be?Da.call(dr,Y(V,ce,Tn,be),Y(V,ce,cc,be)):(V++,Da.call(dr,Y(V,ce,Tn,be),Y(V,ce,cc,be),Y(V,ce,Tn,ce.notifyWith))):(ie!==Tn&&(rt=void 0,Rt=[dr]),(be||ce.resolveWith)(rt,Rt))}},Ur=be?pt:function(){try{pt()}catch(dr){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(dr,Ur.error),se+1>=V&&(ie!==cc&&(rt=void 0,Rt=[dr]),ce.rejectWith(rt,Rt))}};se?Ur():(_.Deferred.getErrorHook?Ur.error=_.Deferred.getErrorHook():_.Deferred.getStackHook&&(Ur.error=_.Deferred.getStackHook()),e.setTimeout(Ur))}}return _.Deferred(function(se){b[0][3].add(Y(0,se,w(U)?U:Tn,se.notifyWith)),b[1][3].add(Y(0,se,w(M)?M:Tn)),b[2][3].add(Y(0,se,w($)?$:cc))}).promise()},promise:function(M){return M!=null?_.extend(M,C):C}},T={};return _.each(b,function(M,$){var U=$[2],V=$[5];C[$[1]]=U.add,V&&U.add(function(){x=V},b[3-M][2].disable,b[3-M][3].disable,b[0][2].lock,b[0][3].lock),U.add($[3].fire),T[$[0]]=function(){return T[$[0]+"With"](this===T?void 0:this,arguments),this},T[$[0]+"With"]=U.fireWith}),C.promise(T),g&&g.call(T,T),T},when:function(g){var b=arguments.length,x=b,C=Array(x),T=n.call(arguments),M=_.Deferred(),$=function(U){return function(V){C[U]=this,T[U]=arguments.length>1?n.call(arguments):V,--b||M.resolveWith(C,T)}};if(b<=1&&(xf(g,M.done($(x)).resolve,M.reject,!b),M.state()==="pending"||w(T[x]&&T[x].then)))return M.then();for(;x--;)xf(T[x],$(x),M.reject);return M.promise()}});var Sf=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(g,b){e.console&&e.console.warn&&g&&Sf.test(g.name)&&e.console.warn("jQuery.Deferred exception: "+g.message,g.stack,b)},_.readyException=function(g){e.setTimeout(function(){throw g})};var Qh=_.Deferred();_.fn.ready=function(g){return Qh.then(g).catch(function(b){_.readyException(b)}),this},_.extend({isReady:!1,readyWait:1,ready:function(g){(g===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(g!==!0&&--_.readyWait>0)&&Qh.resolveWith(E,[_]))}}),_.ready.then=Qh.then;function Bl(){E.removeEventListener("DOMContentLoaded",Bl),e.removeEventListener("load",Bl),_.ready()}E.readyState==="complete"||E.readyState!=="loading"&&!E.documentElement.doScroll?e.setTimeout(_.ready):(E.addEventListener("DOMContentLoaded",Bl),e.addEventListener("load",Bl));var Zs=function(g,b,x,C,T,M,$){var U=0,V=g.length,Y=x==null;if(O(x)==="object"){T=!0;for(U in x)Zs(g,b,U,x[U],!0,M,$)}else if(C!==void 0&&(T=!0,w(C)||($=!0),Y&&($?(b.call(g,C),b=null):(Y=b,b=function(se,ce,ie){return Y.call(_(se),ie)})),b))for(;U<V;U++)b(g[U],x,$?C:C.call(g[U],U,b(g[U],x)));return T?g:Y?b.call(g):V?b(g[0],x):M},Gl=/^-ms-/,Ef=/-([a-z])/g;function ro(g,b){return b.toUpperCase()}function Es(g){return g.replace(Gl,"ms-").replace(Ef,ro)}var jo=function(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType};function Ra(){this.expando=_.expando+Ra.uid++}Ra.uid=1,Ra.prototype={cache:function(g){var b=g[this.expando];return b||(b={},jo(g)&&(g.nodeType?g[this.expando]=b:Object.defineProperty(g,this.expando,{value:b,configurable:!0}))),b},set:function(g,b,x){var C,T=this.cache(g);if(typeof b=="string")T[Es(b)]=x;else for(C in b)T[Es(C)]=b[C];return T},get:function(g,b){return b===void 0?this.cache(g):g[this.expando]&&g[this.expando][Es(b)]},access:function(g,b,x){return b===void 0||b&&typeof b=="string"&&x===void 0?this.get(g,b):(this.set(g,b,x),x!==void 0?x:b)},remove:function(g,b){var x,C=g[this.expando];if(C!==void 0){if(b!==void 0)for(Array.isArray(b)?b=b.map(Es):(b=Es(b),b=b in C?[b]:b.match(Js)||[]),x=b.length;x--;)delete C[b[x]];(b===void 0||_.isEmptyObject(C))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var b=g[this.expando];return b!==void 0&&!_.isEmptyObject(b)}};var Ne=new Ra,Tr=new Ra,Cf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,cb=/[A-Z]/g;function hb(g){return g==="true"?!0:g==="false"?!1:g==="null"?null:g===+g+""?+g:Cf.test(g)?JSON.parse(g):g}function Tf(g,b,x){var C;if(x===void 0&&g.nodeType===1)if(C="data-"+b.replace(cb,"-$&").toLowerCase(),x=g.getAttribute(C),typeof x=="string"){try{x=hb(x)}catch{}Tr.set(g,b,x)}else x=void 0;return x}_.extend({hasData:function(g){return Tr.hasData(g)||Ne.hasData(g)},data:function(g,b,x){return Tr.access(g,b,x)},removeData:function(g,b){Tr.remove(g,b)},_data:function(g,b,x){return Ne.access(g,b,x)},_removeData:function(g,b){Ne.remove(g,b)}}),_.fn.extend({data:function(g,b){var x,C,T,M=this[0],$=M&&M.attributes;if(g===void 0){if(this.length&&(T=Tr.get(M),M.nodeType===1&&!Ne.get(M,"hasDataAttrs"))){for(x=$.length;x--;)$[x]&&(C=$[x].name,C.indexOf("data-")===0&&(C=Es(C.slice(5)),Tf(M,C,T[C])));Ne.set(M,"hasDataAttrs",!0)}return T}return typeof g=="object"?this.each(function(){Tr.set(this,g)}):Zs(this,function(U){var V;if(M&&U===void 0)return V=Tr.get(M,g),V!==void 0||(V=Tf(M,g),V!==void 0)?V:void 0;this.each(function(){Tr.set(this,g,U)})},null,b,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){Tr.remove(this,g)})}}),_.extend({queue:function(g,b,x){var C;if(g)return b=(b||"fx")+"queue",C=Ne.get(g,b),x&&(!C||Array.isArray(x)?C=Ne.access(g,b,_.makeArray(x)):C.push(x)),C||[]},dequeue:function(g,b){b=b||"fx";var x=_.queue(g,b),C=x.length,T=x.shift(),M=_._queueHooks(g,b),$=function(){_.dequeue(g,b)};T==="inprogress"&&(T=x.shift(),C--),T&&(b==="fx"&&x.unshift("inprogress"),delete M.stop,T.call(g,$,M)),!C&&M&&M.empty.fire()},_queueHooks:function(g,b){var x=b+"queueHooks";return Ne.get(g,x)||Ne.access(g,x,{empty:_.Callbacks("once memory").add(function(){Ne.remove(g,[b+"queue",x])})})}}),_.fn.extend({queue:function(g,b){var x=2;return typeof g!="string"&&(b=g,g="fx",x--),arguments.length<x?_.queue(this[0],g):b===void 0?this:this.each(function(){var C=_.queue(this,g,b);_._queueHooks(this,g),g==="fx"&&C[0]!=="inprogress"&&_.dequeue(this,g)})},dequeue:function(g){return this.each(function(){_.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,b){var x,C=1,T=_.Deferred(),M=this,$=this.length,U=function(){--C||T.resolveWith(M,[M])};for(typeof g!="string"&&(b=g,g=void 0),g=g||"fx";$--;)x=Ne.get(M[$],g+"queueHooks"),x&&x.empty&&(C++,x.empty.add(U));return U(),T.promise(b)}});var Mf=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ia=new RegExp("^(?:([+-])=|)("+Mf+")([a-z%]*)$","i"),Mn=["Top","Right","Bottom","Left"],zo=E.documentElement,Ot=function(g){return _.contains(g.ownerDocument,g)},ed={composed:!0};zo.getRootNode&&(Ot=function(g){return _.contains(g.ownerDocument,g)||g.getRootNode(ed)===g.ownerDocument});var $a=function(g,b){return g=b||g,g.style.display==="none"||g.style.display===""&&Ot(g)&&_.css(g,"display")==="none"};function kf(g,b,x,C){var T,M,$=20,U=C?function(){return C.cur()}:function(){return _.css(g,b,"")},V=U(),Y=x&&x[3]||(_.cssNumber[b]?"":"px"),se=g.nodeType&&(_.cssNumber[b]||Y!=="px"&&+V)&&Ia.exec(_.css(g,b));if(se&&se[3]!==Y){for(V=V/2,Y=Y||se[3],se=+V||1;$--;)_.style(g,b,se+Y),(1-M)*(1-(M=U()/V||.5))<=0&&($=0),se=se/M;se=se*2,_.style(g,b,se+Y),x=x||[]}return x&&(se=+se||+V||0,T=x[1]?se+(x[1]+1)*x[2]:+x[2],C&&(C.unit=Y,C.start=se,C.end=T)),T}var Wl={};function td(g){var b,x=g.ownerDocument,C=g.nodeName,T=Wl[C];return T||(b=x.body.appendChild(x.createElement(C)),T=_.css(b,"display"),b.parentNode.removeChild(b),T==="none"&&(T="block"),Wl[C]=T,T)}function Mr(g,b){for(var x,C,T=[],M=0,$=g.length;M<$;M++)C=g[M],C.style&&(x=C.style.display,b?(x==="none"&&(T[M]=Ne.get(C,"display")||null,T[M]||(C.style.display="")),C.style.display===""&&$a(C)&&(T[M]=td(C))):x!=="none"&&(T[M]="none",Ne.set(C,"display",x)));for(M=0;M<$;M++)T[M]!=null&&(g[M].style.display=T[M]);return g}_.fn.extend({show:function(){return Mr(this,!0)},hide:function(){return Mr(this)},toggle:function(g){return typeof g=="boolean"?g?this.show():this.hide():this.each(function(){$a(this)?_(this).show():_(this).hide()})}});var ql=/^(?:checkbox|radio)$/i,Rf=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,P=/^$|^module$|\/(?:java|ecma)script/i;(function(){var g=E.createDocumentFragment(),b=g.appendChild(E.createElement("div")),x=E.createElement("input");x.setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),b.appendChild(x),v.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,b.innerHTML="<option></option>",v.option=!!b.lastChild})();var L={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};L.tbody=L.tfoot=L.colgroup=L.caption=L.thead,L.th=L.td,v.option||(L.optgroup=L.option=[1,"<select multiple='multiple'>","</select>"]);function q(g,b){var x;return typeof g.getElementsByTagName<"u"?x=g.getElementsByTagName(b||"*"):typeof g.querySelectorAll<"u"?x=g.querySelectorAll(b||"*"):x=[],b===void 0||b&&Q(g,b)?_.merge([g],x):x}function N(g,b){for(var x=0,C=g.length;x<C;x++)Ne.set(g[x],"globalEval",!b||Ne.get(b[x],"globalEval"))}var pe=/<|&#?\w+;/;function Se(g,b,x,C,T){for(var M,$,U,V,Y,se,ce=b.createDocumentFragment(),ie=[],be=0,rt=g.length;be<rt;be++)if(M=g[be],M||M===0)if(O(M)==="object")_.merge(ie,M.nodeType?[M]:M);else if(!pe.test(M))ie.push(b.createTextNode(M));else{for($=$||ce.appendChild(b.createElement("div")),U=(Rf.exec(M)||["",""])[1].toLowerCase(),V=L[U]||L._default,$.innerHTML=V[1]+_.htmlPrefilter(M)+V[2],se=V[0];se--;)$=$.lastChild;_.merge(ie,$.childNodes),$=ce.firstChild,$.textContent=""}for(ce.textContent="",be=0;M=ie[be++];){if(C&&_.inArray(M,C)>-1){T&&T.push(M);continue}if(Y=Ot(M),$=q(ce.appendChild(M),"script"),Y&&N($),x)for(se=0;M=$[se++];)P.test(M.type||"")&&x.push(M)}return ce}var Je=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function Ze(){return!1}function oe(g,b,x,C,T,M){var $,U;if(typeof b=="object"){typeof x!="string"&&(C=C||x,x=void 0);for(U in b)oe(g,U,x,C,b[U],M);return g}if(C==null&&T==null?(T=x,C=x=void 0):T==null&&(typeof x=="string"?(T=C,C=void 0):(T=C,C=x,x=void 0)),T===!1)T=Ze;else if(!T)return g;return M===1&&($=T,T=function(V){return _().off(V),$.apply(this,arguments)},T.guid=$.guid||($.guid=_.guid++)),g.each(function(){_.event.add(this,b,T,C,x)})}_.event={global:{},add:function(g,b,x,C,T){var M,$,U,V,Y,se,ce,ie,be,rt,Rt,pt=Ne.get(g);if(jo(g))for(x.handler&&(M=x,x=M.handler,T=M.selector),T&&_.find.matchesSelector(zo,T),x.guid||(x.guid=_.guid++),(V=pt.events)||(V=pt.events=Object.create(null)),($=pt.handle)||($=pt.handle=function(Ur){return typeof _<"u"&&_.event.triggered!==Ur.type?_.event.dispatch.apply(g,arguments):void 0}),b=(b||"").match(Js)||[""],Y=b.length;Y--;)U=Je.exec(b[Y])||[],be=Rt=U[1],rt=(U[2]||"").split(".").sort(),be&&(ce=_.event.special[be]||{},be=(T?ce.delegateType:ce.bindType)||be,ce=_.event.special[be]||{},se=_.extend({type:be,origType:Rt,data:C,handler:x,guid:x.guid,selector:T,needsContext:T&&_.expr.match.needsContext.test(T),namespace:rt.join(".")},M),(ie=V[be])||(ie=V[be]=[],ie.delegateCount=0,(!ce.setup||ce.setup.call(g,C,rt,$)===!1)&&g.addEventListener&&g.addEventListener(be,$)),ce.add&&(ce.add.call(g,se),se.handler.guid||(se.handler.guid=x.guid)),T?ie.splice(ie.delegateCount++,0,se):ie.push(se),_.event.global[be]=!0)},remove:function(g,b,x,C,T){var M,$,U,V,Y,se,ce,ie,be,rt,Rt,pt=Ne.hasData(g)&&Ne.get(g);if(!(!pt||!(V=pt.events))){for(b=(b||"").match(Js)||[""],Y=b.length;Y--;){if(U=Je.exec(b[Y])||[],be=Rt=U[1],rt=(U[2]||"").split(".").sort(),!be){for(be in V)_.event.remove(g,be+b[Y],x,C,!0);continue}for(ce=_.event.special[be]||{},be=(C?ce.delegateType:ce.bindType)||be,ie=V[be]||[],U=U[2]&&new RegExp("(^|\\.)"+rt.join("\\.(?:.*\\.|)")+"(\\.|$)"),$=M=ie.length;M--;)se=ie[M],(T||Rt===se.origType)&&(!x||x.guid===se.guid)&&(!U||U.test(se.namespace))&&(!C||C===se.selector||C==="**"&&se.selector)&&(ie.splice(M,1),se.selector&&ie.delegateCount--,ce.remove&&ce.remove.call(g,se));$&&!ie.length&&((!ce.teardown||ce.teardown.call(g,rt,pt.handle)===!1)&&_.removeEvent(g,be,pt.handle),delete V[be])}_.isEmptyObject(V)&&Ne.remove(g,"handle events")}},dispatch:function(g){var b,x,C,T,M,$,U=new Array(arguments.length),V=_.event.fix(g),Y=(Ne.get(this,"events")||Object.create(null))[V.type]||[],se=_.event.special[V.type]||{};for(U[0]=V,b=1;b<arguments.length;b++)U[b]=arguments[b];if(V.delegateTarget=this,!(se.preDispatch&&se.preDispatch.call(this,V)===!1)){for($=_.event.handlers.call(this,V,Y),b=0;(T=$[b++])&&!V.isPropagationStopped();)for(V.currentTarget=T.elem,x=0;(M=T.handlers[x++])&&!V.isImmediatePropagationStopped();)(!V.rnamespace||M.namespace===!1||V.rnamespace.test(M.namespace))&&(V.handleObj=M,V.data=M.data,C=((_.event.special[M.origType]||{}).handle||M.handler).apply(T.elem,U),C!==void 0&&(V.result=C)===!1&&(V.preventDefault(),V.stopPropagation()));return se.postDispatch&&se.postDispatch.call(this,V),V.result}},handlers:function(g,b){var x,C,T,M,$,U=[],V=b.delegateCount,Y=g.target;if(V&&Y.nodeType&&!(g.type==="click"&&g.button>=1)){for(;Y!==this;Y=Y.parentNode||this)if(Y.nodeType===1&&!(g.type==="click"&&Y.disabled===!0)){for(M=[],$={},x=0;x<V;x++)C=b[x],T=C.selector+" ",$[T]===void 0&&($[T]=C.needsContext?_(T,this).index(Y)>-1:_.find(T,this,null,[Y]).length),$[T]&&M.push(C);M.length&&U.push({elem:Y,handlers:M})}}return Y=this,V<b.length&&U.push({elem:Y,handlers:b.slice(V)}),U},addProp:function(g,b){Object.defineProperty(_.Event.prototype,g,{enumerable:!0,configurable:!0,get:w(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(x){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(g){return g[_.expando]?g:new _.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var b=this||g;return ql.test(b.type)&&b.click&&Q(b,"input")&&Ge(b,"click",!0),!1},trigger:function(g){var b=this||g;return ql.test(b.type)&&b.click&&Q(b,"input")&&Ge(b,"click"),!0},_default:function(g){var b=g.target;return ql.test(b.type)&&b.click&&Q(b,"input")&&Ne.get(b,"click")||Q(b,"a")}},beforeunload:{postDispatch:function(g){g.result!==void 0&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}};function Ge(g,b,x){if(!x){Ne.get(g,b)===void 0&&_.event.add(g,b,Ee);return}Ne.set(g,b,!1),_.event.add(g,b,{namespace:!1,handler:function(C){var T,M=Ne.get(this,b);if(C.isTrigger&1&&this[b]){if(M)(_.event.special[b]||{}).delegateType&&C.stopPropagation();else if(M=n.call(arguments),Ne.set(this,b,M),this[b](),T=Ne.get(this,b),Ne.set(this,b,!1),M!==T)return C.stopImmediatePropagation(),C.preventDefault(),T}else M&&(Ne.set(this,b,_.event.trigger(M[0],M.slice(1),this)),C.stopPropagation(),C.isImmediatePropagationStopped=Ee)}})}_.removeEvent=function(g,b,x){g.removeEventListener&&g.removeEventListener(b,x)},_.Event=function(g,b){if(!(this instanceof _.Event))return new _.Event(g,b);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||g.defaultPrevented===void 0&&g.returnValue===!1?Ee:Ze,this.target=g.target&&g.target.nodeType===3?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,b&&_.extend(this,b),this.timeStamp=g&&g.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ze,isPropagationStopped:Ze,isImmediatePropagationStopped:Ze,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=Ee,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=Ee,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=Ee,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(g,b){function x(C){if(E.documentMode){var T=Ne.get(this,"handle"),M=_.event.fix(C);M.type=C.type==="focusin"?"focus":"blur",M.isSimulated=!0,T(C),M.target===M.currentTarget&&T(M)}else _.event.simulate(b,C.target,_.event.fix(C))}_.event.special[g]={setup:function(){var C;if(Ge(this,g,!0),E.documentMode)C=Ne.get(this,b),C||this.addEventListener(b,x),Ne.set(this,b,(C||0)+1);else return!1},trigger:function(){return Ge(this,g),!0},teardown:function(){var C;if(E.documentMode)C=Ne.get(this,b)-1,C?Ne.set(this,b,C):(this.removeEventListener(b,x),Ne.remove(this,b));else return!1},_default:function(C){return Ne.get(C.target,g)},delegateType:b},_.event.special[b]={setup:function(){var C=this.ownerDocument||this.document||this,T=E.documentMode?this:C,M=Ne.get(T,b);M||(E.documentMode?this.addEventListener(b,x):C.addEventListener(g,x,!0)),Ne.set(T,b,(M||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,T=E.documentMode?this:C,M=Ne.get(T,b)-1;M?Ne.set(T,b,M):(E.documentMode?this.removeEventListener(b,x):C.removeEventListener(g,x,!0),Ne.remove(T,b))}}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,b){_.event.special[g]={delegateType:b,bindType:b,handle:function(x){var C,T=this,M=x.relatedTarget,$=x.handleObj;return(!M||M!==T&&!_.contains(T,M))&&(x.type=$.origType,C=$.handler.apply(this,arguments),x.type=b),C}}}),_.fn.extend({on:function(g,b,x,C){return oe(this,g,b,x,C)},one:function(g,b,x,C){return oe(this,g,b,x,C,1)},off:function(g,b,x){var C,T;if(g&&g.preventDefault&&g.handleObj)return C=g.handleObj,_(g.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if(typeof g=="object"){for(T in g)this.off(T,b,g[T]);return this}return(b===!1||typeof b=="function")&&(x=b,b=void 0),x===!1&&(x=Ze),this.each(function(){_.event.remove(this,g,x,b)})}});var Nt=/<script|<style|<link/i,Ft=/checked\s*(?:[^=]|=\s*.checked.)/i,Yi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Aa(g,b){return Q(g,"table")&&Q(b.nodeType!==11?b:b.firstChild,"tr")&&_(g).children("tbody")[0]||g}function Vr(g){return g.type=(g.getAttribute("type")!==null)+"/"+g.type,g}function If(g){return(g.type||"").slice(0,5)==="true/"?g.type=g.type.slice(5):g.removeAttribute("type"),g}function Yl(g,b){var x,C,T,M,$,U,V;if(b.nodeType===1){if(Ne.hasData(g)&&(M=Ne.get(g),V=M.events,V)){Ne.remove(b,"handle events");for(T in V)for(x=0,C=V[T].length;x<C;x++)_.event.add(b,T,V[T][x])}Tr.hasData(g)&&($=Tr.access(g),U=_.extend({},$),Tr.set(b,U))}}function et(g,b){var x=b.nodeName.toLowerCase();x==="input"&&ql.test(g.type)?b.checked=g.checked:(x==="input"||x==="textarea")&&(b.defaultValue=g.defaultValue)}function Oa(g,b,x,C){b=o(b);var T,M,$,U,V,Y,se=0,ce=g.length,ie=ce-1,be=b[0],rt=w(be);if(rt||ce>1&&typeof be=="string"&&!v.checkClone&&Ft.test(be))return g.each(function(Rt){var pt=g.eq(Rt);rt&&(b[0]=be.call(this,Rt,pt.html())),Oa(pt,b,x,C)});if(ce&&(T=Se(b,g[0].ownerDocument,!1,g,C),M=T.firstChild,T.childNodes.length===1&&(T=M),M||C)){for($=_.map(q(T,"script"),Vr),U=$.length;se<ce;se++)V=T,se!==ie&&(V=_.clone(V,!0,!0),U&&_.merge($,q(V,"script"))),x.call(g[se],V,se);if(U)for(Y=$[$.length-1].ownerDocument,_.map($,If),se=0;se<U;se++)V=$[se],P.test(V.type||"")&&!Ne.access(V,"globalEval")&&_.contains(Y,V)&&(V.src&&(V.type||"").toLowerCase()!=="module"?_._evalUrl&&!V.noModule&&_._evalUrl(V.src,{nonce:V.nonce||V.getAttribute("nonce")},Y):D(V.textContent.replace(Yi,""),V,Y))}return g}function id(g,b,x){for(var C,T=b?_.filter(b,g):g,M=0;(C=T[M])!=null;M++)!x&&C.nodeType===1&&_.cleanData(q(C)),C.parentNode&&(x&&Ot(C)&&N(q(C,"script")),C.parentNode.removeChild(C));return g}_.extend({htmlPrefilter:function(g){return g},clone:function(g,b,x){var C,T,M,$,U=g.cloneNode(!0),V=Ot(g);if(!v.noCloneChecked&&(g.nodeType===1||g.nodeType===11)&&!_.isXMLDoc(g))for($=q(U),M=q(g),C=0,T=M.length;C<T;C++)et(M[C],$[C]);if(b)if(x)for(M=M||q(g),$=$||q(U),C=0,T=M.length;C<T;C++)Yl(M[C],$[C]);else Yl(g,U);return $=q(U,"script"),$.length>0&&N($,!V&&q(g,"script")),U},cleanData:function(g){for(var b,x,C,T=_.event.special,M=0;(x=g[M])!==void 0;M++)if(jo(x)){if(b=x[Ne.expando]){if(b.events)for(C in b.events)T[C]?_.event.remove(x,C):_.removeEvent(x,C,b.handle);x[Ne.expando]=void 0}x[Tr.expando]&&(x[Tr.expando]=void 0)}}}),_.fn.extend({detach:function(g){return id(this,g,!0)},remove:function(g){return id(this,g)},text:function(g){return Zs(this,function(b){return b===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=b)})},null,g,arguments.length)},append:function(){return Oa(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=Aa(this,g);b.appendChild(g)}})},prepend:function(){return Oa(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=Aa(this,g);b.insertBefore(g,b.firstChild)}})},before:function(){return Oa(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return Oa(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,b=0;(g=this[b])!=null;b++)g.nodeType===1&&(_.cleanData(q(g,!1)),g.textContent="");return this},clone:function(g,b){return g=g??!1,b=b??g,this.map(function(){return _.clone(this,g,b)})},html:function(g){return Zs(this,function(b){var x=this[0]||{},C=0,T=this.length;if(b===void 0&&x.nodeType===1)return x.innerHTML;if(typeof b=="string"&&!Nt.test(b)&&!L[(Rf.exec(b)||["",""])[1].toLowerCase()]){b=_.htmlPrefilter(b);try{for(;C<T;C++)x=this[C]||{},x.nodeType===1&&(_.cleanData(q(x,!1)),x.innerHTML=b);x=0}catch{}}x&&this.empty().append(b)},null,g,arguments.length)},replaceWith:function(){var g=[];return Oa(this,arguments,function(b){var x=this.parentNode;_.inArray(this,g)<0&&(_.cleanData(q(this)),x&&x.replaceChild(b,this))},g)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,b){_.fn[g]=function(x){for(var C,T=[],M=_(x),$=M.length-1,U=0;U<=$;U++)C=U===$?this:this.clone(!0),_(M[U])[b](C),a.apply(T,C.get());return this.pushStack(T)}});var rd=new RegExp("^("+Mf+")(?!px)[a-z%]+$","i"),sd=/^--/,Pa=function(g){var b=g.ownerDocument.defaultView;return(!b||!b.opener)&&(b=e),b.getComputedStyle(g)},$f=function(g,b,x){var C,T,M={};for(T in b)M[T]=g.style[T],g.style[T]=b[T];C=x.call(g);for(T in b)g.style[T]=M[T];return C},nd=new RegExp(Mn.join("|"),"i");(function(){function g(){if(Y){V.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Y.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",zo.appendChild(V).appendChild(Y);var se=e.getComputedStyle(Y);x=se.top!=="1%",U=b(se.marginLeft)===12,Y.style.right="60%",M=b(se.right)===36,C=b(se.width)===36,Y.style.position="absolute",T=b(Y.offsetWidth/3)===12,zo.removeChild(V),Y=null}}function b(se){return Math.round(parseFloat(se))}var x,C,T,M,$,U,V=E.createElement("div"),Y=E.createElement("div");Y.style&&(Y.style.backgroundClip="content-box",Y.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle=Y.style.backgroundClip==="content-box",_.extend(v,{boxSizingReliable:function(){return g(),C},pixelBoxStyles:function(){return g(),M},pixelPosition:function(){return g(),x},reliableMarginLeft:function(){return g(),U},scrollboxSize:function(){return g(),T},reliableTrDimensions:function(){var se,ce,ie,be;return $==null&&(se=E.createElement("table"),ce=E.createElement("tr"),ie=E.createElement("div"),se.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ce.style.cssText="box-sizing:content-box;border:1px solid",ce.style.height="1px",ie.style.height="9px",ie.style.display="block",zo.appendChild(se).appendChild(ce).appendChild(ie),be=e.getComputedStyle(ce),$=parseInt(be.height,10)+parseInt(be.borderTopWidth,10)+parseInt(be.borderBottomWidth,10)===ce.offsetHeight,zo.removeChild(se)),$}}))})();function wi(g,b,x){var C,T,M,$,U=sd.test(b),V=g.style;return x=x||Pa(g),x&&($=x.getPropertyValue(b)||x[b],U&&$&&($=$.replace(xe,"$1")||void 0),$===""&&!Ot(g)&&($=_.style(g,b)),!v.pixelBoxStyles()&&rd.test($)&&nd.test(b)&&(C=V.width,T=V.minWidth,M=V.maxWidth,V.minWidth=V.maxWidth=V.width=$,$=x.width,V.width=C,V.minWidth=T,V.maxWidth=M)),$!==void 0?$+"":$}function E1(g,b){return{get:function(){if(g()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}var db=["Webkit","Moz","ms"],C1=E.createElement("div").style,T1={};function uM(g){for(var b=g[0].toUpperCase()+g.slice(1),x=db.length;x--;)if(g=db[x]+b,g in C1)return g}function pb(g){var b=_.cssProps[g]||T1[g];return b||(g in C1?g:T1[g]=uM(g)||g)}var cM=/^(none|table(?!-c[ea]).+)/,Xs={position:"absolute",visibility:"hidden",display:"block"},M1={letterSpacing:"0",fontWeight:"400"};function k1(g,b,x){var C=Ia.exec(b);return C?Math.max(0,C[2]-(x||0))+(C[3]||"px"):b}function od(g,b,x,C,T,M){var $=b==="width"?1:0,U=0,V=0,Y=0;if(x===(C?"border":"content"))return 0;for(;$<4;$+=2)x==="margin"&&(Y+=_.css(g,x+Mn[$],!0,T)),C?(x==="content"&&(V-=_.css(g,"padding"+Mn[$],!0,T)),x!=="margin"&&(V-=_.css(g,"border"+Mn[$]+"Width",!0,T))):(V+=_.css(g,"padding"+Mn[$],!0,T),x!=="padding"?V+=_.css(g,"border"+Mn[$]+"Width",!0,T):U+=_.css(g,"border"+Mn[$]+"Width",!0,T));return!C&&M>=0&&(V+=Math.max(0,Math.ceil(g["offset"+b[0].toUpperCase()+b.slice(1)]-M-V-U-.5))||0),V+Y}function fb(g,b,x){var C=Pa(g),T=!v.boxSizingReliable()||x,M=T&&_.css(g,"boxSizing",!1,C)==="border-box",$=M,U=wi(g,b,C),V="offset"+b[0].toUpperCase()+b.slice(1);if(rd.test(U)){if(!x)return U;U="auto"}return(!v.boxSizingReliable()&&M||!v.reliableTrDimensions()&&Q(g,"tr")||U==="auto"||!parseFloat(U)&&_.css(g,"display",!1,C)==="inline")&&g.getClientRects().length&&(M=_.css(g,"boxSizing",!1,C)==="border-box",$=V in g,$&&(U=g[V])),U=parseFloat(U)||0,U+od(g,b,x||(M?"border":"content"),$,C,U)+"px"}_.extend({cssHooks:{opacity:{get:function(g,b){if(b){var x=wi(g,"opacity");return x===""?"1":x}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(g,b,x,C){if(!(!g||g.nodeType===3||g.nodeType===8||!g.style)){var T,M,$,U=Es(b),V=sd.test(b),Y=g.style;if(V||(b=pb(U)),$=_.cssHooks[b]||_.cssHooks[U],x!==void 0){if(M=typeof x,M==="string"&&(T=Ia.exec(x))&&T[1]&&(x=kf(g,b,T),M="number"),x==null||x!==x)return;M==="number"&&!V&&(x+=T&&T[3]||(_.cssNumber[U]?"":"px")),!v.clearCloneStyle&&x===""&&b.indexOf("background")===0&&(Y[b]="inherit"),(!$||!("set"in $)||(x=$.set(g,x,C))!==void 0)&&(V?Y.setProperty(b,x):Y[b]=x)}else return $&&"get"in $&&(T=$.get(g,!1,C))!==void 0?T:Y[b]}},css:function(g,b,x,C){var T,M,$,U=Es(b),V=sd.test(b);return V||(b=pb(U)),$=_.cssHooks[b]||_.cssHooks[U],$&&"get"in $&&(T=$.get(g,!0,x)),T===void 0&&(T=wi(g,b,C)),T==="normal"&&b in M1&&(T=M1[b]),x===""||x?(M=parseFloat(T),x===!0||isFinite(M)?M||0:T):T}}),_.each(["height","width"],function(g,b){_.cssHooks[b]={get:function(x,C,T){if(C)return cM.test(_.css(x,"display"))&&(!x.getClientRects().length||!x.getBoundingClientRect().width)?$f(x,Xs,function(){return fb(x,b,T)}):fb(x,b,T)},set:function(x,C,T){var M,$=Pa(x),U=!v.scrollboxSize()&&$.position==="absolute",V=U||T,Y=V&&_.css(x,"boxSizing",!1,$)==="border-box",se=T?od(x,b,T,Y,$):0;return Y&&U&&(se-=Math.ceil(x["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat($[b])-od(x,b,"border",!1,$)-.5)),se&&(M=Ia.exec(C))&&(M[3]||"px")!=="px"&&(x.style[b]=C,C=_.css(x,b)),k1(x,C,se)}}}),_.cssHooks.marginLeft=E1(v.reliableMarginLeft,function(g,b){if(b)return(parseFloat(wi(g,"marginLeft"))||g.getBoundingClientRect().left-$f(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(g,b){_.cssHooks[g+b]={expand:function(x){for(var C=0,T={},M=typeof x=="string"?x.split(" "):[x];C<4;C++)T[g+Mn[C]+b]=M[C]||M[C-2]||M[0];return T}},g!=="margin"&&(_.cssHooks[g+b].set=k1)}),_.fn.extend({css:function(g,b){return Zs(this,function(x,C,T){var M,$,U={},V=0;if(Array.isArray(C)){for(M=Pa(x),$=C.length;V<$;V++)U[C[V]]=_.css(x,C[V],!1,M);return U}return T!==void 0?_.style(x,C,T):_.css(x,C)},g,b,arguments.length>1)}});function j(g,b,x,C,T){return new j.prototype.init(g,b,x,C,T)}_.Tween=j,j.prototype={constructor:j,init:function(g,b,x,C,T,M){this.elem=g,this.prop=x,this.easing=T||_.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=C,this.unit=M||(_.cssNumber[x]?"":"px")},cur:function(){var g=j.propHooks[this.prop];return g&&g.get?g.get(this):j.propHooks._default.get(this)},run:function(g){var b,x=j.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):this.pos=b=g,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(g){var b;return g.elem.nodeType!==1||g.elem[g.prop]!=null&&g.elem.style[g.prop]==null?g.elem[g.prop]:(b=_.css(g.elem,g.prop,""),!b||b==="auto"?0:b)},set:function(g){_.fx.step[g.prop]?_.fx.step[g.prop](g):g.elem.nodeType===1&&(_.cssHooks[g.prop]||g.elem.style[pb(g.prop)]!=null)?_.style(g.elem,g.prop,g.now+g.unit):g.elem[g.prop]=g.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},_.easing={linear:function(g){return g},swing:function(g){return .5-Math.cos(g*Math.PI)/2},_default:"swing"},_.fx=j.prototype.init,_.fx.step={};var te,ye,qe=/^(?:toggle|show|hide)$/,Pt=/queueHooks$/;function ii(){ye&&(E.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ii):e.setTimeout(ii,_.fx.interval),_.fx.tick())}function Ai(){return e.setTimeout(function(){te=void 0}),te=Date.now()}function Ji(g,b){var x,C=0,T={height:g};for(b=b?1:0;C<4;C+=2-b)x=Mn[C],T["margin"+x]=T["padding"+x]=g;return b&&(T.opacity=T.width=g),T}function J3(g,b,x){for(var C,T=(Vo.tweeners[b]||[]).concat(Vo.tweeners["*"]),M=0,$=T.length;M<$;M++)if(C=T[M].call(x,b,g))return C}function ote(g,b,x){var C,T,M,$,U,V,Y,se,ce="width"in b||"height"in b,ie=this,be={},rt=g.style,Rt=g.nodeType&&$a(g),pt=Ne.get(g,"fxshow");x.queue||($=_._queueHooks(g,"fx"),$.unqueued==null&&($.unqueued=0,U=$.empty.fire,$.empty.fire=function(){$.unqueued||U()}),$.unqueued++,ie.always(function(){ie.always(function(){$.unqueued--,_.queue(g,"fx").length||$.empty.fire()})}));for(C in b)if(T=b[C],qe.test(T)){if(delete b[C],M=M||T==="toggle",T===(Rt?"hide":"show"))if(T==="show"&&pt&&pt[C]!==void 0)Rt=!0;else continue;be[C]=pt&&pt[C]||_.style(g,C)}if(V=!_.isEmptyObject(b),!(!V&&_.isEmptyObject(be))){ce&&g.nodeType===1&&(x.overflow=[rt.overflow,rt.overflowX,rt.overflowY],Y=pt&&pt.display,Y==null&&(Y=Ne.get(g,"display")),se=_.css(g,"display"),se==="none"&&(Y?se=Y:(Mr([g],!0),Y=g.style.display||Y,se=_.css(g,"display"),Mr([g]))),(se==="inline"||se==="inline-block"&&Y!=null)&&_.css(g,"float")==="none"&&(V||(ie.done(function(){rt.display=Y}),Y==null&&(se=rt.display,Y=se==="none"?"":se)),rt.display="inline-block")),x.overflow&&(rt.overflow="hidden",ie.always(function(){rt.overflow=x.overflow[0],rt.overflowX=x.overflow[1],rt.overflowY=x.overflow[2]})),V=!1;for(C in be)V||(pt?"hidden"in pt&&(Rt=pt.hidden):pt=Ne.access(g,"fxshow",{display:Y}),M&&(pt.hidden=!Rt),Rt&&Mr([g],!0),ie.done(function(){Rt||Mr([g]),Ne.remove(g,"fxshow");for(C in be)_.style(g,C,be[C])})),V=J3(Rt?pt[C]:0,C,ie),C in pt||(pt[C]=V.start,Rt&&(V.end=V.start,V.start=0))}}function ate(g,b){var x,C,T,M,$;for(x in g)if(C=Es(x),T=b[C],M=g[x],Array.isArray(M)&&(T=M[1],M=g[x]=M[0]),x!==C&&(g[C]=M,delete g[x]),$=_.cssHooks[C],$&&"expand"in $){M=$.expand(M),delete g[C];for(x in M)x in g||(g[x]=M[x],b[x]=T)}else b[C]=T}function Vo(g,b,x){var C,T,M=0,$=Vo.prefilters.length,U=_.Deferred().always(function(){delete V.elem}),V=function(){if(T)return!1;for(var ce=te||Ai(),ie=Math.max(0,Y.startTime+Y.duration-ce),be=ie/Y.duration||0,rt=1-be,Rt=0,pt=Y.tweens.length;Rt<pt;Rt++)Y.tweens[Rt].run(rt);return U.notifyWith(g,[Y,rt,ie]),rt<1&&pt?ie:(pt||U.notifyWith(g,[Y,1,0]),U.resolveWith(g,[Y]),!1)},Y=U.promise({elem:g,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},x),originalProperties:b,originalOptions:x,startTime:te||Ai(),duration:x.duration,tweens:[],createTween:function(ce,ie){var be=_.Tween(g,Y.opts,ce,ie,Y.opts.specialEasing[ce]||Y.opts.easing);return Y.tweens.push(be),be},stop:function(ce){var ie=0,be=ce?Y.tweens.length:0;if(T)return this;for(T=!0;ie<be;ie++)Y.tweens[ie].run(1);return ce?(U.notifyWith(g,[Y,1,0]),U.resolveWith(g,[Y,ce])):U.rejectWith(g,[Y,ce]),this}}),se=Y.props;for(ate(se,Y.opts.specialEasing);M<$;M++)if(C=Vo.prefilters[M].call(Y,g,se,Y.opts),C)return w(C.stop)&&(_._queueHooks(Y.elem,Y.opts.queue).stop=C.stop.bind(C)),C;return _.map(se,J3,Y),w(Y.opts.start)&&Y.opts.start.call(g,Y),Y.progress(Y.opts.progress).done(Y.opts.done,Y.opts.complete).fail(Y.opts.fail).always(Y.opts.always),_.fx.timer(_.extend(V,{elem:g,anim:Y,queue:Y.opts.queue})),Y}_.Animation=_.extend(Vo,{tweeners:{"*":[function(g,b){var x=this.createTween(g,b);return kf(x.elem,g,Ia.exec(b),x),x}]},tweener:function(g,b){w(g)?(b=g,g=["*"]):g=g.match(Js);for(var x,C=0,T=g.length;C<T;C++)x=g[C],Vo.tweeners[x]=Vo.tweeners[x]||[],Vo.tweeners[x].unshift(b)},prefilters:[ote],prefilter:function(g,b){b?Vo.prefilters.unshift(g):Vo.prefilters.push(g)}}),_.speed=function(g,b,x){var C=g&&typeof g=="object"?_.extend({},g):{complete:x||!x&&b||w(g)&&g,duration:g,easing:x&&b||b&&!w(b)&&b};return _.fx.off?C.duration=0:typeof C.duration!="number"&&(C.duration in _.fx.speeds?C.duration=_.fx.speeds[C.duration]:C.duration=_.fx.speeds._default),(C.queue==null||C.queue===!0)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){w(C.old)&&C.old.call(this),C.queue&&_.dequeue(this,C.queue)},C},_.fn.extend({fadeTo:function(g,b,x,C){return this.filter($a).css("opacity",0).show().end().animate({opacity:b},g,x,C)},animate:function(g,b,x,C){var T=_.isEmptyObject(g),M=_.speed(b,x,C),$=function(){var U=Vo(this,_.extend({},g),M);(T||Ne.get(this,"finish"))&&U.stop(!0)};return $.finish=$,T||M.queue===!1?this.each($):this.queue(M.queue,$)},stop:function(g,b,x){var C=function(T){var M=T.stop;delete T.stop,M(x)};return typeof g!="string"&&(x=b,b=g,g=void 0),b&&this.queue(g||"fx",[]),this.each(function(){var T=!0,M=g!=null&&g+"queueHooks",$=_.timers,U=Ne.get(this);if(M)U[M]&&U[M].stop&&C(U[M]);else for(M in U)U[M]&&U[M].stop&&Pt.test(M)&&C(U[M]);for(M=$.length;M--;)$[M].elem===this&&(g==null||$[M].queue===g)&&($[M].anim.stop(x),T=!1,$.splice(M,1));(T||!x)&&_.dequeue(this,g)})},finish:function(g){return g!==!1&&(g=g||"fx"),this.each(function(){var b,x=Ne.get(this),C=x[g+"queue"],T=x[g+"queueHooks"],M=_.timers,$=C?C.length:0;for(x.finish=!0,_.queue(this,g,[]),T&&T.stop&&T.stop.call(this,!0),b=M.length;b--;)M[b].elem===this&&M[b].queue===g&&(M[b].anim.stop(!0),M.splice(b,1));for(b=0;b<$;b++)C[b]&&C[b].finish&&C[b].finish.call(this);delete x.finish})}}),_.each(["toggle","show","hide"],function(g,b){var x=_.fn[b];_.fn[b]=function(C,T,M){return C==null||typeof C=="boolean"?x.apply(this,arguments):this.animate(Ji(b,!0),C,T,M)}}),_.each({slideDown:Ji("show"),slideUp:Ji("hide"),slideToggle:Ji("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,b){_.fn[g]=function(x,C,T){return this.animate(b,x,C,T)}}),_.timers=[],_.fx.tick=function(){var g,b=0,x=_.timers;for(te=Date.now();b<x.length;b++)g=x[b],!g()&&x[b]===g&&x.splice(b--,1);x.length||_.fx.stop(),te=void 0},_.fx.timer=function(g){_.timers.push(g),_.fx.start()},_.fx.interval=13,_.fx.start=function(){ye||(ye=!0,ii())},_.fx.stop=function(){ye=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(g,b){return g=_.fx&&_.fx.speeds[g]||g,b=b||"fx",this.queue(b,function(x,C){var T=e.setTimeout(x,g);C.stop=function(){e.clearTimeout(T)}})},function(){var g=E.createElement("input"),b=E.createElement("select"),x=b.appendChild(E.createElement("option"));g.type="checkbox",v.checkOn=g.value!=="",v.optSelected=x.selected,g=E.createElement("input"),g.value="t",g.type="radio",v.radioValue=g.value==="t"}();var Z3,mb=_.expr.attrHandle;_.fn.extend({attr:function(g,b){return Zs(this,_.attr,g,b,arguments.length>1)},removeAttr:function(g){return this.each(function(){_.removeAttr(this,g)})}}),_.extend({attr:function(g,b,x){var C,T,M=g.nodeType;if(!(M===3||M===8||M===2)){if(typeof g.getAttribute>"u")return _.prop(g,b,x);if((M!==1||!_.isXMLDoc(g))&&(T=_.attrHooks[b.toLowerCase()]||(_.expr.match.bool.test(b)?Z3:void 0)),x!==void 0){if(x===null){_.removeAttr(g,b);return}return T&&"set"in T&&(C=T.set(g,x,b))!==void 0?C:(g.setAttribute(b,x+""),x)}return T&&"get"in T&&(C=T.get(g,b))!==null?C:(C=_.find.attr(g,b),C??void 0)}},attrHooks:{type:{set:function(g,b){if(!v.radioValue&&b==="radio"&&Q(g,"input")){var x=g.value;return g.setAttribute("type",b),x&&(g.value=x),b}}}},removeAttr:function(g,b){var x,C=0,T=b&&b.match(Js);if(T&&g.nodeType===1)for(;x=T[C++];)g.removeAttribute(x)}}),Z3={set:function(g,b,x){return b===!1?_.removeAttr(g,x):g.setAttribute(x,x),x}},_.each(_.expr.match.bool.source.match(/\w+/g),function(g,b){var x=mb[b]||_.find.attr;mb[b]=function(C,T,M){var $,U,V=T.toLowerCase();return M||(U=mb[V],mb[V]=$,$=x(C,T,M)!=null?V:null,mb[V]=U),$}});var lte=/^(?:input|select|textarea|button)$/i,ute=/^(?:a|area)$/i;_.fn.extend({prop:function(g,b){return Zs(this,_.prop,g,b,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[_.propFix[g]||g]})}}),_.extend({prop:function(g,b,x){var C,T,M=g.nodeType;if(!(M===3||M===8||M===2))return(M!==1||!_.isXMLDoc(g))&&(b=_.propFix[b]||b,T=_.propHooks[b]),x!==void 0?T&&"set"in T&&(C=T.set(g,x,b))!==void 0?C:g[b]=x:T&&"get"in T&&(C=T.get(g,b))!==null?C:g[b]},propHooks:{tabIndex:{get:function(g){var b=_.find.attr(g,"tabindex");return b?parseInt(b,10):lte.test(g.nodeName)||ute.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(_.propHooks.selected={get:function(g){var b=g.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(g){var b=g.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function ad(g){var b=g.match(Js)||[];return b.join(" ")}function ld(g){return g.getAttribute&&g.getAttribute("class")||""}function hM(g){return Array.isArray(g)?g:typeof g=="string"?g.match(Js)||[]:[]}_.fn.extend({addClass:function(g){var b,x,C,T,M,$;return w(g)?this.each(function(U){_(this).addClass(g.call(this,U,ld(this)))}):(b=hM(g),b.length?this.each(function(){if(C=ld(this),x=this.nodeType===1&&" "+ad(C)+" ",x){for(M=0;M<b.length;M++)T=b[M],x.indexOf(" "+T+" ")<0&&(x+=T+" ");$=ad(x),C!==$&&this.setAttribute("class",$)}}):this)},removeClass:function(g){var b,x,C,T,M,$;return w(g)?this.each(function(U){_(this).removeClass(g.call(this,U,ld(this)))}):arguments.length?(b=hM(g),b.length?this.each(function(){if(C=ld(this),x=this.nodeType===1&&" "+ad(C)+" ",x){for(M=0;M<b.length;M++)for(T=b[M];x.indexOf(" "+T+" ")>-1;)x=x.replace(" "+T+" "," ");$=ad(x),C!==$&&this.setAttribute("class",$)}}):this):this.attr("class","")},toggleClass:function(g,b){var x,C,T,M,$=typeof g,U=$==="string"||Array.isArray(g);return w(g)?this.each(function(V){_(this).toggleClass(g.call(this,V,ld(this),b),b)}):typeof b=="boolean"&&U?b?this.addClass(g):this.removeClass(g):(x=hM(g),this.each(function(){if(U)for(M=_(this),T=0;T<x.length;T++)C=x[T],M.hasClass(C)?M.removeClass(C):M.addClass(C);else(g===void 0||$==="boolean")&&(C=ld(this),C&&Ne.set(this,"__className__",C),this.setAttribute&&this.setAttribute("class",C||g===!1?"":Ne.get(this,"__className__")||""))}))},hasClass:function(g){var b,x,C=0;for(b=" "+g+" ";x=this[C++];)if(x.nodeType===1&&(" "+ad(ld(x))+" ").indexOf(b)>-1)return!0;return!1}});var cte=/\r/g;_.fn.extend({val:function(g){var b,x,C,T=this[0];return arguments.length?(C=w(g),this.each(function(M){var $;this.nodeType===1&&(C?$=g.call(this,M,_(this).val()):$=g,$==null?$="":typeof $=="number"?$+="":Array.isArray($)&&($=_.map($,function(U){return U==null?"":U+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!b||!("set"in b)||b.set(this,$,"value")===void 0)&&(this.value=$))})):T?(b=_.valHooks[T.type]||_.valHooks[T.nodeName.toLowerCase()],b&&"get"in b&&(x=b.get(T,"value"))!==void 0?x:(x=T.value,typeof x=="string"?x.replace(cte,""):x??"")):void 0}}),_.extend({valHooks:{option:{get:function(g){var b=_.find.attr(g,"value");return b??ad(_.text(g))}},select:{get:function(g){var b,x,C,T=g.options,M=g.selectedIndex,$=g.type==="select-one",U=$?null:[],V=$?M+1:T.length;for(M<0?C=V:C=$?M:0;C<V;C++)if(x=T[C],(x.selected||C===M)&&!x.disabled&&(!x.parentNode.disabled||!Q(x.parentNode,"optgroup"))){if(b=_(x).val(),$)return b;U.push(b)}return U},set:function(g,b){for(var x,C,T=g.options,M=_.makeArray(b),$=T.length;$--;)C=T[$],(C.selected=_.inArray(_.valHooks.option.get(C),M)>-1)&&(x=!0);return x||(g.selectedIndex=-1),M}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(g,b){if(Array.isArray(b))return g.checked=_.inArray(_(g).val(),b)>-1}},v.checkOn||(_.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value})});var gb=e.location,X3={guid:Date.now()},dM=/\?/;_.parseXML=function(g){var b,x;if(!g||typeof g!="string")return null;try{b=new e.DOMParser().parseFromString(g,"text/xml")}catch{}return x=b&&b.getElementsByTagName("parsererror")[0],(!b||x)&&_.error("Invalid XML: "+(x?_.map(x.childNodes,function(C){return C.textContent}).join(`
`):g)),b};var K3=/^(?:focusinfocus|focusoutblur)$/,Q3=function(g){g.stopPropagation()};_.extend(_.event,{trigger:function(g,b,x,C){var T,M,$,U,V,Y,se,ce,ie=[x||E],be=p.call(g,"type")?g.type:g,rt=p.call(g,"namespace")?g.namespace.split("."):[];if(M=ce=$=x=x||E,!(x.nodeType===3||x.nodeType===8)&&!K3.test(be+_.event.triggered)&&(be.indexOf(".")>-1&&(rt=be.split("."),be=rt.shift(),rt.sort()),V=be.indexOf(":")<0&&"on"+be,g=g[_.expando]?g:new _.Event(be,typeof g=="object"&&g),g.isTrigger=C?2:3,g.namespace=rt.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+rt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=x),b=b==null?[g]:_.makeArray(b,[g]),se=_.event.special[be]||{},!(!C&&se.trigger&&se.trigger.apply(x,b)===!1))){if(!C&&!se.noBubble&&!S(x)){for(U=se.delegateType||be,K3.test(U+be)||(M=M.parentNode);M;M=M.parentNode)ie.push(M),$=M;$===(x.ownerDocument||E)&&ie.push($.defaultView||$.parentWindow||e)}for(T=0;(M=ie[T++])&&!g.isPropagationStopped();)ce=M,g.type=T>1?U:se.bindType||be,Y=(Ne.get(M,"events")||Object.create(null))[g.type]&&Ne.get(M,"handle"),Y&&Y.apply(M,b),Y=V&&M[V],Y&&Y.apply&&jo(M)&&(g.result=Y.apply(M,b),g.result===!1&&g.preventDefault());return g.type=be,!C&&!g.isDefaultPrevented()&&(!se._default||se._default.apply(ie.pop(),b)===!1)&&jo(x)&&V&&w(x[be])&&!S(x)&&($=x[V],$&&(x[V]=null),_.event.triggered=be,g.isPropagationStopped()&&ce.addEventListener(be,Q3),x[be](),g.isPropagationStopped()&&ce.removeEventListener(be,Q3),_.event.triggered=void 0,$&&(x[V]=$)),g.result}},simulate:function(g,b,x){var C=_.extend(new _.Event,x,{type:g,isSimulated:!0});_.event.trigger(C,null,b)}}),_.fn.extend({trigger:function(g,b){return this.each(function(){_.event.trigger(g,b,this)})},triggerHandler:function(g,b){var x=this[0];if(x)return _.event.trigger(g,b,x,!0)}});var hte=/\[\]$/,eN=/\r?\n/g,dte=/^(?:submit|button|image|reset|file)$/i,pte=/^(?:input|select|textarea|keygen)/i;function pM(g,b,x,C){var T;if(Array.isArray(b))_.each(b,function(M,$){x||hte.test(g)?C(g,$):pM(g+"["+(typeof $=="object"&&$!=null?M:"")+"]",$,x,C)});else if(!x&&O(b)==="object")for(T in b)pM(g+"["+T+"]",b[T],x,C);else C(g,b)}_.param=function(g,b){var x,C=[],T=function(M,$){var U=w($)?$():$;C[C.length]=encodeURIComponent(M)+"="+encodeURIComponent(U??"")};if(g==null)return"";if(Array.isArray(g)||g.jquery&&!_.isPlainObject(g))_.each(g,function(){T(this.name,this.value)});else for(x in g)pM(x,g[x],b,T);return C.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=_.prop(this,"elements");return g?_.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!_(this).is(":disabled")&&pte.test(this.nodeName)&&!dte.test(g)&&(this.checked||!ql.test(g))}).map(function(g,b){var x=_(this).val();return x==null?null:Array.isArray(x)?_.map(x,function(C){return{name:b.name,value:C.replace(eN,`\r
`)}}):{name:b.name,value:x.replace(eN,`\r
`)}}).get()}});var fte=/%20/g,mte=/#.*$/,gte=/([?&])_=[^&]*/,yte=/^(.*?):[ \t]*([^\r\n]*)$/mg,bte=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vte=/^(?:GET|HEAD)$/,wte=/^\/\//,tN={},fM={},iN="*/".concat("*"),mM=E.createElement("a");mM.href=gb.href;function rN(g){return function(b,x){typeof b!="string"&&(x=b,b="*");var C,T=0,M=b.toLowerCase().match(Js)||[];if(w(x))for(;C=M[T++];)C[0]==="+"?(C=C.slice(1)||"*",(g[C]=g[C]||[]).unshift(x)):(g[C]=g[C]||[]).push(x)}}function sN(g,b,x,C){var T={},M=g===fM;function $(U){var V;return T[U]=!0,_.each(g[U]||[],function(Y,se){var ce=se(b,x,C);if(typeof ce=="string"&&!M&&!T[ce])return b.dataTypes.unshift(ce),$(ce),!1;if(M)return!(V=ce)}),V}return $(b.dataTypes[0])||!T["*"]&&$("*")}function gM(g,b){var x,C,T=_.ajaxSettings.flatOptions||{};for(x in b)b[x]!==void 0&&((T[x]?g:C||(C={}))[x]=b[x]);return C&&_.extend(!0,g,C),g}function _te(g,b,x){for(var C,T,M,$,U=g.contents,V=g.dataTypes;V[0]==="*";)V.shift(),C===void 0&&(C=g.mimeType||b.getResponseHeader("Content-Type"));if(C){for(T in U)if(U[T]&&U[T].test(C)){V.unshift(T);break}}if(V[0]in x)M=V[0];else{for(T in x){if(!V[0]||g.converters[T+" "+V[0]]){M=T;break}$||($=T)}M=M||$}if(M)return M!==V[0]&&V.unshift(M),x[M]}function xte(g,b,x,C){var T,M,$,U,V,Y={},se=g.dataTypes.slice();if(se[1])for($ in g.converters)Y[$.toLowerCase()]=g.converters[$];for(M=se.shift();M;)if(g.responseFields[M]&&(x[g.responseFields[M]]=b),!V&&C&&g.dataFilter&&(b=g.dataFilter(b,g.dataType)),V=M,M=se.shift(),M){if(M==="*")M=V;else if(V!=="*"&&V!==M){if($=Y[V+" "+M]||Y["* "+M],!$){for(T in Y)if(U=T.split(" "),U[1]===M&&($=Y[V+" "+U[0]]||Y["* "+U[0]],$)){$===!0?$=Y[T]:Y[T]!==!0&&(M=U[0],se.unshift(U[1]));break}}if($!==!0)if($&&g.throws)b=$(b);else try{b=$(b)}catch(ce){return{state:"parsererror",error:$?ce:"No conversion from "+V+" to "+M}}}}return{state:"success",data:b}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gb.href,type:"GET",isLocal:bte.test(gb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":iN,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,b){return b?gM(gM(g,_.ajaxSettings),b):gM(_.ajaxSettings,g)},ajaxPrefilter:rN(tN),ajaxTransport:rN(fM),ajax:function(g,b){typeof g=="object"&&(b=g,g=void 0),b=b||{};var x,C,T,M,$,U,V,Y,se,ce,ie=_.ajaxSetup({},b),be=ie.context||ie,rt=ie.context&&(be.nodeType||be.jquery)?_(be):_.event,Rt=_.Deferred(),pt=_.Callbacks("once memory"),Ur=ie.statusCode||{},dr={},Da={},La="canceled",St={readyState:0,getResponseHeader:function($t){var Oi;if(V){if(!M)for(M={};Oi=yte.exec(T);)M[Oi[1].toLowerCase()+" "]=(M[Oi[1].toLowerCase()+" "]||[]).concat(Oi[2]);Oi=M[$t.toLowerCase()+" "]}return Oi==null?null:Oi.join(", ")},getAllResponseHeaders:function(){return V?T:null},setRequestHeader:function($t,Oi){return V==null&&($t=Da[$t.toLowerCase()]=Da[$t.toLowerCase()]||$t,dr[$t]=Oi),this},overrideMimeType:function($t){return V==null&&(ie.mimeType=$t),this},statusCode:function($t){var Oi;if($t)if(V)St.always($t[St.status]);else for(Oi in $t)Ur[Oi]=[Ur[Oi],$t[Oi]];return this},abort:function($t){var Oi=$t||La;return x&&x.abort(Oi),ud(0,Oi),this}};if(Rt.promise(St),ie.url=((g||ie.url||gb.href)+"").replace(wte,gb.protocol+"//"),ie.type=b.method||b.type||ie.method||ie.type,ie.dataTypes=(ie.dataType||"*").toLowerCase().match(Js)||[""],ie.crossDomain==null){U=E.createElement("a");try{U.href=ie.url,U.href=U.href,ie.crossDomain=mM.protocol+"//"+mM.host!=U.protocol+"//"+U.host}catch{ie.crossDomain=!0}}if(ie.data&&ie.processData&&typeof ie.data!="string"&&(ie.data=_.param(ie.data,ie.traditional)),sN(tN,ie,b,St),V)return St;Y=_.event&&ie.global,Y&&_.active++===0&&_.event.trigger("ajaxStart"),ie.type=ie.type.toUpperCase(),ie.hasContent=!vte.test(ie.type),C=ie.url.replace(mte,""),ie.hasContent?ie.data&&ie.processData&&(ie.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ie.data=ie.data.replace(fte,"+")):(ce=ie.url.slice(C.length),ie.data&&(ie.processData||typeof ie.data=="string")&&(C+=(dM.test(C)?"&":"?")+ie.data,delete ie.data),ie.cache===!1&&(C=C.replace(gte,"$1"),ce=(dM.test(C)?"&":"?")+"_="+X3.guid+++ce),ie.url=C+ce),ie.ifModified&&(_.lastModified[C]&&St.setRequestHeader("If-Modified-Since",_.lastModified[C]),_.etag[C]&&St.setRequestHeader("If-None-Match",_.etag[C])),(ie.data&&ie.hasContent&&ie.contentType!==!1||b.contentType)&&St.setRequestHeader("Content-Type",ie.contentType),St.setRequestHeader("Accept",ie.dataTypes[0]&&ie.accepts[ie.dataTypes[0]]?ie.accepts[ie.dataTypes[0]]+(ie.dataTypes[0]!=="*"?", "+iN+"; q=0.01":""):ie.accepts["*"]);for(se in ie.headers)St.setRequestHeader(se,ie.headers[se]);if(ie.beforeSend&&(ie.beforeSend.call(be,St,ie)===!1||V))return St.abort();if(La="abort",pt.add(ie.complete),St.done(ie.success),St.fail(ie.error),x=sN(fM,ie,b,St),!x)ud(-1,"No Transport");else{if(St.readyState=1,Y&&rt.trigger("ajaxSend",[St,ie]),V)return St;ie.async&&ie.timeout>0&&($=e.setTimeout(function(){St.abort("timeout")},ie.timeout));try{V=!1,x.send(dr,ud)}catch($t){if(V)throw $t;ud(-1,$t)}}function ud($t,Oi,bb,bM){var Na,vb,Fa,hc,dc,so=Oi;V||(V=!0,$&&e.clearTimeout($),x=void 0,T=bM||"",St.readyState=$t>0?4:0,Na=$t>=200&&$t<300||$t===304,bb&&(hc=_te(ie,St,bb)),!Na&&_.inArray("script",ie.dataTypes)>-1&&_.inArray("json",ie.dataTypes)<0&&(ie.converters["text script"]=function(){}),hc=xte(ie,hc,St,Na),Na?(ie.ifModified&&(dc=St.getResponseHeader("Last-Modified"),dc&&(_.lastModified[C]=dc),dc=St.getResponseHeader("etag"),dc&&(_.etag[C]=dc)),$t===204||ie.type==="HEAD"?so="nocontent":$t===304?so="notmodified":(so=hc.state,vb=hc.data,Fa=hc.error,Na=!Fa)):(Fa=so,($t||!so)&&(so="error",$t<0&&($t=0))),St.status=$t,St.statusText=(Oi||so)+"",Na?Rt.resolveWith(be,[vb,so,St]):Rt.rejectWith(be,[St,so,Fa]),St.statusCode(Ur),Ur=void 0,Y&&rt.trigger(Na?"ajaxSuccess":"ajaxError",[St,ie,Na?vb:Fa]),pt.fireWith(be,[St,so]),Y&&(rt.trigger("ajaxComplete",[St,ie]),--_.active||_.event.trigger("ajaxStop")))}return St},getJSON:function(g,b,x){return _.get(g,b,x,"json")},getScript:function(g,b){return _.get(g,void 0,b,"script")}}),_.each(["get","post"],function(g,b){_[b]=function(x,C,T,M){return w(C)&&(M=M||T,T=C,C=void 0),_.ajax(_.extend({url:x,type:b,dataType:M,data:C,success:T},_.isPlainObject(x)&&x))}}),_.ajaxPrefilter(function(g){var b;for(b in g.headers)b.toLowerCase()==="content-type"&&(g.contentType=g.headers[b]||"")}),_._evalUrl=function(g,b,x){return _.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){_.globalEval(C,b,x)}})},_.fn.extend({wrapAll:function(g){var b;return this[0]&&(w(g)&&(g=g.call(this[0])),b=_(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(g){return w(g)?this.each(function(b){_(this).wrapInner(g.call(this,b))}):this.each(function(){var b=_(this),x=b.contents();x.length?x.wrapAll(g):b.append(g)})},wrap:function(g){var b=w(g);return this.each(function(x){_(this).wrapAll(b?g.call(this,x):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(g){return!_.expr.pseudos.visible(g)},_.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Ste={0:200,1223:204},yb=_.ajaxSettings.xhr();v.cors=!!yb&&"withCredentials"in yb,v.ajax=yb=!!yb,_.ajaxTransport(function(g){var b,x;if(v.cors||yb&&!g.crossDomain)return{send:function(C,T){var M,$=g.xhr();if($.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for(M in g.xhrFields)$[M]=g.xhrFields[M];g.mimeType&&$.overrideMimeType&&$.overrideMimeType(g.mimeType),!g.crossDomain&&!C["X-Requested-With"]&&(C["X-Requested-With"]="XMLHttpRequest");for(M in C)$.setRequestHeader(M,C[M]);b=function(U){return function(){b&&(b=x=$.onload=$.onerror=$.onabort=$.ontimeout=$.onreadystatechange=null,U==="abort"?$.abort():U==="error"?typeof $.status!="number"?T(0,"error"):T($.status,$.statusText):T(Ste[$.status]||$.status,$.statusText,($.responseType||"text")!=="text"||typeof $.responseText!="string"?{binary:$.response}:{text:$.responseText},$.getAllResponseHeaders()))}},$.onload=b(),x=$.onerror=$.ontimeout=b("error"),$.onabort!==void 0?$.onabort=x:$.onreadystatechange=function(){$.readyState===4&&e.setTimeout(function(){b&&x()})},b=b("abort");try{$.send(g.hasContent&&g.data||null)}catch(U){if(b)throw U}},abort:function(){b&&b()}}}),_.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return _.globalEval(g),g}}}),_.ajaxPrefilter("script",function(g){g.cache===void 0&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),_.ajaxTransport("script",function(g){if(g.crossDomain||g.scriptAttrs){var b,x;return{send:function(C,T){b=_("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",x=function(M){b.remove(),x=null,M&&T(M.type==="error"?404:200,M.type)}),E.head.appendChild(b[0])},abort:function(){x&&x()}}}});var nN=[],yM=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=nN.pop()||_.expando+"_"+X3.guid++;return this[g]=!0,g}}),_.ajaxPrefilter("json jsonp",function(g,b,x){var C,T,M,$=g.jsonp!==!1&&(yM.test(g.url)?"url":typeof g.data=="string"&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&yM.test(g.data)&&"data");if($||g.dataTypes[0]==="jsonp")return C=g.jsonpCallback=w(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,$?g[$]=g[$].replace(yM,"$1"+C):g.jsonp!==!1&&(g.url+=(dM.test(g.url)?"&":"?")+g.jsonp+"="+C),g.converters["script json"]=function(){return M||_.error(C+" was not called"),M[0]},g.dataTypes[0]="json",T=e[C],e[C]=function(){M=arguments},x.always(function(){T===void 0?_(e).removeProp(C):e[C]=T,g[C]&&(g.jsonpCallback=b.jsonpCallback,nN.push(C)),M&&w(T)&&T(M[0]),M=T=void 0}),"script"}),v.createHTMLDocument=function(){var g=E.implementation.createHTMLDocument("").body;return g.innerHTML="<form></form><form></form>",g.childNodes.length===2}(),_.parseHTML=function(g,b,x){if(typeof g!="string")return[];typeof b=="boolean"&&(x=b,b=!1);var C,T,M;return b||(v.createHTMLDocument?(b=E.implementation.createHTMLDocument(""),C=b.createElement("base"),C.href=E.location.href,b.head.appendChild(C)):b=E),T=En.exec(g),M=!x&&[],T?[b.createElement(T[1])]:(T=Se([g],b,M),M&&M.length&&_(M).remove(),_.merge([],T.childNodes))},_.fn.load=function(g,b,x){var C,T,M,$=this,U=g.indexOf(" ");return U>-1&&(C=ad(g.slice(U)),g=g.slice(0,U)),w(b)?(x=b,b=void 0):b&&typeof b=="object"&&(T="POST"),$.length>0&&_.ajax({url:g,type:T||"GET",dataType:"html",data:b}).done(function(V){M=arguments,$.html(C?_("<div>").append(_.parseHTML(V)).find(C):V)}).always(x&&function(V,Y){$.each(function(){x.apply(this,M||[V.responseText,Y,V])})}),this},_.expr.pseudos.animated=function(g){return _.grep(_.timers,function(b){return g===b.elem}).length},_.offset={setOffset:function(g,b,x){var C,T,M,$,U,V,Y,se=_.css(g,"position"),ce=_(g),ie={};se==="static"&&(g.style.position="relative"),U=ce.offset(),M=_.css(g,"top"),V=_.css(g,"left"),Y=(se==="absolute"||se==="fixed")&&(M+V).indexOf("auto")>-1,Y?(C=ce.position(),$=C.top,T=C.left):($=parseFloat(M)||0,T=parseFloat(V)||0),w(b)&&(b=b.call(g,x,_.extend({},U))),b.top!=null&&(ie.top=b.top-U.top+$),b.left!=null&&(ie.left=b.left-U.left+T),"using"in b?b.using.call(g,ie):ce.css(ie)}},_.fn.extend({offset:function(g){if(arguments.length)return g===void 0?this:this.each(function(T){_.offset.setOffset(this,g,T)});var b,x,C=this[0];if(C)return C.getClientRects().length?(b=C.getBoundingClientRect(),x=C.ownerDocument.defaultView,{top:b.top+x.pageYOffset,left:b.left+x.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var g,b,x,C=this[0],T={top:0,left:0};if(_.css(C,"position")==="fixed")b=C.getBoundingClientRect();else{for(b=this.offset(),x=C.ownerDocument,g=C.offsetParent||x.documentElement;g&&(g===x.body||g===x.documentElement)&&_.css(g,"position")==="static";)g=g.parentNode;g&&g!==C&&g.nodeType===1&&(T=_(g).offset(),T.top+=_.css(g,"borderTopWidth",!0),T.left+=_.css(g,"borderLeftWidth",!0))}return{top:b.top-T.top-_.css(C,"marginTop",!0),left:b.left-T.left-_.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&_.css(g,"position")==="static";)g=g.offsetParent;return g||zo})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,b){var x=b==="pageYOffset";_.fn[g]=function(C){return Zs(this,function(T,M,$){var U;if(S(T)?U=T:T.nodeType===9&&(U=T.defaultView),$===void 0)return U?U[b]:T[M];U?U.scrollTo(x?U.pageXOffset:$,x?$:U.pageYOffset):T[M]=$},g,C,arguments.length)}}),_.each(["top","left"],function(g,b){_.cssHooks[b]=E1(v.pixelPosition,function(x,C){if(C)return C=wi(x,b),rd.test(C)?_(x).position()[b]+"px":C})}),_.each({Height:"height",Width:"width"},function(g,b){_.each({padding:"inner"+g,content:b,"":"outer"+g},function(x,C){_.fn[C]=function(T,M){var $=arguments.length&&(x||typeof T!="boolean"),U=x||(T===!0||M===!0?"margin":"border");return Zs(this,function(V,Y,se){var ce;return S(V)?C.indexOf("outer")===0?V["inner"+g]:V.document.documentElement["client"+g]:V.nodeType===9?(ce=V.documentElement,Math.max(V.body["scroll"+g],ce["scroll"+g],V.body["offset"+g],ce["offset"+g],ce["client"+g])):se===void 0?_.css(V,Y,U):_.style(V,Y,se,U)},b,$?T:void 0,$)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,b){_.fn[b]=function(x){return this.on(b,x)}}),_.fn.extend({bind:function(g,b,x){return this.on(g,null,b,x)},unbind:function(g,b){return this.off(g,null,b)},delegate:function(g,b,x,C){return this.on(b,g,x,C)},undelegate:function(g,b,x){return arguments.length===1?this.off(g,"**"):this.off(b,g||"**",x)},hover:function(g,b){return this.on("mouseenter",g).on("mouseleave",b||g)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,b){_.fn[b]=function(x,C){return arguments.length>0?this.on(b,null,x,C):this.trigger(b)}});var Ete=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(g,b){var x,C,T;if(typeof b=="string"&&(x=g[b],b=g,g=x),!!w(g))return C=n.call(arguments,2),T=function(){return g.apply(b||this,C.concat(n.call(arguments)))},T.guid=g.guid=g.guid||_.guid++,T},_.holdReady=function(g){g?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=Q,_.isFunction=w,_.isWindow=S,_.camelCase=Es,_.type=O,_.now=Date.now,_.isNumeric=function(g){var b=_.type(g);return(b==="number"||b==="string")&&!isNaN(g-parseFloat(g))},_.trim=function(g){return g==null?"":(g+"").replace(Ete,"$1")};var Cte=e.jQuery,Tte=e.$;return _.noConflict=function(g){return e.$===_&&(e.$=Tte),g&&e.jQuery===_&&(e.jQuery=Cte),_},typeof i>"u"&&(e.jQuery=e.$=_),_})}(RS)),RS.exports}_Ve();const xVe=document.getElementById("graficoTorta").getContext("2d"),ite=document.getElementById("cumulata").getContext("2d"),gP=document.getElementById("ietogramma").getContext("2d"),yP=document.getElementById("sel"),ah=document.getElementById("viewDiv"),bP=document.getElementById("datediv");document.getElementById("tablediv");document.getElementById("graphdiv");document.getElementById("statdiv");const SVe=document.getElementById("infodisp"),EVe=document.getElementsByClassName("appearOC"),CVe=document.getElementsByClassName("info"),rte=document.getElementsByClassName("range");document.getElementsByClassName("tuttiDati");const TVe=document.getElementsByClassName("disappearOC"),ste=document.getElementById("matrix").getContext("2d"),MVe=document.getElementById("sel2");Array.from(CVe).forEach(t=>{t.addEventListener("mouseenter",function(){t.nextElementSibling.style.display="flex"}),t.addEventListener("mouseleave",()=>{t.nextElementSibling.style.display="none"})});const kVe=getComputedStyle(ah).transition;let nte=[];window.matchMedia("(min-width:1080px)").matches?(ah.style.width="185%",bP.style.display="hidden",MVe.style.display="none"):(console.log("Siamo sotto sm (base)"),ah.style.transition="none",ah.style.width="100%",ah.style.height="180%",bP.style.display="none",yP.style.display="none",ah.style.boxShadow="0px 5px 8px -4px rgba(0, 0, 0, 0.25)");let Fr=null,vP=null,PC=ur("#datePicker",{inline:!0,mode:"range",locale:uOe.Italian,onChange:function(t,e,i){if(console.log("ciaoo"+e),t.length>=2){Array.from(rte).forEach(n=>{n.innerHTML=e}),SVe.innerHTML=e.substring(0,10)+" ~ "+(parseInt(e.substring(0,4))+1)+e.substring(4,10);let r="DataOra BETWEEN '"+e.substring(0,10)+"' AND '"+e.substring(14,25)+"'",s="Data > '"+e.substring(0,10)+"'";console.log(r),Qee(ite,Fr,r),tte(vP,ste,s),gVe(new Date(e.substring(0,10)),new Date(e.substring(e.length-10,e.length)))?bVe(gP,Fr,r):ete(gP,Fr,r),r==null?wP(Fr,"1=1"):wP(Fr,r)}}});const DC=new XK({portalItem:{id:"07696c5b72e64125ae75f65226471f60",popupEnabled:!1}}),zu=new nX({container:"viewDiv",map:DC});zu.popup.highlightEnabled=!1;zu.container.addEventListener("mousedown",function(t){t.preventDefault()});const Dg=new Ru;Dg.listMode="show";Dg.order=999;DC.layers.add(Dg);zu.when(()=>{const t=zu.map.layers.find(e=>e.title==="Centraline");console.log("Tipo geometria:",t.geometryType),t.labelsVisible=!1,t.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1}).then(e=>{let i=e.features.map(r=>({...r.attributes}));console.log(i)}),t&&(t.popupEnabled=!1,zu.on("pointer-move",async e=>{const r=(await zu.hitTest(e)).results.some(s=>s.graphic?.layer===t);zu.container.style.cursor=r?"pointer":"default"}),zu.on("click",async e=>{ah.style.transition=kVe;const r=(await zu.hitTest(e)).results.find(s=>s.graphic?.layer===t);if(r){const n=r.graphic.attributes[t.objectIdField],o=t.createQuery();o.objectIds=[n],o.outFields=["*"],o.returnGeometry=!0;const{features:a}=await t.queryFeatures(o);if(a.length>0){const l=a[0];console.log("Attributi completi:",l.attributes),Dg.removeAll();const u={type:"simple-marker",style:"circle",color:[255,255,255,1],size:"22px",outline:{color:[216,145,80,1],width:2}};if(Dg.removeAll(),l.geometry){const w=new Si({geometry:l.geometry,symbol:u});Dg.add(w)}const h=document.getElementById("nome");h.innerHTML=l.attributes.Nome_Stazione;const p=document.getElementById("id");p.innerHTML="-";const m=document.getElementById("numero");m.innerHTML=l.attributes.Cart_Elaborati;const y=document.getElementById("posizione");y.innerHTML=l.attributes.Longitudine+" N "+l.attributes.Latitudine+"E ~ qslm: "+l.attributes.Quota+"m",yVe([l.attributes.Attenzionati,l.attributes.Malfunzionanti,l.attributes.Zero_Pioggia,l.attributes.Discordanti,l.attributes.Cart_Elaborati-l.attributes.Attenzionati-l.attributes.Malfunzionanti-l.attributes.Zero_Pioggia-l.attributes.Discordanti],xVe),console.log(l.attributes.ID_Centralina),Fr=DC.tables.find(w=>w.title===l.attributes.ID_Centralina),vP=DC.tables.find(w=>w.title===l.attributes.ID_Centralina+"_Stat"),console.log(Fr),Array.from(EVe).forEach(w=>{w.style.visibility==="hidden"?w.style.visibility="visible":w.style.display==="none"&&(w.style.display="flex")}),Array.from(TVe).forEach(w=>{w.style.visibility==="visible"?w.style.visibility="hidden":w.style.display==="flex"&&(w.style.display="none")}),IVe(),$Ve(),wP(Fr,"1=1"),uVe(Fr),window.matchMedia("(min-width:1080px)").matches?yP.style.display="none":(ah.style.height="100%",bP.style.display="block"),viewDiv.style.width="100%",yP.style.visibility="hidden",RVe(),Qee(ite,Fr,"1=1"),ete(gP,Fr,"1=1"),tte(vP,ste,"1=1");let v="https://www.datascan.it/DatiCentraline/"+l.attributes.ID_Centralina+".txt";document.getElementById("tuttiDati").addEventListener("click",function(){window.open(v,"_blank")})}}}))});function wP(t,e){let i=[];t.queryFeatures({where:e,outFields:["*"],returnGeometry:!1}).then(r=>{i=r.features.map(n=>({...n.attributes})),cVe(i),nte=i;let s=i.map(n=>({data:pVe(n.DataOra),mm:n.Pioggia_mm,qualita:n.Qualita,cartellino_f:n.Cartellino_Fronte,cartellino_r:n.Cartellino_Retro}));console.log(s),new ZDe("#example-table",{data:s,height:"300px",columns:[{title:"Data",field:"data"},{title:"mm Pioggia",field:"mm"},{title:"Qualita",field:"qualita"},{title:"Fronte Cartellino",formatter:function(n,o){let a=n.getRow().getData();const l=n.getElement();return l.style.backgroundColor="",l.style.color="",a.cartellino_r&&a.cartellino_f!=="Non disponibile"?(l.style.color="#1266CD",l.style.textDecoration="underline",`<a href="https://datascan.it/cartellini/${a.cartellino_f}.jpg" target="_blank">${a.cartellino_f}</a>`):a.cartellino_f||""}},{title:"Retro Cartellino",formatter:function(n,o){let a=n.getRow().getData();const l=n.getElement();return l.style.backgroundColor="",l.style.color="",a.cartellino_r&&a.cartellino_r!=="Non disponibile"?(l.style.textDecoration="underline",l.style.color="#1266CD",`<a href="https://datascan.it/cartellini/${a.cartellino_r}.jpg" target="_blank">${a.cartellino_r}</a>`):a.cartellino_r||""}}],layout:"fitColumns"})})}async function RVe(){const t=await q3(Fr),e=await mVe(Fr);PC.set("minDate",t),PC.set("maxDate",e),DVe(Fr)}async function IVe(){const t=await q3(Fr),e=await fVe(Fr);let i=_h(new Date(t))+" ~ "+_h(new Date(e));Array.from(rte).forEach(r=>{r.innerHTML=i})}async function $Ve(){const t=await q3(Fr);let e=new Date(t);e.setFullYear(e.getFullYear()+1);let i=_h(new Date(t))+" ~ "+_h(e);document.getElementById("infodisp").innerHTML=i}const AVe=document.getElementById("download");AVe.addEventListener("click",()=>{console.log("ciao "+Fr),PVe(nte,"datiPioggia.csv")});function OVe(t){const e=Array.isArray(t)?t:JSON.parse(t),i=Object.keys(e[0]).join(",")+`
`,r=e.map(s=>Object.values(s).join(",")).join(`
`);return i+r}function PVe(t,e="data.csv"){console.log("cioaa");const i=OVe(t),r=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),n=URL.createObjectURL(r);s.setAttribute("href",n),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function DVe(t){t==null&&PC.jumpToDate(new Date);let e;t.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!1,num:1}).then(i=>{i.features.length>0?(e=i.features[0].attributes,PC.jumpToDate(new Date(e.DataOra))):console.log("Nessun record trovato.")})}export{eZe as $,it as A,me as B,fe as C,fJ as D,FL as E,f0e as F,m0e as G,Tt as H,Sr as I,Vn as J,CU as K,CIe as L,A_ as M,Dl as N,tfe as O,foe as P,PUe as Q,NBe as R,tg as S,Ct as T,Ah as U,uqe as V,Yne as W,VC as X,CN as Y,gIe as Z,le as _,Er as a,Wy as a$,Ap as a0,q_e as a1,l7e as a2,at as a3,c7e as a4,Mt as a5,UY as a6,Zr as a7,sb as a8,LN as a9,ZB as aA,FG as aB,U7e as aC,uxe as aD,j5 as aE,F5 as aF,N5 as aG,L5 as aH,zG as aI,yg as aJ,VG as aK,jG as aL,z8e as aM,mz as aN,g9e as aO,xHe as aP,x8 as aQ,Yx as aR,Wp as aS,fw as aT,vi as aU,Ta as aV,GP as aW,eo as aX,Qt as aY,qw as aZ,zl as a_,he as aa,Cfe as ab,Rp as ac,qn as ad,eb as ae,A6e as af,hi as ag,WP as ah,zBe as ai,Yp as aj,P9 as ak,QJe as al,cn as am,de as an,Mi as ao,bl as ap,Qie as aq,e4 as ar,qE as as,kWe as at,XV as au,ZV as av,He as aw,lb as ax,r6e as ay,B as az,pA as b,_e as b$,Fi as b0,aBe as b1,nBe as b2,oBe as b3,Ll as b4,ui as b5,Ao as b6,IWe as b7,Us as b8,cw as b9,Bi as bA,GBe as bB,AYe as bC,De as bD,v1e as bE,ze as bF,y2e as bG,qT as bH,Qhe as bI,ka as bJ,Ex as bK,tHe as bL,LUe as bM,Si as bN,Nl as bO,fMe as bP,mMe as bQ,gMe as bR,gr as bS,Gh as bT,whe as bU,Qy as bV,bhe as bW,yme as bX,bq as bY,$me as bZ,zqe as b_,n_ as ba,NHe as bb,Vs as bc,pJ as bd,xp as be,Vae as bf,J as bg,zy as bh,IO as bi,j6e as bj,aZ as bk,fl as bl,mt as bm,UBe as bn,VBe as bo,gs as bp,qC as bq,Ue as br,l2e as bs,kCe as bt,jqe as bu,Xe as bv,Vt as bw,KS as bx,FP as by,T8 as bz,CEe as c,Kge as c$,C0e as c0,efe as c1,Kpe as c2,Jp as c3,RYe as c4,M8e as c5,Qp as c6,Nke as c7,Hs as c8,eRe as c9,ta as cA,_be as cB,Gi as cC,Eo as cD,cf as cE,BC as cF,eBe as cG,UD as cH,Ny as cI,Ve as cJ,YHe as cK,JHe as cL,uye as cM,QHe as cN,aye as cO,Qge as cP,nf as cQ,oJe as cR,lJe as cS,aJe as cT,Mke as cU,Tke as cV,Ar as cW,ke as cX,bke as cY,Xu as cZ,yke as c_,XJ as ca,Yke as cb,n1e as cc,M1e as cd,eA as ce,NK as cf,Bke as cg,FK as ch,LK as ci,tRe as cj,Jke as ck,Dke as cl,Fke as cm,wT as cn,Gwe as co,Qw as cp,She as cq,Ehe as cr,Che as cs,a9 as ct,gme as cu,y1e as cv,Fe as cw,Bce as cx,Re as cy,Yy as cz,NL as d,wn as d$,C8e as d0,T8e as d1,KHe as d2,XHe as d3,ZHe as d4,Fh as d5,Ene as d6,JUe as d7,XUe as d8,ZUe as d9,Sxe as dA,tr as dB,DM as dC,o1 as dD,KI as dE,jHe as dF,K8e as dG,b9e as dH,sc as dI,KW as dJ,Oe as dK,$x as dL,Pqe as dM,yl as dN,Ps as dO,hr as dP,m0 as dQ,Vk as dR,ZVe as dS,K_e as dT,YB as dU,Gr as dV,yhe as dW,rke as dX,NEe as dY,oIe as dZ,aI as d_,KUe as da,QUe as db,eHe as dc,CR as dd,Oh as de,_8e as df,xT as dg,lt as dh,vs as di,ib as dj,VJe as dk,js as dl,Ws as dm,ci as dn,gR as dp,yi as dq,Do as dr,sE as ds,mR as dt,bR as du,cZ as dv,Le as dw,Tw as dx,xi as dy,HE as dz,gT as e,Wwe as e$,h6e as e0,P6e as e1,df as e2,Goe as e3,FJe as e4,tz as e5,NJe as e6,Ufe as e7,Ww as e8,Vl as e9,Jn as eA,k8e as eB,eY as eC,wUe as eD,Z9 as eE,vD as eF,zoe as eG,tT as eH,BJ as eI,ZJ as eJ,qwe as eK,qJ as eL,JJ as eM,hge as eN,to as eO,jUe as eP,rne as eQ,iUe as eR,R9 as eS,Ml as eT,pD as eU,qh as eV,ble as eW,HJ as eX,Jh as eY,h1e as eZ,lme as e_,m9e as ea,DHe as eb,rl as ec,pUe as ed,t8 as ee,QC as ef,eT as eg,_D as eh,xD as ei,qoe as ej,Yoe as ek,s1 as el,bw as em,qD as en,BBe as eo,sG as ep,rC as eq,vL as er,Vge as es,E8e as et,fT as eu,qy as ev,Mge as ew,Qq as ex,eye as ey,R8e as ez,Te as f,rV as f$,YJ as f0,_1e as f1,yUe as f2,uE as f3,UC as f4,HC as f5,_8 as f6,rHe as f7,Uqe as f8,xX as f9,Zp as fA,vn as fB,XRe as fC,ol as fD,El as fE,Aqe as fF,nE as fG,mT as fH,nIe as fI,fE as fJ,ht as fK,Gt as fL,Ae as fM,CHe as fN,Jhe as fO,Qae as fP,LHe as fQ,Wh as fR,zh as fS,Ru as fT,TF as fU,Jr as fV,hw as fW,It as fX,kYe as fY,$Ue as fZ,FUe as f_,YRe as fa,LRe as fb,VRe as fc,WK as fd,NT as fe,mi as ff,$Te as fg,kTe as fh,ir as fi,Ui as fj,vr as fk,$s as fl,Wn as fm,MTe as fn,OCe as fo,sTe as fp,ACe as fq,pf as fr,Al as fs,Kwe as ft,Qwe as fu,x1e as fv,Rfe as fw,RTe as fx,uw as fy,Ju as fz,VUe as g,D6 as g$,LP as g0,NP as g1,Et as g2,YVe as g3,GZe as g4,Ds as g5,OU as g6,Dk as g7,Yn as g8,Gp as g9,pke as gA,st as gB,zq as gC,c8e as gD,BYe as gE,h8e as gF,n1 as gG,Dr as gH,WYe as gI,wS as gJ,u8e as gK,YYe as gL,d8e as gM,xh as gN,uUe as gO,cUe as gP,GUe as gQ,WUe as gR,p$e as gS,Bie as gT,c3 as gU,NZe as gV,Ew as gW,Ri as gX,rJ as gY,hs as gZ,Po as g_,YO as ga,WAe as gb,BZe as gc,Hw as gd,DL as ge,rQ as gf,Fk as gg,OAe as gh,U$e as gi,jAe as gj,zZe as gk,AD as gl,lUe as gm,yAe as gn,K$e as go,VU as gp,n9e as gq,w9e as gr,Ph as gs,$p as gt,b6e as gu,ic as gv,y6e as gw,f3 as gx,XZe as gy,XO as gz,hS as h,q0e as h$,$6 as h0,dHe as h1,vy as h2,vW as h3,CL as h4,Oqe as h5,g1e as h6,gy as h7,C8 as h8,kre as h9,t9e as hA,THe as hB,RY as hC,O9e as hD,Zn as hE,fBe as hF,xhe as hG,u2 as hH,hf as hI,ow as hJ,gTe as hK,Hy as hL,Fy as hM,R6e as hN,jr as hO,ph as hP,roe as hQ,jMe as hR,yYe as hS,hYe as hT,O0 as hU,Uu as hV,FMe as hW,bYe as hX,vYe as hY,awe as hZ,_Ue as h_,Zie as ha,CJe as hb,TIe as hc,i9 as hd,MJe as he,IJe as hf,RJe as hg,SJe as hh,XYe as hi,iJe as hj,sJe as hk,YT as hl,S0e as hm,AO as hn,fUe as ho,W7e as hp,pHe as hq,P7e as hr,Li as hs,dx as ht,YR as hu,eg as hv,iT as hw,zHe as hx,ff as hy,p9e as hz,EEe as i,dl as i$,d1e as i0,lHe as i1,bF as i2,iG as i3,rG as i4,Ii as i5,bUe as i6,tme as i7,yq as i8,r1e as i9,Is as iA,moe as iB,gD as iC,yoe as iD,boe as iE,Xp as iF,XC as iG,tb as iH,zRe as iI,dTe as iJ,PRe as iK,bTe as iL,KRe as iM,lz as iN,Gq as iO,aIe as iP,m2e as iQ,PTe as iR,QRe as iS,UT as iT,wU as iU,ai as iV,QA as iW,VT as iX,xRe as iY,g1 as iZ,TTe as i_,vq as ia,Hoe as ib,khe as ic,K as id,ome as ie,Mhe as ig,_T as ih,yW as ii,JVe as ij,ux as ik,n6e as il,p1e as im,i1e as io,$4 as ip,uae as iq,Qoe as ir,pG as is,nge as it,rge as iu,Xme as iv,lI as iw,Gs as ix,sde as iy,tUe as iz,YC as j,aUe as j$,TW as j0,d6e as j1,kF as j2,ll as j3,soe as j4,Pl as j5,Sa as j6,Iw as j7,QL as j8,OTe as j9,oA as jA,uZ as jB,uA as jC,mWe as jD,ky as jE,pWe as jF,Pp as jG,fWe as jH,Xx as jI,D5 as jJ,gGe as jK,IJ as jL,IL as jM,W$ as jN,My as jO,Q0e as jP,$J as jQ,n4 as jR,O5 as jS,hy as jT,lD as jU,F9 as jV,SHe as jW,Lr as jX,J0e as jY,X0e as jZ,RJ as j_,ATe as ja,ITe as jb,aE as jc,Y8e as jd,q8e as je,Lye as jf,_G as jg,oi as jh,FZe as ji,Q$e as jj,VWe as jk,Gie as jl,jZe as jm,JYe as jn,oYe as jo,t8e as jp,kE as jq,ZBe as jr,gxe as js,WE as jt,GE as ju,cWe as jv,Mo as jw,U5 as jx,BE as jy,z5 as jz,We as k,YMe as k$,L0 as k0,aA as k1,SJ as k2,aL as k3,I6e as k4,Ure as k5,$o as k6,k as k7,l8 as k8,_he as k9,ZZ as kA,aqe as kB,uK as kC,KP as kD,um as kE,mr as kF,YJe as kG,CTe as kH,jm as kI,NRe as kJ,jn as kK,ca as kL,Uy as kM,Ki as kN,ei as kO,Xn as kP,ks as kQ,i2e as kR,o2e as kS,YX as kT,YL as kU,QE as kV,Kt as kW,h2e as kX,HMe as kY,BMe as kZ,qMe as k_,vhe as ka,Zwe as kb,T1e as kc,k1e as kd,nwe as ke,JT as kf,Xke as kg,mW as kh,Boe as ki,Xoe as kj,ME as kk,Xwe as kl,GJ as km,LS as kn,a1e as ko,Or as kp,pp as kq,cse as kr,MCe as ks,N2e as kt,mTe as ku,GMe as kv,iK as kw,t2e as kx,w9 as ky,M9 as kz,X as l,rK as l$,n2e as l0,JMe as l1,ZMe as l2,XMe as l3,KMe as l4,QMe as l5,e2e as l6,Ir as l7,Ere as l8,Ns as l9,T7e as lA,C7e as lB,E7e as lC,R7e as lD,k7e as lE,S7e as lF,x7e as lG,v2e as lH,K6e as lI,CD as lJ,$ae as lK,ele as lL,tle as lM,zP as lN,u6e as lO,VP as lP,c6e as lQ,wne as lR,goe as lS,gL as lT,e9e as lU,X8e as lV,Dre as lW,z6e as lX,$Ye as lY,IYe as lZ,nK as l_,wW as la,cr as lb,zUe as lc,BW as ld,One as le,nAe as lf,G$e as lg,DZe as lh,UWe as li,WZe as lj,a6e as lk,l6e as ll,o6e as lm,Zne as ln,nc as lo,pT as lp,XB as lq,Ga as lr,v6e as ls,Jj as lt,Jpe as lu,wX as lv,Gme as lw,Wme as lx,A5 as ly,M7e as lz,uV as m,vd as m$,xwe as m0,Swe as m1,WJ as m2,Zve as m3,jN as m4,sh as m5,LBe as m6,q6e as m7,gHe as m8,wG as m9,bn as mA,DT as mB,GWe as mC,Rl as mD,of as mE,aF as mF,qie as mG,gSe as mH,ESe as mI,ere as mJ,AUe as mK,v9 as mL,ZC as mM,NUe as mN,LG as mO,Gae as mP,vHe as mQ,dY as mR,AL as mS,_W as mT,kT as mU,CUe as mV,EUe as mW,iJ as mX,eJ as mY,Mve as mZ,Rve as m_,q9e as ma,e8 as mb,kae as mc,Dae as md,e1 as me,cHe as mf,Vj as mg,ewe as mh,DN as mi,_7e as mj,wpe as mk,AHe as ml,YP as mm,W6e as mn,G6e as mo,bfe as mp,Yre as mq,qre as mr,kHe as ms,hRe as mt,QVe as mu,xt as mv,BUe as mw,RWe as mx,PT as my,LL as mz,jEe as n,t4 as n$,QB as n0,e6e as n1,V5 as n2,gWe as n3,Z5 as n4,yWe as n5,e6 as n6,$5 as n7,J6e as n8,cJ as n9,lxe as nA,wYe as nB,Eh as nC,Dxe as nD,Nxe as nE,Fxe as nF,Sl as nG,bye as nH,qZe as nI,PU as nJ,_Ae as nK,HWe as nL,V$e as nM,B$e as nN,q$e as nO,UZe as nP,ume as nQ,eme as nR,ime as nS,av as nT,Fs as nU,Au as nV,nh as nW,br as nX,rbe as nY,Rwe as nZ,OJ as n_,MJ as na,Ty as nb,ml as nc,q7e as nd,xL as ne,B$ as nf,XY as ng,h1 as nh,ZYe as ni,wa as nj,E0 as nk,s2e as nl,f8e as nm,p2e as nn,MYe as no,TYe as np,V0 as nq,Ch as nr,vw as ns,ZRe as nt,UUe as nu,OYe as nv,rTe as nw,eC as nx,vwe as ny,O7e as nz,mqe as o,kRe as o$,b7e as o0,fxe as o1,cRe as o2,Rg as o3,dRe as o4,d1 as o5,Pve as o6,uRe as o7,pRe as o8,ede as o9,OUe as oA,hI as oB,Z8e as oC,J8e as oD,hD as oE,bme as oF,mme as oG,s1e as oH,fme as oI,zye as oJ,XW as oK,X9e as oL,Z9e as oM,Xve as oN,PL as oO,OMe as oP,AMe as oQ,XL as oR,WTe as oS,HUe as oT,jq as oU,Nu as oV,wy as oW,iTe as oX,pTe as oY,fTe as oZ,yTe as o_,mHe as oa,fHe as ob,Wae as oc,a1 as od,l1 as oe,u1 as of,nme as og,rme as oh,sme as oi,KB as oj,I9 as ok,IUe as ol,nG as om,uF as on,V9 as oo,oSe as op,zYe as oq,gf as or,gl as os,ake as ot,xUe as ou,Z0e as ov,mUe as ow,j9 as ox,py as oy,Gy as oz,Zc as p,ma as p$,jRe as p0,sL as p1,zf as p2,Jie as p3,H5 as p4,Jc as p5,nSe as p6,uWe as p7,P5 as p8,mxe as p9,ya as pA,_p as pB,mh as pC,HD as pD,O6e as pE,Yc as pF,i6e as pG,xJ as pH,uEe as pI,xr as pJ,$T as pK,_J as pL,EJ as pM,I0e as pN,yGe as pO,j0e as pP,bGe as pQ,ab as pR,fi as pS,UTe as pT,VTe as pU,kt as pV,Qc as pW,aMe as pX,GX as pY,pa as pZ,cg as p_,Y5 as pa,q5 as pb,xa as pc,K0e as pd,vUe as pe,TD as pf,MD as pg,UE as ph,EG as pi,N7e as pj,D7e as pk,L7e as pl,lYe as pm,uYe as pn,aYe as po,twe as pp,Fb as pq,HBe as pr,Ls as ps,Jqe as pt,zpe as pu,cY as pv,Zqe as pw,P9e as px,D9e as py,L9e as pz,cV as q,Cve as q$,Jfe as q0,r8e as q1,Yr as q2,$r as q3,RHe as q4,_9e as q5,S9e as q6,v9e as q7,Hre as q8,w6e as q9,sHe as qA,Zu as qB,Os as qC,FBe as qD,m6e as qE,e0e as qF,uJ as qG,o4 as qH,yZ as qI,K7e as qJ,Q7e as qK,eWe as qL,tWe as qM,j7e as qN,V7e as qO,z7e as qP,Lxe as qQ,lae as qR,kl as qS,h0e as qT,SL as qU,Hae as qV,yHe as qW,Sw as qX,L8 as qY,Bz as qZ,Eve as q_,Yh as qa,sD as qb,Dve as qc,Kve as qd,Y9e as qe,z2 as qf,s8e as qg,RE as qh,Jve as qi,w1e as qj,Nve as qk,oE as ql,iHe as qm,p8e as qn,U2e as qo,rJe as qp,Oo as qq,Nh as qr,iWe as qs,mG as qt,Yve as qu,Fve as qv,jve as qw,bHe as qx,jfe as qy,DBe as qz,c as r,nU as r$,hHe as r0,oC as r1,TJe as r2,sWe as r3,rWe as r4,g7e as r5,y7e as r6,KV as r7,lJ as r8,p1 as r9,w8e as rA,b8e as rB,x8e as rC,Bs as rD,vI as rE,lge as rF,TWe as rG,SYe as rH,kN as rI,m8e as rJ,TE as rK,gae as rL,mae as rM,oHe as rN,fse as rO,t9 as rP,$Je as rQ,$O as rR,AJe as rS,hJe as rT,kJe as rU,tJe as rV,wJe as rW,pJe as rX,cJe as rY,Rke as rZ,dJe as r_,_R as ra,tBe as rb,nHe as rc,J9e as rd,YUe as re,qUe as rf,aae as rg,_Se as rh,HY as ri,Bre as rj,xSe as rk,ySe as rl,JBe as rm,u3 as rn,wr as ro,zT as rp,LJe as rq,m7e as rr,Zd as rs,nZe as rt,Lqe as ru,xYe as rv,S8e as rw,g8e as rx,v8e as ry,y8e as rz,W as s,h6 as s$,rU as s0,sU as s1,vJe as s2,bJe as s3,xJe as s4,_Je as s5,OO as s6,G7e as s7,kke as s8,Y7e as s9,Fae as sA,m6 as sB,A6 as sC,g6 as sD,y6 as sE,FHe as sF,Yae as sG,x6 as sH,z6 as sI,V6 as sJ,U6 as sK,rle as sL,wHe as sM,zae as sN,MR as sO,H6 as sP,_He as sQ,E9e as sR,W0e as sS,uJe as sT,EJe as sU,EHe as sV,OJe as sW,IHe as sX,yJe as sY,gJe as sZ,X6 as s_,$ke as sa,B7e as sb,nJe as sc,xxe as sd,H7e as se,r4 as sf,v7e as sg,w7e as sh,J7e as si,Z7e as sj,nWe as sk,oWe as sl,I7e as sm,aWe as sn,lWe as so,axe as sp,hxe as sq,F7e as sr,RZ as ss,dy as st,X7e as su,X_e as sv,DUe as sw,iwe as sx,v6 as sy,f6 as sz,qA as t,d9e as t$,Q6 as t0,Z6 as t1,S6 as t2,s6 as t3,r6 as t4,i6 as t5,c6 as t6,_o as t7,fJe as t8,mJe as t9,GHe as tA,_ke as tB,rxe as tC,oG as tD,OHe as tE,Nqe as tF,Ole as tG,pYe as tH,dYe as tI,I5 as tJ,MWe as tK,EWe as tL,CWe as tM,SWe as tN,xWe as tO,Oxe as tP,gZ as tQ,A7e as tR,$7e as tS,Ixe as tT,f7e as tU,_oe as tV,Kie as tW,C1e as tX,hWe as tY,dWe as tZ,h9e as t_,cye as ta,NWe as tb,FWe as tc,cL as td,gh as te,pye as tf,LWe as tg,ww as th,xw as ti,Cy as tj,dye as tk,p6e as tl,NX as tm,wye as tn,_ye as to,fL as tp,dEe as tq,PHe as tr,tGe as ts,Eme as tt,tJ as tu,hW as tv,$8 as tw,Sme as tx,$he as ty,Hve as tz,lqe as u,Xfe as u$,owe as u0,Pme as u1,Ome as u2,cW as u3,zK as u4,dge as u5,hZ as u6,hl as u7,mGe as u8,EN as u9,lGe as uA,oMe as uB,Yf as uC,kMe as uD,y9e as uE,s9e as uF,l9e as uG,o9e as uH,f6e as uI,R9e as uJ,k9e as uK,s6e as uL,i9e as uM,MHe as uN,f9e as uO,kpe as uP,kwe as uQ,FJ as uR,Y6e as uS,S_ as uT,Ij as uU,ua as uV,cYe as uW,Pr as uX,RO as uY,uGe as uZ,a9e as u_,UYe as ua,HYe as ub,GYe as uc,sC as ud,DP as ue,jie as uf,$h as ug,Hie as uh,zWe as ui,g$e as uj,m3 as uk,YZe as ul,IAe as um,UAe as un,JZe as uo,MAe as up,VZe as uq,HAe as ur,ZZe as us,HZe as ut,wme as uu,Ame as uv,DK as uw,XBe as ux,Vqe as uy,uve as uz,d as v,Q8e as v0,eJe as v1,ng as v2,Fye as v3,H8e as v4,KVe as v5,Yie as v6,XVe as v7,r9e as v8,bWe as v9,_Ye as vA,ZJe as vB,LZe as vC,dAe as vD,g3 as vE,Wve as va,gUe as vb,$ve as vc,Nye as vd,V6e as ve,JG as vf,nW as vg,e8e as vh,u9e as vi,QBe as vj,Mz as vk,KBe as vl,$He as vm,Tz as vn,GD as vo,u8 as vp,g6e as vq,c9e as vr,hme as vs,ame as vt,Cz as vu,vme as vv,lBe as vw,cBe as vx,$We as vy,sYe as vz,YK as w,jBe as x,R as y,Zw as z};
